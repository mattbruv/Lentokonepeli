function KE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Qt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Va(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function vM(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var qE={exports:{}},Tf={},ZE={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qc=Symbol.for("react.element"),_M=Symbol.for("react.portal"),xM=Symbol.for("react.fragment"),bM=Symbol.for("react.strict_mode"),wM=Symbol.for("react.profiler"),SM=Symbol.for("react.provider"),EM=Symbol.for("react.context"),TM=Symbol.for("react.forward_ref"),CM=Symbol.for("react.suspense"),PM=Symbol.for("react.memo"),AM=Symbol.for("react.lazy"),bb=Symbol.iterator;function RM(t){return t===null||typeof t!="object"?null:(t=bb&&t[bb]||t["@@iterator"],typeof t=="function"?t:null)}var QE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JE=Object.assign,eT={};function Xa(t,e,n){this.props=t,this.context=e,this.refs=eT,this.updater=n||QE}Xa.prototype.isReactComponent={};Xa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tT(){}tT.prototype=Xa.prototype;function b0(t,e,n){this.props=t,this.context=e,this.refs=eT,this.updater=n||QE}var w0=b0.prototype=new tT;w0.constructor=b0;JE(w0,Xa.prototype);w0.isPureReactComponent=!0;var wb=Array.isArray,nT=Object.prototype.hasOwnProperty,S0={current:null},rT={key:!0,ref:!0,__self:!0,__source:!0};function iT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)nT.call(e,r)&&!rT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Qc,type:t,key:s,ref:o,props:i,_owner:S0.current}}function IM(t,e){return{$$typeof:Qc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function E0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qc}function kM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sb=/\/+/g;function rm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kM(""+t.key):e.toString(36)}function Nh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qc:case _M:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+rm(o,0):r,wb(i)?(n="",t!=null&&(n=t.replace(Sb,"$&/")+"/"),Nh(i,e,n,"",function(c){return c})):i!=null&&(E0(i)&&(i=IM(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Sb,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",wb(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+rm(s,a);o+=Nh(s,e,n,l,i)}else if(l=RM(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+rm(s,a++),o+=Nh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nu(t,e,n){if(t==null)return t;var r=[],i=0;return Nh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function MM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nn={current:null},Lh={transition:null},DM={ReactCurrentDispatcher:nn,ReactCurrentBatchConfig:Lh,ReactCurrentOwner:S0};function sT(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Nu,forEach:function(t,e,n){Nu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nu(t,function(){e++}),e},toArray:function(t){return Nu(t,function(e){return e})||[]},only:function(t){if(!E0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=Xa;ve.Fragment=xM;ve.Profiler=wM;ve.PureComponent=b0;ve.StrictMode=bM;ve.Suspense=CM;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DM;ve.act=sT;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=JE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=S0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)nT.call(e,l)&&!rT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Qc,type:t.type,key:i,ref:s,props:r,_owner:o}};ve.createContext=function(t){return t={$$typeof:EM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:SM,_context:t},t.Consumer=t};ve.createElement=iT;ve.createFactory=function(t){var e=iT.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:TM,render:t}};ve.isValidElement=E0;ve.lazy=function(t){return{$$typeof:AM,_payload:{_status:-1,_result:t},_init:MM}};ve.memo=function(t,e){return{$$typeof:PM,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=Lh.transition;Lh.transition={};try{t()}finally{Lh.transition=e}};ve.unstable_act=sT;ve.useCallback=function(t,e){return nn.current.useCallback(t,e)};ve.useContext=function(t){return nn.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return nn.current.useDeferredValue(t)};ve.useEffect=function(t,e){return nn.current.useEffect(t,e)};ve.useId=function(){return nn.current.useId()};ve.useImperativeHandle=function(t,e,n){return nn.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return nn.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return nn.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return nn.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return nn.current.useReducer(t,e,n)};ve.useRef=function(t){return nn.current.useRef(t)};ve.useState=function(t){return nn.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return nn.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return nn.current.useTransition()};ve.version="18.3.1";ZE.exports=ve;var b=ZE.exports;const vd=Va(b),OM=KE({__proto__:null,default:vd},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NM=b,LM=Symbol.for("react.element"),BM=Symbol.for("react.fragment"),FM=Object.prototype.hasOwnProperty,$M=NM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UM={key:!0,ref:!0,__self:!0,__source:!0};function oT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)FM.call(e,r)&&!UM.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:LM,type:t,key:s,ref:o,props:i,_owner:$M.current}}Tf.Fragment=BM;Tf.jsx=oT;Tf.jsxs=oT;qE.exports=Tf;var x=qE.exports,ty={},aT={exports:{}},Mn={},lT={exports:{}},cT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,M){var D=R.length;R.push(M);e:for(;0<D;){var L=D-1>>>1,j=R[L];if(0<i(j,M))R[L]=M,R[D]=j,D=L;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var M=R[0],D=R.pop();if(D!==M){R[0]=D;e:for(var L=0,j=R.length,ee=j>>>1;L<ee;){var ie=2*(L+1)-1,ce=R[ie],re=ie+1,oe=R[re];if(0>i(ce,D))re<j&&0>i(oe,ce)?(R[L]=oe,R[re]=D,L=re):(R[L]=ce,R[ie]=D,L=ie);else if(re<j&&0>i(oe,D))R[L]=oe,R[re]=D,L=re;else break e}}return M}function i(R,M){var D=R.sortIndex-M.sortIndex;return D!==0?D:R.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,u=null,h=3,f=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(R){for(var M=n(c);M!==null;){if(M.callback===null)r(c);else if(M.startTime<=R)r(c),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(c)}}function w(R){if(m=!1,v(R),!p)if(n(l)!==null)p=!0,N(S);else{var M=n(c);M!==null&&B(w,M.startTime-R)}}function S(R,M){p=!1,m&&(m=!1,g(C),C=-1),f=!0;var D=h;try{for(v(M),u=n(l);u!==null&&(!(u.expirationTime>M)||R&&!O());){var L=u.callback;if(typeof L=="function"){u.callback=null,h=u.priorityLevel;var j=L(u.expirationTime<=M);M=t.unstable_now(),typeof j=="function"?u.callback=j:u===n(l)&&r(l),v(M)}else r(l);u=n(l)}if(u!==null)var ee=!0;else{var ie=n(c);ie!==null&&B(w,ie.startTime-M),ee=!1}return ee}finally{u=null,h=D,f=!1}}var E=!1,T=null,C=-1,A=5,P=-1;function O(){return!(t.unstable_now()-P<A)}function U(){if(T!==null){var R=t.unstable_now();P=R;var M=!0;try{M=T(!0,R)}finally{M?k():(E=!1,T=null)}}else E=!1}var k;if(typeof _=="function")k=function(){_(U)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,F=I.port2;I.port1.onmessage=U,k=function(){F.postMessage(null)}}else k=function(){y(U,0)};function N(R){T=R,E||(E=!0,k())}function B(R,M){C=y(function(){R(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,N(S))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var D=h;h=M;try{return R()}finally{h=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,M){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var D=h;h=R;try{return M()}finally{h=D}},t.unstable_scheduleCallback=function(R,M,D){var L=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?L+D:L):D=L,R){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=D+j,R={id:d++,callback:M,priorityLevel:R,startTime:D,expirationTime:j,sortIndex:-1},D>L?(R.sortIndex=D,e(c,R),n(l)===null&&R===n(c)&&(m?(g(C),C=-1):m=!0,B(w,D-L))):(R.sortIndex=j,e(l,R),p||f||(p=!0,N(S))),R},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(R){var M=h;return function(){var D=h;h=M;try{return R.apply(this,arguments)}finally{h=D}}}})(cT);lT.exports=cT;var HM=lT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jM=b,Rn=HM;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uT=new Set,_c={};function co(t,e){Ca(t,e),Ca(t+"Capture",e)}function Ca(t,e){for(_c[t]=e,t=0;t<e.length;t++)uT.add(e[t])}var Ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ny=Object.prototype.hasOwnProperty,GM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Eb={},Tb={};function zM(t){return ny.call(Tb,t)?!0:ny.call(Eb,t)?!1:GM.test(t)?Tb[t]=!0:(Eb[t]=!0,!1)}function WM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function VM(t,e,n,r){if(e===null||typeof e>"u"||WM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new rn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new rn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new rn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new rn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new rn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new rn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new rn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new rn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new rn(t,5,!1,t.toLowerCase(),null,!1,!1)});var T0=/[\-:]([a-z])/g;function C0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(T0,C0);Ot[e]=new rn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(T0,C0);Ot[e]=new rn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(T0,C0);Ot[e]=new rn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new rn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new rn(t,1,!1,t.toLowerCase(),null,!0,!0)});function P0(t,e,n,r){var i=Ot.hasOwnProperty(e)?Ot[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(VM(e,n,i,r)&&(n=null),r||i===null?zM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fi=jM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lu=Symbol.for("react.element"),Vo=Symbol.for("react.portal"),Xo=Symbol.for("react.fragment"),A0=Symbol.for("react.strict_mode"),ry=Symbol.for("react.profiler"),hT=Symbol.for("react.provider"),dT=Symbol.for("react.context"),R0=Symbol.for("react.forward_ref"),iy=Symbol.for("react.suspense"),sy=Symbol.for("react.suspense_list"),I0=Symbol.for("react.memo"),Yi=Symbol.for("react.lazy"),fT=Symbol.for("react.offscreen"),Cb=Symbol.iterator;function vl(t){return t===null||typeof t!="object"?null:(t=Cb&&t[Cb]||t["@@iterator"],typeof t=="function"?t:null)}var et=Object.assign,im;function jl(t){if(im===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);im=e&&e[1]||""}return`
`+im+t}var sm=!1;function om(t,e){if(!t||sm)return"";sm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{sm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?jl(t):""}function XM(t){switch(t.tag){case 5:return jl(t.type);case 16:return jl("Lazy");case 13:return jl("Suspense");case 19:return jl("SuspenseList");case 0:case 2:case 15:return t=om(t.type,!1),t;case 11:return t=om(t.type.render,!1),t;case 1:return t=om(t.type,!0),t;default:return""}}function oy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xo:return"Fragment";case Vo:return"Portal";case ry:return"Profiler";case A0:return"StrictMode";case iy:return"Suspense";case sy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dT:return(t.displayName||"Context")+".Consumer";case hT:return(t._context.displayName||"Context")+".Provider";case R0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I0:return e=t.displayName||null,e!==null?e:oy(t.type)||"Memo";case Yi:e=t._payload,t=t._init;try{return oy(t(e))}catch{}}return null}function YM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oy(e);case 8:return e===A0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KM(t){var e=pT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bu(t){t._valueTracker||(t._valueTracker=KM(t))}function mT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=pT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _d(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ay(t,e){var n=e.checked;return et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Pb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gT(t,e){e=e.checked,e!=null&&P0(t,"checked",e,!1)}function ly(t,e){gT(t,e);var n=fs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?cy(t,e.type,n):e.hasOwnProperty("defaultValue")&&cy(t,e.type,fs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ab(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function cy(t,e,n){(e!=="number"||_d(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gl=Array.isArray;function aa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function uy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Gl(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fs(n)}}function yT(t,e){var n=fs(e.value),r=fs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ib(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fu,_T=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fu=Fu||document.createElement("div"),Fu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qM=["Webkit","ms","Moz","O"];Object.keys(nc).forEach(function(t){qM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nc[e]=nc[t]})});function xT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nc.hasOwnProperty(t)&&nc[t]?(""+e).trim():e+"px"}function bT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=xT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ZM=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dy(t,e){if(e){if(ZM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function fy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var py=null;function k0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var my=null,la=null,ca=null;function kb(t){if(t=tu(t)){if(typeof my!="function")throw Error(z(280));var e=t.stateNode;e&&(e=If(e),my(t.stateNode,t.type,e))}}function wT(t){la?ca?ca.push(t):ca=[t]:la=t}function ST(){if(la){var t=la,e=ca;if(ca=la=null,kb(t),e)for(t=0;t<e.length;t++)kb(e[t])}}function ET(t,e){return t(e)}function TT(){}var am=!1;function CT(t,e,n){if(am)return t(e,n);am=!0;try{return ET(t,e,n)}finally{am=!1,(la!==null||ca!==null)&&(TT(),ST())}}function bc(t,e){var n=t.stateNode;if(n===null)return null;var r=If(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var gy=!1;if(Ai)try{var _l={};Object.defineProperty(_l,"passive",{get:function(){gy=!0}}),window.addEventListener("test",_l,_l),window.removeEventListener("test",_l,_l)}catch{gy=!1}function QM(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var rc=!1,xd=null,bd=!1,yy=null,JM={onError:function(t){rc=!0,xd=t}};function eD(t,e,n,r,i,s,o,a,l){rc=!1,xd=null,QM.apply(JM,arguments)}function tD(t,e,n,r,i,s,o,a,l){if(eD.apply(this,arguments),rc){if(rc){var c=xd;rc=!1,xd=null}else throw Error(z(198));bd||(bd=!0,yy=c)}}function uo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function PT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Mb(t){if(uo(t)!==t)throw Error(z(188))}function nD(t){var e=t.alternate;if(!e){if(e=uo(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Mb(i),t;if(s===r)return Mb(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function AT(t){return t=nD(t),t!==null?RT(t):null}function RT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=RT(t);if(e!==null)return e;t=t.sibling}return null}var IT=Rn.unstable_scheduleCallback,Db=Rn.unstable_cancelCallback,rD=Rn.unstable_shouldYield,iD=Rn.unstable_requestPaint,ot=Rn.unstable_now,sD=Rn.unstable_getCurrentPriorityLevel,M0=Rn.unstable_ImmediatePriority,kT=Rn.unstable_UserBlockingPriority,wd=Rn.unstable_NormalPriority,oD=Rn.unstable_LowPriority,MT=Rn.unstable_IdlePriority,Cf=null,Qr=null;function aD(t){if(Qr&&typeof Qr.onCommitFiberRoot=="function")try{Qr.onCommitFiberRoot(Cf,t,void 0,(t.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:uD,lD=Math.log,cD=Math.LN2;function uD(t){return t>>>=0,t===0?32:31-(lD(t)/cD|0)|0}var $u=64,Uu=4194304;function zl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=zl(a):(s&=o,s!==0&&(r=zl(s)))}else o=n&~i,o!==0?r=zl(o):s!==0&&(r=zl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Sr(e),i=1<<n,r|=t[n],e&=~i;return r}function hD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Sr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=hD(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function vy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function DT(){var t=$u;return $u<<=1,!($u&4194240)&&($u=64),t}function lm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sr(e),t[e]=n}function fD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Sr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function D0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Sr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Oe=0;function OT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var NT,O0,LT,BT,FT,_y=!1,Hu=[],is=null,ss=null,os=null,wc=new Map,Sc=new Map,qi=[],pD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ob(t,e){switch(t){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":ss=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":wc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sc.delete(e.pointerId)}}function xl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=tu(e),e!==null&&O0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function mD(t,e,n,r,i){switch(e){case"focusin":return is=xl(is,t,e,n,r,i),!0;case"dragenter":return ss=xl(ss,t,e,n,r,i),!0;case"mouseover":return os=xl(os,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return wc.set(s,xl(wc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Sc.set(s,xl(Sc.get(s)||null,t,e,n,r,i)),!0}return!1}function $T(t){var e=Us(t.target);if(e!==null){var n=uo(e);if(n!==null){if(e=n.tag,e===13){if(e=PT(n),e!==null){t.blockedOn=e,FT(t.priority,function(){LT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);py=r,n.target.dispatchEvent(r),py=null}else return e=tu(n),e!==null&&O0(e),t.blockedOn=n,!1;e.shift()}return!0}function Nb(t,e,n){Bh(t)&&n.delete(e)}function gD(){_y=!1,is!==null&&Bh(is)&&(is=null),ss!==null&&Bh(ss)&&(ss=null),os!==null&&Bh(os)&&(os=null),wc.forEach(Nb),Sc.forEach(Nb)}function bl(t,e){t.blockedOn===e&&(t.blockedOn=null,_y||(_y=!0,Rn.unstable_scheduleCallback(Rn.unstable_NormalPriority,gD)))}function Ec(t){function e(i){return bl(i,t)}if(0<Hu.length){bl(Hu[0],t);for(var n=1;n<Hu.length;n++){var r=Hu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(is!==null&&bl(is,t),ss!==null&&bl(ss,t),os!==null&&bl(os,t),wc.forEach(e),Sc.forEach(e),n=0;n<qi.length;n++)r=qi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qi.length&&(n=qi[0],n.blockedOn===null);)$T(n),n.blockedOn===null&&qi.shift()}var ua=Fi.ReactCurrentBatchConfig,Ed=!0;function yD(t,e,n,r){var i=Oe,s=ua.transition;ua.transition=null;try{Oe=1,N0(t,e,n,r)}finally{Oe=i,ua.transition=s}}function vD(t,e,n,r){var i=Oe,s=ua.transition;ua.transition=null;try{Oe=4,N0(t,e,n,r)}finally{Oe=i,ua.transition=s}}function N0(t,e,n,r){if(Ed){var i=xy(t,e,n,r);if(i===null)vm(t,e,r,Td,n),Ob(t,r);else if(mD(i,t,e,n,r))r.stopPropagation();else if(Ob(t,r),e&4&&-1<pD.indexOf(t)){for(;i!==null;){var s=tu(i);if(s!==null&&NT(s),s=xy(t,e,n,r),s===null&&vm(t,e,r,Td,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else vm(t,e,r,null,n)}}var Td=null;function xy(t,e,n,r){if(Td=null,t=k0(r),t=Us(t),t!==null)if(e=uo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=PT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Td=t,null}function UT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sD()){case M0:return 1;case kT:return 4;case wd:case oD:return 16;case MT:return 536870912;default:return 16}default:return 16}}var Ji=null,L0=null,Fh=null;function HT(){if(Fh)return Fh;var t,e=L0,n=e.length,r,i="value"in Ji?Ji.value:Ji.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Fh=i.slice(t,1<r?1-r:void 0)}function $h(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ju(){return!0}function Lb(){return!1}function Dn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ju:Lb,this.isPropagationStopped=Lb,this}return et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ju)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ju)},persist:function(){},isPersistent:ju}),e}var Ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B0=Dn(Ya),eu=et({},Ya,{view:0,detail:0}),_D=Dn(eu),cm,um,wl,Pf=et({},eu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:F0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wl&&(wl&&t.type==="mousemove"?(cm=t.screenX-wl.screenX,um=t.screenY-wl.screenY):um=cm=0,wl=t),cm)},movementY:function(t){return"movementY"in t?t.movementY:um}}),Bb=Dn(Pf),xD=et({},Pf,{dataTransfer:0}),bD=Dn(xD),wD=et({},eu,{relatedTarget:0}),hm=Dn(wD),SD=et({},Ya,{animationName:0,elapsedTime:0,pseudoElement:0}),ED=Dn(SD),TD=et({},Ya,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),CD=Dn(TD),PD=et({},Ya,{data:0}),Fb=Dn(PD),AD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ID={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ID[t])?!!e[t]:!1}function F0(){return kD}var MD=et({},eu,{key:function(t){if(t.key){var e=AD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$h(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?RD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:F0,charCode:function(t){return t.type==="keypress"?$h(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$h(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),DD=Dn(MD),OD=et({},Pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$b=Dn(OD),ND=et({},eu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:F0}),LD=Dn(ND),BD=et({},Ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),FD=Dn(BD),$D=et({},Pf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),UD=Dn($D),HD=[9,13,27,32],$0=Ai&&"CompositionEvent"in window,ic=null;Ai&&"documentMode"in document&&(ic=document.documentMode);var jD=Ai&&"TextEvent"in window&&!ic,jT=Ai&&(!$0||ic&&8<ic&&11>=ic),Ub=" ",Hb=!1;function GT(t,e){switch(t){case"keyup":return HD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yo=!1;function GD(t,e){switch(t){case"compositionend":return zT(e);case"keypress":return e.which!==32?null:(Hb=!0,Ub);case"textInput":return t=e.data,t===Ub&&Hb?null:t;default:return null}}function zD(t,e){if(Yo)return t==="compositionend"||!$0&&GT(t,e)?(t=HT(),Fh=L0=Ji=null,Yo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jT&&e.locale!=="ko"?null:e.data;default:return null}}var WD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WD[t.type]:e==="textarea"}function WT(t,e,n,r){wT(r),e=Cd(e,"onChange"),0<e.length&&(n=new B0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sc=null,Tc=null;function VD(t){nC(t,0)}function Af(t){var e=Zo(t);if(mT(e))return t}function XD(t,e){if(t==="change")return e}var VT=!1;if(Ai){var dm;if(Ai){var fm="oninput"in document;if(!fm){var Gb=document.createElement("div");Gb.setAttribute("oninput","return;"),fm=typeof Gb.oninput=="function"}dm=fm}else dm=!1;VT=dm&&(!document.documentMode||9<document.documentMode)}function zb(){sc&&(sc.detachEvent("onpropertychange",XT),Tc=sc=null)}function XT(t){if(t.propertyName==="value"&&Af(Tc)){var e=[];WT(e,Tc,t,k0(t)),CT(VD,e)}}function YD(t,e,n){t==="focusin"?(zb(),sc=e,Tc=n,sc.attachEvent("onpropertychange",XT)):t==="focusout"&&zb()}function KD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Af(Tc)}function qD(t,e){if(t==="click")return Af(e)}function ZD(t,e){if(t==="input"||t==="change")return Af(e)}function QD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ar=typeof Object.is=="function"?Object.is:QD;function Cc(t,e){if(Ar(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ny.call(e,i)||!Ar(t[i],e[i]))return!1}return!0}function Wb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vb(t,e){var n=Wb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wb(n)}}function YT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?YT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function KT(){for(var t=window,e=_d();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_d(t.document)}return e}function U0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function JD(t){var e=KT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&YT(n.ownerDocument.documentElement,n)){if(r!==null&&U0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Vb(n,s);var o=Vb(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var eO=Ai&&"documentMode"in document&&11>=document.documentMode,Ko=null,by=null,oc=null,wy=!1;function Xb(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wy||Ko==null||Ko!==_d(r)||(r=Ko,"selectionStart"in r&&U0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oc&&Cc(oc,r)||(oc=r,r=Cd(by,"onSelect"),0<r.length&&(e=new B0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ko)))}function Gu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qo={animationend:Gu("Animation","AnimationEnd"),animationiteration:Gu("Animation","AnimationIteration"),animationstart:Gu("Animation","AnimationStart"),transitionend:Gu("Transition","TransitionEnd")},pm={},qT={};Ai&&(qT=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function Rf(t){if(pm[t])return pm[t];if(!qo[t])return t;var e=qo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qT)return pm[t]=e[n];return t}var ZT=Rf("animationend"),QT=Rf("animationiteration"),JT=Rf("animationstart"),eC=Rf("transitionend"),tC=new Map,Yb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bs(t,e){tC.set(t,e),co(e,[t])}for(var mm=0;mm<Yb.length;mm++){var gm=Yb[mm],tO=gm.toLowerCase(),nO=gm[0].toUpperCase()+gm.slice(1);bs(tO,"on"+nO)}bs(ZT,"onAnimationEnd");bs(QT,"onAnimationIteration");bs(JT,"onAnimationStart");bs("dblclick","onDoubleClick");bs("focusin","onFocus");bs("focusout","onBlur");bs(eC,"onTransitionEnd");Ca("onMouseEnter",["mouseout","mouseover"]);Ca("onMouseLeave",["mouseout","mouseover"]);Ca("onPointerEnter",["pointerout","pointerover"]);Ca("onPointerLeave",["pointerout","pointerover"]);co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));co("onBeforeInput",["compositionend","keypress","textInput","paste"]);co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wl));function Kb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tD(r,e,void 0,t),t.currentTarget=null}function nC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Kb(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Kb(i,a,c),s=l}}}if(bd)throw t=yy,bd=!1,yy=null,t}function Ue(t,e){var n=e[Py];n===void 0&&(n=e[Py]=new Set);var r=t+"__bubble";n.has(r)||(rC(e,t,2,!1),n.add(r))}function ym(t,e,n){var r=0;e&&(r|=4),rC(n,t,r,e)}var zu="_reactListening"+Math.random().toString(36).slice(2);function Pc(t){if(!t[zu]){t[zu]=!0,uT.forEach(function(n){n!=="selectionchange"&&(rO.has(n)||ym(n,!1,t),ym(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zu]||(e[zu]=!0,ym("selectionchange",!1,e))}}function rC(t,e,n,r){switch(UT(e)){case 1:var i=yD;break;case 4:i=vD;break;default:i=N0}n=i.bind(null,e,n,t),i=void 0,!gy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function vm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Us(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}CT(function(){var c=s,d=k0(n),u=[];e:{var h=tC.get(t);if(h!==void 0){var f=B0,p=t;switch(t){case"keypress":if($h(n)===0)break e;case"keydown":case"keyup":f=DD;break;case"focusin":p="focus",f=hm;break;case"focusout":p="blur",f=hm;break;case"beforeblur":case"afterblur":f=hm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Bb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=bD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=LD;break;case ZT:case QT:case JT:f=ED;break;case eC:f=FD;break;case"scroll":f=_D;break;case"wheel":f=UD;break;case"copy":case"cut":case"paste":f=CD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=$b}var m=(e&4)!==0,y=!m&&t==="scroll",g=m?h!==null?h+"Capture":null:h;m=[];for(var _=c,v;_!==null;){v=_;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,g!==null&&(w=bc(_,g),w!=null&&m.push(Ac(_,w,v)))),y)break;_=_.return}0<m.length&&(h=new f(h,p,null,n,d),u.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==py&&(p=n.relatedTarget||n.fromElement)&&(Us(p)||p[Ri]))break e;if((f||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?Us(p):null,p!==null&&(y=uo(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(m=Bb,w="onMouseLeave",g="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(m=$b,w="onPointerLeave",g="onPointerEnter",_="pointer"),y=f==null?h:Zo(f),v=p==null?h:Zo(p),h=new m(w,_+"leave",f,n,d),h.target=y,h.relatedTarget=v,w=null,Us(d)===c&&(m=new m(g,_+"enter",p,n,d),m.target=v,m.relatedTarget=y,w=m),y=w,f&&p)t:{for(m=f,g=p,_=0,v=m;v;v=Po(v))_++;for(v=0,w=g;w;w=Po(w))v++;for(;0<_-v;)m=Po(m),_--;for(;0<v-_;)g=Po(g),v--;for(;_--;){if(m===g||g!==null&&m===g.alternate)break t;m=Po(m),g=Po(g)}m=null}else m=null;f!==null&&qb(u,h,f,m,!1),p!==null&&y!==null&&qb(u,y,p,m,!0)}}e:{if(h=c?Zo(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var S=XD;else if(jb(h))if(VT)S=ZD;else{S=KD;var E=YD}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=qD);if(S&&(S=S(t,c))){WT(u,S,n,d);break e}E&&E(t,h,c),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&cy(h,"number",h.value)}switch(E=c?Zo(c):window,t){case"focusin":(jb(E)||E.contentEditable==="true")&&(Ko=E,by=c,oc=null);break;case"focusout":oc=by=Ko=null;break;case"mousedown":wy=!0;break;case"contextmenu":case"mouseup":case"dragend":wy=!1,Xb(u,n,d);break;case"selectionchange":if(eO)break;case"keydown":case"keyup":Xb(u,n,d)}var T;if($0)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Yo?GT(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(jT&&n.locale!=="ko"&&(Yo||C!=="onCompositionStart"?C==="onCompositionEnd"&&Yo&&(T=HT()):(Ji=d,L0="value"in Ji?Ji.value:Ji.textContent,Yo=!0)),E=Cd(c,C),0<E.length&&(C=new Fb(C,t,null,n,d),u.push({event:C,listeners:E}),T?C.data=T:(T=zT(n),T!==null&&(C.data=T)))),(T=jD?GD(t,n):zD(t,n))&&(c=Cd(c,"onBeforeInput"),0<c.length&&(d=new Fb("onBeforeInput","beforeinput",null,n,d),u.push({event:d,listeners:c}),d.data=T))}nC(u,e)})}function Ac(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=bc(t,n),s!=null&&r.unshift(Ac(t,s,i)),s=bc(t,e),s!=null&&r.push(Ac(t,s,i))),t=t.return}return r}function Po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qb(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=bc(n,s),l!=null&&o.unshift(Ac(n,l,a))):i||(l=bc(n,s),l!=null&&o.push(Ac(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var iO=/\r\n?/g,sO=/\u0000|\uFFFD/g;function Zb(t){return(typeof t=="string"?t:""+t).replace(iO,`
`).replace(sO,"")}function Wu(t,e,n){if(e=Zb(e),Zb(t)!==e&&n)throw Error(z(425))}function Pd(){}var Sy=null,Ey=null;function Ty(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Cy=typeof setTimeout=="function"?setTimeout:void 0,oO=typeof clearTimeout=="function"?clearTimeout:void 0,Qb=typeof Promise=="function"?Promise:void 0,aO=typeof queueMicrotask=="function"?queueMicrotask:typeof Qb<"u"?function(t){return Qb.resolve(null).then(t).catch(lO)}:Cy;function lO(t){setTimeout(function(){throw t})}function _m(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ec(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ec(e)}function as(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ka=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Ka,Rc="__reactProps$"+Ka,Ri="__reactContainer$"+Ka,Py="__reactEvents$"+Ka,cO="__reactListeners$"+Ka,uO="__reactHandles$"+Ka;function Us(t){var e=t[Yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ri]||n[Yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jb(t);t!==null;){if(n=t[Yr])return n;t=Jb(t)}return e}t=n,n=t.parentNode}return null}function tu(t){return t=t[Yr]||t[Ri],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function If(t){return t[Rc]||null}var Ay=[],Qo=-1;function ws(t){return{current:t}}function ze(t){0>Qo||(t.current=Ay[Qo],Ay[Qo]=null,Qo--)}function Fe(t,e){Qo++,Ay[Qo]=t.current,t.current=e}var ps={},Yt=ws(ps),fn=ws(!1),Zs=ps;function Pa(t,e){var n=t.type.contextTypes;if(!n)return ps;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function pn(t){return t=t.childContextTypes,t!=null}function Ad(){ze(fn),ze(Yt)}function ew(t,e,n){if(Yt.current!==ps)throw Error(z(168));Fe(Yt,e),Fe(fn,n)}function iC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,YM(t)||"Unknown",i));return et({},n,r)}function Rd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ps,Zs=Yt.current,Fe(Yt,t),Fe(fn,fn.current),!0}function tw(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=iC(t,e,Zs),r.__reactInternalMemoizedMergedChildContext=t,ze(fn),ze(Yt),Fe(Yt,t)):ze(fn),Fe(fn,n)}var _i=null,kf=!1,xm=!1;function sC(t){_i===null?_i=[t]:_i.push(t)}function hO(t){kf=!0,sC(t)}function Ss(){if(!xm&&_i!==null){xm=!0;var t=0,e=Oe;try{var n=_i;for(Oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_i=null,kf=!1}catch(i){throw _i!==null&&(_i=_i.slice(t+1)),IT(M0,Ss),i}finally{Oe=e,xm=!1}}return null}var Jo=[],ea=0,Id=null,kd=0,Un=[],Hn=0,Qs=null,bi=1,wi="";function Ms(t,e){Jo[ea++]=kd,Jo[ea++]=Id,Id=t,kd=e}function oC(t,e,n){Un[Hn++]=bi,Un[Hn++]=wi,Un[Hn++]=Qs,Qs=t;var r=bi;t=wi;var i=32-Sr(r)-1;r&=~(1<<i),n+=1;var s=32-Sr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,bi=1<<32-Sr(e)+i|n<<i|r,wi=s+t}else bi=1<<s|n<<i|r,wi=t}function H0(t){t.return!==null&&(Ms(t,1),oC(t,1,0))}function j0(t){for(;t===Id;)Id=Jo[--ea],Jo[ea]=null,kd=Jo[--ea],Jo[ea]=null;for(;t===Qs;)Qs=Un[--Hn],Un[Hn]=null,wi=Un[--Hn],Un[Hn]=null,bi=Un[--Hn],Un[Hn]=null}var Pn=null,Cn=null,We=!1,gr=null;function aC(t,e){var n=Gn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function nw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pn=t,Cn=as(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pn=t,Cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qs!==null?{id:bi,overflow:wi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pn=t,Cn=null,!0):!1;default:return!1}}function Ry(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Iy(t){if(We){var e=Cn;if(e){var n=e;if(!nw(t,e)){if(Ry(t))throw Error(z(418));e=as(n.nextSibling);var r=Pn;e&&nw(t,e)?aC(r,n):(t.flags=t.flags&-4097|2,We=!1,Pn=t)}}else{if(Ry(t))throw Error(z(418));t.flags=t.flags&-4097|2,We=!1,Pn=t}}}function rw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pn=t}function Vu(t){if(t!==Pn)return!1;if(!We)return rw(t),We=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ty(t.type,t.memoizedProps)),e&&(e=Cn)){if(Ry(t))throw lC(),Error(z(418));for(;e;)aC(t,e),e=as(e.nextSibling)}if(rw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cn=as(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cn=null}}else Cn=Pn?as(t.stateNode.nextSibling):null;return!0}function lC(){for(var t=Cn;t;)t=as(t.nextSibling)}function Aa(){Cn=Pn=null,We=!1}function G0(t){gr===null?gr=[t]:gr.push(t)}var dO=Fi.ReactCurrentBatchConfig;function Sl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Xu(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function iw(t){var e=t._init;return e(t._payload)}function cC(t){function e(g,_){if(t){var v=g.deletions;v===null?(g.deletions=[_],g.flags|=16):v.push(_)}}function n(g,_){if(!t)return null;for(;_!==null;)e(g,_),_=_.sibling;return null}function r(g,_){for(g=new Map;_!==null;)_.key!==null?g.set(_.key,_):g.set(_.index,_),_=_.sibling;return g}function i(g,_){return g=hs(g,_),g.index=0,g.sibling=null,g}function s(g,_,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<_?(g.flags|=2,_):v):(g.flags|=2,_)):(g.flags|=1048576,_)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,_,v,w){return _===null||_.tag!==6?(_=Pm(v,g.mode,w),_.return=g,_):(_=i(_,v),_.return=g,_)}function l(g,_,v,w){var S=v.type;return S===Xo?d(g,_,v.props.children,w,v.key):_!==null&&(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Yi&&iw(S)===_.type)?(w=i(_,v.props),w.ref=Sl(g,_,v),w.return=g,w):(w=Vh(v.type,v.key,v.props,null,g.mode,w),w.ref=Sl(g,_,v),w.return=g,w)}function c(g,_,v,w){return _===null||_.tag!==4||_.stateNode.containerInfo!==v.containerInfo||_.stateNode.implementation!==v.implementation?(_=Am(v,g.mode,w),_.return=g,_):(_=i(_,v.children||[]),_.return=g,_)}function d(g,_,v,w,S){return _===null||_.tag!==7?(_=Vs(v,g.mode,w,S),_.return=g,_):(_=i(_,v),_.return=g,_)}function u(g,_,v){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Pm(""+_,g.mode,v),_.return=g,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Lu:return v=Vh(_.type,_.key,_.props,null,g.mode,v),v.ref=Sl(g,null,_),v.return=g,v;case Vo:return _=Am(_,g.mode,v),_.return=g,_;case Yi:var w=_._init;return u(g,w(_._payload),v)}if(Gl(_)||vl(_))return _=Vs(_,g.mode,v,null),_.return=g,_;Xu(g,_)}return null}function h(g,_,v,w){var S=_!==null?_.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:a(g,_,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Lu:return v.key===S?l(g,_,v,w):null;case Vo:return v.key===S?c(g,_,v,w):null;case Yi:return S=v._init,h(g,_,S(v._payload),w)}if(Gl(v)||vl(v))return S!==null?null:d(g,_,v,w,null);Xu(g,v)}return null}function f(g,_,v,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(v)||null,a(_,g,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Lu:return g=g.get(w.key===null?v:w.key)||null,l(_,g,w,S);case Vo:return g=g.get(w.key===null?v:w.key)||null,c(_,g,w,S);case Yi:var E=w._init;return f(g,_,v,E(w._payload),S)}if(Gl(w)||vl(w))return g=g.get(v)||null,d(_,g,w,S,null);Xu(_,w)}return null}function p(g,_,v,w){for(var S=null,E=null,T=_,C=_=0,A=null;T!==null&&C<v.length;C++){T.index>C?(A=T,T=null):A=T.sibling;var P=h(g,T,v[C],w);if(P===null){T===null&&(T=A);break}t&&T&&P.alternate===null&&e(g,T),_=s(P,_,C),E===null?S=P:E.sibling=P,E=P,T=A}if(C===v.length)return n(g,T),We&&Ms(g,C),S;if(T===null){for(;C<v.length;C++)T=u(g,v[C],w),T!==null&&(_=s(T,_,C),E===null?S=T:E.sibling=T,E=T);return We&&Ms(g,C),S}for(T=r(g,T);C<v.length;C++)A=f(T,g,C,v[C],w),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?C:A.key),_=s(A,_,C),E===null?S=A:E.sibling=A,E=A);return t&&T.forEach(function(O){return e(g,O)}),We&&Ms(g,C),S}function m(g,_,v,w){var S=vl(v);if(typeof S!="function")throw Error(z(150));if(v=S.call(v),v==null)throw Error(z(151));for(var E=S=null,T=_,C=_=0,A=null,P=v.next();T!==null&&!P.done;C++,P=v.next()){T.index>C?(A=T,T=null):A=T.sibling;var O=h(g,T,P.value,w);if(O===null){T===null&&(T=A);break}t&&T&&O.alternate===null&&e(g,T),_=s(O,_,C),E===null?S=O:E.sibling=O,E=O,T=A}if(P.done)return n(g,T),We&&Ms(g,C),S;if(T===null){for(;!P.done;C++,P=v.next())P=u(g,P.value,w),P!==null&&(_=s(P,_,C),E===null?S=P:E.sibling=P,E=P);return We&&Ms(g,C),S}for(T=r(g,T);!P.done;C++,P=v.next())P=f(T,g,C,P.value,w),P!==null&&(t&&P.alternate!==null&&T.delete(P.key===null?C:P.key),_=s(P,_,C),E===null?S=P:E.sibling=P,E=P);return t&&T.forEach(function(U){return e(g,U)}),We&&Ms(g,C),S}function y(g,_,v,w){if(typeof v=="object"&&v!==null&&v.type===Xo&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Lu:e:{for(var S=v.key,E=_;E!==null;){if(E.key===S){if(S=v.type,S===Xo){if(E.tag===7){n(g,E.sibling),_=i(E,v.props.children),_.return=g,g=_;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Yi&&iw(S)===E.type){n(g,E.sibling),_=i(E,v.props),_.ref=Sl(g,E,v),_.return=g,g=_;break e}n(g,E);break}else e(g,E);E=E.sibling}v.type===Xo?(_=Vs(v.props.children,g.mode,w,v.key),_.return=g,g=_):(w=Vh(v.type,v.key,v.props,null,g.mode,w),w.ref=Sl(g,_,v),w.return=g,g=w)}return o(g);case Vo:e:{for(E=v.key;_!==null;){if(_.key===E)if(_.tag===4&&_.stateNode.containerInfo===v.containerInfo&&_.stateNode.implementation===v.implementation){n(g,_.sibling),_=i(_,v.children||[]),_.return=g,g=_;break e}else{n(g,_);break}else e(g,_);_=_.sibling}_=Am(v,g.mode,w),_.return=g,g=_}return o(g);case Yi:return E=v._init,y(g,_,E(v._payload),w)}if(Gl(v))return p(g,_,v,w);if(vl(v))return m(g,_,v,w);Xu(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,_!==null&&_.tag===6?(n(g,_.sibling),_=i(_,v),_.return=g,g=_):(n(g,_),_=Pm(v,g.mode,w),_.return=g,g=_),o(g)):n(g,_)}return y}var Ra=cC(!0),uC=cC(!1),Md=ws(null),Dd=null,ta=null,z0=null;function W0(){z0=ta=Dd=null}function V0(t){var e=Md.current;ze(Md),t._currentValue=e}function ky(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ha(t,e){Dd=t,z0=ta=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dn=!0),t.firstContext=null)}function Yn(t){var e=t._currentValue;if(z0!==t)if(t={context:t,memoizedValue:e,next:null},ta===null){if(Dd===null)throw Error(z(308));ta=t,Dd.dependencies={lanes:0,firstContext:t}}else ta=ta.next=t;return e}var Hs=null;function X0(t){Hs===null?Hs=[t]:Hs.push(t)}function hC(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,X0(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ii(t,r)}function Ii(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ki=!1;function Y0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ei(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ls(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ae&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ii(t,n)}return i=r.interleaved,i===null?(e.next=e,X0(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ii(t,n)}function Uh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,D0(t,n)}}function sw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Od(t,e,n,r){var i=t.updateQueue;Ki=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var u=i.baseState;o=0,d=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){u=p.call(f,u,h);break e}u=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,u,h):p,h==null)break e;u=et({},u,h);break e;case 2:Ki=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=f,l=u):d=d.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);eo|=o,t.lanes=o,t.memoizedState=u}}function ow(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var nu={},Jr=ws(nu),Ic=ws(nu),kc=ws(nu);function js(t){if(t===nu)throw Error(z(174));return t}function K0(t,e){switch(Fe(kc,e),Fe(Ic,t),Fe(Jr,nu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hy(e,t)}ze(Jr),Fe(Jr,e)}function Ia(){ze(Jr),ze(Ic),ze(kc)}function fC(t){js(kc.current);var e=js(Jr.current),n=hy(e,t.type);e!==n&&(Fe(Ic,t),Fe(Jr,n))}function q0(t){Ic.current===t&&(ze(Jr),ze(Ic))}var Ke=ws(0);function Nd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bm=[];function Z0(){for(var t=0;t<bm.length;t++)bm[t]._workInProgressVersionPrimary=null;bm.length=0}var Hh=Fi.ReactCurrentDispatcher,wm=Fi.ReactCurrentBatchConfig,Js=0,Ze=null,mt=null,bt=null,Ld=!1,ac=!1,Mc=0,fO=0;function Ft(){throw Error(z(321))}function Q0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ar(t[n],e[n]))return!1;return!0}function J0(t,e,n,r,i,s){if(Js=s,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hh.current=t===null||t.memoizedState===null?yO:vO,t=n(r,i),ac){s=0;do{if(ac=!1,Mc=0,25<=s)throw Error(z(301));s+=1,bt=mt=null,e.updateQueue=null,Hh.current=_O,t=n(r,i)}while(ac)}if(Hh.current=Bd,e=mt!==null&&mt.next!==null,Js=0,bt=mt=Ze=null,Ld=!1,e)throw Error(z(300));return t}function e_(){var t=Mc!==0;return Mc=0,t}function Ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?Ze.memoizedState=bt=t:bt=bt.next=t,bt}function Kn(){if(mt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var e=bt===null?Ze.memoizedState:bt.next;if(e!==null)bt=e,mt=t;else{if(t===null)throw Error(z(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},bt===null?Ze.memoizedState=bt=t:bt=bt.next=t}return bt}function Dc(t,e){return typeof e=="function"?e(t):e}function Sm(t){var e=Kn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=mt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Js&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=u,o=r):l=l.next=u,Ze.lanes|=d,eo|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Ar(r,e.memoizedState)||(dn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ze.lanes|=s,eo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Em(t){var e=Kn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ar(s,e.memoizedState)||(dn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function pC(){}function mC(t,e){var n=Ze,r=Kn(),i=e(),s=!Ar(r.memoizedState,i);if(s&&(r.memoizedState=i,dn=!0),r=r.queue,t_(vC.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||bt!==null&&bt.memoizedState.tag&1){if(n.flags|=2048,Oc(9,yC.bind(null,n,r,i,e),void 0,null),Et===null)throw Error(z(349));Js&30||gC(n,e,i)}return i}function gC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function yC(t,e,n,r){e.value=n,e.getSnapshot=r,_C(e)&&xC(t)}function vC(t,e,n){return n(function(){_C(e)&&xC(t)})}function _C(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ar(t,n)}catch{return!0}}function xC(t){var e=Ii(t,1);e!==null&&Er(e,t,1,-1)}function aw(t){var e=Ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dc,lastRenderedState:t},e.queue=t,t=t.dispatch=gO.bind(null,Ze,t),[e.memoizedState,t]}function Oc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bC(){return Kn().memoizedState}function jh(t,e,n,r){var i=Ur();Ze.flags|=t,i.memoizedState=Oc(1|e,n,void 0,r===void 0?null:r)}function Mf(t,e,n,r){var i=Kn();r=r===void 0?null:r;var s=void 0;if(mt!==null){var o=mt.memoizedState;if(s=o.destroy,r!==null&&Q0(r,o.deps)){i.memoizedState=Oc(e,n,s,r);return}}Ze.flags|=t,i.memoizedState=Oc(1|e,n,s,r)}function lw(t,e){return jh(8390656,8,t,e)}function t_(t,e){return Mf(2048,8,t,e)}function wC(t,e){return Mf(4,2,t,e)}function SC(t,e){return Mf(4,4,t,e)}function EC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function TC(t,e,n){return n=n!=null?n.concat([t]):null,Mf(4,4,EC.bind(null,e,t),n)}function n_(){}function CC(t,e){var n=Kn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Q0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function PC(t,e){var n=Kn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Q0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function AC(t,e,n){return Js&21?(Ar(n,e)||(n=DT(),Ze.lanes|=n,eo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dn=!0),t.memoizedState=n)}function pO(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var r=wm.transition;wm.transition={};try{t(!1),e()}finally{Oe=n,wm.transition=r}}function RC(){return Kn().memoizedState}function mO(t,e,n){var r=us(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},IC(t))kC(e,n);else if(n=hC(t,e,n,r),n!==null){var i=Jt();Er(n,t,r,i),MC(n,e,r)}}function gO(t,e,n){var r=us(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(IC(t))kC(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ar(a,o)){var l=e.interleaved;l===null?(i.next=i,X0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=hC(t,e,i,r),n!==null&&(i=Jt(),Er(n,t,r,i),MC(n,e,r))}}function IC(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function kC(t,e){ac=Ld=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function MC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,D0(t,n)}}var Bd={readContext:Yn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},yO={readContext:Yn,useCallback:function(t,e){return Ur().memoizedState=[t,e===void 0?null:e],t},useContext:Yn,useEffect:lw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jh(4194308,4,EC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jh(4194308,4,t,e)},useInsertionEffect:function(t,e){return jh(4,2,t,e)},useMemo:function(t,e){var n=Ur();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ur();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mO.bind(null,Ze,t),[r.memoizedState,t]},useRef:function(t){var e=Ur();return t={current:t},e.memoizedState=t},useState:aw,useDebugValue:n_,useDeferredValue:function(t){return Ur().memoizedState=t},useTransition:function(){var t=aw(!1),e=t[0];return t=pO.bind(null,t[1]),Ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ze,i=Ur();if(We){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Et===null)throw Error(z(349));Js&30||gC(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,lw(vC.bind(null,r,s,t),[t]),r.flags|=2048,Oc(9,yC.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ur(),e=Et.identifierPrefix;if(We){var n=wi,r=bi;n=(r&~(1<<32-Sr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vO={readContext:Yn,useCallback:CC,useContext:Yn,useEffect:t_,useImperativeHandle:TC,useInsertionEffect:wC,useLayoutEffect:SC,useMemo:PC,useReducer:Sm,useRef:bC,useState:function(){return Sm(Dc)},useDebugValue:n_,useDeferredValue:function(t){var e=Kn();return AC(e,mt.memoizedState,t)},useTransition:function(){var t=Sm(Dc)[0],e=Kn().memoizedState;return[t,e]},useMutableSource:pC,useSyncExternalStore:mC,useId:RC,unstable_isNewReconciler:!1},_O={readContext:Yn,useCallback:CC,useContext:Yn,useEffect:t_,useImperativeHandle:TC,useInsertionEffect:wC,useLayoutEffect:SC,useMemo:PC,useReducer:Em,useRef:bC,useState:function(){return Em(Dc)},useDebugValue:n_,useDeferredValue:function(t){var e=Kn();return mt===null?e.memoizedState=t:AC(e,mt.memoizedState,t)},useTransition:function(){var t=Em(Dc)[0],e=Kn().memoizedState;return[t,e]},useMutableSource:pC,useSyncExternalStore:mC,useId:RC,unstable_isNewReconciler:!1};function dr(t,e){if(t&&t.defaultProps){e=et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function My(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Df={isMounted:function(t){return(t=t._reactInternals)?uo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jt(),i=us(t),s=Ei(r,i);s.payload=e,n!=null&&(s.callback=n),e=ls(t,s,i),e!==null&&(Er(e,t,i,r),Uh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jt(),i=us(t),s=Ei(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ls(t,s,i),e!==null&&(Er(e,t,i,r),Uh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),r=us(t),i=Ei(n,r);i.tag=2,e!=null&&(i.callback=e),e=ls(t,i,r),e!==null&&(Er(e,t,r,n),Uh(e,t,r))}};function cw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Cc(n,r)||!Cc(i,s):!0}function DC(t,e,n){var r=!1,i=ps,s=e.contextType;return typeof s=="object"&&s!==null?s=Yn(s):(i=pn(e)?Zs:Yt.current,r=e.contextTypes,s=(r=r!=null)?Pa(t,i):ps),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Df,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function uw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Df.enqueueReplaceState(e,e.state,null)}function Dy(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Y0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Yn(s):(s=pn(e)?Zs:Yt.current,i.context=Pa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(My(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Df.enqueueReplaceState(i,i.state,null),Od(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ka(t,e){try{var n="",r=e;do n+=XM(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Tm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Oy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xO=typeof WeakMap=="function"?WeakMap:Map;function OC(t,e,n){n=Ei(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$d||($d=!0,zy=r),Oy(t,e)},n}function NC(t,e,n){n=Ei(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Oy(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Oy(t,e),typeof r!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function hw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new xO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=OO.bind(null,t,e,n),e.then(t,t))}function dw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ei(-1,1),e.tag=2,ls(n,e,1))),n.lanes|=1),t)}var bO=Fi.ReactCurrentOwner,dn=!1;function Zt(t,e,n,r){e.child=t===null?uC(e,null,n,r):Ra(e,t.child,n,r)}function pw(t,e,n,r,i){n=n.render;var s=e.ref;return ha(e,i),r=J0(t,e,n,r,s,i),n=e_(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ki(t,e,i)):(We&&n&&H0(e),e.flags|=1,Zt(t,e,r,i),e.child)}function mw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!u_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,LC(t,e,s,r,i)):(t=Vh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Cc,n(o,r)&&t.ref===e.ref)return ki(t,e,i)}return e.flags|=1,t=hs(s,r),t.ref=e.ref,t.return=e,e.child=t}function LC(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Cc(s,r)&&t.ref===e.ref)if(dn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(dn=!0);else return e.lanes=t.lanes,ki(t,e,i)}return Ny(t,e,n,r,i)}function BC(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(ra,Tn),Tn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fe(ra,Tn),Tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Fe(ra,Tn),Tn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Fe(ra,Tn),Tn|=r;return Zt(t,e,i,n),e.child}function FC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ny(t,e,n,r,i){var s=pn(n)?Zs:Yt.current;return s=Pa(e,s),ha(e,i),n=J0(t,e,n,r,s,i),r=e_(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ki(t,e,i)):(We&&r&&H0(e),e.flags|=1,Zt(t,e,n,i),e.child)}function gw(t,e,n,r,i){if(pn(n)){var s=!0;Rd(e)}else s=!1;if(ha(e,i),e.stateNode===null)Gh(t,e),DC(e,n,r),Dy(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Yn(c):(c=pn(n)?Zs:Yt.current,c=Pa(e,c));var d=n.getDerivedStateFromProps,u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&uw(e,o,r,c),Ki=!1;var h=e.memoizedState;o.state=h,Od(e,r,o,i),l=e.memoizedState,a!==r||h!==l||fn.current||Ki?(typeof d=="function"&&(My(e,n,d,r),l=e.memoizedState),(a=Ki||cw(e,n,a,r,h,l,c))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,dC(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:dr(e.type,a),o.props=c,u=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Yn(l):(l=pn(n)?Zs:Yt.current,l=Pa(e,l));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||h!==l)&&uw(e,o,r,l),Ki=!1,h=e.memoizedState,o.state=h,Od(e,r,o,i);var p=e.memoizedState;a!==u||h!==p||fn.current||Ki?(typeof f=="function"&&(My(e,n,f,r),p=e.memoizedState),(c=Ki||cw(e,n,c,r,h,p,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Ly(t,e,n,r,s,i)}function Ly(t,e,n,r,i,s){FC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&tw(e,n,!1),ki(t,e,s);r=e.stateNode,bO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ra(e,t.child,null,s),e.child=Ra(e,null,a,s)):Zt(t,e,a,s),e.memoizedState=r.state,i&&tw(e,n,!0),e.child}function $C(t){var e=t.stateNode;e.pendingContext?ew(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ew(t,e.context,!1),K0(t,e.containerInfo)}function yw(t,e,n,r,i){return Aa(),G0(i),e.flags|=256,Zt(t,e,n,r),e.child}var By={dehydrated:null,treeContext:null,retryLane:0};function Fy(t){return{baseLanes:t,cachePool:null,transitions:null}}function UC(t,e,n){var r=e.pendingProps,i=Ke.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Fe(Ke,i&1),t===null)return Iy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Lf(o,r,0,null),t=Vs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Fy(n),e.memoizedState=By,t):r_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return wO(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=hs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=hs(a,s):(s=Vs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Fy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=By,r}return s=t.child,t=s.sibling,r=hs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function r_(t,e){return e=Lf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yu(t,e,n,r){return r!==null&&G0(r),Ra(e,t.child,null,n),t=r_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wO(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Tm(Error(z(422))),Yu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Lf({mode:"visible",children:r.children},i,0,null),s=Vs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ra(e,t.child,null,o),e.child.memoizedState=Fy(o),e.memoizedState=By,s);if(!(e.mode&1))return Yu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(z(419)),r=Tm(s,r,void 0),Yu(t,e,o,r)}if(a=(o&t.childLanes)!==0,dn||a){if(r=Et,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ii(t,i),Er(r,t,i,-1))}return c_(),r=Tm(Error(z(421))),Yu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=NO.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Cn=as(i.nextSibling),Pn=e,We=!0,gr=null,t!==null&&(Un[Hn++]=bi,Un[Hn++]=wi,Un[Hn++]=Qs,bi=t.id,wi=t.overflow,Qs=e),e=r_(e,r.children),e.flags|=4096,e)}function vw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ky(t.return,e,n)}function Cm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function HC(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Zt(t,e,r.children,n),r=Ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vw(t,n,e);else if(t.tag===19)vw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Fe(Ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Nd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Cm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Nd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Cm(e,!0,n,null,s);break;case"together":Cm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ki(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),eo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=hs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function SO(t,e,n){switch(e.tag){case 3:$C(e),Aa();break;case 5:fC(e);break;case 1:pn(e.type)&&Rd(e);break;case 4:K0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Fe(Md,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Fe(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?UC(t,e,n):(Fe(Ke,Ke.current&1),t=ki(t,e,n),t!==null?t.sibling:null);Fe(Ke,Ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return HC(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Fe(Ke,Ke.current),r)break;return null;case 22:case 23:return e.lanes=0,BC(t,e,n)}return ki(t,e,n)}var jC,$y,GC,zC;jC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$y=function(){};GC=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,js(Jr.current);var s=null;switch(n){case"input":i=ay(t,i),r=ay(t,r),s=[];break;case"select":i=et({},i,{value:void 0}),r=et({},r,{value:void 0}),s=[];break;case"textarea":i=uy(t,i),r=uy(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pd)}dy(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(_c.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i?.[c],r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(_c.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ue("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};zC=function(t,e,n,r){n!==r&&(e.flags|=4)};function El(t,e){if(!We)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function $t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function EO(t,e,n){var r=e.pendingProps;switch(j0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(e),null;case 1:return pn(e.type)&&Ad(),$t(e),null;case 3:return r=e.stateNode,Ia(),ze(fn),ze(Yt),Z0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Vu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gr!==null&&(Xy(gr),gr=null))),$y(t,e),$t(e),null;case 5:q0(e);var i=js(kc.current);if(n=e.type,t!==null&&e.stateNode!=null)GC(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return $t(e),null}if(t=js(Jr.current),Vu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Yr]=e,r[Rc]=s,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(i=0;i<Wl.length;i++)Ue(Wl[i],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Pb(r,s),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ue("invalid",r);break;case"textarea":Rb(r,s),Ue("invalid",r)}dy(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Wu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Wu(r.textContent,a,t),i=["children",""+a]):_c.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ue("scroll",r)}switch(n){case"input":Bu(r),Ab(r,s,!0);break;case"textarea":Bu(r),Ib(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Pd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yr]=e,t[Rc]=r,jC(t,e,!1,!1),e.stateNode=t;e:{switch(o=fy(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),i=r;break;case"iframe":case"object":case"embed":Ue("load",t),i=r;break;case"video":case"audio":for(i=0;i<Wl.length;i++)Ue(Wl[i],t);i=r;break;case"source":Ue("error",t),i=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),i=r;break;case"details":Ue("toggle",t),i=r;break;case"input":Pb(t,r),i=ay(t,r),Ue("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=et({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":Rb(t,r),i=uy(t,r),Ue("invalid",t);break;default:i=r}dy(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?bT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_T(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&xc(t,l):typeof l=="number"&&xc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(_c.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ue("scroll",t):l!=null&&P0(t,s,l,o))}switch(n){case"input":Bu(t),Ab(t,r,!1);break;case"textarea":Bu(t),Ib(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?aa(t,!!r.multiple,s,!1):r.defaultValue!=null&&aa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Pd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $t(e),null;case 6:if(t&&e.stateNode!=null)zC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=js(kc.current),js(Jr.current),Vu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yr]=e,(s=r.nodeValue!==n)&&(t=Pn,t!==null))switch(t.tag){case 3:Wu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yr]=e,e.stateNode=r}return $t(e),null;case 13:if(ze(Ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&Cn!==null&&e.mode&1&&!(e.flags&128))lC(),Aa(),e.flags|=98560,s=!1;else if(s=Vu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[Yr]=e}else Aa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$t(e),s=!1}else gr!==null&&(Xy(gr),gr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?yt===0&&(yt=3):c_())),e.updateQueue!==null&&(e.flags|=4),$t(e),null);case 4:return Ia(),$y(t,e),t===null&&Pc(e.stateNode.containerInfo),$t(e),null;case 10:return V0(e.type._context),$t(e),null;case 17:return pn(e.type)&&Ad(),$t(e),null;case 19:if(ze(Ke),s=e.memoizedState,s===null)return $t(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)El(s,!1);else{if(yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Nd(t),o!==null){for(e.flags|=128,El(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Fe(Ke,Ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&ot()>Ma&&(e.flags|=128,r=!0,El(s,!1),e.lanes=4194304)}else{if(!r)if(t=Nd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),El(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!We)return $t(e),null}else 2*ot()-s.renderingStartTime>Ma&&n!==1073741824&&(e.flags|=128,r=!0,El(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ot(),e.sibling=null,n=Ke.current,Fe(Ke,r?n&1|2:n&1),e):($t(e),null);case 22:case 23:return l_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tn&1073741824&&($t(e),e.subtreeFlags&6&&(e.flags|=8192)):$t(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function TO(t,e){switch(j0(e),e.tag){case 1:return pn(e.type)&&Ad(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ia(),ze(fn),ze(Yt),Z0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return q0(e),null;case 13:if(ze(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Aa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ze(Ke),null;case 4:return Ia(),null;case 10:return V0(e.type._context),null;case 22:case 23:return l_(),null;case 24:return null;default:return null}}var Ku=!1,Ut=!1,CO=typeof WeakSet=="function"?WeakSet:Set,Q=null;function na(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){st(t,e,r)}else n.current=null}function Uy(t,e,n){try{n()}catch(r){st(t,e,r)}}var _w=!1;function PO(t,e){if(Sy=Ed,t=KT(),U0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,u=t,h=null;t:for(;;){for(var f;u!==n||i!==0&&u.nodeType!==3||(a=o+i),u!==s||r!==0&&u.nodeType!==3||(l=o+r),u.nodeType===3&&(o+=u.nodeValue.length),(f=u.firstChild)!==null;)h=u,u=f;for(;;){if(u===t)break t;if(h===n&&++c===i&&(a=o),h===s&&++d===r&&(l=o),(f=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ey={focusedElem:t,selectionRange:n},Ed=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,g=e.stateNode,_=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:dr(e.type,m),y);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(w){st(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return p=_w,_w=!1,p}function lc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Uy(e,n,s)}i=i.next}while(i!==r)}}function Of(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function WC(t){var e=t.alternate;e!==null&&(t.alternate=null,WC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yr],delete e[Rc],delete e[Py],delete e[cO],delete e[uO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function VC(t){return t.tag===5||t.tag===3||t.tag===4}function xw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||VC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pd));else if(r!==4&&(t=t.child,t!==null))for(jy(t,e,n),t=t.sibling;t!==null;)jy(t,e,n),t=t.sibling}function Gy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gy(t,e,n),t=t.sibling;t!==null;)Gy(t,e,n),t=t.sibling}var Pt=null,pr=!1;function Wi(t,e,n){for(n=n.child;n!==null;)XC(t,e,n),n=n.sibling}function XC(t,e,n){if(Qr&&typeof Qr.onCommitFiberUnmount=="function")try{Qr.onCommitFiberUnmount(Cf,n)}catch{}switch(n.tag){case 5:Ut||na(n,e);case 6:var r=Pt,i=pr;Pt=null,Wi(t,e,n),Pt=r,pr=i,Pt!==null&&(pr?(t=Pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(pr?(t=Pt,n=n.stateNode,t.nodeType===8?_m(t.parentNode,n):t.nodeType===1&&_m(t,n),Ec(t)):_m(Pt,n.stateNode));break;case 4:r=Pt,i=pr,Pt=n.stateNode.containerInfo,pr=!0,Wi(t,e,n),Pt=r,pr=i;break;case 0:case 11:case 14:case 15:if(!Ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Uy(n,e,o),i=i.next}while(i!==r)}Wi(t,e,n);break;case 1:if(!Ut&&(na(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){st(n,e,a)}Wi(t,e,n);break;case 21:Wi(t,e,n);break;case 22:n.mode&1?(Ut=(r=Ut)||n.memoizedState!==null,Wi(t,e,n),Ut=r):Wi(t,e,n);break;default:Wi(t,e,n)}}function bw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new CO),e.forEach(function(r){var i=LO.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function sr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Pt=a.stateNode,pr=!1;break e;case 3:Pt=a.stateNode.containerInfo,pr=!0;break e;case 4:Pt=a.stateNode.containerInfo,pr=!0;break e}a=a.return}if(Pt===null)throw Error(z(160));XC(s,o,i),Pt=null,pr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){st(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)YC(e,t),e=e.sibling}function YC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(sr(e,t),Lr(t),r&4){try{lc(3,t,t.return),Of(3,t)}catch(m){st(t,t.return,m)}try{lc(5,t,t.return)}catch(m){st(t,t.return,m)}}break;case 1:sr(e,t),Lr(t),r&512&&n!==null&&na(n,n.return);break;case 5:if(sr(e,t),Lr(t),r&512&&n!==null&&na(n,n.return),t.flags&32){var i=t.stateNode;try{xc(i,"")}catch(m){st(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&gT(i,s),fy(a,o);var c=fy(a,s);for(o=0;o<l.length;o+=2){var d=l[o],u=l[o+1];d==="style"?bT(i,u):d==="dangerouslySetInnerHTML"?_T(i,u):d==="children"?xc(i,u):P0(i,d,u,c)}switch(a){case"input":ly(i,s);break;case"textarea":yT(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?aa(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?aa(i,!!s.multiple,s.defaultValue,!0):aa(i,!!s.multiple,s.multiple?[]:"",!1))}i[Rc]=s}catch(m){st(t,t.return,m)}}break;case 6:if(sr(e,t),Lr(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){st(t,t.return,m)}}break;case 3:if(sr(e,t),Lr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ec(e.containerInfo)}catch(m){st(t,t.return,m)}break;case 4:sr(e,t),Lr(t);break;case 13:sr(e,t),Lr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(o_=ot())),r&4&&bw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ut=(c=Ut)||d,sr(e,t),Ut=c):sr(e,t),Lr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Q=t,d=t.child;d!==null;){for(u=Q=d;Q!==null;){switch(h=Q,f=h.child,h.tag){case 0:case 11:case 14:case 15:lc(4,h,h.return);break;case 1:na(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){st(r,n,m)}}break;case 5:na(h,h.return);break;case 22:if(h.memoizedState!==null){Sw(u);continue}}f!==null?(f.return=h,Q=f):Sw(u)}d=d.sibling}e:for(d=null,u=t;;){if(u.tag===5){if(d===null){d=u;try{i=u.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=xT("display",o))}catch(m){st(t,t.return,m)}}}else if(u.tag===6){if(d===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(m){st(t,t.return,m)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:sr(e,t),Lr(t),r&4&&bw(t);break;case 21:break;default:sr(e,t),Lr(t)}}function Lr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(VC(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(xc(i,""),r.flags&=-33);var s=xw(t);Gy(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=xw(t);jy(t,a,o);break;default:throw Error(z(161))}}catch(l){st(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AO(t,e,n){Q=t,KC(t)}function KC(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ku;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ut;a=Ku;var c=Ut;if(Ku=o,(Ut=l)&&!c)for(Q=i;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?Ew(i):l!==null?(l.return=o,Q=l):Ew(i);for(;s!==null;)Q=s,KC(s),s=s.sibling;Q=i,Ku=a,Ut=c}ww(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):ww(t)}}function ww(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||Of(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ut)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:dr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ow(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ow(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var u=d.dehydrated;u!==null&&Ec(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Ut||e.flags&512&&Hy(e)}catch(h){st(e,e.return,h)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Sw(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Ew(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Of(4,e)}catch(l){st(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){st(e,i,l)}}var s=e.return;try{Hy(e)}catch(l){st(e,s,l)}break;case 5:var o=e.return;try{Hy(e)}catch(l){st(e,o,l)}}}catch(l){st(e,e.return,l)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var RO=Math.ceil,Fd=Fi.ReactCurrentDispatcher,i_=Fi.ReactCurrentOwner,Xn=Fi.ReactCurrentBatchConfig,Ae=0,Et=null,ut=null,Dt=0,Tn=0,ra=ws(0),yt=0,Nc=null,eo=0,Nf=0,s_=0,cc=null,hn=null,o_=0,Ma=1/0,yi=null,$d=!1,zy=null,cs=null,qu=!1,es=null,Ud=0,uc=0,Wy=null,zh=-1,Wh=0;function Jt(){return Ae&6?ot():zh!==-1?zh:zh=ot()}function us(t){return t.mode&1?Ae&2&&Dt!==0?Dt&-Dt:dO.transition!==null?(Wh===0&&(Wh=DT()),Wh):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:UT(t.type)),t):1}function Er(t,e,n,r){if(50<uc)throw uc=0,Wy=null,Error(z(185));Jc(t,n,r),(!(Ae&2)||t!==Et)&&(t===Et&&(!(Ae&2)&&(Nf|=n),yt===4&&Zi(t,Dt)),mn(t,r),n===1&&Ae===0&&!(e.mode&1)&&(Ma=ot()+500,kf&&Ss()))}function mn(t,e){var n=t.callbackNode;dD(t,e);var r=Sd(t,t===Et?Dt:0);if(r===0)n!==null&&Db(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Db(n),e===1)t.tag===0?hO(Tw.bind(null,t)):sC(Tw.bind(null,t)),aO(function(){!(Ae&6)&&Ss()}),n=null;else{switch(OT(r)){case 1:n=M0;break;case 4:n=kT;break;case 16:n=wd;break;case 536870912:n=MT;break;default:n=wd}n=rP(n,qC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qC(t,e){if(zh=-1,Wh=0,Ae&6)throw Error(z(327));var n=t.callbackNode;if(da()&&t.callbackNode!==n)return null;var r=Sd(t,t===Et?Dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hd(t,r);else{e=r;var i=Ae;Ae|=2;var s=QC();(Et!==t||Dt!==e)&&(yi=null,Ma=ot()+500,Ws(t,e));do try{MO();break}catch(a){ZC(t,a)}while(!0);W0(),Fd.current=s,Ae=i,ut!==null?e=0:(Et=null,Dt=0,e=yt)}if(e!==0){if(e===2&&(i=vy(t),i!==0&&(r=i,e=Vy(t,i))),e===1)throw n=Nc,Ws(t,0),Zi(t,r),mn(t,ot()),n;if(e===6)Zi(t,r);else{if(i=t.current.alternate,!(r&30)&&!IO(i)&&(e=Hd(t,r),e===2&&(s=vy(t),s!==0&&(r=s,e=Vy(t,s))),e===1))throw n=Nc,Ws(t,0),Zi(t,r),mn(t,ot()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Ds(t,hn,yi);break;case 3:if(Zi(t,r),(r&130023424)===r&&(e=o_+500-ot(),10<e)){if(Sd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Jt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Cy(Ds.bind(null,t,hn,yi),e);break}Ds(t,hn,yi);break;case 4:if(Zi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Sr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ot()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RO(r/1960))-r,10<r){t.timeoutHandle=Cy(Ds.bind(null,t,hn,yi),r);break}Ds(t,hn,yi);break;case 5:Ds(t,hn,yi);break;default:throw Error(z(329))}}}return mn(t,ot()),t.callbackNode===n?qC.bind(null,t):null}function Vy(t,e){var n=cc;return t.current.memoizedState.isDehydrated&&(Ws(t,e).flags|=256),t=Hd(t,e),t!==2&&(e=hn,hn=n,e!==null&&Xy(e)),t}function Xy(t){hn===null?hn=t:hn.push.apply(hn,t)}function IO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ar(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zi(t,e){for(e&=~s_,e&=~Nf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Sr(e),r=1<<n;t[n]=-1,e&=~r}}function Tw(t){if(Ae&6)throw Error(z(327));da();var e=Sd(t,0);if(!(e&1))return mn(t,ot()),null;var n=Hd(t,e);if(t.tag!==0&&n===2){var r=vy(t);r!==0&&(e=r,n=Vy(t,r))}if(n===1)throw n=Nc,Ws(t,0),Zi(t,e),mn(t,ot()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ds(t,hn,yi),mn(t,ot()),null}function a_(t,e){var n=Ae;Ae|=1;try{return t(e)}finally{Ae=n,Ae===0&&(Ma=ot()+500,kf&&Ss())}}function to(t){es!==null&&es.tag===0&&!(Ae&6)&&da();var e=Ae;Ae|=1;var n=Xn.transition,r=Oe;try{if(Xn.transition=null,Oe=1,t)return t()}finally{Oe=r,Xn.transition=n,Ae=e,!(Ae&6)&&Ss()}}function l_(){Tn=ra.current,ze(ra)}function Ws(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,oO(n)),ut!==null)for(n=ut.return;n!==null;){var r=n;switch(j0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ad();break;case 3:Ia(),ze(fn),ze(Yt),Z0();break;case 5:q0(r);break;case 4:Ia();break;case 13:ze(Ke);break;case 19:ze(Ke);break;case 10:V0(r.type._context);break;case 22:case 23:l_()}n=n.return}if(Et=t,ut=t=hs(t.current,null),Dt=Tn=e,yt=0,Nc=null,s_=Nf=eo=0,hn=cc=null,Hs!==null){for(e=0;e<Hs.length;e++)if(n=Hs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Hs=null}return t}function ZC(t,e){do{var n=ut;try{if(W0(),Hh.current=Bd,Ld){for(var r=Ze.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ld=!1}if(Js=0,bt=mt=Ze=null,ac=!1,Mc=0,i_.current=null,n===null||n.return===null){yt=1,Nc=e,ut=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Dt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,u=d.tag;if(!(d.mode&1)&&(u===0||u===11||u===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=dw(o);if(f!==null){f.flags&=-257,fw(f,o,a,s,e),f.mode&1&&hw(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){hw(s,c,e),c_();break e}l=Error(z(426))}}else if(We&&a.mode&1){var y=dw(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),fw(y,o,a,s,e),G0(ka(l,a));break e}}s=l=ka(l,a),yt!==4&&(yt=2),cc===null?cc=[s]:cc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=OC(s,l,e);sw(s,g);break e;case 1:a=l;var _=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(cs===null||!cs.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=NC(s,a,e);sw(s,w);break e}}s=s.return}while(s!==null)}eP(n)}catch(S){e=S,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function QC(){var t=Fd.current;return Fd.current=Bd,t===null?Bd:t}function c_(){(yt===0||yt===3||yt===2)&&(yt=4),Et===null||!(eo&268435455)&&!(Nf&268435455)||Zi(Et,Dt)}function Hd(t,e){var n=Ae;Ae|=2;var r=QC();(Et!==t||Dt!==e)&&(yi=null,Ws(t,e));do try{kO();break}catch(i){ZC(t,i)}while(!0);if(W0(),Ae=n,Fd.current=r,ut!==null)throw Error(z(261));return Et=null,Dt=0,yt}function kO(){for(;ut!==null;)JC(ut)}function MO(){for(;ut!==null&&!rD();)JC(ut)}function JC(t){var e=nP(t.alternate,t,Tn);t.memoizedProps=t.pendingProps,e===null?eP(t):ut=e,i_.current=null}function eP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=TO(n,e),n!==null){n.flags&=32767,ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yt=6,ut=null;return}}else if(n=EO(n,e,Tn),n!==null){ut=n;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=t}while(e!==null);yt===0&&(yt=5)}function Ds(t,e,n){var r=Oe,i=Xn.transition;try{Xn.transition=null,Oe=1,DO(t,e,n,r)}finally{Xn.transition=i,Oe=r}return null}function DO(t,e,n,r){do da();while(es!==null);if(Ae&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(fD(t,s),t===Et&&(ut=Et=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qu||(qu=!0,rP(wd,function(){return da(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Xn.transition,Xn.transition=null;var o=Oe;Oe=1;var a=Ae;Ae|=4,i_.current=null,PO(t,n),YC(n,t),JD(Ey),Ed=!!Sy,Ey=Sy=null,t.current=n,AO(n),iD(),Ae=a,Oe=o,Xn.transition=s}else t.current=n;if(qu&&(qu=!1,es=t,Ud=i),s=t.pendingLanes,s===0&&(cs=null),aD(n.stateNode),mn(t,ot()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($d)throw $d=!1,t=zy,zy=null,t;return Ud&1&&t.tag!==0&&da(),s=t.pendingLanes,s&1?t===Wy?uc++:(uc=0,Wy=t):uc=0,Ss(),null}function da(){if(es!==null){var t=OT(Ud),e=Xn.transition,n=Oe;try{if(Xn.transition=null,Oe=16>t?16:t,es===null)var r=!1;else{if(t=es,es=null,Ud=0,Ae&6)throw Error(z(331));var i=Ae;for(Ae|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Q=c;Q!==null;){var d=Q;switch(d.tag){case 0:case 11:case 15:lc(8,d,s)}var u=d.child;if(u!==null)u.return=d,Q=u;else for(;Q!==null;){d=Q;var h=d.sibling,f=d.return;if(WC(d),d===c){Q=null;break}if(h!==null){h.return=f,Q=h;break}Q=f}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:lc(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Q=g;break e}Q=s.return}}var _=t.current;for(Q=_;Q!==null;){o=Q;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Q=v;else e:for(o=_;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Of(9,a)}}catch(S){st(a,a.return,S)}if(a===o){Q=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Q=w;break e}Q=a.return}}if(Ae=i,Ss(),Qr&&typeof Qr.onPostCommitFiberRoot=="function")try{Qr.onPostCommitFiberRoot(Cf,t)}catch{}r=!0}return r}finally{Oe=n,Xn.transition=e}}return!1}function Cw(t,e,n){e=ka(n,e),e=OC(t,e,1),t=ls(t,e,1),e=Jt(),t!==null&&(Jc(t,1,e),mn(t,e))}function st(t,e,n){if(t.tag===3)Cw(t,t,n);else for(;e!==null;){if(e.tag===3){Cw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cs===null||!cs.has(r))){t=ka(n,t),t=NC(e,t,1),e=ls(e,t,1),t=Jt(),e!==null&&(Jc(e,1,t),mn(e,t));break}}e=e.return}}function OO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,Et===t&&(Dt&n)===n&&(yt===4||yt===3&&(Dt&130023424)===Dt&&500>ot()-o_?Ws(t,0):s_|=n),mn(t,e)}function tP(t,e){e===0&&(t.mode&1?(e=Uu,Uu<<=1,!(Uu&130023424)&&(Uu=4194304)):e=1);var n=Jt();t=Ii(t,e),t!==null&&(Jc(t,e,n),mn(t,n))}function NO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tP(t,n)}function LO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),tP(t,n)}var nP;nP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)dn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dn=!1,SO(t,e,n);dn=!!(t.flags&131072)}else dn=!1,We&&e.flags&1048576&&oC(e,kd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gh(t,e),t=e.pendingProps;var i=Pa(e,Yt.current);ha(e,n),i=J0(null,e,r,t,i,n);var s=e_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(r)?(s=!0,Rd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Y0(e),i.updater=Df,e.stateNode=i,i._reactInternals=e,Dy(e,r,t,n),e=Ly(null,e,r,!0,s,n)):(e.tag=0,We&&s&&H0(e),Zt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Gh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=FO(r),t=dr(r,t),i){case 0:e=Ny(null,e,r,t,n);break e;case 1:e=gw(null,e,r,t,n);break e;case 11:e=pw(null,e,r,t,n);break e;case 14:e=mw(null,e,r,dr(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dr(r,i),Ny(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dr(r,i),gw(t,e,r,i,n);case 3:e:{if($C(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,dC(t,e),Od(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ka(Error(z(423)),e),e=yw(t,e,r,n,i);break e}else if(r!==i){i=ka(Error(z(424)),e),e=yw(t,e,r,n,i);break e}else for(Cn=as(e.stateNode.containerInfo.firstChild),Pn=e,We=!0,gr=null,n=uC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Aa(),r===i){e=ki(t,e,n);break e}Zt(t,e,r,n)}e=e.child}return e;case 5:return fC(e),t===null&&Iy(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ty(r,i)?o=null:s!==null&&Ty(r,s)&&(e.flags|=32),FC(t,e),Zt(t,e,o,n),e.child;case 6:return t===null&&Iy(e),null;case 13:return UC(t,e,n);case 4:return K0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ra(e,null,r,n):Zt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dr(r,i),pw(t,e,r,i,n);case 7:return Zt(t,e,e.pendingProps,n),e.child;case 8:return Zt(t,e,e.pendingProps.children,n),e.child;case 12:return Zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Fe(Md,r._currentValue),r._currentValue=o,s!==null)if(Ar(s.value,o)){if(s.children===i.children&&!fn.current){e=ki(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ei(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),ky(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ky(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Zt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ha(e,n),i=Yn(i),r=r(i),e.flags|=1,Zt(t,e,r,n),e.child;case 14:return r=e.type,i=dr(r,e.pendingProps),i=dr(r.type,i),mw(t,e,r,i,n);case 15:return LC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dr(r,i),Gh(t,e),e.tag=1,pn(r)?(t=!0,Rd(e)):t=!1,ha(e,n),DC(e,r,i),Dy(e,r,i,n),Ly(null,e,r,!0,t,n);case 19:return HC(t,e,n);case 22:return BC(t,e,n)}throw Error(z(156,e.tag))};function rP(t,e){return IT(t,e)}function BO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,e,n,r){return new BO(t,e,n,r)}function u_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function FO(t){if(typeof t=="function")return u_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===R0)return 11;if(t===I0)return 14}return 2}function hs(t,e){var n=t.alternate;return n===null?(n=Gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")u_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xo:return Vs(n.children,i,s,e);case A0:o=8,i|=8;break;case ry:return t=Gn(12,n,e,i|2),t.elementType=ry,t.lanes=s,t;case iy:return t=Gn(13,n,e,i),t.elementType=iy,t.lanes=s,t;case sy:return t=Gn(19,n,e,i),t.elementType=sy,t.lanes=s,t;case fT:return Lf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hT:o=10;break e;case dT:o=9;break e;case R0:o=11;break e;case I0:o=14;break e;case Yi:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Gn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Vs(t,e,n,r){return t=Gn(7,t,r,e),t.lanes=n,t}function Lf(t,e,n,r){return t=Gn(22,t,r,e),t.elementType=fT,t.lanes=n,t.stateNode={isHidden:!1},t}function Pm(t,e,n){return t=Gn(6,t,null,e),t.lanes=n,t}function Am(t,e,n){return e=Gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $O(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lm(0),this.expirationTimes=lm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function h_(t,e,n,r,i,s,o,a,l){return t=new $O(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Gn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Y0(s),t}function UO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function iP(t){if(!t)return ps;t=t._reactInternals;e:{if(uo(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(pn(n))return iC(t,n,e)}return e}function sP(t,e,n,r,i,s,o,a,l){return t=h_(n,r,!0,t,i,s,o,a,l),t.context=iP(null),n=t.current,r=Jt(),i=us(n),s=Ei(r,i),s.callback=e??null,ls(n,s,i),t.current.lanes=i,Jc(t,i,r),mn(t,r),t}function Bf(t,e,n,r){var i=e.current,s=Jt(),o=us(i);return n=iP(n),e.context===null?e.context=n:e.pendingContext=n,e=Ei(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ls(i,e,o),t!==null&&(Er(t,i,o,s),Uh(t,i,o)),o}function jd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Pw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function d_(t,e){Pw(t,e),(t=t.alternate)&&Pw(t,e)}function HO(){return null}var oP=typeof reportError=="function"?reportError:function(t){console.error(t)};function f_(t){this._internalRoot=t}Ff.prototype.render=f_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Bf(t,e,null,null)};Ff.prototype.unmount=f_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;to(function(){Bf(null,t,null,null)}),e[Ri]=null}};function Ff(t){this._internalRoot=t}Ff.prototype.unstable_scheduleHydration=function(t){if(t){var e=BT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qi.length&&e!==0&&e<qi[n].priority;n++);qi.splice(n,0,t),n===0&&$T(t)}};function p_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $f(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Aw(){}function jO(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=jd(o);s.call(c)}}var o=sP(e,r,t,0,null,!1,!1,"",Aw);return t._reactRootContainer=o,t[Ri]=o.current,Pc(t.nodeType===8?t.parentNode:t),to(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=jd(l);a.call(c)}}var l=h_(t,0,!1,null,null,!1,!1,"",Aw);return t._reactRootContainer=l,t[Ri]=l.current,Pc(t.nodeType===8?t.parentNode:t),to(function(){Bf(e,l,n,r)}),l}function Uf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=jd(o);a.call(l)}}Bf(e,o,t,i)}else o=jO(n,e,t,i,r);return jd(o)}NT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zl(e.pendingLanes);n!==0&&(D0(e,n|1),mn(e,ot()),!(Ae&6)&&(Ma=ot()+500,Ss()))}break;case 13:to(function(){var r=Ii(t,1);if(r!==null){var i=Jt();Er(r,t,1,i)}}),d_(t,1)}};O0=function(t){if(t.tag===13){var e=Ii(t,134217728);if(e!==null){var n=Jt();Er(e,t,134217728,n)}d_(t,134217728)}};LT=function(t){if(t.tag===13){var e=us(t),n=Ii(t,e);if(n!==null){var r=Jt();Er(n,t,e,r)}d_(t,e)}};BT=function(){return Oe};FT=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};my=function(t,e,n){switch(e){case"input":if(ly(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=If(r);if(!i)throw Error(z(90));mT(r),ly(r,i)}}}break;case"textarea":yT(t,n);break;case"select":e=n.value,e!=null&&aa(t,!!n.multiple,e,!1)}};ET=a_;TT=to;var GO={usingClientEntryPoint:!1,Events:[tu,Zo,If,wT,ST,a_]},Tl={findFiberByHostInstance:Us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zO={bundleType:Tl.bundleType,version:Tl.version,rendererPackageName:Tl.rendererPackageName,rendererConfig:Tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=AT(t),t===null?null:t.stateNode},findFiberByHostInstance:Tl.findFiberByHostInstance||HO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zu.isDisabled&&Zu.supportsFiber)try{Cf=Zu.inject(zO),Qr=Zu}catch{}}Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GO;Mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p_(e))throw Error(z(200));return UO(t,e,null,n)};Mn.createRoot=function(t,e){if(!p_(t))throw Error(z(299));var n=!1,r="",i=oP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=h_(t,1,!1,null,null,n,!1,r,i),t[Ri]=e.current,Pc(t.nodeType===8?t.parentNode:t),new f_(e)};Mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=AT(e),t=t===null?null:t.stateNode,t};Mn.flushSync=function(t){return to(t)};Mn.hydrate=function(t,e,n){if(!$f(e))throw Error(z(200));return Uf(null,t,e,!0,n)};Mn.hydrateRoot=function(t,e,n){if(!p_(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=oP;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sP(e,null,t,1,n??null,i,!1,s,o),t[Ri]=e.current,Pc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ff(e)};Mn.render=function(t,e,n){if(!$f(e))throw Error(z(200));return Uf(null,t,e,!1,n)};Mn.unmountComponentAtNode=function(t){if(!$f(t))throw Error(z(40));return t._reactRootContainer?(to(function(){Uf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ri]=null})}),!0):!1};Mn.unstable_batchedUpdates=a_;Mn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$f(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Uf(t,e,n,!1,r)};Mn.version="18.3.1-next-f1338f8080-20240426";function aP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aP)}catch(t){console.error(t)}}aP(),aT.exports=Mn;var ru=aT.exports;const WO=Va(ru);var Rw=ru;ty.createRoot=Rw.createRoot,ty.hydrateRoot=Rw.hydrateRoot;var Yy=function(t,e){return Yy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Yy(t,e)};function Zn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Yy(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Z=function(){return Z=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Z.apply(this,arguments)};function ms(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function yr(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Xh="right-scroll-bar-position",Yh="width-before-scroll-bar",VO="with-scroll-bars-hidden",XO="--removed-body-scroll-bar-size";function Rm(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function YO(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var KO=typeof window<"u"?b.useLayoutEffect:b.useEffect,Iw=new WeakMap;function qO(t,e){var n=YO(null,function(r){return t.forEach(function(i){return Rm(i,r)})});return KO(function(){var r=Iw.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||Rm(a,null)}),s.forEach(function(a){i.has(a)||Rm(a,o)})}Iw.set(n,t)},[t]),n}function ZO(t){return t}function QO(t,e){e===void 0&&(e=ZO);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var d=o;o=[],d.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return i}function JO(t){t===void 0&&(t={});var e=QO(null);return e.options=Z({async:!0,ssr:!1},t),e}var lP=function(t){var e=t.sideCar,n=ms(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,Z({},n))};lP.isSideCarExport=!0;function eN(t,e){return t.useMedium(e),lP}var cP=JO(),Im=function(){},Hf=b.forwardRef(function(t,e){var n=b.useRef(null),r=b.useState({onScrollCapture:Im,onWheelCapture:Im,onTouchMoveCapture:Im}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,u=t.shards,h=t.sideCar,f=t.noIsolation,p=t.inert,m=t.allowPinchZoom,y=t.as,g=y===void 0?"div":y,_=t.gapMode,v=ms(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=h,S=qO([n,e]),E=Z(Z({},v),i);return b.createElement(b.Fragment,null,d&&b.createElement(w,{sideCar:cP,removeScrollBar:c,shards:u,noIsolation:f,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:_}),o?b.cloneElement(b.Children.only(a),Z(Z({},E),{ref:S})):b.createElement(g,Z({},E,{className:l,ref:S}),a))});Hf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hf.classNames={fullWidth:Yh,zeroRight:Xh};var tN=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function nN(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=tN();return e&&t.setAttribute("nonce",e),t}function rN(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function iN(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var sN=function(){var t=0,e=null;return{add:function(n){t==0&&(e=nN())&&(rN(e,n),iN(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},oN=function(){var t=sN();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},uP=function(){var t=oN(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},aN={left:0,top:0,right:0,gap:0},km=function(t){return parseInt(t||"",10)||0},lN=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[km(n),km(r),km(i)]},cN=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return aN;var e=lN(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},uN=uP(),fa="data-scroll-locked",hN=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(VO,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(fa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Xh,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Yh,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Xh," .").concat(Xh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Yh," .").concat(Yh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(fa,`] {
    `).concat(XO,": ").concat(a,`px;
  }
`)},kw=function(){var t=parseInt(document.body.getAttribute(fa)||"0",10);return isFinite(t)?t:0},dN=function(){b.useEffect(function(){return document.body.setAttribute(fa,(kw()+1).toString()),function(){var t=kw()-1;t<=0?document.body.removeAttribute(fa):document.body.setAttribute(fa,t.toString())}},[])},fN=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;dN();var s=b.useMemo(function(){return cN(i)},[i]);return b.createElement(uN,{styles:hN(s,!e,i,n?"":"!important")})},Ky=!1;if(typeof window<"u")try{var Qu=Object.defineProperty({},"passive",{get:function(){return Ky=!0,!0}});window.addEventListener("test",Qu,Qu),window.removeEventListener("test",Qu,Qu)}catch{Ky=!1}var Ao=Ky?{passive:!1}:!1,pN=function(t){return t.tagName==="TEXTAREA"},hP=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!pN(t)&&n[e]==="visible")},mN=function(t){return hP(t,"overflowY")},gN=function(t){return hP(t,"overflowX")},Mw=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=dP(t,r);if(i){var s=fP(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},yN=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},vN=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},dP=function(t,e){return t==="v"?mN(e):gN(e)},fP=function(t,e){return t==="v"?yN(e):vN(e)},_N=function(t,e){return t==="h"&&e==="rtl"?-1:1},xN=function(t,e,n,r,i){var s=_N(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,d=o>0,u=0,h=0;do{var f=fP(t,a),p=f[0],m=f[1],y=f[2],g=m-y-s*p;(p||g)&&dP(t,a)&&(u+=g,h+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(u)<1||!d&&Math.abs(h)<1)&&(c=!0),c},Ju=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Dw=function(t){return[t.deltaX,t.deltaY]},Ow=function(t){return t&&"current"in t?t.current:t},bN=function(t,e){return t[0]===e[0]&&t[1]===e[1]},wN=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},SN=0,Ro=[];function EN(t){var e=b.useRef([]),n=b.useRef([0,0]),r=b.useRef(),i=b.useState(SN++)[0],s=b.useState(uP)[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var m=yr([t.lockRef.current],(t.shards||[]).map(Ow),!0).filter(Boolean);return m.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(m,y){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var g=Ju(m),_=n.current,v="deltaX"in m?m.deltaX:_[0]-g[0],w="deltaY"in m?m.deltaY:_[1]-g[1],S,E=m.target,T=Math.abs(v)>Math.abs(w)?"h":"v";if("touches"in m&&T==="h"&&E.type==="range")return!1;var C=Mw(T,E);if(!C)return!0;if(C?S=T:(S=T==="v"?"h":"v",C=Mw(T,E)),!C)return!1;if(!r.current&&"changedTouches"in m&&(v||w)&&(r.current=S),!S)return!0;var A=r.current||S;return xN(A,y,m,A==="h"?v:w)},[]),l=b.useCallback(function(m){var y=m;if(!(!Ro.length||Ro[Ro.length-1]!==s)){var g="deltaY"in y?Dw(y):Ju(y),_=e.current.filter(function(S){return S.name===y.type&&(S.target===y.target||y.target===S.shadowParent)&&bN(S.delta,g)})[0];if(_&&_.should){y.cancelable&&y.preventDefault();return}if(!_){var v=(o.current.shards||[]).map(Ow).filter(Boolean).filter(function(S){return S.contains(y.target)}),w=v.length>0?a(y,v[0]):!o.current.noIsolation;w&&y.cancelable&&y.preventDefault()}}},[]),c=b.useCallback(function(m,y,g,_){var v={name:m,delta:y,target:g,should:_,shadowParent:TN(g)};e.current.push(v),setTimeout(function(){e.current=e.current.filter(function(w){return w!==v})},1)},[]),d=b.useCallback(function(m){n.current=Ju(m),r.current=void 0},[]),u=b.useCallback(function(m){c(m.type,Dw(m),m.target,a(m,t.lockRef.current))},[]),h=b.useCallback(function(m){c(m.type,Ju(m),m.target,a(m,t.lockRef.current))},[]);b.useEffect(function(){return Ro.push(s),t.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Ao),document.addEventListener("touchmove",l,Ao),document.addEventListener("touchstart",d,Ao),function(){Ro=Ro.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,Ao),document.removeEventListener("touchmove",l,Ao),document.removeEventListener("touchstart",d,Ao)}},[]);var f=t.removeScrollBar,p=t.inert;return b.createElement(b.Fragment,null,p?b.createElement(s,{styles:wN(i)}):null,f?b.createElement(fN,{gapMode:t.gapMode}):null)}function TN(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const CN=eN(cP,EN);var jf=b.forwardRef(function(t,e){return b.createElement(Hf,Z({},t,{ref:e,sideCar:CN}))});jf.classNames=Hf.classNames;function Qe(t){return Object.keys(t)}function Mm(t){return t&&typeof t=="object"&&!Array.isArray(t)}function m_(t,e){const n={...t},r=e;return Mm(t)&&Mm(e)&&Object.keys(e).forEach(i=>{Mm(r[i])&&i in t?n[i]=m_(n[i],r[i]):n[i]=r[i]}),n}function PN(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function AN(t){return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:t.match(/^calc\((.*?)\)$/)?.[1].split("*")[0].trim()}function qy(t){const e=AN(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function Dm(t){return t==="0rem"?"0rem":`calc(${t} * var(--mantine-scale))`}function pP(t,{shouldScale:e=!1}={}){function n(r){if(r===0||r==="0")return`0${t}`;if(typeof r=="number"){const i=`${r/16}${t}`;return e?Dm(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(t))return e?Dm(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${t}`;return e?Dm(s):s}}return r}return n}const $=pP("rem",{shouldScale:!0}),Gd=pP("em");function qa(t){return Object.keys(t).reduce((e,n)=>(t[n]!==void 0&&(e[n]=t[n]),e),{})}function mP(t){if(typeof t=="number")return!0;if(typeof t=="string"){if(t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!=="")return!0;const e=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return t.trim().split(/\s+/).every(r=>e.test(r))}return!1}function ho(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==b.Fragment:!1}function On(t){const e=b.createContext(null);return[({children:i,value:s})=>x.jsx(e.Provider,{value:s,children:i}),()=>{const i=b.useContext(e);if(i===null)throw new Error(t);return i}]}function iu(t=null){const e=b.createContext(t);return[({children:i,value:s})=>x.jsx(e.Provider,{value:s,children:i}),()=>b.useContext(e)]}function Nw(t,e){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(e);return`${t}-${n}`}}function Zy(t,e){let n=t;for(;(n=n.parentElement)&&!n.matches(e););return n}function RN(t,e,n){for(let r=t-1;r>=0;r-=1)if(!e[r].disabled)return r;if(n){for(let r=e.length-1;r>-1;r-=1)if(!e[r].disabled)return r}return t}function IN(t,e,n){for(let r=t+1;r<e.length;r+=1)if(!e[r].disabled)return r;if(n){for(let r=0;r<e.length;r+=1)if(!e[r].disabled)return r}return t}function kN(t,e,n){return Zy(t,n)===Zy(e,n)}function MN({parentSelector:t,siblingSelector:e,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{n?.(a);const l=Array.from(Zy(a.currentTarget,t)?.querySelectorAll(e)||[]).filter(h=>kN(a.currentTarget,h,t)),c=l.findIndex(h=>a.currentTarget===h),d=IN(c,l,r),u=RN(c,l,r);switch(a.key){case"ArrowRight":break;case"ArrowLeft":break;case"ArrowUp":{a.stopPropagation(),a.preventDefault(),l[u].focus(),i&&l[u].click();break}case"ArrowDown":{a.stopPropagation(),a.preventDefault(),l[d].focus(),i&&l[d].click();break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const h=l.length-1;!l[h].disabled&&l[h].focus();break}}}}const DN={app:100,modal:200,popover:300,overlay:400,max:9999};function Dr(t){return DN[t]}const gP=()=>{};function ON(t,e={active:!0}){return typeof t!="function"||!e.active?e.onKeyDown||gP:n=>{n.key==="Escape"&&(t(n),e.onTrigger?.())}}function Pe(t,e="size",n=!0){if(t!==void 0)return mP(t)?n?$(t):t:`var(--${e}-${t})`}function si(t){return Pe(t,"mantine-spacing")}function Nt(t){return t===void 0?"var(--mantine-radius-default)":Pe(t,"mantine-radius")}function zt(t){return Pe(t,"mantine-font-size")}function NN(t){return Pe(t,"mantine-line-height",!1)}function g_(t){if(t)return Pe(t,"mantine-shadow",!1)}function y_(t,e){return t in e?qy(e[t]):qy(t)}function zd(t,e){const n=t.map(r=>({value:r,px:y_(r,e)}));return n.sort((r,i)=>r.px-i.px),n}function Vl(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function hc(t,e,n){return e===void 0&&n===void 0?t:e!==void 0&&n===void 0?Math.max(t,e):Math.min(e===void 0&&n!==void 0?t:Math.max(t,e),n)}function LN(t="mantine-"){return`${t}${Math.random().toString(36).slice(2,11)}`}function Fs(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>e.current?.(...n),[])}const BN=()=>{};function Gf(t,e){const n=typeof e=="number"?e:e.delay,r=typeof e=="number"?!1:e.flushOnUnmount,i=Fs(t),s=b.useRef(0),o=Object.assign(b.useCallback((...a)=>{window.clearTimeout(s.current);const l=()=>{s.current!==0&&(s.current=0,i(...a))};o.flush=l,s.current=window.setTimeout(l,n)},[i,n]),{flush:BN});return b.useEffect(()=>()=>{window.clearTimeout(s.current),r&&o.flush()},[o,r]),o}const Lw=["mousedown","touchstart"];function FN(t,e,n){const r=b.useRef(null);return b.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=o?.hasAttribute("data-ignore-outside-clicks")||!document.body.contains(o)&&o.tagName!=="HTML";n.every(c=>!!c&&!s.composedPath().includes(c))&&!a&&t()}else r.current&&!r.current.contains(o)&&t()};return(e||Lw).forEach(s=>document.addEventListener(s,i)),()=>{(e||Lw).forEach(s=>document.removeEventListener(s,i))}},[r,t,n]),r}function $N(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function UN(t,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function yP(t,e,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=b.useState(n?e:UN(t)),s=b.useRef(null);return b.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(t),i(s.current.matches),$N(s.current,o=>i(o.matches))},[t]),r}function HN(t,e){return yP("(prefers-color-scheme: dark)",t==="dark",e)?"dark":"light"}const Za=typeof document<"u"?b.useLayoutEffect:b.useEffect;function gs(t,e){const n=b.useRef(!1);b.useEffect(()=>()=>{n.current=!1},[]),b.useEffect(()=>{if(n.current)return t();n.current=!0},e)}function vP({opened:t,shouldReturnFocus:e=!0}){const n=b.useRef(null),r=()=>{n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&n.current?.focus({preventScroll:!0})};return gs(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),t?n.current=document.activeElement:e&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[t,e]),r}const jN=/input|select|textarea|button|object/,_P="a, input, select, textarea, button, object, [tabindex]";function GN(t){return t.style.display==="none"}function zN(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let n=t;for(;n&&!(n===document.body||n.nodeType===11);){if(GN(n))return!1;n=n.parentNode}return!0}function xP(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function Qy(t){const e=t.nodeName.toLowerCase(),n=!Number.isNaN(xP(t));return(jN.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||n)&&zN(t)}function bP(t){const e=xP(t);return(Number.isNaN(e)||e>=0)&&Qy(t)}function WN(t){return Array.from(t.querySelectorAll(_P)).filter(bP)}function VN(t,e){const n=WN(t);if(!n.length){e.preventDefault();return}const r=n[e.shiftKey?0:n.length-1],i=t.getRootNode();let s=r===i.activeElement||t===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(d=>d.getAttribute("type")==="radio"&&d.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;e.preventDefault();const l=n[e.shiftKey?n.length-1:0];l&&l.focus()}function XN(t=!0){const e=b.useRef(null),n=i=>{let s=i.querySelector("[data-autofocus]");if(!s){const o=Array.from(i.querySelectorAll(_P));s=o.find(bP)||o.find(Qy)||null,!s&&Qy(i)&&(s=i)}s&&s.focus({preventScroll:!0})},r=b.useCallback(i=>{t&&i!==null&&e.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&n(i)}),e.current=i):e.current=null)},[t]);return b.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>n(e.current));const i=s=>{s.key==="Tab"&&e.current&&VN(e.current,s)};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[t]),r}const YN=vd.useId||(()=>{});function KN(){const t=YN();return t?`mantine-${t.replace(/:/g,"")}`:""}function ci(t){const e=KN(),[n,r]=b.useState(e);return Za(()=>{r(LN())},[]),typeof t=="string"?t:typeof window>"u"?e:n}function wP(t,e,n){b.useEffect(()=>(window.addEventListener(t,e,n),()=>window.removeEventListener(t,e,n)),[t,e])}function Wd(t,e){if(typeof t=="function")return t(e);typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function SP(...t){const e=new Map;return n=>{if(t.forEach(r=>{const i=Wd(r,n);i&&e.set(r,i)}),e.size>0)return()=>{t.forEach(r=>{const i=e.get(r);i?i():Wd(r,null)}),e.clear()}}}function Lt(...t){return b.useCallback(SP(...t),t)}function qN(t,e,n="ltr"){const r=b.useRef(null),i=b.useRef(!1),s=b.useRef(!1),o=b.useRef(0),[a,l]=b.useState(!1);return b.useEffect(()=>{i.current=!0},[]),b.useEffect(()=>{const c=r.current,d=({x:v,y:w})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&c){c.style.userSelect="none";const S=c.getBoundingClientRect();if(S.width&&S.height){const E=hc((v-S.left)/S.width,0,1);t({x:n==="ltr"?E:1-E,y:hc((w-S.top)/S.height,0,1)})}}})},u=()=>{document.addEventListener("mousemove",y),document.addEventListener("mouseup",p),document.addEventListener("touchmove",_),document.addEventListener("touchend",p)},h=()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",p),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",p)},f=()=>{!s.current&&i.current&&(s.current=!0,typeof e?.onScrubStart=="function"&&e.onScrubStart(),l(!0),u())},p=()=>{s.current&&i.current&&(s.current=!1,l(!1),h(),setTimeout(()=>{typeof e?.onScrubEnd=="function"&&e.onScrubEnd()},0))},m=v=>{f(),v.preventDefault(),y(v)},y=v=>d({x:v.clientX,y:v.clientY}),g=v=>{v.cancelable&&v.preventDefault(),f(),_(v)},_=v=>{v.cancelable&&v.preventDefault(),d({x:v.changedTouches[0].clientX,y:v.changedTouches[0].clientY})};return c?.addEventListener("mousedown",m),c?.addEventListener("touchstart",g,{passive:!1}),()=>{c&&(c.removeEventListener("mousedown",m),c.removeEventListener("touchstart",g))}},[n,t]),{ref:r,active:a}}function oi({value:t,defaultValue:e,finalValue:n,onChange:r=()=>{}}){const[i,s]=b.useState(e!==void 0?e:n),o=(a,...l)=>{s(a),r?.(a,...l)};return t!==void 0?[t,r,!0]:[i,o,!1]}function v_(t,e){return yP("(prefers-reduced-motion: reduce)",t,e)}function Vd(t=!1,e){const{onOpen:n,onClose:r}={},[i,s]=b.useState(t),o=b.useCallback(()=>{s(c=>c||(n?.(),!0))},[n]),a=b.useCallback(()=>{s(c=>c&&(r?.(),!1))},[r]),l=b.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:l}]}function ZN(t){const e=b.useRef(void 0);return b.useEffect(()=>{e.current=t},[t]),e.current}function Bw(t,e){return e.length===0?t:e.reduce((n,r)=>Math.abs(r-t)<Math.abs(n-t)?r:n)}function zf(t){const e=vd.version;return typeof vd.version!="string"||e.startsWith("18.")?t?.ref:t?.props?.ref}function EP(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=EP(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function _t(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=EP(t))&&(r&&(r+=" "),r+=e);return r}const QN={};function JN(t){const e={};return t.forEach(n=>{Object.entries(n).forEach(([r,i])=>{e[r]?e[r]=_t(e[r],i):e[r]=i})}),e}function Wf({theme:t,classNames:e,props:n,stylesCtx:r}){const s=(Array.isArray(e)?e:[e]).map(o=>typeof o=="function"?o(t,n,r):o||QN);return JN(s)}function Xd({theme:t,styles:e,props:n,stylesCtx:r}){return(Array.isArray(e)?e:[e]).reduce((s,o)=>typeof o=="function"?{...s,...o(t,n,r)}:{...s,...o},{})}const __=b.createContext(null);function $i(){const t=b.useContext(__);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function eL(){return $i().cssVariablesResolver}function tL(){return $i().classNamesPrefix}function Vf(){return $i().getStyleNonce}function nL(){return $i().withStaticClasses}function rL(){return $i().headless}function iL(){return $i().stylesTransform?.sx}function sL(){return $i().stylesTransform?.styles}function TP(){return $i().env||"default"}function oL(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function aL(t){let e=t.replace("#","");if(e.length===3){const o=e.split("");e=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(e.length===8){const o=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:o}}const n=parseInt(e,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function lL(t){const[e,n,r,i]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:n,b:r,a:i||1}}function cL(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=t.match(e);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,l=r/60,c=a*(1-Math.abs(l%2-1)),d=s-a/2;let u,h,f;return l>=0&&l<1?(u=a,h=c,f=0):l>=1&&l<2?(u=c,h=a,f=0):l>=2&&l<3?(u=0,h=a,f=c):l>=3&&l<4?(u=0,h=c,f=a):l>=4&&l<5?(u=c,h=0,f=a):(u=a,h=0,f=c),{r:Math.round((u+d)*255),g:Math.round((h+d)*255),b:Math.round((f+d)*255),a:o||1}}function x_(t){return oL(t)?aL(t):t.startsWith("rgb")?lL(t):t.startsWith("hsl")?cL(t):{r:0,g:0,b:0,a:1}}function eh(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r:n,g:r,b:i,a:s}=x_(t),o=1-e,a=l=>Math.round(l*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function Lc(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function Om(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function uL(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function hL(t){if(t.startsWith("oklch("))return(uL(t)||0)/100;const{r:e,g:n,b:r}=x_(t),i=e/255,s=n/255,o=r/255,a=Om(i),l=Om(s),c=Om(o);return .2126*a+.7152*l+.0722*c}function Cl(t,e=.179){return t.startsWith("var(")?!1:hL(t)>e}function su({color:t,theme:e,colorScheme:n}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:n==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Cl(n==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:n==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Cl(n==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Cl(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[r,i]=t.split("."),s=i?Number(i):void 0,o=r in e.colors;if(o){const a=s!==void 0?e.colors[r][s]:e.colors[r][Lc(e,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:Cl(a,e.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:t,value:t,isThemeColor:o,isLight:Cl(t,e.luminanceThreshold),shade:s,variable:void 0}}function An(t,e){const n=su({color:t||e.primaryColor,theme:e});return n.variable?`var(${n.variable})`:t}function Jy(t,e){const n={from:t?.from||e.defaultGradient.from,to:t?.to||e.defaultGradient.to,deg:t?.deg??e.defaultGradient.deg??0},r=An(n.from,e),i=An(n.to,e);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Hr(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const s=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${s}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r:n,g:r,b:i}=x_(t);return`rgba(${n}, ${r}, ${i}, ${e})`}const Io=Hr,dL=({color:t,theme:e,variant:n,gradient:r,autoContrast:i})=>{const s=su({color:t,theme:e}),o=typeof i=="boolean"?i:e.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:a,border:`${$(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${$(1)} solid transparent`}:{background:t,hover:eh(t,.1),color:a,border:`${$(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${$(1)} solid transparent`};const a=e.colors[s.color][s.shade];return{background:Hr(a,.1),hover:Hr(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${$(1)} solid transparent`}}return{background:Hr(t,.1),hover:Hr(t,.12),color:t,border:`${$(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${$(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:Hr(e.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${$(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Hr(t,.05),color:t,border:`${$(1)} solid ${t}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${$(1)} solid transparent`};const a=e.colors[s.color][s.shade];return{background:"transparent",hover:Hr(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${$(1)} solid transparent`}}return{background:"transparent",hover:Hr(t,.12),color:t,border:`${$(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${$(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${$(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${$(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:eh(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${$(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:eh(e.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${$(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:eh(e.white,.01),color:t,border:`${$(1)} solid transparent`}:n==="gradient"?{background:Jy(r,e),hover:Jy(r,e),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${$(1)} solid var(--mantine-color-default-border)`}:{}},fL={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Fw="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",b_={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:fL,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:dL,autoContrast:!1,luminanceThreshold:.3,fontFamily:Fw,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Fw,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:$(34),lineHeight:"1.3"},h2:{fontSize:$(26),lineHeight:"1.35"},h3:{fontSize:$(22),lineHeight:"1.4"},h4:{fontSize:$(18),lineHeight:"1.45"},h5:{fontSize:$(16),lineHeight:"1.5"},h6:{fontSize:$(14),lineHeight:"1.5"}}},fontSizes:{xs:$(12),sm:$(14),md:$(16),lg:$(18),xl:$(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:$(2),sm:$(4),md:$(8),lg:$(16),xl:$(32)},spacing:{xs:$(10),sm:$(12),md:$(16),lg:$(20),xl:$(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${$(1)} ${$(3)} rgba(0, 0, 0, 0.05), 0 ${$(1)} ${$(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${$(1)} ${$(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$(10)} ${$(15)} ${$(-5)}, rgba(0, 0, 0, 0.04) 0 ${$(7)} ${$(7)} ${$(-5)}`,md:`0 ${$(1)} ${$(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$(20)} ${$(25)} ${$(-5)}, rgba(0, 0, 0, 0.04) 0 ${$(10)} ${$(10)} ${$(-5)}`,lg:`0 ${$(1)} ${$(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$(28)} ${$(23)} ${$(-7)}, rgba(0, 0, 0, 0.04) 0 ${$(12)} ${$(12)} ${$(-7)}`,xl:`0 ${$(1)} ${$(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$(36)} ${$(28)} ${$(-7)}, rgba(0, 0, 0, 0.04) 0 ${$(17)} ${$(17)} ${$(-7)}`},other:{},components:{}};function $w(t){return t==="auto"||t==="dark"||t==="light"}function pL({key:t="mantine-color-scheme-value"}={}){let e;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(t);return $w(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(t,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{e=r=>{r.storageArea===window.localStorage&&r.key===t&&$w(r.newValue)&&n(r.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const mL="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",Uw="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Nm(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function Hw(t){if(!(t.primaryColor in t.colors))throw new Error(mL);if(typeof t.primaryShade=="object"&&(!Nm(t.primaryShade.dark)||!Nm(t.primaryShade.light)))throw new Error(Uw);if(typeof t.primaryShade=="number"&&!Nm(t.primaryShade))throw new Error(Uw)}function gL(t,e){if(!e)return Hw(t),t;const n=m_(t,e);return e.fontFamily&&!e.headings?.fontFamily&&(n.headings.fontFamily=e.fontFamily),Hw(n),n}const w_=b.createContext(null),yL=()=>b.useContext(w_)||b_;function sn(){const t=b.useContext(w_);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function CP({theme:t,children:e,inherit:n=!0}){const r=yL(),i=b.useMemo(()=>gL(n?r:b_,t),[t,r,n]);return x.jsx(w_.Provider,{value:i,children:e})}CP.displayName="@mantine/core/MantineThemeProvider";function vL(){const t=sn(),e=Vf(),n=Qe(t.breakpoints).reduce((r,i)=>{const s=t.breakpoints[i].includes("px"),o=qy(t.breakpoints[i]),a=s?`${o-.1}px`:Gd(o-.1),l=s?`${o}px`:Gd(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return x.jsx("style",{"data-mantine-styles":"classes",nonce:e?.(),dangerouslySetInnerHTML:{__html:n}})}function Lm(t){return Object.entries(t).map(([e,n])=>`${e}: ${n};`).join("")}function Pl(t,e){return(Array.isArray(t)?t:[t]).reduce((r,i)=>`${i}{${r}}`,e)}function _L(t,e){const n=Lm(t.variables),r=n?Pl(e,n):"",i=Lm(t.dark),s=Lm(t.light),o=i?Pl(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,i):"",a=s?Pl(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function xL({color:t,theme:e,autoContrast:n}){return e.autoContrast&&su({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function jw(t,e){return xL({color:t.colors[t.primaryColor][Lc(t,e)],theme:t,autoContrast:null})}function th({theme:t,color:e,colorScheme:n,name:r=e,withColorValues:i=!0}){if(!t.colors[e])return{};if(n==="light"){const a=Lc(t,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:Io(t.colors[e][a],.1),[`--mantine-color-${r}-light-hover`]:Io(t.colors[e][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:Io(t.colors[e][a],.05)};return i?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...l}:l}const s=Lc(t,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:Io(t.colors[e][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:Io(t.colors[e][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Io(t.colors[e][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...o}:o}function bL(t){return!!t&&typeof t=="object"&&"mantine-virtual-color"in t}function ko(t,e,n){Qe(e).forEach(r=>Object.assign(t,{[`--mantine-${n}-${r}`]:e[r]}))}const PP=t=>{const e=Lc(t,"light"),n=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:$(t.defaultRadius),r={variables:{"--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":jw(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":jw(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};ko(r.variables,t.breakpoints,"breakpoint"),ko(r.variables,t.spacing,"spacing"),ko(r.variables,t.fontSizes,"font-size"),ko(r.variables,t.lineHeights,"line-height"),ko(r.variables,t.shadows,"shadow"),ko(r.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${t.primaryColor}-${o})`}),Qe(t.colors).forEach(s=>{const o=t.colors[s];if(bL(o)){Object.assign(r.light,th({theme:t,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,th({theme:t,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,l)=>{r.variables[`--mantine-color-${s}-${l}`]=a}),Object.assign(r.light,th({theme:t,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,th({theme:t,color:s,colorScheme:"dark",withColorValues:!1}))});const i=t.headings.sizes;return Qe(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||t.headings.fontWeight}),r};function wL({theme:t,generator:e}){const n=PP(t),r=e?.(t);return r?m_(n,r):n}const Bm=PP(b_);function SL(t){const e={variables:{},light:{},dark:{}};return Qe(t.variables).forEach(n=>{Bm.variables[n]!==t.variables[n]&&(e.variables[n]=t.variables[n])}),Qe(t.light).forEach(n=>{Bm.light[n]!==t.light[n]&&(e.light[n]=t.light[n])}),Qe(t.dark).forEach(n=>{Bm.dark[n]!==t.dark[n]&&(e.dark[n]=t.dark[n])}),e}function EL(t){return`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function AP({cssVariablesSelector:t,deduplicateCssVariables:e}){const n=sn(),r=Vf(),i=eL(),s=wL({theme:n,generator:i}),o=t===":root"&&e,a=o?SL(s):s,l=_L(a,t);return l?x.jsx("style",{"data-mantine-styles":!0,nonce:r?.(),dangerouslySetInnerHTML:{__html:`${l}${o?"":EL(t)}`}}):null}AP.displayName="@mantine/CssVariables";function TL(){const t=console.error;console.error=(...e)=>{e.length>1&&typeof e[0]=="string"&&e[0].toLowerCase().includes("extra attributes from the server")&&typeof e[1]=="string"&&e[1].toLowerCase().includes("data-mantine-color-scheme")||t(...e)}}function Mo(t,e){const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)")?.matches,r=t!=="auto"?t:n?"dark":"light";e()?.setAttribute("data-mantine-color-scheme",r)}function CL({manager:t,defaultColorScheme:e,getRootElement:n,forceColorScheme:r}){const i=b.useRef(null),[s,o]=b.useState(()=>t.get(e)),a=r||s,l=b.useCallback(d=>{r||(Mo(d,n),o(d),t.set(d))},[t.set,a,r]),c=b.useCallback(()=>{o(e),Mo(e,n),t.clear()},[t.clear,e]);return b.useEffect(()=>(t.subscribe(l),t.unsubscribe),[t.subscribe,t.unsubscribe]),Za(()=>{Mo(t.get(e),n)},[]),b.useEffect(()=>{if(r)return Mo(r,n),()=>{};r===void 0&&Mo(s,n),typeof window<"u"&&"matchMedia"in window&&(i.current=window.matchMedia("(prefers-color-scheme: dark)"));const d=u=>{s==="auto"&&Mo(u.matches?"dark":"light",n)};return i.current?.addEventListener("change",d),()=>i.current?.removeEventListener("change",d)},[s,r]),{colorScheme:a,setColorScheme:l,clearColorScheme:c}}function PL({respectReducedMotion:t,getRootElement:e}){Za(()=>{t&&e()?.setAttribute("data-respect-reduced-motion","true")},[t])}TL();function RP({theme:t,children:e,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:c=pL(),defaultColorScheme:d="light",getRootElement:u=()=>document.documentElement,cssVariablesResolver:h,forceColorScheme:f,stylesTransform:p,env:m}){const{colorScheme:y,setColorScheme:g,clearColorScheme:_}=CL({defaultColorScheme:d,forceColorScheme:f,manager:c,getRootElement:u});return PL({respectReducedMotion:t?.respectReducedMotion||!1,getRootElement:u}),x.jsx(__.Provider,{value:{colorScheme:y,setColorScheme:g,clearColorScheme:_,getRootElement:u,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:h,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p,env:m},children:x.jsxs(CP,{theme:t,children:[o&&x.jsx(AP,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&x.jsx(vL,{}),e]})})}RP.displayName="@mantine/core/MantineProvider";function Xf({classNames:t,styles:e,props:n,stylesCtx:r}){const i=sn();return{resolvedClassNames:Wf({theme:i,classNames:t,props:n,stylesCtx:r||void 0}),resolvedStyles:Xd({theme:i,styles:e,props:n,stylesCtx:r||void 0})}}const AL={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function RL({theme:t,options:e,unstyled:n}){return _t(e?.focusable&&!n&&(t.focusClassName||AL[t.focusRing]),e?.active&&!n&&t.activeClassName)}function IL({selector:t,stylesCtx:e,options:n,props:r,theme:i}){return Wf({theme:i,classNames:n?.classNames,props:n?.props||r,stylesCtx:e})[t]}function Gw({selector:t,stylesCtx:e,theme:n,classNames:r,props:i}){return Wf({theme:n,classNames:r,props:i,stylesCtx:e})[t]}function kL({rootSelector:t,selector:e,className:n}){return t===e?n:void 0}function ML({selector:t,classes:e,unstyled:n}){return n?void 0:e[t]}function DL({themeName:t,classNamesPrefix:e,selector:n,withStaticClass:r}){return r===!1?[]:t.map(i=>`${e}-${i}-${n}`)}function OL({themeName:t,theme:e,selector:n,props:r,stylesCtx:i}){return t.map(s=>Wf({theme:e,classNames:e.components[s]?.classNames,props:r,stylesCtx:i})?.[n])}function NL({options:t,classes:e,selector:n,unstyled:r}){return t?.variant&&!r?e[`${n}--${t.variant}`]:void 0}function LL({theme:t,options:e,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:l,rootSelector:c,props:d,stylesCtx:u,withStaticClasses:h,headless:f,transformedStyles:p}){return _t(RL({theme:t,options:e,unstyled:a||f}),OL({theme:t,themeName:n,selector:r,props:d,stylesCtx:u}),NL({options:e,classes:o,selector:r,unstyled:a}),Gw({selector:r,stylesCtx:u,theme:t,classNames:s,props:d}),Gw({selector:r,stylesCtx:u,theme:t,classNames:p,props:d}),IL({selector:r,stylesCtx:u,options:e,props:d,theme:t}),kL({rootSelector:c,selector:r,className:l}),ML({selector:r,classes:o,unstyled:a||f}),h&&!f&&DL({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:e?.withStaticClass}),e?.className)}function BL({theme:t,themeName:e,props:n,stylesCtx:r,selector:i}){return e.map(s=>Xd({theme:t,styles:t.components[s]?.styles,props:n,stylesCtx:r})[i]).reduce((s,o)=>({...s,...o}),{})}function ev({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...ev({style:r,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function FL(t){return t.reduce((e,n)=>(n&&Object.keys(n).forEach(r=>{e[r]={...e[r],...qa(n[r])}}),e),{})}function $L({vars:t,varsResolver:e,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){return FL([a?{}:e?.(n,r,i),...o.map(l=>n.components?.[l]?.vars?.(n,r,i)),t?.(n,r,i)])?.[s]}function UL({theme:t,themeName:e,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:l,vars:c,varsResolver:d,headless:u,withStylesTransform:h}){return{...!h&&BL({theme:t,themeName:e,props:i,stylesCtx:s,selector:n}),...!h&&Xd({theme:t,styles:a,props:i,stylesCtx:s})[n],...!h&&Xd({theme:t,styles:r?.styles,props:r?.props||i,stylesCtx:s})[n],...$L({theme:t,props:i,stylesCtx:s,vars:c,varsResolver:d,selector:n,themeName:e,headless:u}),...o===n?ev({style:l,theme:t}):null,...ev({style:r?.style,theme:t})}}function HL({props:t,stylesCtx:e,themeName:n}){const r=sn(),i=sL()?.();return{getTransformedStyles:o=>i?[...o.map(l=>i(l,{props:t,theme:r,ctx:e})),...n.map(l=>i(r.components[l]?.styles,{props:t,theme:r,ctx:e}))].filter(Boolean):[],withStylesTransform:!!i}}function de({name:t,classes:e,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:l,styles:c,vars:d,varsResolver:u}){const h=sn(),f=tL(),p=nL(),m=rL(),y=(Array.isArray(t)?t:[t]).filter(v=>v),{withStylesTransform:g,getTransformedStyles:_}=HL({props:n,stylesCtx:r,themeName:y});return(v,w)=>({className:LL({theme:h,options:w,themeName:y,selector:v,classNamesPrefix:f,classNames:l,classes:e,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:_([w?.styles,c])}),style:UL({theme:h,themeName:y,selector:v,options:w,props:n,stylesCtx:r,rootSelector:o,styles:c,style:s,vars:d,varsResolver:u,headless:m,withStylesTransform:g})})}function zw(t){const e=document.createElement("style");return e.setAttribute("data-mantine-styles","inline"),e.innerHTML="*, *::before, *::after {transition: none !important;}",e.setAttribute("data-mantine-disable-transition","true"),t&&e.setAttribute("nonce",t),document.head.appendChild(e),()=>document.querySelectorAll("[data-mantine-disable-transition]").forEach(r=>r.remove())}function jL({keepTransitions:t}={}){const e=b.useRef(gP),n=b.useRef(-1),r=b.useContext(__),i=Vf(),s=b.useRef(i?.());if(!r)throw new Error("[@mantine/core] MantineProvider was not found in tree");const o=u=>{r.setColorScheme(u),e.current=t?()=>{}:zw(s.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{e.current?.()},10)},a=()=>{r.clearColorScheme(),e.current=t?()=>{}:zw(s.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{e.current?.()},10)},l=HN("light",{getInitialValueInEffect:!1}),c=r.colorScheme==="auto"?l:r.colorScheme,d=b.useCallback(()=>o(c==="light"?"dark":"light"),[o,c]);return b.useEffect(()=>()=>{e.current?.(),window.clearTimeout(n.current)},[]),{colorScheme:r.colorScheme,setColorScheme:o,clearColorScheme:a,toggleColorScheme:d}}function G(t,e,n){const r=sn(),i=r.components[t]?.defaultProps,s=typeof i=="function"?i(r):i;return{...e,...s,...qa(n)}}function Fm(t){return Qe(t).reduce((e,n)=>t[n]!==void 0?`${e}${PN(n)}:${t[n]};`:e,"").trim()}function GL({selector:t,styles:e,media:n,container:r}){const i=e?Fm(e):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${t}{${Fm(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${t}{${Fm(a.styles)}}}`):[];return`${i?`${t}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function ou(t){const e=Vf();return x.jsx("style",{"data-mantine-styles":"inline",nonce:e?.(),dangerouslySetInnerHTML:{__html:GL(t)}})}function au(t){const{m:e,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:l,ms:c,p:d,px:u,py:h,pt:f,pb:p,pl:m,pr:y,pe:g,ps:_,bd:v,bg:w,c:S,opacity:E,ff:T,fz:C,fw:A,lts:P,ta:O,lh:U,fs:k,tt:I,td:F,w:N,miw:B,maw:R,h:M,mih:D,mah:L,bgsz:j,bgp:ee,bgr:ie,bga:ce,pos:re,top:oe,left:_e,bottom:xe,right:me,inset:ge,display:Re,flex:Ie,hiddenFrom:ke,visibleFrom:Se,lightHidden:De,darkHidden:_n,sx:on,...at}=t;return{styleProps:qa({m:e,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:l,ms:c,p:d,px:u,py:h,pt:f,pb:p,pl:m,pr:y,pe:g,ps:_,bd:v,bg:w,c:S,opacity:E,ff:T,fz:C,fw:A,lts:P,ta:O,lh:U,fs:k,tt:I,td:F,w:N,miw:B,maw:R,h:M,mih:D,mah:L,bgsz:j,bgp:ee,bgr:ie,bga:ce,pos:re,top:oe,left:_e,bottom:xe,right:me,inset:ge,display:Re,flex:Ie,hiddenFrom:ke,visibleFrom:Se,lightHidden:De,darkHidden:_n,sx:on}),rest:at}}const zL={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function S_(t,e){const n=su({color:t,theme:e});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function WL(t,e){const n=su({color:t,theme:e});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:S_(t,e)}function VL(t,e){if(typeof t=="number")return $(t);if(typeof t=="string"){const[n,r,...i]=t.split(" ").filter(o=>o.trim()!=="");let s=`${$(n)}`;return r&&(s+=` ${r}`),i.length>0&&(s+=` ${S_(i.join(" "),e)}`),s.trim()}return t}const Ww={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function XL(t){return typeof t=="string"&&t in Ww?Ww[t]:t}const YL=["h1","h2","h3","h4","h5","h6"];function KL(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="string"&&YL.includes(t)?`var(--mantine-${t}-font-size)`:typeof t=="number"||typeof t=="string"?$(t):t}function qL(t){return t}const ZL=["h1","h2","h3","h4","h5","h6"];function QL(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:typeof t=="string"&&ZL.includes(t)?`var(--mantine-${t}-line-height)`:t}function JL(t){return typeof t=="number"?$(t):t}function eB(t,e){if(typeof t=="number")return $(t);if(typeof t=="string"){const n=t.replace("-","");if(!(n in e.spacing))return $(t);const r=`--mantine-spacing-${n}`;return t.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return t}const $m={color:S_,textColor:WL,fontSize:KL,spacing:eB,identity:qL,size:JL,lineHeight:QL,fontFamily:XL,border:VL};function Vw(t){return t.replace("(min-width: ","").replace("em)","")}function tB({media:t,...e}){const r=Object.keys(t).sort((i,s)=>Number(Vw(i))-Number(Vw(s))).map(i=>({query:i,styles:t[i]}));return{...e,media:r}}function nB(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function rB(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function iB(t){return typeof t=="object"&&t!==null?Qe(t).filter(e=>e!=="base"):[]}function sB(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function IP({styleProps:t,data:e,theme:n}){return tB(Qe(t).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=e[i],o=Array.isArray(s.property)?s.property:[s.property],a=rB(t[i]);if(!nB(t[i]))return o.forEach(c=>{r.inlineStyles[c]=$m[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const l=iB(t[i]);return o.forEach(c=>{a&&(r.styles[c]=$m[s.type](a,n)),l.forEach(d=>{const u=`(min-width: ${n.breakpoints[d]})`;r.media[u]={...r.media[u],[c]:$m[s.type](sB(t[i],d),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function Yf(){return`__m__-${b.useId().replace(/:/g,"")}`}function E_(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...E_(r,e)}),{}):typeof t=="function"?t(e):t??{}}function kP(t){return t.startsWith("data-")?t:`data-${t}`}function oB(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return r===void 0||r===""||r===!1||r===null||(e[kP(n)]=t[n]),e},{})}function MP(t){return t?typeof t=="string"?{[kP(t)]:!0}:Array.isArray(t)?[...t].reduce((e,n)=>({...e,...MP(n)}),{}):oB(t):null}function tv(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...tv(r,e)}),{}):typeof t=="function"?t(e):t??{}}function aB({theme:t,style:e,vars:n,styleProps:r}){const i=tv(e,t),s=tv(n,t);return{...i,...s,...r}}const DP=b.forwardRef(({component:t,style:e,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:l,lightHidden:c,darkHidden:d,renderRoot:u,__size:h,...f},p)=>{const m=sn(),y=t||"div",{styleProps:g,rest:_}=au(f),w=iL()?.()?.(g.sx),S=Yf(),E=IP({styleProps:g,theme:m,data:zL}),T={ref:p,style:aB({theme:m,style:e,vars:n,styleProps:E.inlineStyles}),className:_t(r,w,{[S]:E.hasResponsiveStyles,"mantine-light-hidden":c,"mantine-dark-hidden":d,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":i,"data-size":mP(o)?void 0:o||void 0,size:h,...MP(s),..._};return x.jsxs(x.Fragment,{children:[E.hasResponsiveStyles&&x.jsx(ou,{selector:`.${S}`,styles:E.styles,media:E.media}),typeof u=="function"?u(T):x.jsx(y,{...T})]})});DP.displayName="@mantine/core/Box";const W=DP;function OP(t){return t}function lB(t){const e=t;return n=>{const r=b.forwardRef((i,s)=>x.jsx(e,{...n,...i,ref:s}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r}}function K(t){const e=b.forwardRef(t);return e.extend=OP,e.withProps=n=>{const r=b.forwardRef((i,s)=>x.jsx(e,{...n,...i,ref:s}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e}function vn(t){const e=b.forwardRef(t);return e.withProps=n=>{const r=b.forwardRef((i,s)=>x.jsx(e,{...n,...i,ref:s}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e.extend=OP,e}const cB=b.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function lu(){return b.useContext(cB)}function uB(t){if(!t||typeof t=="string")return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function Um(t){return t?.current?t.current.scrollHeight:"auto"}const Al=typeof window<"u"&&window.requestAnimationFrame;function hB({transitionDuration:t,transitionTimingFunction:e="ease",onTransitionEnd:n=()=>{},opened:r}){const i=b.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,l]=b.useState(r?{}:o),c=p=>{ru.flushSync(()=>l(p))},d=p=>{c(m=>({...m,...p}))};function u(p){const m=t||uB(p);return{transition:`height ${m}ms ${e}, opacity ${m}ms ${e}`}}gs(()=>{typeof Al=="function"&&Al(r?()=>{d({willChange:"height",display:"block",overflow:"hidden"}),Al(()=>{const p=Um(i);d({...u(p),height:p})})}:()=>{const p=Um(i);d({...u(p),willChange:"height",height:p}),Al(()=>d({height:s,overflow:"hidden"}))})},[r]);const h=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=Um(i);m===a.height?c({}):d({height:m}),n()}else a.height===s&&(c(o),n())};function f({style:p={},refKey:m="ref",...y}={}){const g=y[m];return{"aria-hidden":!r,...y,[m]:SP(i,g),onTransitionEnd:h,style:{boxSizing:"border-box",...p,...a}}}return f}const dB={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},NP=K((t,e)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:l,...c}=G("Collapse",dB,t),d=sn(),u=v_(),f=(d.respectReducedMotion?u:!1)?0:i,p=hB({opened:r,transitionDuration:f,transitionTimingFunction:s,onTransitionEnd:a});return f===0?r?x.jsx(W,{...c,children:n}):null:x.jsx(W,{...p({style:{opacity:r||!l?1:0,transition:l?`opacity ${f}ms ${s}`:"none",...E_(o,d)},ref:e,...c}),children:n})});NP.displayName="@mantine/core/Collapse";function Kf(){return typeof window<"u"}function Qa(t){return LP(t)?(t.nodeName||"").toLowerCase():"#document"}function gn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ui(t){var e;return(e=(LP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function LP(t){return Kf()?t instanceof Node||t instanceof gn(t).Node:!1}function je(t){return Kf()?t instanceof Element||t instanceof gn(t).Element:!1}function In(t){return Kf()?t instanceof HTMLElement||t instanceof gn(t).HTMLElement:!1}function nv(t){return!Kf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof gn(t).ShadowRoot}function cu(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=qn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function fB(t){return["table","td","th"].includes(Qa(t))}function qf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function T_(t){const e=Zf(),n=je(t)?qn(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function pB(t){let e=Mi(t);for(;In(e)&&!ys(e);){if(T_(e))return e;if(qf(e))return null;e=Mi(e)}return null}function Zf(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ys(t){return["html","body","#document"].includes(Qa(t))}function qn(t){return gn(t).getComputedStyle(t)}function Qf(t){return je(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Mi(t){if(Qa(t)==="html")return t;const e=t.assignedSlot||t.parentNode||nv(t)&&t.host||ui(t);return nv(e)?e.host:e}function BP(t){const e=Mi(t);return ys(e)?t.ownerDocument?t.ownerDocument.body:t.body:In(e)&&cu(e)?e:BP(e)}function Ti(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=BP(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=gn(i);if(s){const a=rv(o);return e.concat(o,o.visualViewport||[],cu(i)?i:[],a&&n?Ti(a):[])}return e.concat(i,Ti(i,[],n))}function rv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Xw(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function Bc(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&nv(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function FP(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function $P(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function mB(t){return vB()?!1:!Yw()&&t.width===0&&t.height===0||Yw()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function gB(){return/apple/i.test(navigator.vendor)}function Yw(){const t=/android/i;return t.test(FP())||t.test($P())}function yB(){return FP().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function vB(){return $P().includes("jsdom/")}function iv(t,e){const n=["mouse","pen"];return n.push("",void 0),n.includes(t)}function _B(t){return"nativeEvent"in t}function xB(t){return t.matches("html,body")}function Gs(t){return t?.ownerDocument||document}function Hm(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function Fo(t){return"composedPath"in t?t.composedPath()[0]:t.target}const bB="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function wB(t){return In(t)&&t.matches(bB)}const Rr=Math.min,Ht=Math.max,Yd=Math.round,nh=Math.floor,ei=t=>({x:t,y:t}),SB={left:"right",right:"left",bottom:"top",top:"bottom"},EB={start:"end",end:"start"};function sv(t,e,n){return Ht(t,Rr(e,n))}function Di(t,e){return typeof t=="function"?t(e):t}function Ir(t){return t.split("-")[0]}function Ja(t){return t.split("-")[1]}function C_(t){return t==="x"?"y":"x"}function P_(t){return t==="y"?"height":"width"}function Oi(t){return["top","bottom"].includes(Ir(t))?"y":"x"}function A_(t){return C_(Oi(t))}function TB(t,e,n){n===void 0&&(n=!1);const r=Ja(t),i=A_(t),s=P_(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Kd(o)),[o,Kd(o)]}function CB(t){const e=Kd(t);return[ov(t),e,ov(e)]}function ov(t){return t.replace(/start|end/g,e=>EB[e])}function PB(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function AB(t,e,n,r){const i=Ja(t);let s=PB(Ir(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(ov)))),s}function Kd(t){return t.replace(/left|right|bottom|top/g,e=>SB[e])}function RB(t){return{top:0,right:0,bottom:0,left:0,...t}}function R_(t){return typeof t!="number"?RB(t):{top:t,right:t,bottom:t,left:t}}function Da(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function Kw(t,e,n){let{reference:r,floating:i}=t;const s=Oi(e),o=A_(e),a=P_(o),l=Ir(e),c=s==="y",d=r.x+r.width/2-i.width/2,u=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let f;switch(l){case"top":f={x:d,y:r.y-i.height};break;case"bottom":f={x:d,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:u};break;case"left":f={x:r.x-i.width,y:u};break;default:f={x:r.x,y:r.y}}switch(Ja(e)){case"start":f[o]-=h*(n&&c?-1:1);break;case"end":f[o]+=h*(n&&c?-1:1);break}return f}const IB=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:u}=Kw(c,r,l),h=r,f={},p=0;for(let m=0;m<a.length;m++){const{name:y,fn:g}=a[m],{x:_,y:v,data:w,reset:S}=await g({x:d,y:u,initialPlacement:r,placement:h,strategy:i,middlewareData:f,rects:c,platform:o,elements:{reference:t,floating:e}});d=_??d,u=v??u,f={...f,[y]:{...f[y],...w}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:d,y:u}=Kw(c,h,l)),m=-1)}return{x:d,y:u,placement:h,strategy:i,middlewareData:f}};async function I_(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:f=0}=Di(e,t),p=R_(f),y=a[h?u==="floating"?"reference":"floating":u],g=Da(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),_=u==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(v))?await(s.getScale==null?void 0:s.getScale(v))||{x:1,y:1}:{x:1,y:1},S=Da(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:v,strategy:l}):_);return{top:(g.top-S.top+p.top)/w.y,bottom:(S.bottom-g.bottom+p.bottom)/w.y,left:(g.left-S.left+p.left)/w.x,right:(S.right-g.right+p.right)/w.x}}const kB=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Di(t,e)||{};if(c==null)return{};const u=R_(d),h={x:n,y:r},f=A_(i),p=P_(f),m=await o.getDimensions(c),y=f==="y",g=y?"top":"left",_=y?"bottom":"right",v=y?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[f]-h[f]-s.floating[p],S=h[f]-s.reference[f],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let T=E?E[v]:0;(!T||!await(o.isElement==null?void 0:o.isElement(E)))&&(T=a.floating[v]||s.floating[p]);const C=w/2-S/2,A=T/2-m[p]/2-1,P=Rr(u[g],A),O=Rr(u[_],A),U=P,k=T-m[p]-O,I=T/2-m[p]/2+C,F=sv(U,I,k),N=!l.arrow&&Ja(i)!=null&&I!==F&&s.reference[p]/2-(I<U?P:O)-m[p]/2<0,B=N?I<U?I-U:I-k:0;return{[f]:h[f]+B,data:{[f]:F,centerOffset:I-F-B,...N&&{alignmentOffset:B}},reset:N}}}),MB=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...y}=Di(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const g=Ir(i),_=Oi(a),v=Ir(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=h||(v||!m?[Kd(a)]:CB(a)),E=p!=="none";!h&&E&&S.push(...AB(a,m,p,w));const T=[a,...S],C=await I_(e,y),A=[];let P=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&A.push(C[g]),u){const I=TB(i,o,w);A.push(C[I[0]],C[I[1]])}if(P=[...P,{placement:i,overflows:A}],!A.every(I=>I<=0)){var O,U;const I=(((O=s.flip)==null?void 0:O.index)||0)+1,F=T[I];if(F)return{data:{index:I,overflows:P},reset:{placement:F}};let N=(U=P.filter(B=>B.overflows[0]<=0).sort((B,R)=>B.overflows[1]-R.overflows[1])[0])==null?void 0:U.placement;if(!N)switch(f){case"bestFit":{var k;const B=(k=P.filter(R=>{if(E){const M=Oi(R.placement);return M===_||M==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(M=>M>0).reduce((M,D)=>M+D,0)]).sort((R,M)=>R[1]-M[1])[0])==null?void 0:k[0];B&&(N=B);break}case"initialPlacement":N=a;break}if(i!==N)return{reset:{placement:N}}}return{}}}};function UP(t){const e=Rr(...t.map(s=>s.left)),n=Rr(...t.map(s=>s.top)),r=Ht(...t.map(s=>s.right)),i=Ht(...t.map(s=>s.bottom));return{x:e,y:n,width:r-e,height:i-n}}function DB(t){const e=t.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<e.length;i++){const s=e[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>Da(UP(i)))}const OB=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=e,{padding:a=2,x:l,y:c}=Di(t,e),d=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),u=DB(d),h=Da(UP(d)),f=R_(a);function p(){if(u.length===2&&u[0].left>u[1].right&&l!=null&&c!=null)return u.find(y=>l>y.left-f.left&&l<y.right+f.right&&c>y.top-f.top&&c<y.bottom+f.bottom)||h;if(u.length>=2){if(Oi(n)==="y"){const P=u[0],O=u[u.length-1],U=Ir(n)==="top",k=P.top,I=O.bottom,F=U?P.left:O.left,N=U?P.right:O.right,B=N-F,R=I-k;return{top:k,bottom:I,left:F,right:N,width:B,height:R,x:F,y:k}}const y=Ir(n)==="left",g=Ht(...u.map(P=>P.right)),_=Rr(...u.map(P=>P.left)),v=u.filter(P=>y?P.left===_:P.right===g),w=v[0].top,S=v[v.length-1].bottom,E=_,T=g,C=T-E,A=S-w;return{top:w,bottom:S,left:E,right:T,width:C,height:A,x:E,y:w}}return h}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function NB(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ir(n),a=Ja(n),l=Oi(n)==="y",c=["left","top"].includes(o)?-1:1,d=s&&l?-1:1,u=Di(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*d,y:h*c}:{x:h*c,y:f*d}}const LB=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await NB(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},BB=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:g,y:_}=y;return{x:g,y:_}}},...l}=Di(t,e),c={x:n,y:r},d=await I_(e,l),u=Oi(Ir(i)),h=C_(u);let f=c[h],p=c[u];if(s){const y=h==="y"?"top":"left",g=h==="y"?"bottom":"right",_=f+d[y],v=f-d[g];f=sv(_,f,v)}if(o){const y=u==="y"?"top":"left",g=u==="y"?"bottom":"right",_=p+d[y],v=p-d[g];p=sv(_,p,v)}const m=a.fn({...e,[h]:f,[u]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:s,[u]:o}}}}}},FB=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Di(t,e),d={x:n,y:r},u=Oi(i),h=C_(u);let f=d[h],p=d[u];const m=Di(a,e),y=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const v=h==="y"?"height":"width",w=s.reference[h]-s.floating[v]+y.mainAxis,S=s.reference[h]+s.reference[v]-y.mainAxis;f<w?f=w:f>S&&(f=S)}if(c){var g,_;const v=h==="y"?"width":"height",w=["top","left"].includes(Ir(i)),S=s.reference[u]-s.floating[v]+(w&&((g=o.offset)==null?void 0:g[u])||0)+(w?0:y.crossAxis),E=s.reference[u]+s.reference[v]+(w?0:((_=o.offset)==null?void 0:_[u])||0)-(w?y.crossAxis:0);p<S?p=S:p>E&&(p=E)}return{[h]:f,[u]:p}}}},$B=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Di(t,e),d=await I_(e,c),u=Ir(i),h=Ja(i),f=Oi(i)==="y",{width:p,height:m}=s.floating;let y,g;u==="top"||u==="bottom"?(y=u,g=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(g=u,y=h==="end"?"top":"bottom");const _=m-d.top-d.bottom,v=p-d.left-d.right,w=Rr(m-d[y],_),S=Rr(p-d[g],v),E=!e.middlewareData.shift;let T=w,C=S;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=v),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=_),E&&!h){const P=Ht(d.left,0),O=Ht(d.right,0),U=Ht(d.top,0),k=Ht(d.bottom,0);f?C=p-2*(P!==0||O!==0?P+O:Ht(d.left,d.right)):T=m-2*(U!==0||k!==0?U+k:Ht(d.top,d.bottom))}await l({...e,availableWidth:C,availableHeight:T});const A=await o.getDimensions(a.floating);return p!==A.width||m!==A.height?{reset:{rects:!0}}:{}}}};function HP(t){const e=qn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=In(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Yd(n)!==s||Yd(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function k_(t){return je(t)?t:t.contextElement}function pa(t){const e=k_(t);if(!In(e))return ei(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=HP(e);let o=(s?Yd(n.width):n.width)/r,a=(s?Yd(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const UB=ei(0);function jP(t){const e=gn(t);return!Zf()||!e.visualViewport?UB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function HB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==gn(t)?!1:e}function no(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=k_(t);let o=ei(1);e&&(r?je(r)&&(o=pa(r)):o=pa(t));const a=HB(s,n,r)?jP(s):ei(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,d=i.width/o.x,u=i.height/o.y;if(s){const h=gn(s),f=r&&je(r)?gn(r):r;let p=h,m=rv(p);for(;m&&r&&f!==p;){const y=pa(m),g=m.getBoundingClientRect(),_=qn(m),v=g.left+(m.clientLeft+parseFloat(_.paddingLeft))*y.x,w=g.top+(m.clientTop+parseFloat(_.paddingTop))*y.y;l*=y.x,c*=y.y,d*=y.x,u*=y.y,l+=v,c+=w,p=gn(m),m=rv(p)}}return Da({width:d,height:u,x:l,y:c})}function M_(t,e){const n=Qf(t).scrollLeft;return e?e.left+n:no(ui(t)).left+n}function GP(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:M_(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function jB(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=ui(r),a=e?qf(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=ei(1);const d=ei(0),u=In(r);if((u||!u&&!s)&&((Qa(r)!=="body"||cu(o))&&(l=Qf(r)),In(r))){const f=no(r);c=pa(r),d.x=f.x+r.clientLeft,d.y=f.y+r.clientTop}const h=o&&!u&&!s?GP(o,l,!0):ei(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:n.y*c.y-l.scrollTop*c.y+d.y+h.y}}function GB(t){return Array.from(t.getClientRects())}function zB(t){const e=ui(t),n=Qf(t),r=t.ownerDocument.body,i=Ht(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Ht(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+M_(t);const a=-n.scrollTop;return qn(r).direction==="rtl"&&(o+=Ht(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function WB(t,e){const n=gn(t),r=ui(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=Zf();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function VB(t,e){const n=no(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=In(t)?pa(t):ei(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function qw(t,e,n){let r;if(e==="viewport")r=WB(t,n);else if(e==="document")r=zB(ui(t));else if(je(e))r=VB(e,n);else{const i=jP(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Da(r)}function zP(t,e){const n=Mi(t);return n===e||!je(n)||ys(n)?!1:qn(n).position==="fixed"||zP(n,e)}function XB(t,e){const n=e.get(t);if(n)return n;let r=Ti(t,[],!1).filter(a=>je(a)&&Qa(a)!=="body"),i=null;const s=qn(t).position==="fixed";let o=s?Mi(t):t;for(;je(o)&&!ys(o);){const a=qn(o),l=T_(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||cu(o)&&!l&&zP(t,o))?r=r.filter(d=>d!==o):i=a,o=Mi(o)}return e.set(t,r),r}function YB(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?qf(e)?[]:XB(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const u=qw(e,d,i);return c.top=Ht(u.top,c.top),c.right=Rr(u.right,c.right),c.bottom=Rr(u.bottom,c.bottom),c.left=Ht(u.left,c.left),c},qw(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function KB(t){const{width:e,height:n}=HP(t);return{width:e,height:n}}function qB(t,e,n){const r=In(e),i=ui(e),s=n==="fixed",o=no(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=ei(0);if(r||!r&&!s)if((Qa(e)!=="body"||cu(i))&&(a=Qf(e)),r){const h=no(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&(l.x=M_(i));const c=i&&!r&&!s?GP(i,a):ei(0),d=o.left+a.scrollLeft-l.x-c.x,u=o.top+a.scrollTop-l.y-c.y;return{x:d,y:u,width:o.width,height:o.height}}function jm(t){return qn(t).position==="static"}function Zw(t,e){if(!In(t)||qn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ui(t)===n&&(n=n.ownerDocument.body),n}function WP(t,e){const n=gn(t);if(qf(t))return n;if(!In(t)){let i=Mi(t);for(;i&&!ys(i);){if(je(i)&&!jm(i))return i;i=Mi(i)}return n}let r=Zw(t,e);for(;r&&fB(r)&&jm(r);)r=Zw(r,e);return r&&ys(r)&&jm(r)&&!T_(r)?n:r||pB(t)||n}const ZB=async function(t){const e=this.getOffsetParent||WP,n=this.getDimensions,r=await n(t.floating);return{reference:qB(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function QB(t){return qn(t).direction==="rtl"}const JB={convertOffsetParentRelativeRectToViewportRelativeRect:jB,getDocumentElement:ui,getClippingRect:YB,getOffsetParent:WP,getElementRects:ZB,getClientRects:GB,getDimensions:KB,getScale:pa,isElement:je,isRTL:QB};function VP(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function e3(t,e){let n=null,r;const i=ui(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:d,top:u,width:h,height:f}=c;if(a||e(),!h||!f)return;const p=nh(u),m=nh(i.clientWidth-(d+h)),y=nh(i.clientHeight-(u+f)),g=nh(d),v={rootMargin:-p+"px "+-m+"px "+-y+"px "+-g+"px",threshold:Ht(0,Rr(1,l))||1};let w=!0;function S(E){const T=E[0].intersectionRatio;if(T!==l){if(!w)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!VP(c,t.getBoundingClientRect())&&o(),w=!1}try{n=new IntersectionObserver(S,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(S,v)}n.observe(t)}return o(!0),s}function t3(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=k_(t),d=i||s?[...c?Ti(c):[],...Ti(e)]:[];d.forEach(g=>{i&&g.addEventListener("scroll",n,{passive:!0}),s&&g.addEventListener("resize",n)});const u=c&&a?e3(c,n):null;let h=-1,f=null;o&&(f=new ResizeObserver(g=>{let[_]=g;_&&_.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var v;(v=f)==null||v.observe(e)})),n()}),c&&!l&&f.observe(c),f.observe(e));let p,m=l?no(t):null;l&&y();function y(){const g=no(t);m&&!VP(m,g)&&n(),m=g,p=requestAnimationFrame(y)}return n(),()=>{var g;d.forEach(_=>{i&&_.removeEventListener("scroll",n),s&&_.removeEventListener("resize",n)}),u?.(),(g=f)==null||g.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const n3=LB,r3=BB,i3=MB,s3=$B,Qw=kB,o3=OB,a3=FB,l3=(t,e,n)=>{const r=new Map,i={platform:JB,...n},s={...i.platform,_c:r};return IB(t,e,{...i,platform:s})};var Kh=typeof document<"u"?b.useLayoutEffect:b.useEffect;function qd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!qd(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!qd(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function XP(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Jw(t,e){const n=XP(t);return Math.round(e*n)/n}function Gm(t){const e=b.useRef(t);return Kh(()=>{e.current=t}),e}function c3(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,u]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=b.useState(r);qd(h,r)||f(r);const[p,m]=b.useState(null),[y,g]=b.useState(null),_=b.useCallback(R=>{R!==E.current&&(E.current=R,m(R))},[]),v=b.useCallback(R=>{R!==T.current&&(T.current=R,g(R))},[]),w=s||p,S=o||y,E=b.useRef(null),T=b.useRef(null),C=b.useRef(d),A=l!=null,P=Gm(l),O=Gm(i),U=Gm(c),k=b.useCallback(()=>{if(!E.current||!T.current)return;const R={placement:e,strategy:n,middleware:h};O.current&&(R.platform=O.current),l3(E.current,T.current,R).then(M=>{const D={...M,isPositioned:U.current!==!1};I.current&&!qd(C.current,D)&&(C.current=D,ru.flushSync(()=>{u(D)}))})},[h,e,n,O,U]);Kh(()=>{c===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,u(R=>({...R,isPositioned:!1})))},[c]);const I=b.useRef(!1);Kh(()=>(I.current=!0,()=>{I.current=!1}),[]),Kh(()=>{if(w&&(E.current=w),S&&(T.current=S),w&&S){if(P.current)return P.current(w,S,k);k()}},[w,S,k,P,A]);const F=b.useMemo(()=>({reference:E,floating:T,setReference:_,setFloating:v}),[_,v]),N=b.useMemo(()=>({reference:w,floating:S}),[w,S]),B=b.useMemo(()=>{const R={position:n,left:0,top:0};if(!N.floating)return R;const M=Jw(N.floating,d.x),D=Jw(N.floating,d.y);return a?{...R,transform:"translate("+M+"px, "+D+"px)",...XP(N.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:D}},[n,a,N.floating,d.x,d.y]);return b.useMemo(()=>({...d,update:k,refs:F,elements:N,floatingStyles:B}),[d,k,F,N,B])}const u3=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Qw({element:r.current,padding:i}).fn(n):{}:r?Qw({element:r,padding:i}).fn(n):{}}}},YP=(t,e)=>({...n3(t),options:[t,e]}),D_=(t,e)=>({...r3(t),options:[t,e]}),e1=(t,e)=>({...a3(t),options:[t,e]}),Zd=(t,e)=>({...i3(t),options:[t,e]}),h3=(t,e)=>({...s3(t),options:[t,e]}),dc=(t,e)=>({...o3(t),options:[t,e]}),KP=(t,e)=>({...u3(t),options:[t,e]});function d3(t){return b.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})},t)}const qP={...OM},f3=qP.useInsertionEffect,p3=f3||(t=>t());function xi(t){const e=b.useRef(()=>{});return p3(()=>{e.current=t}),b.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}var ti=typeof document<"u"?b.useLayoutEffect:b.useEffect;let t1=!1,m3=0;const n1=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+m3++;function g3(){const[t,e]=b.useState(()=>t1?n1():void 0);return ti(()=>{t==null&&e(n1())},[]),b.useEffect(()=>{t1=!0},[]),t}const y3=qP.useId,ZP=y3||g3;function v3(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const _3=b.createContext(null),x3=b.createContext(null),O_=()=>{var t;return((t=b.useContext(_3))==null?void 0:t.id)||null},N_=()=>b.useContext(x3);function L_(t){return"data-floating-ui-"+t}function zm(t){const e=b.useRef(t);return ti(()=>{e.current=t}),e}const r1=L_("safe-polygon");function qh(t,e,n){return n&&!iv(n)?0:typeof t=="number"?t:t?.[e]}function b3(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=t,{enabled:a=!0,delay:l=0,handleClose:c=null,mouseOnly:d=!1,restMs:u=0,move:h=!0}=e,f=N_(),p=O_(),m=zm(c),y=zm(l),g=zm(n),_=b.useRef(),v=b.useRef(-1),w=b.useRef(),S=b.useRef(-1),E=b.useRef(!0),T=b.useRef(!1),C=b.useRef(()=>{}),A=b.useRef(!1),P=b.useCallback(()=>{var B;const R=(B=i.current.openEvent)==null?void 0:B.type;return R?.includes("mouse")&&R!=="mousedown"},[i]);b.useEffect(()=>{if(!a)return;function B(R){let{open:M}=R;M||(clearTimeout(v.current),clearTimeout(S.current),E.current=!0,A.current=!1)}return s.on("openchange",B),()=>{s.off("openchange",B)}},[a,s]),b.useEffect(()=>{if(!a||!m.current||!n)return;function B(M){P()&&r(!1,M,"hover")}const R=Gs(o.floating).documentElement;return R.addEventListener("mouseleave",B),()=>{R.removeEventListener("mouseleave",B)}},[o.floating,n,r,a,m,P]);const O=b.useCallback(function(B,R,M){R===void 0&&(R=!0),M===void 0&&(M="hover");const D=qh(y.current,"close",_.current);D&&!w.current?(clearTimeout(v.current),v.current=window.setTimeout(()=>r(!1,B,M),D)):R&&(clearTimeout(v.current),r(!1,B,M))},[y,r]),U=xi(()=>{C.current(),w.current=void 0}),k=xi(()=>{if(T.current){const B=Gs(o.floating).body;B.style.pointerEvents="",B.removeAttribute(r1),T.current=!1}}),I=xi(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);b.useEffect(()=>{if(!a)return;function B(L){if(clearTimeout(v.current),E.current=!1,d&&!iv(_.current)||u>0&&!qh(y.current,"open"))return;const j=qh(y.current,"open",_.current);j?v.current=window.setTimeout(()=>{g.current||r(!0,L,"hover")},j):n||r(!0,L,"hover")}function R(L){if(I())return;C.current();const j=Gs(o.floating);if(clearTimeout(S.current),A.current=!1,m.current&&i.current.floatingContext){n||clearTimeout(v.current),w.current=m.current({...i.current.floatingContext,tree:f,x:L.clientX,y:L.clientY,onClose(){k(),U(),I()||O(L,!0,"safe-polygon")}});const ie=w.current;j.addEventListener("mousemove",ie),C.current=()=>{j.removeEventListener("mousemove",ie)};return}(_.current==="touch"?!Bc(o.floating,L.relatedTarget):!0)&&O(L)}function M(L){I()||i.current.floatingContext&&(m.current==null||m.current({...i.current.floatingContext,tree:f,x:L.clientX,y:L.clientY,onClose(){k(),U(),I()||O(L)}})(L))}if(je(o.domReference)){var D;const L=o.domReference;return n&&L.addEventListener("mouseleave",M),(D=o.floating)==null||D.addEventListener("mouseleave",M),h&&L.addEventListener("mousemove",B,{once:!0}),L.addEventListener("mouseenter",B),L.addEventListener("mouseleave",R),()=>{var j;n&&L.removeEventListener("mouseleave",M),(j=o.floating)==null||j.removeEventListener("mouseleave",M),h&&L.removeEventListener("mousemove",B),L.removeEventListener("mouseenter",B),L.removeEventListener("mouseleave",R)}}},[o,a,t,d,u,h,O,U,k,r,n,g,f,y,m,i,I]),ti(()=>{var B;if(a&&n&&(B=m.current)!=null&&B.__options.blockPointerEvents&&P()){T.current=!0;const M=o.floating;if(je(o.domReference)&&M){var R;const D=Gs(o.floating).body;D.setAttribute(r1,"");const L=o.domReference,j=f==null||(R=f.nodesRef.current.find(ee=>ee.id===p))==null||(R=R.context)==null?void 0:R.elements.floating;return j&&(j.style.pointerEvents=""),D.style.pointerEvents="none",L.style.pointerEvents="auto",M.style.pointerEvents="auto",()=>{D.style.pointerEvents="",L.style.pointerEvents="",M.style.pointerEvents=""}}}},[a,n,p,o,f,m,P]),ti(()=>{n||(_.current=void 0,A.current=!1,U(),k())},[n,U,k]),b.useEffect(()=>()=>{U(),clearTimeout(v.current),clearTimeout(S.current),k()},[a,o.domReference,U,k]);const F=b.useMemo(()=>{function B(R){_.current=R.pointerType}return{onPointerDown:B,onPointerEnter:B,onMouseMove(R){const{nativeEvent:M}=R;function D(){!E.current&&!g.current&&r(!0,M,"hover")}d&&!iv(_.current)||n||u===0||A.current&&R.movementX**2+R.movementY**2<2||(clearTimeout(S.current),_.current==="touch"?D():(A.current=!0,S.current=window.setTimeout(D,u)))}}},[d,r,n,g,u]),N=b.useMemo(()=>({onMouseEnter(){clearTimeout(v.current)},onMouseLeave(B){I()||O(B.nativeEvent,!1)}}),[O,I]);return b.useMemo(()=>a?{reference:F,floating:N}:{},[a,F,N])}const av=()=>{},QP=b.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:av,setState:av,isInstantPhase:!1}),w3=()=>b.useContext(QP);function S3(t){const{children:e,delay:n,timeoutMs:r=0}=t,[i,s]=b.useReducer((l,c)=>({...l,...c}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=b.useRef(null),a=b.useCallback(l=>{s({currentId:l})},[]);return ti(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),b.createElement(QP.Provider,{value:b.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},e)}function E3(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,floatingId:i}=t,{id:s,enabled:o=!0}=e,a=s??i,l=w3(),{currentId:c,setCurrentId:d,initialDelay:u,setState:h,timeoutMs:f}=l;return ti(()=>{o&&c&&(h({delay:{open:1,close:qh(u,"close")}}),c!==a&&r(!1))},[o,a,r,h,c,u]),ti(()=>{function p(){r(!1),h({delay:u,currentId:null})}if(o&&c&&!n&&c===a){if(f){const m=window.setTimeout(p,f);return()=>{clearTimeout(m)}}p()}},[o,n,h,c,a,r,u,f]),ti(()=>{o&&(d===av||!n||d(a))},[o,n,d,a]),l}function Wm(t,e){let n=t.filter(i=>{var s;return i.parentId===e&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const T3="data-floating-ui-focusable",C3={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},P3={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},i1=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function A3(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=t,{enabled:o=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:d=!1,referencePressEvent:u="pointerdown",ancestorScroll:h=!1,bubbles:f,capture:p}=e,m=N_(),y=xi(typeof l=="function"?l:()=>!1),g=typeof l=="function"?y:l,_=b.useRef(!1),v=b.useRef(!1),{escapeKey:w,outsidePress:S}=i1(f),{escapeKey:E,outsidePress:T}=i1(p),C=b.useRef(!1),A=xi(F=>{var N;if(!n||!o||!a||F.key!=="Escape"||C.current)return;const B=(N=s.current.floatingContext)==null?void 0:N.nodeId,R=m?Wm(m.nodesRef.current,B):[];if(!w&&(F.stopPropagation(),R.length>0)){let M=!0;if(R.forEach(D=>{var L;if((L=D.context)!=null&&L.open&&!D.context.dataRef.current.__escapeKeyBubbles){M=!1;return}}),!M)return}r(!1,_B(F)?F.nativeEvent:F,"escape-key")}),P=xi(F=>{var N;const B=()=>{var R;A(F),(R=Fo(F))==null||R.removeEventListener("keydown",B)};(N=Fo(F))==null||N.addEventListener("keydown",B)}),O=xi(F=>{var N;const B=_.current;_.current=!1;const R=v.current;if(v.current=!1,c==="click"&&R||B||typeof g=="function"&&!g(F))return;const M=Fo(F),D="["+L_("inert")+"]",L=Gs(i.floating).querySelectorAll(D);let j=je(M)?M:null;for(;j&&!ys(j);){const re=Mi(j);if(ys(re)||!je(re))break;j=re}if(L.length&&je(M)&&!xB(M)&&!Bc(M,i.floating)&&Array.from(L).every(re=>!Bc(j,re)))return;if(In(M)&&I){const re=M.clientWidth>0&&M.scrollWidth>M.clientWidth,oe=M.clientHeight>0&&M.scrollHeight>M.clientHeight;let _e=oe&&F.offsetX>M.clientWidth;if(oe&&qn(M).direction==="rtl"&&(_e=F.offsetX<=M.offsetWidth-M.clientWidth),_e||re&&F.offsetY>M.clientHeight)return}const ee=(N=s.current.floatingContext)==null?void 0:N.nodeId,ie=m&&Wm(m.nodesRef.current,ee).some(re=>{var oe;return Hm(F,(oe=re.context)==null?void 0:oe.elements.floating)});if(Hm(F,i.floating)||Hm(F,i.domReference)||ie)return;const ce=m?Wm(m.nodesRef.current,ee):[];if(ce.length>0){let re=!0;if(ce.forEach(oe=>{var _e;if((_e=oe.context)!=null&&_e.open&&!oe.context.dataRef.current.__outsidePressBubbles){re=!1;return}}),!re)return}r(!1,F,"outside-press")}),U=xi(F=>{var N;const B=()=>{var R;O(F),(R=Fo(F))==null||R.removeEventListener(c,B)};(N=Fo(F))==null||N.addEventListener(c,B)});b.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=w,s.current.__outsidePressBubbles=S;let F=-1;function N(L){r(!1,L,"ancestor-scroll")}function B(){window.clearTimeout(F),C.current=!0}function R(){F=window.setTimeout(()=>{C.current=!1},Zf()?5:0)}const M=Gs(i.floating);a&&(M.addEventListener("keydown",E?P:A,E),M.addEventListener("compositionstart",B),M.addEventListener("compositionend",R)),g&&M.addEventListener(c,T?U:O,T);let D=[];return h&&(je(i.domReference)&&(D=Ti(i.domReference)),je(i.floating)&&(D=D.concat(Ti(i.floating))),!je(i.reference)&&i.reference&&i.reference.contextElement&&(D=D.concat(Ti(i.reference.contextElement)))),D=D.filter(L=>{var j;return L!==((j=M.defaultView)==null?void 0:j.visualViewport)}),D.forEach(L=>{L.addEventListener("scroll",N,{passive:!0})}),()=>{a&&(M.removeEventListener("keydown",E?P:A,E),M.removeEventListener("compositionstart",B),M.removeEventListener("compositionend",R)),g&&M.removeEventListener(c,T?U:O,T),D.forEach(L=>{L.removeEventListener("scroll",N)}),window.clearTimeout(F)}},[s,i,a,g,c,n,r,h,o,w,S,A,E,P,O,T,U]),b.useEffect(()=>{_.current=!1},[g,c]);const k=b.useMemo(()=>({onKeyDown:A,[C3[u]]:F=>{d&&r(!1,F.nativeEvent,"reference-press")}}),[A,r,d,u]),I=b.useMemo(()=>({onKeyDown:A,onMouseDown(){v.current=!0},onMouseUp(){v.current=!0},[P3[c]]:()=>{_.current=!0}}),[A,c]);return b.useMemo(()=>o?{reference:k,floating:I}:{},[o,k,I])}function R3(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=ZP(),s=b.useRef({}),[o]=b.useState(()=>v3()),a=O_()!=null,[l,c]=b.useState(r.reference),d=xi((f,p,m)=>{s.current.openEvent=f?p:void 0,o.emit("openchange",{open:f,event:p,reason:m,nested:a}),n?.(f,p,m)}),u=b.useMemo(()=>({setPositionReference:c}),[]),h=b.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return b.useMemo(()=>({dataRef:s,open:e,onOpenChange:d,elements:h,events:o,floatingId:i,refs:u}),[e,d,h,o,i,u])}function B_(t){t===void 0&&(t={});const{nodeId:e}=t,n=R3({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[s,o]=b.useState(null),[a,l]=b.useState(null),d=i?.domReference||s,u=b.useRef(null),h=N_();ti(()=>{d&&(u.current=d)},[d]);const f=c3({...t,elements:{...i,...a&&{reference:a}}}),p=b.useCallback(v=>{const w=je(v)?{getBoundingClientRect:()=>v.getBoundingClientRect(),contextElement:v}:v;l(w),f.refs.setReference(w)},[f.refs]),m=b.useCallback(v=>{(je(v)||v===null)&&(u.current=v,o(v)),(je(f.refs.reference.current)||f.refs.reference.current===null||v!==null&&!je(v))&&f.refs.setReference(v)},[f.refs]),y=b.useMemo(()=>({...f.refs,setReference:m,setPositionReference:p,domReference:u}),[f.refs,m,p]),g=b.useMemo(()=>({...f.elements,domReference:d}),[f.elements,d]),_=b.useMemo(()=>({...f,...r,refs:y,elements:g,nodeId:e}),[f,y,g,e,r]);return ti(()=>{r.dataRef.current.floatingContext=_;const v=h?.nodesRef.current.find(w=>w.id===e);v&&(v.context=_)}),b.useMemo(()=>({...f,context:_,refs:y,elements:g}),[f,y,g,_])}function I3(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=t,{enabled:a=!0,visibleOnly:l=!0}=e,c=b.useRef(!1),d=b.useRef(),u=b.useRef(!0);b.useEffect(()=>{if(!a)return;const f=gn(o.domReference);function p(){!n&&In(o.domReference)&&o.domReference===Xw(Gs(o.domReference))&&(c.current=!0)}function m(){u.current=!0}return f.addEventListener("blur",p),f.addEventListener("keydown",m,!0),()=>{f.removeEventListener("blur",p),f.removeEventListener("keydown",m,!0)}},[o.domReference,n,a]),b.useEffect(()=>{if(!a)return;function f(p){let{reason:m}=p;(m==="reference-press"||m==="escape-key")&&(c.current=!0)}return i.on("openchange",f),()=>{i.off("openchange",f)}},[i,a]),b.useEffect(()=>()=>{clearTimeout(d.current)},[]);const h=b.useMemo(()=>({onPointerDown(f){mB(f.nativeEvent)||(u.current=!1)},onMouseLeave(){c.current=!1},onFocus(f){if(c.current)return;const p=Fo(f.nativeEvent);if(l&&je(p))try{if(gB()&&yB())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!u.current&&!wB(p))return}r(!0,f.nativeEvent,"focus")},onBlur(f){c.current=!1;const p=f.relatedTarget,m=f.nativeEvent,y=je(p)&&p.hasAttribute(L_("focus-guard"))&&p.getAttribute("data-type")==="outside";d.current=window.setTimeout(()=>{var g;const _=Xw(o.domReference?o.domReference.ownerDocument:document);!p&&_===o.domReference||Bc((g=s.current.floatingContext)==null?void 0:g.refs.floating.current,_)||Bc(o.domReference,_)||y||r(!1,m,"focus")})}}),[s,o.domReference,r,l]);return b.useMemo(()=>a?{reference:h}:{},[a,h])}const s1="active",o1="selected";function Vm(t,e,n){const r=new Map,i=n==="item";let s=t;if(i&&t){const{[s1]:o,[o1]:a,...l}=t;s=l}return{...n==="floating"&&{tabIndex:-1,[T3]:""},...s,...e.map(o=>{const a=o?o[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[c,d]=l;if(!(i&&[s1,o1].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof d=="function"){var u;(u=r.get(c))==null||u.push(d),o[c]=function(){for(var h,f=arguments.length,p=new Array(f),m=0;m<f;m++)p[m]=arguments[m];return(h=r.get(c))==null?void 0:h.map(y=>y(...p)).find(y=>y!==void 0)}}}else o[c]=d}),o),{})}}function k3(t){t===void 0&&(t=[]);const e=t.map(a=>a?.reference),n=t.map(a=>a?.floating),r=t.map(a=>a?.item),i=b.useCallback(a=>Vm(a,t,"reference"),e),s=b.useCallback(a=>Vm(a,t,"floating"),n),o=b.useCallback(a=>Vm(a,t,"item"),r);return b.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const M3=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function D3(t,e){var n;e===void 0&&(e={});const{open:r,floatingId:i}=t,{enabled:s=!0,role:o="dialog"}=e,a=(n=M3.get(o))!=null?n:o,l=ZP(),d=O_()!=null,u=b.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&d&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,d,r,l,o]),h=b.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":l}}},[a,i,l,o]),f=b.useCallback(p=>{let{active:m,selected:y}=p;const g={role:"option",...m&&{id:i+"-option"}};switch(o){case"select":return{...g,"aria-selected":m&&y};case"combobox":return{...g,...m&&{"aria-selected":!0}}}return{}},[i,o]);return b.useMemo(()=>s?{reference:u,floating:h,item:f}:{},[s,u,h,f])}const[O3,Qn]=On("ScrollArea.Root component was not found in tree");function Oa(t,e){const n=Fs(e);Za(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}const N3=b.forwardRef((t,e)=>{const{style:n,...r}=t,i=Qn(),[s,o]=b.useState(0),[a,l]=b.useState(0),c=!!(s&&a);return Oa(i.scrollbarX,()=>{const d=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(d),l(d)}),Oa(i.scrollbarY,()=>{const d=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(d),o(d)}),c?x.jsx("div",{...r,ref:e,style:{...n,width:s,height:a}}):null}),L3=b.forwardRef((t,e)=>{const n=Qn(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?x.jsx(N3,{...t,ref:e}):null}),B3={scrollHideDelay:1e3,type:"hover"},JP=b.forwardRef((t,e)=>{const n=G("ScrollAreaRoot",B3,t),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,l]=b.useState(null),[c,d]=b.useState(null),[u,h]=b.useState(null),[f,p]=b.useState(null),[m,y]=b.useState(null),[g,_]=b.useState(0),[v,w]=b.useState(0),[S,E]=b.useState(!1),[T,C]=b.useState(!1),A=Lt(e,P=>l(P));return x.jsx(O3,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:c,onViewportChange:d,content:u,onContentChange:h,scrollbarX:f,onScrollbarXChange:p,scrollbarXEnabled:S,onScrollbarXEnabledChange:E,scrollbarY:m,onScrollbarYChange:y,scrollbarYEnabled:T,onScrollbarYEnabledChange:C,onCornerWidthChange:_,onCornerHeightChange:w},children:x.jsx(W,{...o,ref:A,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${g}px`,"--sa-corner-height":s!=="xy"?"0px":`${v}px`}})})});JP.displayName="@mantine/core/ScrollAreaRoot";function eA(t,e){const n=t/e;return Number.isNaN(n)?0:n}function Jf(t){const e=eA(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function tA(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function F3(t,[e,n]){return Math.min(n,Math.max(e,t))}function a1(t,e,n="ltr"){const r=Jf(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,o=e.content-e.viewport,a=s-r,l=n==="ltr"?[0,o]:[o*-1,0],c=F3(t,l);return tA([0,o],[0,a])(c)}function $3(t,e,n,r="ltr"){const i=Jf(n),s=i/2,o=e||s,a=i-o,l=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,d=n.content-n.viewport,u=r==="ltr"?[0,d]:[d*-1,0];return tA([l,c],u)(t)}function nA(t,e){return t>0&&t<e}function Qd(t){return t?parseInt(t,10):0}function Xs(t,e,{checkForDefaultPrevented:n=!0}={}){return r=>{t?.(r),(n===!1||!r.defaultPrevented)&&e?.(r)}}const[U3,rA]=On("ScrollAreaScrollbar was not found in tree"),iA=b.forwardRef((t,e)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:l,onWheelScroll:c,onResize:d,...u}=t,h=Qn(),[f,p]=b.useState(null),m=Lt(e,C=>p(C)),y=b.useRef(null),g=b.useRef(""),{viewport:_}=h,v=n.content-n.viewport,w=Fs(c),S=Fs(a),E=Gf(d,10),T=C=>{if(y.current){const A=C.clientX-y.current.left,P=C.clientY-y.current.top;l({x:A,y:P})}};return b.useEffect(()=>{const C=A=>{const P=A.target;f?.contains(P)&&w(A,v)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[_,f,v,w]),b.useEffect(S,[n,S]),Oa(f,E),Oa(h.content,E),x.jsx(U3,{value:{scrollbar:f,hasThumb:r,onThumbChange:Fs(i),onThumbPointerUp:Fs(s),onThumbPositionChange:S,onThumbPointerDown:Fs(o)},children:x.jsx("div",{...u,ref:m,"data-mantine-scrollbar":!0,style:{position:"absolute",...u.style},onPointerDown:Xs(t.onPointerDown,C=>{C.preventDefault(),C.button===0&&(C.target.setPointerCapture(C.pointerId),y.current=f.getBoundingClientRect(),g.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T(C))}),onPointerMove:Xs(t.onPointerMove,T),onPointerUp:Xs(t.onPointerUp,C=>{const A=C.target;A.hasPointerCapture(C.pointerId)&&(C.preventDefault(),A.releasePointerCapture(C.pointerId))}),onLostPointerCapture:()=>{document.body.style.webkitUserSelect=g.current,y.current=null}})})}),sA=b.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,style:i,...s}=t,o=Qn(),[a,l]=b.useState(),c=b.useRef(null),d=Lt(e,c,o.onScrollbarXChange);return b.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),x.jsx(iA,{"data-orientation":"horizontal",...s,ref:d,sizes:n,style:{...i,"--sa-thumb-width":`${Jf(n)}px`},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(o.viewport){const f=o.viewport.scrollLeft+u.deltaX;t.onWheelScroll(f),nA(f,h)&&u.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Qd(a.paddingLeft),paddingEnd:Qd(a.paddingRight)}})}})});sA.displayName="@mantine/core/ScrollAreaScrollbarX";const oA=b.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,style:i,...s}=t,o=Qn(),[a,l]=b.useState(),c=b.useRef(null),d=Lt(e,c,o.onScrollbarYChange);return b.useEffect(()=>{c.current&&l(window.getComputedStyle(c.current))},[]),x.jsx(iA,{...s,"data-orientation":"vertical",ref:d,sizes:n,style:{"--sa-thumb-height":`${Jf(n)}px`,...i},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(o.viewport){const f=o.viewport.scrollTop+u.deltaY;t.onWheelScroll(f),nA(f,h)&&u.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Qd(a.paddingTop),paddingEnd:Qd(a.paddingBottom)}})}})});oA.displayName="@mantine/core/ScrollAreaScrollbarY";const ep=b.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,{dir:i}=lu(),s=Qn(),o=b.useRef(null),a=b.useRef(0),[l,c]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=eA(l.viewport,l.content),u={...r,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:f=>{o.current=f},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:f=>{a.current=f}},h=(f,p)=>$3(f,a.current,l,p);return n==="horizontal"?x.jsx(sA,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const f=s.viewport.scrollLeft,p=a1(f,l,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,i))}}):n==="vertical"?x.jsx(oA,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const f=s.viewport.scrollTop,p=a1(f,l);l.scrollbar.size===0?o.current.style.setProperty("--thumb-opacity","0"):o.current.style.setProperty("--thumb-opacity","1"),o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null});ep.displayName="@mantine/core/ScrollAreaScrollbarVisible";const F_=b.forwardRef((t,e)=>{const n=Qn(),{forceMount:r,...i}=t,[s,o]=b.useState(!1),a=t.orientation==="horizontal",l=Gf(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?c:d)}},10);return Oa(n.viewport,l),Oa(n.content,l),r||s?x.jsx(ep,{"data-state":s?"visible":"hidden",...i,ref:e}):null});F_.displayName="@mantine/core/ScrollAreaScrollbarAuto";const aA=b.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Qn(),[s,o]=b.useState(!1);return b.useEffect(()=>{const{scrollArea:a}=i;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},d=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),n||s?x.jsx(F_,{"data-state":s?"visible":"hidden",...r,ref:e}):null});aA.displayName="@mantine/core/ScrollAreaScrollbarHover";const H3=b.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Qn(),s=t.orientation==="horizontal",[o,a]=b.useState("hidden"),l=Gf(()=>a("idle"),100);return b.useEffect(()=>{if(o==="idle"){const c=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[o,i.scrollHideDelay]),b.useEffect(()=>{const{viewport:c}=i,d=s?"scrollLeft":"scrollTop";if(c){let u=c[d];const h=()=>{const f=c[d];u!==f&&(a("scrolling"),l()),u=f};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[i.viewport,s,l]),n||o!=="hidden"?x.jsx(ep,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Xs(t.onPointerEnter,()=>a("interacting")),onPointerLeave:Xs(t.onPointerLeave,()=>a("idle"))}):null}),lv=b.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Qn(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=t.orientation==="horizontal";return b.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?x.jsx(aA,{...r,ref:e,forceMount:n}):i.type==="scroll"?x.jsx(H3,{...r,ref:e,forceMount:n}):i.type==="auto"?x.jsx(F_,{...r,ref:e,forceMount:n}):i.type==="always"?x.jsx(ep,{...r,ref:e}):null});lv.displayName="@mantine/core/ScrollAreaScrollbar";function j3(t,e=()=>{}){let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const s={left:t.scrollLeft,top:t.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&e(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const lA=b.forwardRef((t,e)=>{const{style:n,...r}=t,i=Qn(),s=rA(),{onThumbPositionChange:o}=s,a=Lt(e,d=>s.onThumbChange(d)),l=b.useRef(void 0),c=Gf(()=>{l.current&&(l.current(),l.current=void 0)},100);return b.useEffect(()=>{const{viewport:d}=i;if(d){const u=()=>{if(c(),!l.current){const h=j3(d,o);l.current=h,o()}};return o(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[i.viewport,c,o]),x.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Xs(t.onPointerDownCapture,d=>{const h=d.target.getBoundingClientRect(),f=d.clientX-h.left,p=d.clientY-h.top;s.onThumbPointerDown({x:f,y:p})}),onPointerUp:Xs(t.onPointerUp,s.onThumbPointerUp)})});lA.displayName="@mantine/core/ScrollAreaThumb";const cv=b.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=rA();return n||i.hasThumb?x.jsx(lA,{ref:e,...r}):null});cv.displayName="@mantine/core/ScrollAreaThumb";const cA=b.forwardRef(({children:t,style:e,...n},r)=>{const i=Qn(),s=Lt(r,i.onViewportChange);return x.jsx(W,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e},children:x.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:t})})});cA.displayName="@mantine/core/ScrollAreaViewport";var $_={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const uA={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},G3=(t,{scrollbarSize:e,overscrollBehavior:n})=>({root:{"--scrollarea-scrollbar-size":$(e),"--scrollarea-over-scroll-behavior":n}}),fo=K((t,e)=>{const n=G("ScrollArea",uA,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:l,vars:c,type:d,scrollHideDelay:u,viewportProps:h,viewportRef:f,onScrollPositionChange:p,children:m,offsetScrollbars:y,scrollbars:g,onBottomReached:_,onTopReached:v,overscrollBehavior:w,...S}=n,[E,T]=b.useState(!1),[C,A]=b.useState(!1),[P,O]=b.useState(!1),U=de({name:"ScrollArea",props:n,classes:$_,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:G3}),k=b.useRef(null),I=d3([f,k]);return b.useEffect(()=>{if(!k.current||y!=="present")return;const F=k.current,N=new ResizeObserver(()=>{const{scrollHeight:B,clientHeight:R,scrollWidth:M,clientWidth:D}=F;A(B>R),O(M>D)});return N.observe(F),()=>N.disconnect()},[k,y]),x.jsxs(JP,{type:d==="never"?"always":d,scrollHideDelay:u,ref:e,scrollbars:g,...U("root"),...S,children:[x.jsx(cA,{...h,...U("viewport",{style:h?.style}),ref:I,"data-offset-scrollbars":y===!0?"xy":y||void 0,"data-scrollbars":g||void 0,"data-horizontal-hidden":y==="present"&&!P?"true":void 0,"data-vertical-hidden":y==="present"&&!C?"true":void 0,onScroll:F=>{h?.onScroll?.(F),p?.({x:F.currentTarget.scrollLeft,y:F.currentTarget.scrollTop});const{scrollTop:N,scrollHeight:B,clientHeight:R}=F.currentTarget;N-(B-R)>=0&&_?.(),N===0&&v?.()},children:m}),(g==="xy"||g==="x")&&x.jsx(lv,{...U("scrollbar"),orientation:"horizontal","data-hidden":d==="never"||void 0,forceMount:!0,onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),children:x.jsx(cv,{...U("thumb")})}),(g==="xy"||g==="y")&&x.jsx(lv,{...U("scrollbar"),orientation:"vertical","data-hidden":d==="never"||void 0,forceMount:!0,onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),children:x.jsx(cv,{...U("thumb")})}),x.jsx(L3,{...U("corner"),"data-hovered":E||void 0,"data-hidden":d==="never"||void 0})]})});fo.displayName="@mantine/core/ScrollArea";const U_=K((t,e)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:l,offsetScrollbars:c,viewportRef:d,onScrollPositionChange:u,unstyled:h,variant:f,viewportProps:p,scrollbars:m,style:y,vars:g,onBottomReached:_,onTopReached:v,...w}=G("ScrollAreaAutosize",uA,t);return x.jsx(W,{...w,ref:e,style:[{display:"flex",overflow:"auto"},y],children:x.jsx(W,{style:{display:"flex",flexDirection:"column",flex:1},children:x.jsx(fo,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:l,offsetScrollbars:c,viewportRef:d,onScrollPositionChange:u,unstyled:h,variant:f,viewportProps:p,vars:g,scrollbars:m,onBottomReached:_,onTopReached:v,children:n})})})});fo.classes=$_;U_.displayName="@mantine/core/ScrollAreaAutosize";U_.classes=$_;fo.Autosize=U_;var hA={root:"m_87cf2631"};const z3={__staticSelector:"UnstyledButton"},xr=vn((t,e)=>{const n=G("UnstyledButton",z3,t),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:l,style:c,...d}=n,u=de({name:s,props:n,classes:hA,className:r,style:c,classNames:a,styles:l,unstyled:o});return x.jsx(W,{...u("root",{focusable:!0}),component:i,ref:e,type:i==="button"?"button":void 0,...d})});xr.classes=hA;xr.displayName="@mantine/core/UnstyledButton";var dA={root:"m_515a97f8"};const W3={},H_=K((t,e)=>{const n=G("VisuallyHidden",W3,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,...c}=n,d=de({name:"VisuallyHidden",classes:dA,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return x.jsx(W,{component:"span",ref:e,...d("root"),...c})});H_.classes=dA;H_.displayName="@mantine/core/VisuallyHidden";var fA={root:"m_1b7284a3"};const V3={},X3=(t,{radius:e,shadow:n})=>({root:{"--paper-radius":e===void 0?void 0:Nt(e),"--paper-shadow":g_(n)}}),tp=vn((t,e)=>{const n=G("Paper",V3,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:l,vars:c,radius:d,shadow:u,variant:h,mod:f,...p}=n,m=de({name:"Paper",props:n,classes:fA,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:X3});return x.jsx(W,{ref:e,mod:[{"data-with-border":l},f],...m("root"),variant:h,...p})});tp.classes=fA;tp.displayName="@mantine/core/Paper";function pA(t,e){if(t==="rtl"&&(e.includes("right")||e.includes("left"))){const[n,r]=e.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return e}function l1(t,e,n,r){return t==="center"||r==="center"?{top:e}:t==="end"?{bottom:n}:t==="start"?{top:n}:{}}function c1(t,e,n,r,i){return t==="center"||r==="center"?{left:e}:t==="end"?{[i==="ltr"?"right":"left"]:n}:t==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const Y3={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function K3({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[l,c="center"]=t.split("-"),d={width:e,height:e,transform:"rotate(45deg)",position:"absolute",[Y3[l]]:r},u=-e/2;return l==="left"?{...d,...l1(c,o,n,i),right:u,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:l==="right"?{...d,...l1(c,o,n,i),left:u,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:l==="top"?{...d,...c1(c,s,n,i,a),bottom:u,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:l==="bottom"?{...d,...c1(c,s,n,i,a),top:u,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const j_=b.forwardRef(({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:l,...c},d)=>{const{dir:u}=lu();return s?x.jsx("div",{...c,ref:d,style:{...l,...K3({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:u,arrowX:o,arrowY:a})}}):null});j_.displayName="@mantine/core/FloatingArrow";var mA={root:"m_9814e45f"};const q3={zIndex:Dr("modal")},Z3=(t,{gradient:e,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":e||(n!==void 0||r!==void 0)&&Hr(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${$(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Nt(s),"--overlay-z-index":o?.toString()}}),Na=vn((t,e)=>{const n=G("Overlay",q3,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,fixed:c,center:d,children:u,radius:h,zIndex:f,gradient:p,blur:m,color:y,backgroundOpacity:g,mod:_,...v}=n,w=de({name:"Overlay",props:n,classes:mA,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Z3});return x.jsx(W,{ref:e,...w("root"),mod:[{center:d,fixed:c},_],...v,children:u})});Na.classes=mA;Na.displayName="@mantine/core/Overlay";function Xm(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}function Q3({target:t,reuseTargetNode:e,...n}){if(t)return typeof t=="string"?document.querySelector(t)||Xm(n):t;if(e){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const i=Xm(n);return i.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(i),i}return Xm(n)}const J3={},gA=K((t,e)=>{const{children:n,target:r,reuseTargetNode:i,...s}=G("Portal",J3,t),[o,a]=b.useState(!1),l=b.useRef(null);return Za(()=>(a(!0),l.current=Q3({target:r,reuseTargetNode:i,...s}),Wd(e,l.current),!r&&!i&&l.current&&document.body.appendChild(l.current),()=>{!r&&!i&&l.current&&document.body.removeChild(l.current)}),[r]),!o||!l.current?null:ru.createPortal(x.jsx(x.Fragment,{children:n}),l.current)});gA.displayName="@mantine/core/Portal";const el=K(({withinPortal:t=!0,children:e,...n},r)=>TP()==="test"||!t?x.jsx(x.Fragment,{children:e}):x.jsx(gA,{ref:r,...n,children:e}));el.displayName="@mantine/core/OptionalPortal";const Rl=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${t==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),rh={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Rl("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Rl("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Rl("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Rl("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Rl("top"),common:{transformOrigin:"top right"}}},u1={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function eF({transition:t,state:e,duration:n,timingFunction:r}){const i={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof t=="string"?t in rh?{transitionProperty:rh[t].transitionProperty,...i,...rh[t].common,...rh[t][u1[e]]}:{}:{transitionProperty:t.transitionProperty,...i,...t.common,...t[u1[e]]}}function tF({duration:t,exitDuration:e,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a,enterDelay:l,exitDelay:c}){const d=sn(),u=v_(),h=d.respectReducedMotion?u:!1,[f,p]=b.useState(h?0:t),[m,y]=b.useState(r?"entered":"exited"),g=b.useRef(-1),_=b.useRef(-1),v=b.useRef(-1),w=E=>{const T=E?i:s,C=E?o:a;window.clearTimeout(g.current);const A=h?0:E?t:e;p(A),A===0?(typeof T=="function"&&T(),typeof C=="function"&&C(),y(E?"entered":"exited")):v.current=requestAnimationFrame(()=>{WO.flushSync(()=>{y(E?"pre-entering":"pre-exiting")}),v.current=requestAnimationFrame(()=>{typeof T=="function"&&T(),y(E?"entering":"exiting"),g.current=window.setTimeout(()=>{typeof C=="function"&&C(),y(E?"entered":"exited")},A)})})},S=E=>{if(window.clearTimeout(_.current),typeof(E?l:c)!="number"){w(E);return}_.current=window.setTimeout(()=>{w(E)},E?l:c)};return gs(()=>{S(r)},[r]),b.useEffect(()=>()=>{window.clearTimeout(g.current),cancelAnimationFrame(v.current)},[]),{transitionDuration:f,transitionStatus:m,transitionTimingFunction:n||"ease"}}function hi({keepMounted:t,transition:e="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:l,onEnter:c,onExited:d,enterDelay:u,exitDelay:h}){const f=TP(),{transitionDuration:p,transitionStatus:m,transitionTimingFunction:y}=tF({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:l,onEnter:c,onExited:d,enterDelay:u,exitDelay:h});return p===0||f==="test"?i?x.jsx(x.Fragment,{children:s({})}):t?s({display:"none"}):null:m==="exited"?t?s({display:"none"}):null:x.jsx(x.Fragment,{children:s(eF({transition:e,duration:p,state:m,timingFunction:y}))})}hi.displayName="@mantine/core/Transition";const[nF,yA]=On("Popover component was not found in the tree");function np({children:t,active:e=!0,refProp:n="ref",innerRef:r}){const i=XN(e),s=Lt(i,r);return ho(t)?b.cloneElement(t,{[n]:s}):t}function vA(t){return x.jsx(H_,{tabIndex:-1,"data-autofocus":!0,...t})}np.displayName="@mantine/core/FocusTrap";vA.displayName="@mantine/core/FocusTrapInitialFocus";np.InitialFocus=vA;var _A={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const rF={},G_=K((t,e)=>{const n=G("PopoverDropdown",rF,t),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:l,classNames:c,styles:d,...u}=n,h=yA(),f=vP({opened:h.opened,shouldReturnFocus:h.returnFocus}),p=h.withRoles?{"aria-labelledby":h.getTargetId(),id:h.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=Lt(e,h.floating);return h.disabled?null:x.jsx(el,{...h.portalProps,withinPortal:h.withinPortal,children:x.jsx(hi,{mounted:h.opened,...h.transitionProps,transition:h.transitionProps?.transition||"fade",duration:h.transitionProps?.duration??150,keepMounted:h.keepMounted,exitDuration:typeof h.transitionProps?.exitDuration=="number"?h.transitionProps.exitDuration:h.transitionProps?.duration,children:y=>x.jsx(np,{active:h.trapFocus&&h.opened,innerRef:m,children:x.jsxs(W,{...p,...u,variant:l,onKeyDownCapture:ON(()=>{h.onClose?.(),h.onDismiss?.()},{active:h.closeOnEscape,onTrigger:f,onKeyDown:a}),"data-position":h.placement,"data-fixed":h.floatingStrategy==="fixed"||void 0,...h.getStyles("dropdown",{className:r,props:n,classNames:c,styles:d,style:[{...y,zIndex:h.zIndex,top:h.y??0,left:h.x??0,width:h.width==="target"?void 0:$(h.width)},h.resolvedStyles.dropdown,d?.dropdown,i]}),children:[o,x.jsx(j_,{ref:h.arrowRef,arrowX:h.arrowX,arrowY:h.arrowY,visible:h.withArrow,position:h.placement,arrowSize:h.arrowSize,arrowRadius:h.arrowRadius,arrowOffset:h.arrowOffset,arrowPosition:h.arrowPosition,...h.getStyles("arrow",{props:n,classNames:c,styles:d})})]})})})})});G_.classes=_A;G_.displayName="@mantine/core/PopoverDropdown";const iF={refProp:"ref",popupType:"dialog"},xA=K((t,e)=>{const{children:n,refProp:r,popupType:i,...s}=G("PopoverTarget",iF,t);if(!ho(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=yA(),l=Lt(a.reference,zf(n),e),c=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return b.cloneElement(n,{...o,...c,...a.targetProps,className:_t(a.targetProps.className,o.className,n.props.className),[r]:l,...a.controlled?null:{onClick:a.onToggle}})});xA.displayName="@mantine/core/PopoverTarget";function bA({opened:t,floating:e,position:n,positionDependencies:r}){const[i,s]=b.useState(0);b.useEffect(()=>{if(e.refs.reference.current&&e.refs.floating.current&&t)return t3(e.refs.reference.current,e.refs.floating.current,e.update)},[e.refs.reference.current,e.refs.floating.current,t,i,n]),gs(()=>{e.update()},r),gs(()=>{s(o=>o+1)},[t])}function sF(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function oF(t,e){const n=sF(t.middlewares),r=[YP(t.offset)];return n.shift&&r.push(D_(typeof n.shift=="boolean"?{limiter:e1(),padding:5}:{limiter:e1(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?Zd():Zd(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?dc():dc(n.inline)),r.push(KP({element:t.arrowRef,padding:t.arrowOffset})),(n.size||t.width==="target")&&r.push(h3({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o,...a}){const c=e().refs.floating.current?.style??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:i,availableWidth:s,availableHeight:o,...a}):Object.assign(c,{maxWidth:`${s}px`,maxHeight:`${o}px`})),t.width==="target"&&Object.assign(c,{width:`${i.reference.width}px`})}})),r}function aF(t){const[e,n]=oi({value:t.opened,defaultValue:t.defaultOpened,finalValue:!1,onChange:t.onChange}),r=b.useRef(e),i=()=>{e&&n(!1)},s=()=>n(!e),o=B_({strategy:t.strategy,placement:t.position,middleware:oF(t,()=>o)});return bA({opened:e,position:t.position,positionDependencies:t.positionDependencies||[],floating:o}),gs(()=>{t.onPositionChange?.(o.placement)},[o.placement]),gs(()=>{e!==r.current&&(e?t.onOpen?.():t.onClose?.()),r.current=e},[e,t.onClose,t.onOpen]),{floating:o,controlled:typeof t.opened=="boolean",opened:e,onClose:i,onToggle:s}}const lF={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Dr("popover"),__staticSelector:"Popover",width:"max-content"},cF=(t,{radius:e,shadow:n})=>({dropdown:{"--popover-radius":e===void 0?void 0:Nt(e),"--popover-shadow":g_(n)}});function Es(t){const e=G("Popover",lF,t),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:l,onExitTransitionEnd:c,onEnterTransitionEnd:d,width:u,middlewares:h,withArrow:f,arrowSize:p,arrowOffset:m,arrowRadius:y,arrowPosition:g,unstyled:_,classNames:v,styles:w,closeOnClickOutside:S,withinPortal:E,portalProps:T,closeOnEscape:C,clickOutsideEvents:A,trapFocus:P,onClose:O,onDismiss:U,onOpen:k,onChange:I,zIndex:F,radius:N,shadow:B,id:R,defaultOpened:M,__staticSelector:D,withRoles:L,disabled:j,returnFocus:ee,variant:ie,keepMounted:ce,vars:re,floatingStrategy:oe,withOverlay:_e,overlayProps:xe,...me}=e,ge=de({name:D,props:e,classes:_A,classNames:v,styles:w,unstyled:_,rootSelector:"dropdown",vars:re,varsResolver:cF}),{resolvedStyles:Re}=Xf({classNames:v,styles:w,props:e}),Ie=b.useRef(null),[ke,Se]=b.useState(null),[De,_n]=b.useState(null),{dir:on}=lu(),at=ci(R),nt=aF({middlewares:h,width:u,position:pA(on,r),offset:typeof i=="number"?i+(f?p/2:0):i,arrowRef:Ie,arrowOffset:m,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:M,onChange:I,onOpen:k,onClose:O,onDismiss:U,strategy:oe});FN(()=>{S&&(nt.onClose(),U?.())},A,[ke,De]);const an=b.useCallback(Ln=>{Se(Ln),nt.floating.refs.setReference(Ln)},[nt.floating.refs.setReference]),Eo=b.useCallback(Ln=>{_n(Ln),nt.floating.refs.setFloating(Ln)},[nt.floating.refs.setFloating]),pl=b.useCallback(()=>{l?.onExited?.(),c?.()},[l?.onExited,c]),xn=b.useCallback(()=>{l?.onEntered?.(),d?.()},[l?.onEntered,d]);return x.jsxs(nF,{value:{returnFocus:ee,disabled:j,controlled:nt.controlled,reference:an,floating:Eo,x:nt.floating.x,y:nt.floating.y,arrowX:nt.floating?.middlewareData?.arrow?.x,arrowY:nt.floating?.middlewareData?.arrow?.y,opened:nt.opened,arrowRef:Ie,transitionProps:{...l,onExited:pl,onEntered:xn},width:u,withArrow:f,arrowSize:p,arrowOffset:m,arrowRadius:y,arrowPosition:g,placement:nt.floating.placement,trapFocus:P,withinPortal:E,portalProps:T,zIndex:F,radius:N,shadow:B,closeOnEscape:C,onDismiss:U,onClose:nt.onClose,onToggle:nt.onToggle,getTargetId:()=>`${at}-target`,getDropdownId:()=>`${at}-dropdown`,withRoles:L,targetProps:me,__staticSelector:D,classNames:v,styles:w,unstyled:_,variant:ie,keepMounted:ce,getStyles:ge,resolvedStyles:Re,floatingStrategy:oe},children:[n,_e&&x.jsx(hi,{transition:"fade",mounted:nt.opened,duration:l?.duration||250,exitDuration:l?.exitDuration||250,children:Ln=>x.jsx(el,{withinPortal:E,children:x.jsx(Na,{...xe,...ge("overlay",{className:xe?.className,style:[Ln,xe?.style]})})})})]})}Es.Target=xA;Es.Dropdown=G_;Es.displayName="@mantine/core/Popover";Es.extend=t=>t;var br={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const wA=b.forwardRef(({className:t,...e},n)=>x.jsxs(W,{component:"span",className:_t(br.barsLoader,t),...e,ref:n,children:[x.jsx("span",{className:br.bar}),x.jsx("span",{className:br.bar}),x.jsx("span",{className:br.bar})]}));wA.displayName="@mantine/core/Bars";const SA=b.forwardRef(({className:t,...e},n)=>x.jsxs(W,{component:"span",className:_t(br.dotsLoader,t),...e,ref:n,children:[x.jsx("span",{className:br.dot}),x.jsx("span",{className:br.dot}),x.jsx("span",{className:br.dot})]}));SA.displayName="@mantine/core/Dots";const EA=b.forwardRef(({className:t,...e},n)=>x.jsx(W,{component:"span",className:_t(br.ovalLoader,t),...e,ref:n}));EA.displayName="@mantine/core/Oval";const TA={bars:wA,oval:EA,dots:SA},uF={loaders:TA,type:"oval"},hF=(t,{size:e,color:n})=>({root:{"--loader-size":Pe(e,"loader-size"),"--loader-color":n?An(n,t):void 0}}),tl=K((t,e)=>{const n=G("Loader",uF,t),{size:r,color:i,type:s,vars:o,className:a,style:l,classNames:c,styles:d,unstyled:u,loaders:h,variant:f,children:p,...m}=n,y=de({name:"Loader",props:n,classes:br,className:a,style:l,classNames:c,styles:d,unstyled:u,vars:o,varsResolver:hF});return p?x.jsx(W,{...y("root"),ref:e,...m,children:p}):x.jsx(W,{...y("root"),ref:e,component:h[s],variant:f,size:r,...m})});tl.defaultLoaders=TA;tl.classes=br;tl.displayName="@mantine/core/Loader";var nl={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const h1={orientation:"horizontal"},dF=(t,{borderWidth:e})=>({group:{"--ai-border-width":$(e)}}),z_=K((t,e)=>{const n=G("ActionIconGroup",h1,t),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:l,vars:c,borderWidth:d,variant:u,mod:h,...f}=G("ActionIconGroup",h1,t),p=de({name:"ActionIconGroup",props:n,classes:nl,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:c,varsResolver:dF,rootSelector:"group"});return x.jsx(W,{...p("group"),ref:e,variant:u,mod:[{"data-orientation":l},h],role:"group",...f})});z_.classes=nl;z_.displayName="@mantine/core/ActionIconGroup";const d1={},fF=(t,{radius:e,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":Pe(o,"section-height"),"--section-padding-x":Pe(o,"section-padding-x"),"--section-fz":zt(o),"--section-radius":e===void 0?void 0:Nt(e),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},W_=K((t,e)=>{const n=G("ActionIconGroupSection",d1,t),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,variant:c,gradient:d,radius:u,autoContrast:h,...f}=G("ActionIconGroupSection",d1,t),p=de({name:"ActionIconGroupSection",props:n,classes:nl,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:fF,rootSelector:"groupSection"});return x.jsx(W,{...p("groupSection"),ref:e,variant:c,...f})});W_.classes=nl;W_.displayName="@mantine/core/ActionIconGroupSection";const pF={},mF=(t,{size:e,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=t.variantColorResolver({color:s||t.primaryColor,theme:t,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":Pe(e,"ai-size"),"--ai-radius":n===void 0?void 0:Nt(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},jn=vn((t,e)=>{const n=G("ActionIcon",pF,t),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:l,loading:c,loaderProps:d,size:u,color:h,radius:f,__staticSelector:p,gradient:m,vars:y,children:g,disabled:_,"data-disabled":v,autoContrast:w,mod:S,...E}=n,T=de({name:["ActionIcon",p],props:n,className:r,style:l,classes:nl,classNames:o,styles:a,unstyled:i,vars:y,varsResolver:mF});return x.jsxs(xr,{...T("root",{active:!_&&!c&&!v}),...E,unstyled:i,variant:s,size:u,disabled:_||c,ref:e,mod:[{loading:c,disabled:_||v},S],children:[x.jsx(hi,{mounted:!!c,transition:"slide-down",duration:150,children:C=>x.jsx(W,{component:"span",...T("loader",{style:C}),"aria-hidden":!0,children:x.jsx(tl,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...d})})}),x.jsx(W,{component:"span",mod:{loading:c},...T("icon"),children:g})]})});jn.classes=nl;jn.displayName="@mantine/core/ActionIcon";jn.Group=z_;jn.GroupSection=W_;const CA=b.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...n},r)=>x.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:r,...n,children:x.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));CA.displayName="@mantine/core/CloseIcon";var PA={root:"m_86a44da5","root--subtle":"m_220c80f2"};const gF={variant:"subtle"},yF=(t,{size:e,radius:n,iconSize:r})=>({root:{"--cb-size":Pe(e,"cb-size"),"--cb-radius":n===void 0?void 0:Nt(n),"--cb-icon-size":$(r)}}),rl=vn((t,e)=>{const n=G("CloseButton",gF,t),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:l,style:c,styles:d,unstyled:u,"data-disabled":h,disabled:f,variant:p,icon:m,mod:y,__staticSelector:g,..._}=n,v=de({name:g||"CloseButton",props:n,className:a,style:c,classes:PA,classNames:l,styles:d,unstyled:u,vars:s,varsResolver:yF});return x.jsxs(xr,{ref:e,..._,unstyled:u,variant:p,disabled:f,mod:[{disabled:f||h},y],...v("root",{variant:p,active:!f&&!h}),children:[m||x.jsx(CA,{}),i]})});rl.classes=PA;rl.displayName="@mantine/core/CloseButton";function vF(t){return b.Children.toArray(t).filter(Boolean)}var AA={root:"m_4081bf90"};const _F={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},xF=(t,{grow:e,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":e&&n?a:void 0,"--group-gap":si(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Wt=K((t,e)=>{const n=G("Group",_F,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:l,gap:c,align:d,justify:u,wrap:h,grow:f,preventGrowOverflow:p,vars:m,variant:y,__size:g,mod:_,...v}=n,w=vF(l),S=w.length,E=si(c??"md"),C={childWidth:`calc(${100/S}% - (${E} - ${E} / ${S}))`},A=de({name:"Group",props:n,stylesCtx:C,className:i,style:s,classes:AA,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:xF});return x.jsx(W,{...A("root"),ref:e,variant:y,mod:[{grow:f},_],size:g,...v,children:w})});Wt.classes=AA;Wt.displayName="@mantine/core/Group";const[bF,Ui]=On("ModalBase component was not found in tree");function wF({opened:t,transitionDuration:e}){const[n,r]=b.useState(t),i=b.useRef(-1),o=v_()?0:e;return b.useEffect(()=>(t?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[t,o]),n}function SF({id:t,transitionProps:e,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=ci(t),[l,c]=b.useState(!1),[d,u]=b.useState(!1),h=typeof e?.duration=="number"?e?.duration:200,f=wF({opened:n,transitionDuration:h});return wP("keydown",p=>{p.key==="Escape"&&i&&n&&p.target?.getAttribute("data-mantine-stop-propagation")!=="true"&&s()},{capture:!0}),vP({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:l,bodyMounted:d,shouldLockScroll:f,setTitleMounted:c,setBodyMounted:u}}const RA=b.forwardRef(({keepMounted:t,opened:e,onClose:n,id:r,transitionProps:i,onExitTransitionEnd:s,onEnterTransitionEnd:o,trapFocus:a,closeOnEscape:l,returnFocus:c,closeOnClickOutside:d,withinPortal:u,portalProps:h,lockScroll:f,children:p,zIndex:m,shadow:y,padding:g,__vars:_,unstyled:v,removeScrollProps:w,...S},E)=>{const{_id:T,titleMounted:C,bodyMounted:A,shouldLockScroll:P,setTitleMounted:O,setBodyMounted:U}=SF({id:r,transitionProps:i,opened:e,trapFocus:a,closeOnEscape:l,onClose:n,returnFocus:c}),{key:k,...I}=w||{};return x.jsx(el,{...h,withinPortal:u,children:x.jsx(bF,{value:{opened:e,onClose:n,closeOnClickOutside:d,onExitTransitionEnd:s,onEnterTransitionEnd:o,transitionProps:{...i,keepMounted:t},getTitleId:()=>`${T}-title`,getBodyId:()=>`${T}-body`,titleMounted:C,bodyMounted:A,setTitleMounted:O,setBodyMounted:U,trapFocus:a,closeOnEscape:l,zIndex:m,unstyled:v},children:x.jsx(jf,{enabled:P&&f,...I,children:x.jsx(W,{ref:E,...S,__vars:{..._,"--mb-z-index":(m||Dr("modal")).toString(),"--mb-shadow":g_(y),"--mb-padding":si(g)},children:p})},k)})})});RA.displayName="@mantine/core/ModalBase";function EF(){const t=Ui();return b.useEffect(()=>(t.setBodyMounted(!0),()=>t.setBodyMounted(!1)),[]),t.getBodyId()}var La={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const IA=b.forwardRef(({className:t,...e},n)=>{const r=EF(),i=Ui();return x.jsx(W,{ref:n,...e,id:r,className:_t({[La.body]:!i.unstyled},t)})});IA.displayName="@mantine/core/ModalBaseBody";const kA=b.forwardRef(({className:t,onClick:e,...n},r)=>{const i=Ui();return x.jsx(rl,{ref:r,...n,onClick:s=>{i.onClose(),e?.(s)},className:_t({[La.close]:!i.unstyled},t),unstyled:i.unstyled})});kA.displayName="@mantine/core/ModalBaseCloseButton";const MA=b.forwardRef(({transitionProps:t,className:e,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Ui();return x.jsx(hi,{mounted:a.opened,transition:"pop",...a.transitionProps,onExited:()=>{a.onExitTransitionEnd?.(),a.transitionProps?.onExited?.()},onEntered:()=>{a.onEnterTransitionEnd?.(),a.transitionProps?.onEntered?.()},...t,children:l=>x.jsx("div",{...n,className:_t({[La.inner]:!a.unstyled},n.className),children:x.jsx(np,{active:a.opened&&a.trapFocus,innerRef:o,children:x.jsx(tp,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[i,l],className:_t({[La.content]:!a.unstyled},e),unstyled:a.unstyled,children:s.children})})})})});MA.displayName="@mantine/core/ModalBaseContent";const DA=b.forwardRef(({className:t,...e},n)=>{const r=Ui();return x.jsx(W,{component:"header",ref:n,className:_t({[La.header]:!r.unstyled},t),...e})});DA.displayName="@mantine/core/ModalBaseHeader";const TF={duration:200,timingFunction:"ease",transition:"fade"};function CF(t){const e=Ui();return{...TF,...e.transitionProps,...t}}const OA=b.forwardRef(({onClick:t,transitionProps:e,style:n,visible:r,...i},s)=>{const o=Ui(),a=CF(e);return x.jsx(hi,{mounted:r!==void 0?r:o.opened,...a,transition:"fade",children:l=>x.jsx(Na,{ref:s,fixed:!0,style:[n,l],zIndex:o.zIndex,unstyled:o.unstyled,onClick:c=>{t?.(c),o.closeOnClickOutside&&o.onClose()},...i})})});OA.displayName="@mantine/core/ModalBaseOverlay";function PF(){const t=Ui();return b.useEffect(()=>(t.setTitleMounted(!0),()=>t.setTitleMounted(!1)),[]),t.getTitleId()}const NA=b.forwardRef(({className:t,...e},n)=>{const r=PF(),i=Ui();return x.jsx(W,{component:"h2",ref:n,className:_t({[La.title]:!i.unstyled},t),...e,id:r})});NA.displayName="@mantine/core/ModalBaseTitle";function AF({children:t}){return x.jsx(x.Fragment,{children:t})}const[RF,IF]=iu({size:"sm"}),kF={},LA=K((t,e)=>{const n=G("InputClearButton",kF,t),{size:r,variant:i,vars:s,classNames:o,styles:a,...l}=n,c=IF(),{resolvedClassNames:d,resolvedStyles:u}=Xf({classNames:o,styles:a,props:n});return x.jsx(rl,{variant:i||"transparent",ref:e,size:r||c?.size||"sm",classNames:d,styles:u,__staticSelector:"InputClearButton",...l})});LA.displayName="@mantine/core/InputClearButton";const[MF,il]=iu({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Jn={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const f1={},DF=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${zt(e)} - ${$(2)})`}}),rp=K((t,e)=>{const n=G("InputDescription",f1,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:c,__staticSelector:d,__inheritStyles:u=!0,variant:h,...f}=G("InputDescription",f1,n),p=il(),m=de({name:["InputWrapper",d],props:n,classes:Jn,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:l,varsResolver:DF}),y=u&&p?.getStyles||m;return x.jsx(W,{component:"p",ref:e,variant:h,size:c,...y("description",p?.getStyles?{className:i,style:s}:void 0),...f})});rp.classes=Jn;rp.displayName="@mantine/core/InputDescription";const OF={},NF=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${zt(e)} - ${$(2)})`}}),ip=K((t,e)=>{const n=G("InputError",OF,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:c,__staticSelector:d,__inheritStyles:u=!0,variant:h,...f}=n,p=de({name:["InputWrapper",d],props:n,classes:Jn,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:l,varsResolver:NF}),m=il(),y=u&&m?.getStyles||p;return x.jsx(W,{component:"p",ref:e,variant:h,size:c,...y("error",m?.getStyles?{className:i,style:s}:void 0),...f})});ip.classes=Jn;ip.displayName="@mantine/core/InputError";const p1={labelElement:"label"},LF=(t,{size:e})=>({label:{"--input-label-size":zt(e),"--input-asterisk-color":void 0}}),sp=K((t,e)=>{const n=G("InputLabel",p1,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,labelElement:c,size:d,required:u,htmlFor:h,onMouseDown:f,children:p,__staticSelector:m,variant:y,mod:g,..._}=G("InputLabel",p1,n),v=de({name:["InputWrapper",m],props:n,classes:Jn,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:l,varsResolver:LF}),w=il(),S=w?.getStyles||v;return x.jsxs(W,{...S("label",w?.getStyles?{className:i,style:s}:void 0),component:c,variant:y,size:d,ref:e,htmlFor:c==="label"?h:void 0,mod:[{required:u},g],onMouseDown:E=>{f?.(E),!E.defaultPrevented&&E.detail>1&&E.preventDefault()},..._,children:[p,u&&x.jsx("span",{...S("required"),"aria-hidden":!0,children:" *"})]})});sp.classes=Jn;sp.displayName="@mantine/core/InputLabel";const m1={},V_=K((t,e)=>{const n=G("InputPlaceholder",m1,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:c,variant:d,error:u,mod:h,...f}=G("InputPlaceholder",m1,n),p=de({name:["InputPlaceholder",c],props:n,classes:Jn,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return x.jsx(W,{...p("placeholder"),mod:[{error:!!u},h],component:"span",variant:d,ref:e,...f})});V_.classes=Jn;V_.displayName="@mantine/core/InputPlaceholder";function BF(t,{hasDescription:e,hasError:n}){const r=t.findIndex(l=>l==="input"),i=t.slice(0,r),s=t.slice(r+1),o=e&&i.includes("description")||n&&i.includes("error");return{offsetBottom:e&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const FF={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},$F=(t,{size:e})=>({label:{"--input-label-size":zt(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${zt(e)} - ${$(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${zt(e)} - ${$(2)})`}}),X_=K((t,e)=>{const n=G("InputWrapper",FF,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:c,variant:d,__staticSelector:u,inputContainer:h,inputWrapperOrder:f,label:p,error:m,description:y,labelProps:g,descriptionProps:_,errorProps:v,labelElement:w,children:S,withAsterisk:E,id:T,required:C,__stylesApiProps:A,mod:P,...O}=n,U=de({name:["InputWrapper",u],props:A||n,classes:Jn,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:$F}),k={size:c,variant:d,__staticSelector:u},I=ci(T),F=typeof E=="boolean"?E:C,N=v?.id||`${I}-error`,B=_?.id||`${I}-description`,R=I,M=!!m&&typeof m!="boolean",D=!!y,L=`${M?N:""} ${D?B:""}`,j=L.trim().length>0?L.trim():void 0,ee=g?.id||`${I}-label`,ie=p&&x.jsx(sp,{labelElement:w,id:ee,htmlFor:R,required:F,...k,...g,children:p},"label"),ce=D&&x.jsx(rp,{..._,...k,size:_?.size||k.size,id:_?.id||B,children:y},"description"),re=x.jsx(b.Fragment,{children:h(S)},"input"),oe=M&&b.createElement(ip,{...v,...k,size:v?.size||k.size,key:"error",id:v?.id||N},m),_e=f.map(xe=>{switch(xe){case"label":return ie;case"input":return re;case"description":return ce;case"error":return oe;default:return null}});return x.jsx(MF,{value:{getStyles:U,describedBy:j,inputId:R,labelId:ee,...BF(f,{hasDescription:D,hasError:M})},children:x.jsx(W,{ref:e,variant:d,size:c,mod:[{error:!!m},P],...U("root"),...O,children:_e})})});X_.classes=Jn;X_.displayName="@mantine/core/InputWrapper";const UF={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},HF=(t,e,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Pe(e.size,"input-height"),"--input-fz":zt(e.size),"--input-radius":e.radius===void 0?void 0:Nt(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?$(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?$(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?Pe(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),Tt=vn((t,e)=>{const n=G("Input",UF,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:l,__staticSelector:c,__stylesApiProps:d,size:u,wrapperProps:h,error:f,disabled:p,leftSection:m,leftSectionProps:y,leftSectionWidth:g,rightSection:_,rightSectionProps:v,rightSectionWidth:w,rightSectionPointerEvents:S,leftSectionPointerEvents:E,variant:T,vars:C,pointer:A,multiline:P,radius:O,id:U,withAria:k,withErrorStyles:I,mod:F,inputSize:N,__clearSection:B,__clearable:R,__defaultRightSection:M,...D}=n,{styleProps:L,rest:j}=au(D),ee=il(),ie={offsetBottom:ee?.offsetBottom,offsetTop:ee?.offsetTop},ce=de({name:["Input",c],props:d||n,classes:Jn,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:ie,rootSelector:"wrapper",vars:C,varsResolver:HF}),re=k?{required:l,disabled:p,"aria-invalid":!!f,"aria-describedby":ee?.describedBy,id:ee?.inputId||U}:{},oe=_||R&&B||M;return x.jsx(RF,{value:{size:u||"sm"},children:x.jsxs(W,{...ce("wrapper"),...L,...h,mod:[{error:!!f&&I,pointer:A,disabled:p,multiline:P,"data-with-right-section":!!oe,"data-with-left-section":!!m},F],variant:T,size:u,children:[m&&x.jsx("div",{...y,"data-position":"left",...ce("section",{className:y?.className,style:y?.style}),children:m}),x.jsx(W,{component:"input",...j,...re,ref:e,required:l,mod:{disabled:p,error:!!f&&I},variant:T,__size:N,...ce("input")}),oe&&x.jsx("div",{...v,"data-position":"right",...ce("section",{className:v?.className,style:v?.style}),children:oe})]})})});Tt.classes=Jn;Tt.Wrapper=X_;Tt.Label=sp;Tt.Error=ip;Tt.Description=rp;Tt.Placeholder=V_;Tt.ClearButton=LA;Tt.displayName="@mantine/core/Input";function jF(t,e,n){const r=G(t,e,n),{label:i,description:s,error:o,required:a,classNames:l,styles:c,className:d,unstyled:u,__staticSelector:h,__stylesApiProps:f,errorProps:p,labelProps:m,descriptionProps:y,wrapperProps:g,id:_,size:v,style:w,inputContainer:S,inputWrapperOrder:E,withAsterisk:T,variant:C,vars:A,mod:P,...O}=r,{styleProps:U,rest:k}=au(O),I={label:i,description:s,error:o,required:a,classNames:l,className:d,__staticSelector:h,__stylesApiProps:f||r,errorProps:p,labelProps:m,descriptionProps:y,unstyled:u,styles:c,size:v,style:w,inputContainer:S,inputWrapperOrder:E,withAsterisk:T,variant:C,id:_,mod:P,...g};return{...k,classNames:l,styles:c,unstyled:u,wrapperProps:{...I,...U},inputProps:{required:a,classNames:l,styles:c,unstyled:u,size:v,__staticSelector:h,__stylesApiProps:f||r,error:o,variant:C,id:_}}}const GF={__staticSelector:"InputBase",withAria:!0},Ts=vn((t,e)=>{const{inputProps:n,wrapperProps:r,...i}=jF("InputBase",GF,t);return x.jsx(Tt.Wrapper,{...r,children:x.jsx(Tt,{...n,...i,ref:e})})});Ts.classes={...Tt.classes,...Tt.Wrapper.classes};Ts.displayName="@mantine/core/InputBase";const zF={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var BA={root:"m_8bffd616"};const WF={},ma=vn((t,e)=>{const n=G("Flex",WF,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,gap:c,rowGap:d,columnGap:u,align:h,justify:f,wrap:p,direction:m,...y}=n,g=de({name:"Flex",classes:BA,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l}),_=sn(),v=Yf(),w=IP({styleProps:{gap:c,rowGap:d,columnGap:u,align:h,justify:f,wrap:p,direction:m},theme:_,data:zF});return x.jsxs(x.Fragment,{children:[w.hasResponsiveStyles&&x.jsx(ou,{selector:`.${v}`,styles:w.styles,media:w.media}),x.jsx(W,{ref:e,...g("root",{className:v,style:qa(w.inlineStyles)}),...y})]})});ma.classes=BA;ma.displayName="@mantine/core/Flex";const[VF,Y_]=On("Accordion component was not found in the tree");function K_({style:t,size:e=16,...n}){return x.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:$(e),height:$(e),display:"block"},...n,children:x.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}K_.displayName="@mantine/core/AccordionChevron";const[XF,FA]=On("Accordion.Item component was not found in the tree");var uu={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const YF={},q_=K((t,e)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:l,onClick:c,onKeyDown:d,children:u,disabled:h,mod:f,...p}=G("AccordionControl",YF,t),{value:m}=FA(),y=Y_(),g=y.isItemActive(m),_=typeof y.order=="number",v=`h${y.order}`,w=x.jsxs(xr,{...p,...y.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:y.variant}),unstyled:y.unstyled,mod:["accordion-control",{active:g,"chevron-position":y.chevronPosition,disabled:h},f],ref:e,onClick:S=>{c?.(S),y.onChange(m)},type:"button",disabled:h,"aria-expanded":g,"aria-controls":y.getRegionId(m),id:y.getControlId(m),onKeyDown:MN({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:y.loop,orientation:"vertical",onKeyDown:d}),children:[x.jsx(W,{component:"span",mod:{rotate:!y.disableChevronRotation&&g,position:y.chevronPosition},...y.getStyles("chevron",{classNames:n,styles:s}),children:a||y.chevron}),x.jsx("span",{...y.getStyles("label",{classNames:n,styles:s}),children:u}),l&&x.jsx(W,{component:"span",mod:{"chevron-position":y.chevronPosition},...y.getStyles("icon",{classNames:n,styles:s}),children:l})]});return _?x.jsx(v,{...y.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});q_.displayName="@mantine/core/AccordionControl";q_.classes=uu;const KF={},Z_=K((t,e)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:l,...c}=G("AccordionItem",KF,t),d=Y_();return x.jsx(XF,{value:{value:a},children:x.jsx(W,{ref:e,mod:[{active:d.isItemActive(a)},l],...d.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:d.variant}),...c})})});Z_.displayName="@mantine/core/AccordionItem";Z_.classes=uu;const qF={},Q_=K((t,e)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...l}=G("AccordionPanel",qF,t),{value:c}=FA(),d=Y_();return x.jsx(NP,{ref:e,...d.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...l,in:d.isItemActive(c),transitionDuration:d.transitionDuration??200,role:"region",id:d.getRegionId(c),"aria-labelledby":d.getControlId(c),children:x.jsx("div",{...d.getStyles("content",{classNames:n,styles:s}),children:a})})});Q_.displayName="@mantine/core/AccordionPanel";Q_.classes=uu;const ZF={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:x.jsx(K_,{})},QF=(t,{transitionDuration:e,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":e===void 0?void 0:`${e}ms`,"--accordion-chevron-size":n===void 0?void 0:$(n),"--accordion-radius":r===void 0?void 0:Nt(r)}});function pt(t){const e=G("Accordion",ZF,t),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:l,multiple:c,value:d,defaultValue:u,onChange:h,id:f,loop:p,transitionDuration:m,disableChevronRotation:y,chevronPosition:g,chevronSize:_,order:v,chevron:w,variant:S,radius:E,...T}=e,C=ci(f),[A,P]=oi({value:d,defaultValue:u,finalValue:c?[]:null,onChange:h}),O=I=>Array.isArray(A)?A.includes(I):I===A,U=I=>{const F=Array.isArray(A)?A.includes(I)?A.filter(N=>N!==I):[...A,I]:I===A?null:I;P(F)},k=de({name:"Accordion",classes:uu,props:e,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:QF});return x.jsx(VF,{value:{isItemActive:O,onChange:U,getControlId:Nw(`${C}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:Nw(`${C}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:y,chevronPosition:g,order:v,chevron:w,loop:p,getStyles:k,variant:S,unstyled:o},children:x.jsx(W,{...k("root"),id:C,...T,variant:S,"data-accordion":!0,children:l})})}const JF=t=>t;pt.extend=JF;pt.withProps=lB(pt);pt.classes=uu;pt.displayName="@mantine/core/Accordion";pt.Item=Z_;pt.Panel=Q_;pt.Control=q_;pt.Chevron=K_;var $A={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const e4={},t4=(t,{radius:e,color:n,variant:r,autoContrast:i})=>{const s=t.variantColorResolver({color:n||t.primaryColor,theme:t,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":e===void 0?void 0:Nt(e),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},op=K((t,e)=>{const n=G("Alert",e4,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,radius:c,color:d,title:u,children:h,id:f,icon:p,withCloseButton:m,onClose:y,closeButtonLabel:g,variant:_,autoContrast:v,...w}=n,S=de({name:"Alert",classes:$A,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:t4}),E=ci(f),T=u&&`${E}-title`||void 0,C=`${E}-body`;return x.jsx(W,{id:E,...S("root",{variant:_}),variant:_,ref:e,...w,role:"alert","aria-describedby":C,"aria-labelledby":T,children:x.jsxs("div",{...S("wrapper"),children:[p&&x.jsx("div",{...S("icon"),children:p}),x.jsxs("div",{...S("body"),children:[u&&x.jsx("div",{...S("title"),"data-with-close-button":m||void 0,children:x.jsx("span",{id:T,...S("label"),children:u})}),h&&x.jsx("div",{id:C,...S("message"),"data-variant":_,children:h})]}),m&&x.jsx(rl,{...S("closeButton"),onClick:y,variant:"transparent",size:16,iconSize:16,"aria-label":g,unstyled:a})]})})});op.classes=$A;op.displayName="@mantine/core/Alert";var UA={root:"m_b6d8b162"};function n4(t){if(t==="start")return"start";if(t==="end"||t)return"end"}const r4={inherit:!1},i4=(t,{variant:e,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":zt(i),"--text-lh":NN(i),"--text-gradient":e==="gradient"?Jy(r,t):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?An(s,t):void 0}}),en=vn((t,e)=>{const n=G("Text",r4,t),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:l,__staticSelector:c,vars:d,className:u,style:h,classNames:f,styles:p,unstyled:m,variant:y,mod:g,size:_,...v}=n,w=de({name:["Text",c],props:n,classes:UA,className:u,style:h,classNames:f,styles:p,unstyled:m,vars:d,varsResolver:i4});return x.jsx(W,{...w("root",{focusable:!0}),ref:e,component:l?"span":"p",variant:y,mod:[{"data-truncate":n4(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},g],size:_,...v})});en.classes=UA;en.displayName="@mantine/core/Text";const[s4,sl]=On("AppShell was not found in tree");var Cs={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const o4={},J_=K((t,e)=>{const n=G("AppShellAside",o4,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:c,zIndex:d,mod:u,...h}=n,f=sl();return f.disabled?null:x.jsx(W,{component:"aside",ref:e,mod:[{"with-border":c??f.withBorder},u],...f.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...h,__vars:{"--app-shell-aside-z-index":`calc(${d??f.zIndex} + 1)`}})});J_.classes=Cs;J_.displayName="@mantine/core/AppShellAside";const a4={},ex=K((t,e)=>{const n=G("AppShellFooter",a4,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:c,zIndex:d,mod:u,...h}=n,f=sl();return f.disabled?null:x.jsx(W,{component:"footer",ref:e,mod:[{"with-border":c??f.withBorder},u],...f.getStyles("footer",{className:_t({[jf.classNames.zeroRight]:f.offsetScrollbars},i),classNames:r,styles:o,style:s}),...h,__vars:{"--app-shell-footer-z-index":(d??f.zIndex)?.toString()}})});ex.classes=Cs;ex.displayName="@mantine/core/AppShellFooter";const l4={},tx=K((t,e)=>{const n=G("AppShellHeader",l4,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:c,zIndex:d,mod:u,...h}=n,f=sl();return f.disabled?null:x.jsx(W,{component:"header",ref:e,mod:[{"with-border":c??f.withBorder},u],...f.getStyles("header",{className:_t({[jf.classNames.zeroRight]:f.offsetScrollbars},i),classNames:r,styles:o,style:s}),...h,__vars:{"--app-shell-header-z-index":(d??f.zIndex)?.toString()}})});tx.classes=Cs;tx.displayName="@mantine/core/AppShellHeader";const c4={},nx=K((t,e)=>{const n=G("AppShellMain",c4,t),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,c=sl();return x.jsx(W,{component:"main",ref:e,...c.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...l})});nx.classes=Cs;nx.displayName="@mantine/core/AppShellMain";function hu(t){return typeof t=="object"?t.base:t}function du(t){const e=typeof t=="object"&&t!==null&&typeof t.base<"u"&&Object.keys(t).length===1;return typeof t=="number"||typeof t=="string"||e}function fu(t){return!(typeof t!="object"||t===null||Object.keys(t).length===1&&"base"in t)}function u4({baseStyles:t,minMediaStyles:e,maxMediaStyles:n,aside:r,theme:i}){const s=r?.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r?.breakpoint&&!r?.collapsed?.mobile&&(n[r?.breakpoint]=n[r?.breakpoint]||{},n[r?.breakpoint]["--app-shell-aside-width"]="100%",n[r?.breakpoint]["--app-shell-aside-offset"]="0px"),du(s)){const l=$(hu(s));t["--app-shell-aside-width"]=l,t["--app-shell-aside-offset"]=l}if(fu(s)&&(typeof s.base<"u"&&(t["--app-shell-aside-width"]=$(s.base),t["--app-shell-aside-offset"]=$(s.base)),Qe(s).forEach(l=>{l!=="base"&&(e[l]=e[l]||{},e[l]["--app-shell-aside-width"]=$(s[l]),e[l]["--app-shell-aside-offset"]=$(s[l]))})),r?.collapsed?.desktop){const l=r.breakpoint;e[l]=e[l]||{},e[l]["--app-shell-aside-transform"]=o,e[l]["--app-shell-aside-transform-rtl"]=a,e[l]["--app-shell-aside-offset"]="0px !important"}if(r?.collapsed?.mobile){const l=y_(r.breakpoint,i.breakpoints)-.1;n[l]=n[l]||{},n[l]["--app-shell-aside-width"]="100%",n[l]["--app-shell-aside-offset"]="0px",n[l]["--app-shell-aside-transform"]=o,n[l]["--app-shell-aside-transform-rtl"]=a}}function h4({baseStyles:t,minMediaStyles:e,footer:n}){const r=n?.height,i="translateY(var(--app-shell-footer-height))",s=n?.offset??!0;if(du(r)){const o=$(hu(r));t["--app-shell-footer-height"]=o,s&&(t["--app-shell-footer-offset"]=o)}fu(r)&&(typeof r.base<"u"&&(t["--app-shell-footer-height"]=$(r.base),s&&(t["--app-shell-footer-offset"]=$(r.base))),Qe(r).forEach(o=>{o!=="base"&&(e[o]=e[o]||{},e[o]["--app-shell-footer-height"]=$(r[o]),s&&(e[o]["--app-shell-footer-offset"]=$(r[o])))})),n?.collapsed&&(t["--app-shell-footer-transform"]=i,t["--app-shell-footer-offset"]="0px !important")}function d4({baseStyles:t,minMediaStyles:e,header:n}){const r=n?.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=n?.offset??!0;if(du(r)){const o=$(hu(r));t["--app-shell-header-height"]=o,s&&(t["--app-shell-header-offset"]=o)}fu(r)&&(typeof r.base<"u"&&(t["--app-shell-header-height"]=$(r.base),s&&(t["--app-shell-header-offset"]=$(r.base))),Qe(r).forEach(o=>{o!=="base"&&(e[o]=e[o]||{},e[o]["--app-shell-header-height"]=$(r[o]),s&&(e[o]["--app-shell-header-offset"]=$(r[o])))})),n?.collapsed&&(t["--app-shell-header-transform"]=i,t["--app-shell-header-offset"]="0px !important")}function f4({baseStyles:t,minMediaStyles:e,maxMediaStyles:n,navbar:r,theme:i}){const s=r?.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r?.breakpoint&&!r?.collapsed?.mobile&&(n[r?.breakpoint]=n[r?.breakpoint]||{},n[r?.breakpoint]["--app-shell-navbar-width"]="100%",n[r?.breakpoint]["--app-shell-navbar-offset"]="0px"),du(s)){const l=$(hu(s));t["--app-shell-navbar-width"]=l,t["--app-shell-navbar-offset"]=l}if(fu(s)&&(typeof s.base<"u"&&(t["--app-shell-navbar-width"]=$(s.base),t["--app-shell-navbar-offset"]=$(s.base)),Qe(s).forEach(l=>{l!=="base"&&(e[l]=e[l]||{},e[l]["--app-shell-navbar-width"]=$(s[l]),e[l]["--app-shell-navbar-offset"]=$(s[l]))})),r?.collapsed?.desktop){const l=r.breakpoint;e[l]=e[l]||{},e[l]["--app-shell-navbar-transform"]=o,e[l]["--app-shell-navbar-transform-rtl"]=a,e[l]["--app-shell-navbar-offset"]="0px !important"}if(r?.collapsed?.mobile){const l=y_(r.breakpoint,i.breakpoints)-.1;n[l]=n[l]||{},n[l]["--app-shell-navbar-width"]="100%",n[l]["--app-shell-navbar-offset"]="0px",n[l]["--app-shell-navbar-transform"]=o,n[l]["--app-shell-navbar-transform-rtl"]=a}}function Ym(t){return Number(t)===0?"0px":si(t)}function p4({padding:t,baseStyles:e,minMediaStyles:n}){du(t)&&(e["--app-shell-padding"]=Ym(hu(t))),fu(t)&&(t.base&&(e["--app-shell-padding"]=Ym(t.base)),Qe(t).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=Ym(t[r]))}))}function m4({navbar:t,header:e,footer:n,aside:r,padding:i,theme:s}){const o={},a={},l={};f4({baseStyles:l,minMediaStyles:o,maxMediaStyles:a,navbar:t,theme:s}),u4({baseStyles:l,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),d4({baseStyles:l,minMediaStyles:o,header:e}),h4({baseStyles:l,minMediaStyles:o,footer:n}),p4({baseStyles:l,minMediaStyles:o,padding:i});const c=zd(Qe(o),s.breakpoints).map(h=>({query:`(min-width: ${Gd(h.px)})`,styles:o[h.value]})),d=zd(Qe(a),s.breakpoints).map(h=>({query:`(max-width: ${Gd(h.px)})`,styles:a[h.value]})),u=[...c,...d];return{baseStyles:l,media:u}}function g4({navbar:t,header:e,aside:n,footer:r,padding:i}){const s=sn(),o=$i(),{media:a,baseStyles:l}=m4({navbar:t,header:e,footer:r,aside:n,padding:i,theme:s});return x.jsx(ou,{media:a,styles:l,selector:o.cssVariablesSelector})}const y4={},rx=K((t,e)=>{const n=G("AppShellNavbar",y4,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:c,zIndex:d,mod:u,...h}=n,f=sl();return f.disabled?null:x.jsx(W,{component:"nav",ref:e,mod:[{"with-border":c??f.withBorder},u],...f.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...h,__vars:{"--app-shell-navbar-z-index":`calc(${d??f.zIndex} + 1)`}})});rx.classes=Cs;rx.displayName="@mantine/core/AppShellNavbar";const v4={},ix=vn((t,e)=>{const n=G("AppShellSection",v4,t),{classNames:r,className:i,style:s,styles:o,vars:a,grow:l,mod:c,...d}=n,u=sl();return x.jsx(W,{ref:e,mod:[{grow:l},c],...u.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...d})});ix.classes=Cs;ix.displayName="@mantine/core/AppShellSection";function _4({transitionDuration:t,disabled:e}){const[n,r]=b.useState(!0),i=b.useRef(-1),s=b.useRef(-1);return wP("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>b.startTransition(()=>{r(!1)}),200)}),Za(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>b.startTransition(()=>{r(!1)}),t||0)},[e,t]),n}const x4={withBorder:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Dr("app")},b4=(t,{transitionDuration:e,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${e}ms`,"--app-shell-transition-timing-function":n}}),zn=K((t,e)=>{const n=G("AppShell",x4,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,navbar:c,withBorder:d,padding:u,transitionDuration:h,transitionTimingFunction:f,header:p,zIndex:m,layout:y,disabled:g,aside:_,footer:v,offsetScrollbars:w=y!=="alt",mod:S,...E}=n,T=de({name:"AppShell",classes:Cs,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:b4}),C=_4({disabled:g,transitionDuration:h});return x.jsxs(s4,{value:{getStyles:T,withBorder:d,zIndex:m,disabled:g,offsetScrollbars:w},children:[x.jsx(g4,{navbar:c,header:p,aside:_,footer:v,padding:u}),x.jsx(W,{ref:e,...T("root"),mod:[{resizing:C,layout:y,disabled:g},S],...E})]})});zn.classes=Cs;zn.displayName="@mantine/core/AppShell";zn.Navbar=rx;zn.Header=tx;zn.Main=nx;zn.Aside=J_;zn.Footer=ex;zn.Section=ix;function HA(t){return typeof t=="string"?{value:t,label:t}:"value"in t&&!("label"in t)?{value:t.value,label:t.value,disabled:t.disabled}:typeof t=="number"?{value:t.toString(),label:t.toString()}:"group"in t?{group:t.group,items:t.items.map(e=>HA(e))}:t}function jA(t){return t?t.map(e=>HA(e)):[]}function sx(t){return t.reduce((e,n)=>"group"in n?{...e,...sx(n.items)}:(e[n.value]=n,e),{})}var yn={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const w4={error:null},S4=(t,{size:e,color:n})=>({chevron:{"--combobox-chevron-size":Pe(e,"combobox-chevron-size"),"--combobox-chevron-color":n?An(n,t):void 0}}),ox=K((t,e)=>{const n=G("ComboboxChevron",w4,t),{size:r,error:i,style:s,className:o,classNames:a,styles:l,unstyled:c,vars:d,mod:u,...h}=n,f=de({name:"ComboboxChevron",classes:yn,props:n,style:s,className:o,classNames:a,styles:l,unstyled:c,vars:d,varsResolver:S4,rootSelector:"chevron"});return x.jsx(W,{component:"svg",...h,...f("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},u],ref:e,children:x.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});ox.classes=yn;ox.displayName="@mantine/core/ComboboxChevron";const[E4,er]=On("Combobox component was not found in tree"),GA=b.forwardRef(({size:t,onMouseDown:e,onClick:n,onClear:r,...i},s)=>x.jsx(Tt.ClearButton,{ref:s,tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),e?.(o)},onClick:o=>{r(),n?.(o)}}));GA.displayName="@mantine/core/ComboboxClearButton";const T4={},ax=K((t,e)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=G("ComboboxDropdown",T4,t),l=er();return x.jsx(Es.Dropdown,{...a,ref:e,role:"presentation","data-hidden":o||void 0,...l.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});ax.classes=yn;ax.displayName="@mantine/core/ComboboxDropdown";const C4={refProp:"ref"},zA=K((t,e)=>{const{children:n,refProp:r}=G("ComboboxDropdownTarget",C4,t);if(er(),!ho(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return x.jsx(Es.Target,{ref:e,refProp:r,children:n})});zA.displayName="@mantine/core/ComboboxDropdownTarget";const P4={},lx=K((t,e)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=G("ComboboxEmpty",P4,t),l=er();return x.jsx(W,{ref:e,...l.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});lx.classes=yn;lx.displayName="@mantine/core/ComboboxEmpty";function cx({onKeyDown:t,withKeyboardNavigation:e,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=er(),[a,l]=b.useState(null),c=u=>{if(t?.(u),!o.readOnly&&e){if(u.nativeEvent.isComposing)return;if(u.nativeEvent.code==="ArrowDown"&&(u.preventDefault(),o.store.dropdownOpened?l(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),u.nativeEvent.code==="ArrowUp"&&(u.preventDefault(),o.store.dropdownOpened?l(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),u.nativeEvent.code==="Enter"||u.nativeEvent.code==="NumpadEnter"){if(u.nativeEvent.keyCode===229)return;const h=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&h!==-1?(u.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(u.preventDefault(),o.store.openDropdown("keyboard"))}u.key==="Escape"&&o.store.closeDropdown("keyboard"),u.nativeEvent.code==="Space"&&i==="button"&&(u.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.dropdownOpened?o.store.listId:void 0,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:c}}const A4={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},WA=K((t,e)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...c}=G("ComboboxEventsTarget",A4,t);if(!ho(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const d=er(),u=cx({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:l});return b.cloneElement(n,{...u,...c,[r]:Lt(e,d.store.targetRef,zf(n))})});WA.displayName="@mantine/core/ComboboxEventsTarget";const R4={},ux=K((t,e)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=G("ComboboxFooter",R4,t),l=er();return x.jsx(W,{ref:e,...l.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:c=>{c.preventDefault()}})});ux.classes=yn;ux.displayName="@mantine/core/ComboboxFooter";const I4={},hx=K((t,e)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:l,...c}=G("ComboboxGroup",I4,t),d=er();return x.jsxs(W,{ref:e,...d.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...c,children:[l&&x.jsx("div",{...d.getStyles("groupLabel",{classNames:n,styles:s}),children:l}),a]})});hx.classes=yn;hx.displayName="@mantine/core/ComboboxGroup";const k4={},dx=K((t,e)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=G("ComboboxHeader",k4,t),l=er();return x.jsx(W,{ref:e,...l.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:c=>{c.preventDefault()}})});dx.classes=yn;dx.displayName="@mantine/core/ComboboxHeader";function VA({value:t,valuesDivider:e=",",...n}){return x.jsx("input",{type:"hidden",value:Array.isArray(t)?t.join(e):t||"",...n})}VA.displayName="@mantine/core/ComboboxHiddenInput";const M4={},fx=K((t,e)=>{const n=G("ComboboxOption",M4,t),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:l,id:c,active:d,onMouseDown:u,onMouseOver:h,disabled:f,selected:p,mod:m,...y}=n,g=er(),_=b.useId(),v=c||_;return x.jsx(W,{...g.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...y,ref:e,id:v,mod:["combobox-option",{"combobox-active":d,"combobox-disabled":f,"combobox-selected":p},m],role:"option",onClick:w=>{f?w.preventDefault():(g.onOptionSubmit?.(n.value,n),l?.(w))},onMouseDown:w=>{w.preventDefault(),u?.(w)},onMouseOver:w=>{g.resetSelectionOnOptionHover&&g.store.resetSelectedOption(),h?.(w)}})});fx.classes=yn;fx.displayName="@mantine/core/ComboboxOption";const D4={},px=K((t,e)=>{const n=G("ComboboxOptions",D4,t),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:l,labelledBy:c,...d}=n,u=er(),h=ci(a);return b.useEffect(()=>{u.store.setListId(h)},[h]),x.jsx(W,{ref:e,...u.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...d,id:h,role:"listbox","aria-labelledby":c,onMouseDown:f=>{f.preventDefault(),l?.(f)}})});px.classes=yn;px.displayName="@mantine/core/ComboboxOptions";const O4={withAriaAttributes:!0,withKeyboardNavigation:!0},mx=K((t,e)=>{const n=G("ComboboxSearch",O4,t),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:l,withKeyboardNavigation:c,size:d,...u}=n,h=er(),f=h.getStyles("search"),p=cx({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:c,withExpandedAttribute:!1,onKeyDown:l,autoComplete:"off"});return x.jsx(Tt,{ref:Lt(e,h.store.searchRef),classNames:[{input:f.className},r],styles:[{input:f.style},i],size:d||h.size,...p,...u,__staticSelector:"Combobox"})});mx.classes=yn;mx.displayName="@mantine/core/ComboboxSearch";const N4={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},XA=K((t,e)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...c}=G("ComboboxTarget",N4,t);if(!ho(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const d=er(),u=cx({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:l}),h=b.cloneElement(n,{...u,...c});return x.jsx(Es.Target,{ref:Lt(e,d.store.targetRef),children:h})});XA.displayName="@mantine/core/ComboboxTarget";function L4(t,e,n){for(let r=t-1;r>=0;r-=1)if(!e[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=e.length-1;r>-1;r-=1)if(!e[r].hasAttribute("data-combobox-disabled"))return r}return t}function B4(t,e,n){for(let r=t+1;r<e.length;r+=1)if(!e[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<e.length;r+=1)if(!e[r].hasAttribute("data-combobox-disabled"))return r}return t}function F4(t){for(let e=0;e<t.length;e+=1)if(!t[e].hasAttribute("data-combobox-disabled"))return e;return-1}function gx({defaultOpened:t,opened:e,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,l]=oi({value:e,defaultValue:t,finalValue:!1,onChange:n}),c=b.useRef(null),d=b.useRef(-1),u=b.useRef(null),h=b.useRef(null),f=b.useRef(-1),p=b.useRef(-1),m=b.useRef(-1),y=b.useCallback((N="unknown")=>{a||(l(!0),i?.(N))},[l,i,a]),g=b.useCallback((N="unknown")=>{a&&(l(!1),r?.(N))},[l,r,a]),_=b.useCallback((N="unknown")=>{a?g(N):y(N)},[g,y,a]),v=b.useCallback(()=>{const N=document.querySelector(`#${c.current} [data-combobox-selected]`);N?.removeAttribute("data-combobox-selected"),N?.removeAttribute("aria-selected")},[]),w=b.useCallback(N=>{const R=document.getElementById(c.current)?.querySelectorAll("[data-combobox-option]");if(!R)return null;const M=N>=R.length?0:N<0?R.length-1:N;return d.current=M,R?.[M]&&!R[M].hasAttribute("data-combobox-disabled")?(v(),R[M].setAttribute("data-combobox-selected","true"),R[M].setAttribute("aria-selected","true"),R[M].scrollIntoView({block:"nearest",behavior:o}),R[M].id):null},[o,v]),S=b.useCallback(()=>{const N=document.querySelector(`#${c.current} [data-combobox-active]`);if(N){const B=document.querySelectorAll(`#${c.current} [data-combobox-option]`),R=Array.from(B).findIndex(M=>M===N);return w(R)}return w(0)},[w]),E=b.useCallback(()=>w(B4(d.current,document.querySelectorAll(`#${c.current} [data-combobox-option]`),s)),[w,s]),T=b.useCallback(()=>w(L4(d.current,document.querySelectorAll(`#${c.current} [data-combobox-option]`),s)),[w,s]),C=b.useCallback(()=>w(F4(document.querySelectorAll(`#${c.current} [data-combobox-option]`))),[w]),A=b.useCallback((N="selected",B)=>{m.current=window.setTimeout(()=>{const R=document.querySelectorAll(`#${c.current} [data-combobox-option]`),M=Array.from(R).findIndex(D=>D.hasAttribute(`data-combobox-${N}`));d.current=M,B?.scrollIntoView&&R[M]?.scrollIntoView({block:"nearest",behavior:o})},0)},[]),P=b.useCallback(()=>{d.current=-1,v()},[v]),O=b.useCallback(()=>{document.querySelectorAll(`#${c.current} [data-combobox-option]`)?.[d.current]?.click()},[]),U=b.useCallback(N=>{c.current=N},[]),k=b.useCallback(()=>{f.current=window.setTimeout(()=>u.current.focus(),0)},[]),I=b.useCallback(()=>{p.current=window.setTimeout(()=>h.current.focus(),0)},[]),F=b.useCallback(()=>d.current,[]);return b.useEffect(()=>()=>{window.clearTimeout(f.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:y,closeDropdown:g,toggleDropdown:_,selectedOptionIndex:d.current,getSelectedOptionIndex:F,selectOption:w,selectFirstOption:C,selectActiveOption:S,selectNextOption:E,selectPreviousOption:T,resetSelectedOption:P,updateSelectedOptionIndex:A,listId:c.current,setListId:U,clickSelectedOption:O,searchRef:u,focusSearchInput:k,targetRef:h,focusTarget:I}}const $4={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},U4=(t,{size:e,dropdownPadding:n})=>({options:{"--combobox-option-fz":zt(e),"--combobox-option-padding":Pe(e,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:$(n),"--combobox-option-fz":zt(e),"--combobox-option-padding":Pe(e,"combobox-option-padding")}});function Te(t){const e=G("Combobox",$4,t),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:l,onClose:c,size:d,dropdownPadding:u,resetSelectionOnOptionHover:h,__staticSelector:f,readOnly:p,...m}=e,y=gx(),g=o||y,_=de({name:f||"Combobox",classes:yn,props:e,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:U4}),v=()=>{c?.(),g.closeDropdown()};return x.jsx(E4,{value:{getStyles:_,store:g,onOptionSubmit:l,size:d,resetSelectionOnOptionHover:h,readOnly:p},children:x.jsx(Es,{opened:g.dropdownOpened,...m,onChange:w=>!w&&v(),withRoles:!1,unstyled:i,children:s})})}const H4=t=>t;Te.extend=H4;Te.classes=yn;Te.displayName="@mantine/core/Combobox";Te.Target=XA;Te.Dropdown=ax;Te.Options=px;Te.Option=fx;Te.Search=mx;Te.Empty=lx;Te.Chevron=ox;Te.Footer=ux;Te.Header=dx;Te.EventsTarget=WA;Te.DropdownTarget=zA;Te.Group=hx;Te.ClearButton=GA;Te.HiddenInput=VA;var YA={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const j4=YA,KA=b.forwardRef(({__staticSelector:t,__stylesApiProps:e,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:l,id:c,disabled:d,error:u,size:h,labelPosition:f="left",bodyElement:p="div",labelElement:m="label",variant:y,style:g,vars:_,mod:v,...w},S)=>{const E=de({name:t,props:e,className:n,style:g,classes:YA,classNames:r,styles:i,unstyled:s});return x.jsx(W,{...E("root"),ref:S,__vars:{"--label-fz":zt(h),"--label-lh":Pe(h,"label-lh")},mod:[{"label-position":f},v],variant:y,size:h,...w,children:x.jsxs(W,{component:p,htmlFor:p==="label"?c:void 0,...E("body"),children:[o,x.jsxs("div",{...E("labelWrapper"),"data-disabled":d||void 0,children:[a&&x.jsx(W,{component:m,htmlFor:m==="label"?c:void 0,...E("label"),"data-disabled":d||void 0,children:a}),l&&x.jsx(Tt.Description,{size:h,__inheritStyles:!1,...E("description"),children:l}),u&&typeof u!="boolean"&&x.jsx(Tt.Error,{size:h,__inheritStyles:!1,...E("error"),children:u})]})]})})});KA.displayName="@mantine/core/InlineInput";function G4({children:t,role:e}){const n=il();return n?x.jsx("div",{role:e,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:t}):x.jsx(x.Fragment,{children:t})}function z4({size:t,style:e,...n}){const r=t!==void 0?{width:$(t),height:$(t),...e}:e;return x.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:x.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Ba(t){return"group"in t}function qA({options:t,search:e,limit:n}){const r=e.trim().toLowerCase(),i=[];for(let s=0;s<t.length;s+=1){const o=t[s];if(i.length===n)return i;Ba(o)&&i.push({group:o.group,items:qA({options:o.items,search:e,limit:n-i.length})}),Ba(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function W4(t){if(t.length===0)return!0;for(const e of t)if(!("group"in e)||e.items.length>0)return!1;return!0}function ZA(t,e=new Set){if(Array.isArray(t))for(const n of t)if(Ba(n))ZA(n.items,e);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(e.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);e.add(n.value)}}function V4(t,e){return Array.isArray(t)?t.includes(e):t===e}function QA({data:t,withCheckIcon:e,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!Ba(t)){const a=V4(n,t.value),l=e&&a&&x.jsx(z4,{className:yn.optionsDropdownCheckIcon}),c=x.jsxs(x.Fragment,{children:[r==="left"&&l,x.jsx("span",{children:t.label}),r==="right"&&l]});return x.jsx(Te.Option,{value:t.value,disabled:t.disabled,className:_t({[yn.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:t,checked:a}):c})}const o=t.items.map(a=>x.jsx(QA,{data:a,value:n,unstyled:i,withCheckIcon:e,checkIconPosition:r,renderOption:s},a.value));return x.jsx(Te.Group,{label:t.group,children:o})}function JA({data:t,hidden:e,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:l=!0,withCheckIcon:c=!1,value:d,checkIconPosition:u,nothingFoundMessage:h,unstyled:f,labelId:p,renderOption:m,scrollAreaProps:y,"aria-label":g}){ZA(t);const v=typeof i=="string"?(r||qA)({options:t,search:l?i:"",limit:s??1/0}):t,w=W4(v),S=v.map(E=>x.jsx(QA,{data:E,withCheckIcon:c,value:d,checkIconPosition:u,unstyled:f,renderOption:m},Ba(E)?E.group:E.value));return x.jsx(Te.Dropdown,{hidden:e||n&&w,"data-composed":!0,children:x.jsxs(Te.Options,{labelledBy:p,"aria-label":g,children:[a?x.jsx(fo.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...y,children:S}):S,w&&h&&x.jsx(Te.Empty,{children:h})]})})}var eR={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const X4={},Y4=(t,{color:e,size:n,lineSize:r,transitionDuration:i,transitionTimingFunction:s})=>({root:{"--burger-color":e?An(e,t):void 0,"--burger-size":Pe(n,"burger-size"),"--burger-line-size":r?$(r):void 0,"--burger-transition-duration":i===void 0?void 0:`${i}ms`,"--burger-transition-timing-function":s}}),Jd=K((t,e)=>{const n=G("Burger",X4,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,opened:c,children:d,transitionDuration:u,transitionTimingFunction:h,lineSize:f,...p}=n,m=de({name:"Burger",classes:eR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Y4});return x.jsxs(xr,{...m("root"),ref:e,...p,children:[x.jsx(W,{mod:["reduce-motion",{opened:c}],...m("burger")}),d]})});Jd.classes=eR;Jd.displayName="@mantine/core/Burger";var ol={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const g1={orientation:"horizontal"},K4=(t,{borderWidth:e})=>({group:{"--button-border-width":$(e)}}),yx=K((t,e)=>{const n=G("ButtonGroup",g1,t),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:l,vars:c,borderWidth:d,variant:u,mod:h,...f}=G("ButtonGroup",g1,t),p=de({name:"ButtonGroup",props:n,classes:ol,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:c,varsResolver:K4,rootSelector:"group"});return x.jsx(W,{...p("group"),ref:e,variant:u,mod:[{"data-orientation":l},h],role:"group",...f})});yx.classes=ol;yx.displayName="@mantine/core/ButtonGroup";const y1={},q4=(t,{radius:e,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":Pe(o,"section-height"),"--section-padding-x":Pe(o,"section-padding-x"),"--section-fz":o?.includes("compact")?zt(o.replace("compact-","")):zt(o),"--section-radius":e===void 0?void 0:Nt(e),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},vx=K((t,e)=>{const n=G("ButtonGroupSection",y1,t),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,variant:c,gradient:d,radius:u,autoContrast:h,...f}=G("ButtonGroupSection",y1,t),p=de({name:"ButtonGroupSection",props:n,classes:ol,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:q4,rootSelector:"groupSection"});return x.jsx(W,{...p("groupSection"),ref:e,variant:c,...f})});vx.classes=ol;vx.displayName="@mantine/core/ButtonGroupSection";const Z4={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${$(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},Q4={},J4=(t,{radius:e,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const l=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Pe(s,"button-height"),"--button-padding-x":Pe(s,"button-padding-x"),"--button-fz":s?.includes("compact")?zt(s.replace("compact-","")):zt(s),"--button-radius":e===void 0?void 0:Nt(e),"--button-bg":n||i?l.background:void 0,"--button-hover":n||i?l.hover:void 0,"--button-color":l.color,"--button-bd":n||i?l.border:void 0,"--button-hover-color":n||i?l.hoverColor:void 0}}},jt=vn((t,e)=>{const n=G("Button",Q4,t),{style:r,vars:i,className:s,color:o,disabled:a,children:l,leftSection:c,rightSection:d,fullWidth:u,variant:h,radius:f,loading:p,loaderProps:m,gradient:y,classNames:g,styles:_,unstyled:v,"data-disabled":w,autoContrast:S,mod:E,...T}=n,C=de({name:"Button",props:n,classes:ol,className:s,style:r,classNames:g,styles:_,unstyled:v,vars:i,varsResolver:J4}),A=!!c,P=!!d;return x.jsxs(xr,{ref:e,...C("root",{active:!a&&!p&&!w}),unstyled:v,variant:h,disabled:a||p,mod:[{disabled:a||w,loading:p,block:u,"with-left-section":A,"with-right-section":P},E],...T,children:[x.jsx(hi,{mounted:!!p,transition:Z4,duration:150,children:O=>x.jsx(W,{component:"span",...C("loader",{style:O}),"aria-hidden":!0,children:x.jsx(tl,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),x.jsxs("span",{...C("inner"),children:[c&&x.jsx(W,{component:"span",...C("section"),mod:{position:"left"},children:c}),x.jsx(W,{component:"span",mod:{loading:p},...C("label"),children:l}),d&&x.jsx(W,{component:"span",...C("section"),mod:{position:"right"},children:d})]})]})});jt.classes=ol;jt.displayName="@mantine/core/Button";jt.Group=yx;jt.GroupSection=vx;const[e5,t5]=On("Card component was not found in tree");var _x={root:"m_e615b15f",section:"m_599a2148"};const n5={},ap=vn((t,e)=>{const n=G("CardSection",n5,t),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:l,inheritPadding:c,mod:d,...u}=n,h=t5();return x.jsx(W,{ref:e,mod:[{"with-border":l,"inherit-padding":c},d],...h.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...u})});ap.classes=_x;ap.displayName="@mantine/core/CardSection";const r5={},i5=(t,{padding:e})=>({root:{"--card-padding":si(e)}}),Ni=vn((t,e)=>{const n=G("Card",r5,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:c,padding:d,...u}=n,h=de({name:"Card",props:n,classes:_x,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:i5}),f=b.Children.toArray(c),p=f.map((m,y)=>typeof m=="object"&&m&&"type"in m&&m.type===ap?b.cloneElement(m,{"data-first-section":y===0||void 0,"data-last-section":y===f.length-1||void 0}):m);return x.jsx(e5,{value:{getStyles:h},children:x.jsx(tp,{ref:e,unstyled:a,...h("root"),...u,children:p})})});Ni.classes=_x;Ni.displayName="@mantine/core/Card";Ni.Section=ap;var tR={root:"m_4451eb3a"};const s5={},ur=vn((t,e)=>{const n=G("Center",s5,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,inline:c,mod:d,...u}=n,h=de({name:"Center",props:n,classes:tR,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l});return x.jsx(W,{ref:e,mod:[{inline:c},d],...h("root"),...u})});ur.classes=tR;ur.displayName="@mantine/core/Center";const o5={multiple:!1},nR=b.forwardRef((t,e)=>{const{onChange:n,children:r,multiple:i,accept:s,name:o,form:a,resetRef:l,disabled:c,capture:d,inputProps:u,...h}=G("FileButton",o5,t),f=b.useRef(null),p=()=>{!c&&f.current?.click()},m=g=>{n(i?Array.from(g.currentTarget.files):g.currentTarget.files[0]||null)};return Wd(l,()=>{f.current&&(f.current.value="")}),x.jsxs(x.Fragment,{children:[r({onClick:p,...h}),x.jsx("input",{style:{display:"none"},type:"file",accept:s,multiple:i,onChange:m,ref:Lt(e,f),name:o,form:a,capture:d,...u})]})});nR.displayName="@mantine/core/FileButton";const[v1,rR]=On("Grid component was not found in tree"),uv=(t,e)=>t==="content"?"auto":t==="auto"?"0rem":t?`${100/(e/t)}%`:void 0,_1=(t,e,n)=>n||t==="auto"?"100%":t==="content"?"unset":uv(t,e),x1=(t,e)=>{if(t)return t==="auto"||e?"1":"auto"},b1=(t,e)=>t===0?"0":t?`${100/(e/t)}%`:void 0;function a5({span:t,order:e,offset:n,selector:r}){const i=sn(),s=rR(),o=s.breakpoints||i.breakpoints,l=Vl(t)===void 0?12:Vl(t),c=qa({"--col-order":Vl(e)?.toString(),"--col-flex-grow":x1(l,s.grow),"--col-flex-basis":uv(l,s.columns),"--col-width":l==="content"?"auto":void 0,"--col-max-width":_1(l,s.columns,s.grow),"--col-offset":b1(Vl(n),s.columns)}),d=Qe(o).reduce((f,p)=>(f[p]||(f[p]={}),typeof e=="object"&&e[p]!==void 0&&(f[p]["--col-order"]=e[p]?.toString()),typeof t=="object"&&t[p]!==void 0&&(f[p]["--col-flex-grow"]=x1(t[p],s.grow),f[p]["--col-flex-basis"]=uv(t[p],s.columns),f[p]["--col-width"]=t[p]==="content"?"auto":void 0,f[p]["--col-max-width"]=_1(t[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(f[p]["--col-offset"]=b1(n[p],s.columns)),f),{}),h=zd(Qe(d),o).filter(f=>Qe(d[f.value]).length>0).map(f=>({query:s.type==="container"?`mantine-grid (min-width: ${o[f.value]})`:`(min-width: ${o[f.value]})`,styles:d[f.value]}));return x.jsx(ou,{styles:c,media:s.type==="container"?void 0:h,container:s.type==="container"?h:void 0,selector:r})}var xx={container:"m_8478a6da",root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const l5={span:12},bx=K((t,e)=>{const n=G("GridCol",l5,t),{classNames:r,className:i,style:s,styles:o,vars:a,span:l,order:c,offset:d,...u}=n,h=rR(),f=Yf();return x.jsxs(x.Fragment,{children:[x.jsx(a5,{selector:`.${f}`,span:l,order:c,offset:d}),x.jsx(W,{ref:e,...h.getStyles("col",{className:_t(i,f),style:s,classNames:r,styles:o}),...u})]})});bx.classes=xx;bx.displayName="@mantine/core/GridCol";function w1({gutter:t,selector:e,breakpoints:n,type:r}){const i=sn(),s=n||i.breakpoints,o=qa({"--grid-gutter":si(Vl(t))}),a=Qe(s).reduce((d,u)=>(d[u]||(d[u]={}),typeof t=="object"&&t[u]!==void 0&&(d[u]["--grid-gutter"]=si(t[u])),d),{}),c=zd(Qe(a),s).filter(d=>Qe(a[d.value]).length>0).map(d=>({query:r==="container"?`mantine-grid (min-width: ${s[d.value]})`:`(min-width: ${s[d.value]})`,styles:a[d.value]}));return x.jsx(ou,{styles:o,media:r==="container"?void 0:c,container:r==="container"?c:void 0,selector:e})}const c5={gutter:"md",grow:!1,columns:12},u5=(t,{justify:e,align:n,overflow:r})=>({root:{"--grid-justify":e,"--grid-align":n,"--grid-overflow":r}}),ga=K((t,e)=>{const n=G("Grid",c5,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,grow:c,gutter:d,columns:u,align:h,justify:f,children:p,breakpoints:m,type:y,...g}=n,_=de({name:"Grid",classes:xx,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:u5}),v=Yf();return y==="container"&&m?x.jsxs(v1,{value:{getStyles:_,grow:c,columns:u||12,breakpoints:m,type:y},children:[x.jsx(w1,{selector:`.${v}`,...n}),x.jsx("div",{..._("container"),children:x.jsx(W,{ref:e,..._("root",{className:v}),...g,children:x.jsx("div",{..._("inner"),children:p})})})]}):x.jsxs(v1,{value:{getStyles:_,grow:c,columns:u||12,breakpoints:m,type:y},children:[x.jsx(w1,{selector:`.${v}`,...n}),x.jsx(W,{ref:e,..._("root",{className:v}),...g,children:x.jsx("div",{..._("inner"),children:p})})]})});ga.classes=xx;ga.displayName="@mantine/core/Grid";ga.Col=bx;var iR={root:"m_dc6f14e2"};const h5={},d5=(t,{size:e})=>({root:{"--kbd-fz":Pe(e,"kbd-fz"),"--kbd-padding":Pe(e,"kbd-padding")}}),pu=K((t,e)=>{const n=G("Kbd",h5,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,...c}=n,d=de({name:"Kbd",classes:iR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:d5});return x.jsx(W,{component:"kbd",ref:e,...d("root"),...c})});pu.classes=iR;pu.displayName="@mantine/core/Kbd";var sR={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const S1={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Dr("overlay")},f5=(t,{zIndex:e})=>({root:{"--lo-z-index":e?.toString()}}),wx=K((t,e)=>{const n=G("LoadingOverlay",S1,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,transitionProps:c,loaderProps:d,overlayProps:u,visible:h,zIndex:f,...p}=n,m=sn(),y=de({name:"LoadingOverlay",classes:sR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:f5}),g={...S1.overlayProps,...u};return x.jsx(hi,{transition:"fade",...c,mounted:!!h,children:_=>x.jsxs(W,{...y("root",{style:_}),ref:e,...p,children:[x.jsx(tl,{...y("loader"),unstyled:a,...d}),x.jsx(Na,{...g,...y("overlay"),darkHidden:!0,unstyled:a,color:u?.color||m.white}),x.jsx(Na,{...g,...y("overlay"),lightHidden:!0,unstyled:a,color:u?.color||m.colors.dark[5]})]})})});wx.classes=sR;wx.displayName="@mantine/core/LoadingOverlay";const[p5,al]=On("Modal component was not found in tree");var Hi={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const m5={},lp=K((t,e)=>{const n=G("ModalBody",m5,t),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,c=al();return x.jsx(IA,{ref:e,...c.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...l})});lp.classes=Hi;lp.displayName="@mantine/core/ModalBody";const g5={},cp=K((t,e)=>{const n=G("ModalCloseButton",g5,t),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,c=al();return x.jsx(kA,{ref:e,...c.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...l})});cp.classes=Hi;cp.displayName="@mantine/core/ModalCloseButton";const y5={},up=K((t,e)=>{const n=G("ModalContent",y5,t),{classNames:r,className:i,style:s,styles:o,vars:a,children:l,__hidden:c,...d}=n,u=al(),h=u.scrollAreaComponent||AF;return x.jsx(MA,{...u.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:u.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":u.fullScreen||void 0,"data-modal-content":!0,"data-hidden":c||void 0,ref:e,...d,children:x.jsx(h,{style:{maxHeight:u.fullScreen?"100dvh":`calc(100dvh - (${$(u.yOffset)} * 2))`},children:l})})});up.classes=Hi;up.displayName="@mantine/core/ModalContent";const v5={},hp=K((t,e)=>{const n=G("ModalHeader",v5,t),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,c=al();return x.jsx(DA,{ref:e,...c.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...l})});hp.classes=Hi;hp.displayName="@mantine/core/ModalHeader";const _5={},dp=K((t,e)=>{const n=G("ModalOverlay",_5,t),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,c=al();return x.jsx(OA,{ref:e,...c.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...l})});dp.classes=Hi;dp.displayName="@mantine/core/ModalOverlay";const x5={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Dr("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},b5=(t,{radius:e,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":e===void 0?void 0:Nt(e),"--modal-size":Pe(n,"modal-size"),"--modal-y-offset":$(r),"--modal-x-offset":$(i)}}),fp=K((t,e)=>{const n=G("ModalRoot",x5,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,yOffset:c,scrollAreaComponent:d,radius:u,fullScreen:h,centered:f,xOffset:p,__staticSelector:m,...y}=n,g=de({name:m,classes:Hi,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:b5});return x.jsx(p5,{value:{yOffset:c,scrollAreaComponent:d,getStyles:g,fullScreen:h},children:x.jsx(RA,{ref:e,...g("root"),"data-full-screen":h||void 0,"data-centered":f||void 0,unstyled:a,...y})})});fp.classes=Hi;fp.displayName="@mantine/core/ModalRoot";const[w5,S5]=iu();function oR({children:t}){const[e,n]=b.useState([]),[r,i]=b.useState(Dr("modal"));return x.jsx(w5,{value:{stack:e,addModal:(s,o)=>{n(a=>[...new Set([...a,s])]),i(a=>typeof o=="number"&&typeof a=="number"?Math.max(a,o):a)},removeModal:s=>n(o=>o.filter(a=>a!==s)),getZIndex:s=>`calc(${r} + ${e.indexOf(s)} + 1)`,currentId:e[e.length-1],maxZIndex:r},children:t})}oR.displayName="@mantine/core/ModalStack";const E5={},pp=K((t,e)=>{const n=G("ModalTitle",E5,t),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,c=al();return x.jsx(NA,{ref:e,...c.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...l})});pp.classes=Hi;pp.displayName="@mantine/core/ModalTitle";const T5={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Dr("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},tr=K((t,e)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:l,opened:c,stackId:d,zIndex:u,...h}=G("Modal",T5,t),f=S5(),p=!!n||s,m=f&&d?{closeOnEscape:f.currentId===d,trapFocus:f.currentId===d,zIndex:f.getZIndex(d)}:{},y=r===!1?!1:d&&f?f.currentId===d:c;return b.useEffect(()=>{f&&d&&(c?f.addModal(d,u||Dr("modal")):f.removeModal(d))},[c,d,u]),x.jsxs(fp,{ref:e,radius:l,opened:c,zIndex:f&&d?f.getZIndex(d):u,...h,...m,children:[r&&x.jsx(dp,{visible:y,transitionProps:f&&d?{duration:0}:void 0,...i}),x.jsxs(up,{radius:l,__hidden:f&&d&&c?d!==f.currentId:!1,children:[p&&x.jsxs(hp,{children:[n&&x.jsx(pp,{children:n}),s&&x.jsx(cp,{...o})]}),x.jsx(lp,{children:a})]})]})});tr.classes=Hi;tr.displayName="@mantine/core/Modal";tr.Root=fp;tr.Overlay=dp;tr.Content=up;tr.Body=lp;tr.Header=hp;tr.Title=pp;tr.CloseButton=cp;tr.Stack=oR;const[C5,Sx]=iu(),[P5,A5]=iu();var mp={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const R5={},I5=(t,{gap:e},{size:n})=>({group:{"--pg-gap":e!==void 0?Pe(e):Pe(n,"pg-gap")}}),Ex=K((t,e)=>{const n=G("PillGroup",R5,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:c,disabled:d,...u}=n,f=Sx()?.size||c||void 0,p=de({name:"PillGroup",classes:mp,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:I5,stylesCtx:{size:f},rootSelector:"group"});return x.jsx(P5,{value:{size:f,disabled:d},children:x.jsx(W,{ref:e,size:f,...p("group"),...u})})});Ex.classes=mp;Ex.displayName="@mantine/core/PillGroup";const k5={variant:"default"},M5=(t,{radius:e},{size:n})=>({root:{"--pill-fz":Pe(n,"pill-fz"),"--pill-height":Pe(n,"pill-height"),"--pill-radius":e===void 0?void 0:Nt(e)}}),Fc=K((t,e)=>{const n=G("Pill",k5,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,variant:c,children:d,withRemoveButton:u,onRemove:h,removeButtonProps:f,radius:p,size:m,disabled:y,mod:g,..._}=n,v=A5(),w=Sx(),S=m||v?.size||void 0,E=w?.variant==="filled"?"contrast":c||"default",T=de({name:"Pill",classes:mp,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:M5,stylesCtx:{size:S}});return x.jsxs(W,{component:"span",ref:e,variant:E,size:S,...T("root",{variant:E}),mod:[{"with-remove":u&&!y,disabled:y||v?.disabled},g],..._,children:[x.jsx("span",{...T("label"),children:d}),u&&x.jsx(rl,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...f,...T("remove",{className:f?.className,style:f?.style}),onMouseDown:C=>{C.preventDefault(),C.stopPropagation(),f?.onMouseDown?.(C)},onClick:C=>{C.stopPropagation(),h?.(),f?.onClick?.(C)}})]})});Fc.classes=mp;Fc.displayName="@mantine/core/Pill";Fc.Group=Ex;var aR={field:"m_45c4369d"};const D5={type:"visible"},Tx=K((t,e)=>{const n=G("PillsInputField",D5,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,type:c,disabled:d,id:u,pointer:h,mod:f,...p}=n,m=Sx(),y=il(),g=de({name:"PillsInputField",classes:aR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),_=d||m?.disabled;return x.jsx(W,{component:"input",ref:Lt(e,m?.fieldRef),"data-type":c,disabled:_,mod:[{disabled:_,pointer:h},f],...g("field"),...p,id:y?.inputId||u,"aria-invalid":m?.hasError,"aria-describedby":y?.describedBy,type:"text",onMouseDown:v=>!h&&v.stopPropagation()})});Tx.classes=aR;Tx.displayName="@mantine/core/PillsInputField";const O5={},ef=K((t,e)=>{const n=G("PillsInput",O5,t),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:l,error:c,variant:d,...u}=n,h=b.useRef(null);return x.jsx(C5,{value:{fieldRef:h,size:o,disabled:a,hasError:!!c,variant:d},children:x.jsx(Ts,{size:o,error:c,variant:d,component:"div",ref:e,onMouseDown:f=>{f.preventDefault(),i?.(f),h.current?.focus()},onClick:f=>{f.preventDefault(),f.currentTarget.closest("fieldset")?.disabled||(h.current?.focus(),s?.(f))},...u,multiline:!0,disabled:a,__staticSelector:l||"PillsInput",withAria:!1,children:r})})});ef.displayName="@mantine/core/PillsInput";ef.Field=Tx;function N5({data:t,value:e}){const n=e.map(i=>i.trim().toLowerCase());return t.reduce((i,s)=>(Ba(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const L5={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},Cx=K((t,e)=>{const n=G("MultiSelect",L5,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:c,value:d,defaultValue:u,onChange:h,onKeyDown:f,variant:p,data:m,dropdownOpened:y,defaultDropdownOpened:g,onDropdownOpen:_,onDropdownClose:v,selectFirstOptionOnChange:w,onOptionSubmit:S,comboboxProps:E,filter:T,limit:C,withScrollArea:A,maxDropdownHeight:P,searchValue:O,defaultSearchValue:U,onSearchChange:k,readOnly:I,disabled:F,onFocus:N,onBlur:B,onPaste:R,radius:M,rightSection:D,rightSectionWidth:L,rightSectionPointerEvents:j,rightSectionProps:ee,leftSection:ie,leftSectionWidth:ce,leftSectionPointerEvents:re,leftSectionProps:oe,inputContainer:_e,inputWrapperOrder:xe,withAsterisk:me,labelProps:ge,descriptionProps:Re,errorProps:Ie,wrapperProps:ke,description:Se,label:De,error:_n,maxValues:on,searchable:at,nothingFoundMessage:nt,withCheckIcon:an,checkIconPosition:Eo,hidePickedOptions:pl,withErrorStyles:xn,name:Ln,form:ml,id:zi,clearable:bn,clearButtonProps:Iu,hiddenInputProps:ku,placeholder:Mu,hiddenInputValuesDivider:Du,required:ln,mod:To,renderOption:gl,onRemove:Zp,onClear:lM,scrollAreaProps:cM,chevronColor:uM,...gb}=n,Qp=ci(zi),Jp=jA(m),Co=sx(Jp),Bn=gx({opened:y,defaultOpened:g,onDropdownOpen:_,onDropdownClose:()=>{v?.(),Bn.resetSelectedOption()}}),{styleProps:hM,rest:{type:Tq,autoComplete:dM,...fM}}=au(gb),[Bt,yl]=oi({value:d,defaultValue:u,finalValue:[],onChange:h}),[em,Ou]=oi({value:O,defaultValue:U,finalValue:"",onChange:k}),tm=de({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:yb,resolvedStyles:vb}=Xf({props:n,styles:o,classNames:r}),pM=Xe=>{f?.(Xe),Xe.key===" "&&!at&&(Xe.preventDefault(),Bn.toggleDropdown()),Xe.key==="Backspace"&&em.length===0&&Bt.length>0&&(Zp?.(Bt[Bt.length-1]),yl(Bt.slice(0,Bt.length-1)))},mM=Bt.map((Xe,nm)=>x.jsx(Fc,{withRemoveButton:!I&&!Co[Xe]?.disabled,onRemove:()=>{yl(Bt.filter(yM=>Xe!==yM)),Zp?.(Xe)},unstyled:a,disabled:F,...tm("pill"),children:Co[Xe]?.label||Xe},`${Xe}-${nm}`));b.useEffect(()=>{w&&Bn.selectFirstOption()},[w,Bt]);const _b=x.jsx(Te.ClearButton,{...Iu,onClear:()=>{lM?.(),yl([]),Ou("")}}),gM=N5({data:Jp,value:Bt}),xb=bn&&Bt.length>0&&!F&&!I;return x.jsxs(x.Fragment,{children:[x.jsxs(Te,{store:Bn,classNames:yb,styles:vb,unstyled:a,size:c,readOnly:I,__staticSelector:"MultiSelect",onOptionSubmit:Xe=>{S?.(Xe),Ou(""),Bn.updateSelectedOptionIndex("selected"),Bt.includes(Co[Xe].value)?(yl(Bt.filter(nm=>nm!==Co[Xe].value)),Zp?.(Co[Xe].value)):Bt.length<on&&yl([...Bt,Co[Xe].value])},...E,children:[x.jsx(Te.DropdownTarget,{children:x.jsx(ef,{...hM,__staticSelector:"MultiSelect",classNames:yb,styles:vb,unstyled:a,size:c,className:i,style:s,variant:p,disabled:F,radius:M,__defaultRightSection:x.jsx(Te.Chevron,{size:c,error:_n,unstyled:a,color:uM}),__clearSection:_b,__clearable:xb,rightSection:D,rightSectionPointerEvents:j||(_b?"all":"none"),rightSectionWidth:L,rightSectionProps:ee,leftSection:ie,leftSectionWidth:ce,leftSectionPointerEvents:re,leftSectionProps:oe,inputContainer:_e,inputWrapperOrder:xe,withAsterisk:me,labelProps:ge,descriptionProps:Re,errorProps:Ie,wrapperProps:ke,description:Se,label:De,error:_n,multiline:!0,withErrorStyles:xn,__stylesApiProps:{...n,rightSectionPointerEvents:j||(xb?"all":"none"),multiline:!0},pointer:!at,onClick:()=>at?Bn.openDropdown():Bn.toggleDropdown(),"data-expanded":Bn.dropdownOpened||void 0,id:Qp,required:ln,mod:To,children:x.jsxs(Fc.Group,{disabled:F,unstyled:a,...tm("pillsList"),children:[mM,x.jsx(Te.EventsTarget,{autoComplete:dM,children:x.jsx(ef.Field,{...fM,ref:e,id:Qp,placeholder:Mu,type:!at&&!Mu?"hidden":"visible",...tm("inputField"),unstyled:a,onFocus:Xe=>{N?.(Xe),at&&Bn.openDropdown()},onBlur:Xe=>{B?.(Xe),Bn.closeDropdown(),Ou("")},onKeyDown:pM,value:em,onChange:Xe=>{Ou(Xe.currentTarget.value),at&&Bn.openDropdown(),w&&Bn.selectFirstOption()},disabled:F,readOnly:I||!at,pointer:!at})})]})})}),x.jsx(JA,{data:pl?gM:Jp,hidden:I||F,filter:T,search:em,limit:C,hiddenWhenEmpty:!nt,withScrollArea:A,maxDropdownHeight:P,filterOptions:at,value:Bt,checkIconPosition:Eo,withCheckIcon:an,nothingFoundMessage:nt,unstyled:a,labelId:De?`${Qp}-label`:void 0,"aria-label":De?void 0:gb["aria-label"],renderOption:gl,scrollAreaProps:cM})]}),x.jsx(Te.HiddenInput,{name:Ln,valuesDivider:Du,value:Bt,form:ml,disabled:F,...ku})]})});Cx.classes={...Ts.classes,...Te.classes};Cx.displayName="@mantine/core/MultiSelect";const B5={duration:100,transition:"fade"};function F5(t,e){return{...B5,...e,...t}}function $5({offset:t,position:e,defaultOpened:n}){const[r,i]=b.useState(n),s=b.useRef(null),{x:o,y:a,elements:l,refs:c,update:d,placement:u}=B_({placement:e,middleware:[D_({crossAxis:!0,padding:5,rootBoundary:"document"})]}),h=u.includes("right")?t:e.includes("left")?t*-1:0,f=u.includes("bottom")?t:e.includes("top")?t*-1:0,p=b.useCallback(({clientX:m,clientY:y})=>{c.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m,y,left:m+h,top:y+f,right:m,bottom:y}}})},[l.reference]);return b.useEffect(()=>{if(c.floating.current){const m=s.current;m.addEventListener("mousemove",p);const y=Ti(c.floating.current);return y.forEach(g=>{g.addEventListener("scroll",d)}),()=>{m.removeEventListener("mousemove",p),y.forEach(g=>{g.removeEventListener("scroll",d)})}}},[l.reference,c.floating.current,d,p,r]),{handleMouseMove:p,x:o,y:a,opened:r,setOpened:i,boundaryRef:s,floating:c.setFloating}}var gp={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const U5={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:Dr("popover")},H5=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:Nt(e),"--tooltip-bg":n?An(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Px=K((t,e)=>{const n=G("TooltipFloating",U5,t),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:l,styles:c,unstyled:d,radius:u,color:h,label:f,offset:p,position:m,multiline:y,zIndex:g,disabled:_,defaultOpened:v,variant:w,vars:S,portalProps:E,...T}=n,C=sn(),A=de({name:"TooltipFloating",props:n,classes:gp,className:a,style:o,classNames:l,styles:c,unstyled:d,rootSelector:"tooltip",vars:S,varsResolver:H5}),{handleMouseMove:P,x:O,y:U,opened:k,boundaryRef:I,floating:F,setOpened:N}=$5({offset:p,position:m,defaultOpened:v});if(!ho(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const B=Lt(I,zf(r),e),R=r.props,M=L=>{R.onMouseEnter?.(L),P(L),N(!0)},D=L=>{R.onMouseLeave?.(L),N(!1)};return x.jsxs(x.Fragment,{children:[x.jsx(el,{...E,withinPortal:s,children:x.jsx(W,{...T,...A("tooltip",{style:{...E_(o,C),zIndex:g,display:!_&&k?"block":"none",top:(U&&Math.round(U))??"",left:(O&&Math.round(O))??""}}),variant:w,ref:F,mod:{multiline:y},children:f})}),b.cloneElement(r,{...R,[i]:B,onMouseEnter:M,onMouseLeave:D})]})});Px.classes=gp;Px.displayName="@mantine/core/TooltipFloating";const lR=b.createContext(!1),j5=lR.Provider,G5=()=>b.useContext(lR),z5={openDelay:0,closeDelay:0};function Ax(t){const{openDelay:e,closeDelay:n,children:r}=G("TooltipGroup",z5,t);return x.jsx(j5,{value:!0,children:x.jsx(S3,{delay:{open:e,close:n},children:r})})}Ax.displayName="@mantine/core/TooltipGroup";Ax.extend=t=>t;function W5(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function V5(t){const e=W5(t.middlewares),n=[YP(t.offset)];return e.shift&&n.push(D_(typeof e.shift=="boolean"?{padding:8}:{padding:8,...e.shift})),e.flip&&n.push(typeof e.flip=="boolean"?Zd():Zd(e.flip)),n.push(KP({element:t.arrowRef,padding:t.arrowOffset})),e.inline?n.push(typeof e.inline=="boolean"?dc():dc(e.inline)):t.inline&&n.push(dc()),n}function X5(t){const[e,n]=b.useState(t.defaultOpened),i=typeof t.opened=="boolean"?t.opened:e,s=G5(),o=ci(),a=b.useCallback(E=>{n(E),E&&_(o)},[o]),{x:l,y:c,context:d,refs:u,update:h,placement:f,middlewareData:{arrow:{x:p,y:m}={}}}=B_({strategy:t.strategy,placement:t.position,open:i,onOpenChange:a,middleware:V5(t)}),{delay:y,currentId:g,setCurrentId:_}=E3(d,{id:o}),{getReferenceProps:v,getFloatingProps:w}=k3([b3(d,{enabled:t.events?.hover,delay:s?y:{open:t.openDelay,close:t.closeDelay},mouseOnly:!t.events?.touch}),I3(d,{enabled:t.events?.focus,visibleOnly:!0}),D3(d,{role:"tooltip"}),A3(d,{enabled:typeof t.opened>"u"})]);bA({opened:i,position:t.position,positionDependencies:t.positionDependencies,floating:{refs:u,update:h}}),gs(()=>{t.onPositionChange?.(f)},[f]);const S=i&&g&&g!==o;return{x:l,y:c,arrowX:p,arrowY:m,reference:u.setReference,floating:u.setFloating,getFloatingProps:w,getReferenceProps:v,isGroupPhase:S,opened:i,placement:f}}const E1={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Dr("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},Y5=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:Nt(e),"--tooltip-bg":n?An(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),At=K((t,e)=>{const n=G("Tooltip",E1,t),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:l,onPositionChange:c,opened:d,defaultOpened:u,withinPortal:h,radius:f,color:p,classNames:m,styles:y,unstyled:g,style:_,className:v,withArrow:w,arrowSize:S,arrowOffset:E,arrowRadius:T,arrowPosition:C,offset:A,transitionProps:P,multiline:O,events:U,zIndex:k,disabled:I,positionDependencies:F,onClick:N,onMouseEnter:B,onMouseLeave:R,inline:M,variant:D,keepMounted:L,vars:j,portalProps:ee,mod:ie,floatingStrategy:ce,middlewares:re,...oe}=G("Tooltip",E1,n),{dir:_e}=lu(),xe=b.useRef(null),me=X5({position:pA(_e,i),closeDelay:l,openDelay:a,onPositionChange:c,opened:d,defaultOpened:u,events:U,arrowRef:xe,arrowOffset:E,offset:typeof A=="number"?A+(w?S/2:0):A,positionDependencies:[...F,r],inline:M,strategy:ce,middlewares:re}),ge=de({name:"Tooltip",props:n,classes:gp,className:v,style:_,classNames:m,styles:y,unstyled:g,rootSelector:"tooltip",vars:j,varsResolver:Y5});if(!ho(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Re=Lt(me.reference,zf(r),e),Ie=F5(P,{duration:100,transition:"fade"}),ke=r.props;return x.jsxs(x.Fragment,{children:[x.jsx(el,{...ee,withinPortal:h,children:x.jsx(hi,{...Ie,keepMounted:L,mounted:!I&&!!me.opened,duration:me.isGroupPhase?10:Ie.duration,children:Se=>x.jsxs(W,{...oe,"data-fixed":ce==="fixed"||void 0,variant:D,mod:[{multiline:O},ie],...me.getFloatingProps({ref:me.floating,className:ge("tooltip").className,style:{...ge("tooltip").style,...Se,zIndex:k,top:me.y??0,left:me.x??0}}),children:[o,x.jsx(j_,{ref:xe,arrowX:me.arrowX,arrowY:me.arrowY,visible:w,position:me.placement,arrowSize:S,arrowOffset:E,arrowRadius:T,arrowPosition:C,...ge("arrow")})]})})}),b.cloneElement(r,me.getReferenceProps({onClick:N,onMouseEnter:B,onMouseLeave:R,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:_t(v,ke.className),...ke,[s]:Re}))]})});At.classes=gp;At.displayName="@mantine/core/Tooltip";At.Floating=Px;At.Group=Ax;const K5={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},mu=K((t,e)=>{const n=G("Select",K5,t),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:l,onDropdownClose:c,onDropdownOpen:d,onFocus:u,onBlur:h,onClick:f,onChange:p,data:m,value:y,defaultValue:g,selectFirstOptionOnChange:_,onOptionSubmit:v,comboboxProps:w,readOnly:S,disabled:E,filter:T,limit:C,withScrollArea:A,maxDropdownHeight:P,size:O,searchable:U,rightSection:k,checkIconPosition:I,withCheckIcon:F,nothingFoundMessage:N,name:B,form:R,searchValue:M,defaultSearchValue:D,onSearchChange:L,allowDeselect:j,error:ee,rightSectionPointerEvents:ie,id:ce,clearable:re,clearButtonProps:oe,hiddenInputProps:_e,renderOption:xe,onClear:me,autoComplete:ge,scrollAreaProps:Re,__defaultRightSection:Ie,__clearSection:ke,__clearable:Se,chevronColor:De,..._n}=n,on=b.useMemo(()=>jA(m),[m]),at=b.useMemo(()=>sx(on),[on]),nt=ci(ce),[an,Eo,pl]=oi({value:y,defaultValue:g,finalValue:null,onChange:p}),xn=typeof an=="string"?at[an]:void 0,Ln=ZN(xn),[ml,zi]=oi({value:M,defaultValue:D,finalValue:xn?xn.label:"",onChange:L}),bn=gx({opened:a,defaultOpened:l,onDropdownOpen:()=>{d?.(),bn.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{c?.(),bn.resetSelectedOption()}}),{resolvedClassNames:Iu,resolvedStyles:ku}=Xf({props:n,styles:i,classNames:r});b.useEffect(()=>{_&&bn.selectFirstOption()},[_,an]),b.useEffect(()=>{y===null&&zi(""),typeof y=="string"&&xn&&(Ln?.value!==xn.value||Ln?.label!==xn.label)&&zi(xn.label)},[y,xn]);const Mu=x.jsx(Te.ClearButton,{...oe,onClear:()=>{Eo(null,null),zi(""),me?.()}}),Du=re&&!!an&&!E&&!S;return x.jsxs(x.Fragment,{children:[x.jsxs(Te,{store:bn,__staticSelector:"Select",classNames:Iu,styles:ku,unstyled:s,readOnly:S,onOptionSubmit:ln=>{v?.(ln);const To=j&&at[ln].value===an?null:at[ln],gl=To?To.value:null;gl!==an&&Eo(gl,To),!pl&&zi(typeof gl=="string"&&To?.label||""),bn.closeDropdown()},size:O,...w,children:[x.jsx(Te.Target,{targetType:U?"input":"button",autoComplete:ge,children:x.jsx(Ts,{id:nt,ref:e,__defaultRightSection:x.jsx(Te.Chevron,{size:O,error:ee,unstyled:s,color:De}),__clearSection:Mu,__clearable:Du,rightSection:k,rightSectionPointerEvents:ie||(Du?"all":"none"),..._n,size:O,__staticSelector:"Select",disabled:E,readOnly:S||!U,value:ml,onChange:ln=>{zi(ln.currentTarget.value),bn.openDropdown(),_&&bn.selectFirstOption()},onFocus:ln=>{U&&bn.openDropdown(),u?.(ln)},onBlur:ln=>{U&&bn.closeDropdown(),zi(an!=null&&at[an]?.label||""),h?.(ln)},onClick:ln=>{U?bn.openDropdown():bn.toggleDropdown(),f?.(ln)},classNames:Iu,styles:ku,unstyled:s,pointer:!U,error:ee})}),x.jsx(JA,{data:on,hidden:S||E,filter:T,search:ml,limit:C,hiddenWhenEmpty:!N,withScrollArea:A,maxDropdownHeight:P,filterOptions:U&&xn?.label!==ml,value:an,checkIconPosition:I,withCheckIcon:F,nothingFoundMessage:N,unstyled:s,labelId:_n.label?`${nt}-label`:void 0,"aria-label":_n.label?void 0:_n["aria-label"],renderOption:xe,scrollAreaProps:Re})]}),x.jsx(Te.HiddenInput,{value:an,name:B,form:R,disabled:E,..._e})]})});mu.classes={...Ts.classes,...Te.classes};mu.displayName="@mantine/core/Select";const[q5,yp]=On("SliderProvider was not found in tree"),cR=b.forwardRef(({size:t,disabled:e,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:l}=yp();return x.jsx(W,{tabIndex:-1,variant:n,size:t,ref:a,...l("root"),...o})});cR.displayName="@mantine/core/SliderRoot";const uR=b.forwardRef(({max:t,min:e,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:l,labelAlwaysOn:c,thumbLabel:d,onFocus:u,onBlur:h,showLabelOnHover:f,isHovered:p,children:m=null,disabled:y},g)=>{const{getStyles:_}=yp(),[v,w]=b.useState(!1),S=c||s||v||f&&p;return x.jsxs(W,{tabIndex:0,role:"slider","aria-label":d,"aria-valuemax":t,"aria-valuemin":e,"aria-valuenow":n,ref:g,__vars:{"--slider-thumb-offset":`${r}%`},..._("thumb",{focusable:!0}),mod:{dragging:s,disabled:y},onFocus:E=>{w(!0),typeof u=="function"&&u(E)},onBlur:E=>{w(!1),typeof h=="function"&&h(E)},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:E=>E.stopPropagation(),children:[m,x.jsx(hi,{mounted:i!=null&&!!S,transition:"fade",duration:0,...l,children:E=>x.jsx("div",{..._("label",{style:E}),children:i})})]})});uR.displayName="@mantine/core/SliderThumb";function hR({value:t,min:e,max:n}){const r=(t-e)/(n-e)*100;return Math.min(Math.max(r,0),100)}function Z5({mark:t,offset:e,value:n,inverted:r=!1}){return r?typeof e=="number"&&t.value<=e||t.value>=n:typeof e=="number"?t.value>=e&&t.value<=n:t.value<=n}function dR({marks:t,min:e,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=yp();if(!t)return null;const l=t.map((c,d)=>b.createElement(W,{...a("markWrapper"),__vars:{"--mark-offset":`${hR({value:c.value,min:e,max:n})}%`},key:d},x.jsx(W,{...a("mark"),mod:{filled:Z5({mark:c,value:i,offset:s,inverted:o}),disabled:r}}),c.label&&x.jsx("div",{...a("markLabel"),children:c.label})));return x.jsx("div",{children:l})}dR.displayName="@mantine/core/SliderMarks";function fR({filled:t,children:e,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:l}=yp();return x.jsx(W,{...l("trackContainer"),mod:{disabled:r},...o,children:x.jsxs(W,{...l("track"),mod:{inverted:s,disabled:r},children:[x.jsx(W,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${t}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...l("bar")}),e,x.jsx(dR,{...a,offset:i,disabled:r,inverted:s})]})})}fR.displayName="@mantine/core/SliderTrack";function Q5({value:t,containerWidth:e,min:n,max:r,step:i,precision:s}){const a=(e?Math.min(Math.max(t,0),e)/e:t)*(r-n),l=(a!==0?Math.round(a/i)*i:0)+n,c=Math.max(l,n);return s!==void 0?Number(c.toFixed(s)):c}function ih(t,e){return parseFloat(t.toFixed(e))}function J5(t){if(!t)return 0;const e=t.toString().split(".");return e.length>1?e[1].length:0}function Km(t,e){const r=[...e].sort((i,s)=>i.value-s.value).find(i=>i.value>t);return r?r.value:t}function qm(t,e){const r=[...e].sort((i,s)=>s.value-i.value).find(i=>i.value<t);return r?r.value:t}function T1(t){const e=[...t].sort((n,r)=>n.value-r.value);return e.length>0?e[0].value:0}function C1(t){const e=[...t].sort((n,r)=>n.value-r.value);return e.length>0?e[e.length-1].value:100}var pR={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const e$={radius:"xl",min:0,max:100,step:1,marks:[],label:t=>t,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:t=>t},t$=(t,{size:e,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Pe(e,"slider-size"),"--slider-color":n?An(n,t):void 0,"--slider-radius":i===void 0?void 0:Nt(i),"--slider-thumb-size":r!==void 0?$(r):"calc(var(--slider-size) * 2)"}}),Rx=K((t,e)=>{const n=G("Slider",e$,t),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:l,min:c,max:d,step:u,precision:h,defaultValue:f,name:p,marks:m,label:y,labelTransitionProps:g,labelAlwaysOn:_,thumbLabel:v,showLabelOnHover:w,thumbChildren:S,disabled:E,unstyled:T,scale:C,inverted:A,className:P,style:O,vars:U,hiddenInputProps:k,restrictToMarks:I,thumbProps:F,...N}=n,B=de({name:"Slider",props:n,classes:pR,classNames:r,className:P,styles:i,style:O,vars:U,varsResolver:t$,unstyled:T}),{dir:R}=lu(),[M,D]=b.useState(!1),[L,j]=oi({value:typeof s=="number"?hc(s,c,d):s,defaultValue:typeof f=="number"?hc(f,c,d):f,finalValue:hc(0,c,d),onChange:o}),ee=b.useRef(L),ie=b.useRef(null),ce=b.useRef(null),re=hR({value:L,min:c,max:d}),oe=C(L),_e=typeof y=="function"?y(oe):y,xe=h??J5(u),me=b.useCallback(({x:ke})=>{if(!E){const Se=Q5({value:ke,min:c,max:d,step:u,precision:xe});j(I&&m?.length?Bw(Se,m.map(De=>De.value)):Se),ee.current=Se}},[E,c,d,u,xe,j,m,I]),{ref:ge,active:Re}=qN(me,{onScrubEnd:()=>!E&&a?.(I&&m?.length?Bw(ee.current,m.map(ke=>ke.value)):ee.current)},R),Ie=ke=>{if(!E)switch(ke.key){case"ArrowUp":{if(ke.preventDefault(),ce.current?.focus(),I&&m){const De=Km(L,m);j(De),a?.(De);break}const Se=ih(Math.min(Math.max(L+u,c),d),xe);j(Se),a?.(Se);break}case"ArrowRight":{if(ke.preventDefault(),ce.current?.focus(),I&&m){const De=R==="rtl"?qm(L,m):Km(L,m);j(De),a?.(De);break}const Se=ih(Math.min(Math.max(R==="rtl"?L-u:L+u,c),d),xe);j(Se),a?.(Se);break}case"ArrowDown":{if(ke.preventDefault(),ce.current?.focus(),I&&m){const De=qm(L,m);j(De),a?.(De);break}const Se=ih(Math.min(Math.max(L-u,c),d),xe);j(Se),a?.(Se);break}case"ArrowLeft":{if(ke.preventDefault(),ce.current?.focus(),I&&m){const De=R==="rtl"?Km(L,m):qm(L,m);j(De),a?.(De);break}const Se=ih(Math.min(Math.max(R==="rtl"?L+u:L-u,c),d),xe);j(Se),a?.(Se);break}case"Home":{if(ke.preventDefault(),ce.current?.focus(),I&&m){j(T1(m)),a?.(T1(m));break}j(c),a?.(c);break}case"End":{if(ke.preventDefault(),ce.current?.focus(),I&&m){j(C1(m)),a?.(C1(m));break}j(d),a?.(d);break}}};return x.jsx(q5,{value:{getStyles:B},children:x.jsxs(cR,{...N,ref:Lt(e,ie),onKeyDownCapture:Ie,onMouseDownCapture:()=>ie.current?.focus(),size:l,disabled:E,children:[x.jsx(fR,{inverted:A,offset:0,filled:re,marks:m,min:c,max:d,value:oe,disabled:E,containerProps:{ref:ge,onMouseEnter:w?()=>D(!0):void 0,onMouseLeave:w?()=>D(!1):void 0},children:x.jsx(uR,{max:d,min:c,value:oe,position:re,dragging:Re,label:_e,ref:ce,labelTransitionProps:g,labelAlwaysOn:_,thumbLabel:v,showLabelOnHover:w,isHovered:M,disabled:E,...F,children:S})}),x.jsx("input",{type:"hidden",name:p,value:oe,...k})]})})});Rx.classes=pR;Rx.displayName="@mantine/core/Slider";var mR={root:"m_6d731127"};const n$={gap:"md",align:"stretch",justify:"flex-start"},r$=(t,{gap:e,align:n,justify:r})=>({root:{"--stack-gap":si(e),"--stack-align":n,"--stack-justify":r}}),vt=K((t,e)=>{const n=G("Stack",n$,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,align:c,justify:d,gap:u,variant:h,...f}=n,p=de({name:"Stack",props:n,classes:mR,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:r$});return x.jsx(W,{ref:e,...p("root"),variant:h,...f})});vt.classes=mR;vt.displayName="@mantine/core/Stack";const gR=b.createContext(null),i$=gR.Provider,s$=()=>b.useContext(gR),o$={},Ix=K((t,e)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:l,...c}=G("SwitchGroup",o$,t),[d,u]=oi({value:n,defaultValue:r,finalValue:[],onChange:i}),h=f=>{const p=f.currentTarget.value;!l&&u(d.includes(p)?d.filter(m=>m!==p):[...d,p])};return x.jsx(i$,{value:{value:d,onChange:h,size:s},children:x.jsx(Tt.Wrapper,{size:s,ref:e,...o,...c,labelElement:"div",__staticSelector:"SwitchGroup",children:x.jsx(G4,{role:"group",children:a})})})});Ix.classes=Tt.Wrapper.classes;Ix.displayName="@mantine/core/SwitchGroup";var yR={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const a$={labelPosition:"right"},l$=(t,{radius:e,color:n,size:r})=>({root:{"--switch-radius":e===void 0?void 0:Nt(e),"--switch-height":Pe(r,"switch-height"),"--switch-width":Pe(r,"switch-width"),"--switch-thumb-size":Pe(r,"switch-thumb-size"),"--switch-label-font-size":Pe(r,"switch-label-font-size"),"--switch-track-label-padding":Pe(r,"switch-track-label-padding"),"--switch-color":n?An(n,t):void 0}}),vp=K((t,e)=>{const n=G("Switch",a$,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:c,label:d,offLabel:u,onLabel:h,id:f,size:p,radius:m,wrapperProps:y,thumbIcon:g,checked:_,defaultChecked:v,onChange:w,labelPosition:S,description:E,error:T,disabled:C,variant:A,rootRef:P,mod:O,...U}=n,k=s$(),I=p||k?.size,F=de({name:"Switch",props:n,classes:yR,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:l$}),{styleProps:N,rest:B}=au(U),R=ci(f),M=k?{checked:k.value.includes(B.value),onChange:k.onChange}:{},[D,L]=oi({value:M.checked??_,defaultValue:v,finalValue:!1});return x.jsxs(KA,{...F("root"),__staticSelector:"Switch",__stylesApiProps:n,id:R,size:I,labelPosition:S,label:d,description:E,error:T,disabled:C,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":M.checked||_||void 0,variant:A,ref:P,mod:O,...N,...y,children:[x.jsx("input",{...B,disabled:C,checked:D,"data-checked":M.checked||_||void 0,onChange:j=>{k?M.onChange?.(j):w?.(j),L(j.currentTarget.checked)},id:R,ref:e,type:"checkbox",role:"switch",...F("input")}),x.jsxs(W,{"aria-hidden":"true",mod:{error:T,"label-position":S,"without-labels":!h&&!u},...F("track"),children:[x.jsx(W,{component:"span",mod:"reduce-motion",...F("thumb"),children:g}),x.jsx("span",{...F("trackLabel"),children:D?h:u})]})]})});vp.classes={...yR,...j4};vp.displayName="@mantine/core/Switch";vp.Group=Ix;const[c$,u$]=On("Table component was not found in the tree");var gu={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function h$(t,e){if(!e)return;const n={};return e.columnBorder&&t.withColumnBorders&&(n["data-with-column-border"]=!0),e.rowBorder&&t.withRowBorders&&(n["data-with-row-border"]=!0),e.striped&&t.striped&&(n["data-striped"]=t.striped),e.highlightOnHover&&t.highlightOnHover&&(n["data-hover"]=!0),e.captionSide&&t.captionSide&&(n["data-side"]=t.captionSide),e.stickyHeader&&t.stickyHeader&&(n["data-sticky"]=!0),n}function po(t,e){const n=`Table${t.charAt(0).toUpperCase()}${t.slice(1)}`,r=K((i,s)=>{const o=G(n,{},i),{classNames:a,className:l,style:c,styles:d,...u}=o,h=u$();return x.jsx(W,{component:t,ref:s,...h$(h,e),...h.getStyles(t,{className:l,classNames:a,style:c,styles:d,props:o}),...u})});return r.displayName=`@mantine/core/${n}`,r.classes=gu,r}const hv=po("th",{columnBorder:!0}),vR=po("td",{columnBorder:!0}),Zh=po("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),_R=po("thead",{stickyHeader:!0}),xR=po("tbody"),bR=po("tfoot"),wR=po("caption",{captionSide:!0});function kx({data:t}){return x.jsxs(x.Fragment,{children:[t.caption&&x.jsx(wR,{children:t.caption}),t.head&&x.jsx(_R,{children:x.jsx(Zh,{children:t.head.map((e,n)=>x.jsx(hv,{children:e},n))})}),t.body&&x.jsx(xR,{children:t.body.map((e,n)=>x.jsx(Zh,{children:e.map((r,i)=>x.jsx(vR,{children:r},i))},n))}),t.foot&&x.jsx(bR,{children:x.jsx(Zh,{children:t.foot.map((e,n)=>x.jsx(hv,{children:e},n))})})]})}kx.displayName="@mantine/core/TableDataRenderer";const d$={type:"scrollarea"},f$=(t,{minWidth:e,type:n})=>({scrollContainer:{"--table-min-width":$(e),"--table-overflow":n==="native"?"auto":void 0}}),Mx=K((t,e)=>{const n=G("TableScrollContainer",d$,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:c,minWidth:d,type:u,...h}=n,f=de({name:"TableScrollContainer",classes:gu,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:f$,rootSelector:"scrollContainer"});return x.jsx(W,{component:u==="scrollarea"?fo:"div",...u==="scrollarea"?{offsetScrollbars:"x"}:{},ref:e,...f("scrollContainer"),...h,children:x.jsx("div",{...f("scrollContainerInner"),children:c})})});Mx.classes=gu;Mx.displayName="@mantine/core/TableScrollContainer";const p$={withRowBorders:!0,verticalSpacing:7},m$=(t,{layout:e,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:l,highlightOnHover:c,stickyHeaderOffset:d,stickyHeader:u})=>({table:{"--table-layout":e,"--table-caption-side":n,"--table-horizontal-spacing":si(r),"--table-vertical-spacing":si(i),"--table-border-color":s?An(s,t):void 0,"--table-striped-color":l&&o?An(o,t):void 0,"--table-highlight-on-hover-color":c&&a?An(a,t):void 0,"--table-sticky-header-offset":u?$(d):void 0}}),Me=K((t,e)=>{const n=G("Table",p$,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,horizontalSpacing:c,verticalSpacing:d,captionSide:u,stripedColor:h,highlightOnHoverColor:f,striped:p,highlightOnHover:m,withColumnBorders:y,withRowBorders:g,withTableBorder:_,borderColor:v,layout:w,variant:S,data:E,children:T,stickyHeader:C,stickyHeaderOffset:A,mod:P,tabularNums:O,...U}=n,k=de({name:"Table",props:n,className:i,style:s,classes:gu,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:l,varsResolver:m$});return x.jsx(c$,{value:{getStyles:k,stickyHeader:C,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:y,withRowBorders:g,captionSide:u||"bottom"},children:x.jsx(W,{component:"table",variant:S,ref:e,mod:[{"data-with-table-border":_,"data-tabular-nums":O},P],...k("table"),...U,children:T||!!E&&x.jsx(kx,{data:E})})})});Me.classes=gu;Me.displayName="@mantine/core/Table";Me.Td=vR;Me.Th=hv;Me.Tr=Zh;Me.Thead=_R;Me.Tbody=xR;Me.Tfoot=bR;Me.Caption=wR;Me.ScrollContainer=Mx;Me.DataRenderer=kx;const g$={},Fa=K((t,e)=>{const n=G("TextInput",g$,t);return x.jsx(Ts,{component:"input",ref:e,...n,__staticSelector:"TextInput"})});Fa.classes=Ts.classes;Fa.displayName="@mantine/core/TextInput";const y$=["h1","h2","h3","h4","h5","h6"],v$=["xs","sm","md","lg","xl"];function _$(t,e){const n=e!==void 0?e:`h${t}`;return y$.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:v$.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${t}-font-weight)`,lineHeight:`var(--mantine-h${t}-line-height)`}:{fontSize:$(n),fontWeight:`var(--mantine-h${t}-font-weight)`,lineHeight:`var(--mantine-h${t}-line-height)`}}var SR={root:"m_8a5d1357"};const x$={order:1},b$=(t,{order:e,size:n,lineClamp:r,textWrap:i})=>{const s=_$(e,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},$a=K((t,e)=>{const n=G("Title",x$,t),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:l,vars:c,size:d,variant:u,lineClamp:h,textWrap:f,mod:p,...m}=n,y=de({name:"Title",props:n,classes:SR,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:c,varsResolver:b$});return[1,2,3,4,5,6].includes(l)?x.jsx(W,{...y("root"),component:`h${l}`,variant:u,ref:e,mod:[{order:l,"data-line-clamp":typeof h=="number"},p],size:d,...m}):null});$a.classes=SR;$a.displayName="@mantine/core/Title";/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var w$={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=(t,e,n,r)=>{const i=b.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,title:l,className:c,children:d,...u},h)=>b.createElement("svg",{ref:h,...w$[t],width:o,height:o,className:["tabler-icon",`tabler-icon-${e}`,c].join(" "),...t==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...u},[l&&b.createElement("title",{key:"svg-title"},l),...r.map(([f,p])=>b.createElement(f,p)),...Array.isArray(d)?d:[d]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var S$=ht("outline","arrow-right-bar","IconArrowRightBar",[["path",{d:"M18 15l3 -3l-3 -3",key:"svg-0"}],["path",{d:"M3 12h18",key:"svg-1"}],["path",{d:"M3 9v6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var E$=ht("outline","brand-discord","IconBrandDiscord",[["path",{d:"M8 12a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-0"}],["path",{d:"M14 12a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}],["path",{d:"M15.5 17c0 1 1.5 3 2 3c1.5 0 2.833 -1.667 3.5 -3c.667 -1.667 .5 -5.833 -1.5 -11.5c-1.457 -1.015 -3 -1.34 -4.5 -1.5l-.972 1.923a11.913 11.913 0 0 0 -4.053 0l-.975 -1.923c-1.5 .16 -3.043 .485 -4.5 1.5c-2 5.667 -2.167 9.833 -1.5 11.5c.667 1.333 2 3 3.5 3c.5 0 2 -2 2 -3",key:"svg-2"}],["path",{d:"M7 16.5c3.5 1 6.5 1 10 0",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var T$=ht("outline","brand-github","IconBrandGithub",[["path",{d:"M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var C$=ht("outline","device-gamepad-2","IconDeviceGamepad2",[["path",{d:"M12 5h3.5a5 5 0 0 1 0 10h-5.5l-4.015 4.227a2.3 2.3 0 0 1 -3.923 -2.035l1.634 -8.173a5 5 0 0 1 4.904 -4.019h3.4z",key:"svg-0"}],["path",{d:"M14 15l4.07 4.284a2.3 2.3 0 0 0 3.925 -2.023l-1.6 -8.232",key:"svg-1"}],["path",{d:"M8 9v2",key:"svg-2"}],["path",{d:"M7 10h2",key:"svg-3"}],["path",{d:"M14 10h2",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var P$=ht("outline","file-upload","IconFileUpload",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M12 11v6",key:"svg-2"}],["path",{d:"M9.5 13.5l2.5 -2.5l2.5 2.5",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ER=ht("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var A$=ht("outline","moon","IconMoon",[["path",{d:"M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var R$=ht("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var I$=ht("outline","restore","IconRestore",[["path",{d:"M3.06 13a9 9 0 1 0 .49 -4.087",key:"svg-0"}],["path",{d:"M3 4.001v5h5",key:"svg-1"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var k$=ht("outline","sitemap","IconSitemap",[["path",{d:"M3 15m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M15 15m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-1"}],["path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-2"}],["path",{d:"M6 15v-1a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v1",key:"svg-3"}],["path",{d:"M12 9l0 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var M$=ht("outline","sun","IconSun",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var D$=ht("outline","trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var O$=ht("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var N$=ht("filled","file-download-filled","IconFileDownloadFilled",[["path",{d:"M12 2l.117 .007a1 1 0 0 1 .876 .876l.007 .117v4l.005 .15a2 2 0 0 0 1.838 1.844l.157 .006h4l.117 .007a1 1 0 0 1 .876 .876l.007 .117v9a3 3 0 0 1 -2.824 2.995l-.176 .005h-10a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-14a3 3 0 0 1 2.824 -2.995l.176 -.005zm0 8a1 1 0 0 0 -1 1v3.585l-.793 -.792a1 1 0 0 0 -1.32 -.083l-.094 .083a1 1 0 0 0 0 1.414l2.5 2.5l.044 .042l.068 .055l.11 .071l.114 .054l.105 .035l.15 .03l.116 .006l.117 -.007l.117 -.02l.108 -.033l.081 -.034l.098 -.052l.092 -.064l.094 -.083l2.5 -2.5a1 1 0 0 0 0 -1.414l-.094 -.083a1 1 0 0 0 -1.32 .083l-.793 .791v-3.584a1 1 0 0 0 -.883 -.993zm2.999 -7.001l4.001 4.001h-4z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var L$=ht("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var B$=ht("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var F$=ht("filled","player-skip-back-filled","IconPlayerSkipBackFilled",[["path",{d:"M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z",key:"svg-0"}],["path",{d:"M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $$=ht("filled","player-skip-forward-filled","IconPlayerSkipForwardFilled",[["path",{d:"M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z",key:"svg-0"}],["path",{d:"M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var U$=ht("filled","player-track-next-filled","IconPlayerTrackNextFilled",[["path",{d:"M2 5v14c0 .86 1.012 1.318 1.659 .753l8 -7a1 1 0 0 0 0 -1.506l-8 -7c-.647 -.565 -1.659 -.106 -1.659 .753z",key:"svg-0"}],["path",{d:"M13 5v14c0 .86 1.012 1.318 1.659 .753l8 -7a1 1 0 0 0 0 -1.506l-8 -7c-.647 -.565 -1.659 -.106 -1.659 .753z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var H$=ht("filled","player-track-prev-filled","IconPlayerTrackPrevFilled",[["path",{d:"M20.341 4.247l-8 7a1 1 0 0 0 0 1.506l8 7c.647 .565 1.659 .106 1.659 -.753v-14c0 -.86 -1.012 -1.318 -1.659 -.753z",key:"svg-0"}],["path",{d:"M9.341 4.247l-8 7a1 1 0 0 0 0 1.506l8 7c.647 .565 1.659 .106 1.659 -.753v-14c0 -.86 -1.012 -1.318 -1.659 -.753z",key:"svg-1"}]]);const j$="modulepreload",G$=function(t){return"/Lentokonepeli/"+t},P1={},Zm=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=Promise.allSettled(n.map(l=>{if(l=G$(l),l in P1)return;P1[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":j$,c||(u.as="script"),u.crossOrigin="",u.href=l,a&&u.setAttribute("nonce",a),document.head.appendChild(u),c)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function jr(t,e){var n=e&&e.cache?e.cache:q$,r=e&&e.serializer?e.serializer:Y$,i=e&&e.strategy?e.strategy:V$;return i(t,{cache:n,serializer:r})}function z$(t){return t==null||typeof t=="number"||typeof t=="boolean"}function W$(t,e,n,r){var i=z$(r)?r:n(r),s=e.get(i);return typeof s>"u"&&(s=t.call(this,r),e.set(i,s)),s}function TR(t,e,n){var r=Array.prototype.slice.call(arguments,3),i=n(r),s=e.get(i);return typeof s>"u"&&(s=t.apply(this,r),e.set(i,s)),s}function CR(t,e,n,r,i){return n.bind(e,t,r,i)}function V$(t,e){var n=t.length===1?W$:TR;return CR(t,this,n,e.cache.create(),e.serializer)}function X$(t,e){return CR(t,this,TR,e.cache.create(),e.serializer)}var Y$=function(){return JSON.stringify(arguments)},K$=function(){function t(){this.cache=Object.create(null)}return t.prototype.get=function(e){return this.cache[e]},t.prototype.set=function(e,n){this.cache[e]=n},t}(),q$={create:function(){return new K$}},Gr={variadic:X$},Ee;(function(t){t[t.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",t[t.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",t[t.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",t[t.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",t[t.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",t[t.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",t[t.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",t[t.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",t[t.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",t[t.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",t[t.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",t[t.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",t[t.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",t[t.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",t[t.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",t[t.INVALID_TAG=23]="INVALID_TAG",t[t.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",t[t.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",t[t.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(Ee||(Ee={}));var He;(function(t){t[t.literal=0]="literal",t[t.argument=1]="argument",t[t.number=2]="number",t[t.date=3]="date",t[t.time=4]="time",t[t.select=5]="select",t[t.plural=6]="plural",t[t.pound=7]="pound",t[t.tag=8]="tag"})(He||(He={}));var Ua;(function(t){t[t.number=0]="number",t[t.dateTime=1]="dateTime"})(Ua||(Ua={}));function A1(t){return t.type===He.literal}function Z$(t){return t.type===He.argument}function PR(t){return t.type===He.number}function AR(t){return t.type===He.date}function RR(t){return t.type===He.time}function IR(t){return t.type===He.select}function kR(t){return t.type===He.plural}function Q$(t){return t.type===He.pound}function MR(t){return t.type===He.tag}function DR(t){return!!(t&&typeof t=="object"&&t.type===Ua.number)}function dv(t){return!!(t&&typeof t=="object"&&t.type===Ua.dateTime)}var OR=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,J$=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function eU(t){var e={};return t.replace(J$,function(n){var r=n.length;switch(n[0]){case"G":e.era=r===4?"long":r===5?"narrow":"short";break;case"y":e.year=r===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][r-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][r-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=r===4?"long":r===5?"narrow":"short";break;case"e":if(r<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][r-4];break;case"c":if(r<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][r-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][r-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][r-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][r-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][r-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][r-1];break;case"s":e.second=["numeric","2-digit"][r-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=r<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}var tU=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function nU(t){if(t.length===0)throw new Error("Number skeleton cannot be empty");for(var e=t.split(tU).filter(function(h){return h.length>0}),n=[],r=0,i=e;r<i.length;r++){var s=i[r],o=s.split("/");if(o.length===0)throw new Error("Invalid number skeleton");for(var a=o[0],l=o.slice(1),c=0,d=l;c<d.length;c++){var u=d[c];if(u.length===0)throw new Error("Invalid number skeleton")}n.push({stem:a,options:l})}return n}function rU(t){return t.replace(/^(.*?)-/,"")}var R1=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,NR=/^(@+)?(\+|#+)?[rs]?$/g,iU=/(\*)(0+)|(#+)(0+)|(0+)/g,LR=/^(0+)$/;function I1(t){var e={};return t[t.length-1]==="r"?e.roundingPriority="morePrecision":t[t.length-1]==="s"&&(e.roundingPriority="lessPrecision"),t.replace(NR,function(n,r,i){return typeof i!="string"?(e.minimumSignificantDigits=r.length,e.maximumSignificantDigits=r.length):i==="+"?e.minimumSignificantDigits=r.length:r[0]==="#"?e.maximumSignificantDigits=r.length:(e.minimumSignificantDigits=r.length,e.maximumSignificantDigits=r.length+(typeof i=="string"?i.length:0)),""}),e}function BR(t){switch(t){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function sU(t){var e;if(t[0]==="E"&&t[1]==="E"?(e={notation:"engineering"},t=t.slice(2)):t[0]==="E"&&(e={notation:"scientific"},t=t.slice(1)),e){var n=t.slice(0,2);if(n==="+!"?(e.signDisplay="always",t=t.slice(2)):n==="+?"&&(e.signDisplay="exceptZero",t=t.slice(2)),!LR.test(t))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=t.length}return e}function k1(t){var e={},n=BR(t);return n||e}function oU(t){for(var e={},n=0,r=t;n<r.length;n++){var i=r[n];switch(i.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=i.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=rU(i.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=Z(Z(Z({},e),{notation:"scientific"}),i.options.reduce(function(l,c){return Z(Z({},l),k1(c))},{}));continue;case"engineering":e=Z(Z(Z({},e),{notation:"engineering"}),i.options.reduce(function(l,c){return Z(Z({},l),k1(c))},{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(i.options[0]);continue;case"rounding-mode-floor":e.roundingMode="floor";continue;case"rounding-mode-ceiling":e.roundingMode="ceil";continue;case"rounding-mode-down":e.roundingMode="trunc";continue;case"rounding-mode-up":e.roundingMode="expand";continue;case"rounding-mode-half-even":e.roundingMode="halfEven";continue;case"rounding-mode-half-down":e.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":e.roundingMode="halfExpand";continue;case"integer-width":if(i.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");i.options[0].replace(iU,function(l,c,d,u,h,f){if(c)e.minimumIntegerDigits=d.length;else{if(u&&h)throw new Error("We currently do not support maximum integer digits");if(f)throw new Error("We currently do not support exact integer digits")}return""});continue}if(LR.test(i.stem)){e.minimumIntegerDigits=i.stem.length;continue}if(R1.test(i.stem)){if(i.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(R1,function(l,c,d,u,h,f){return d==="*"?e.minimumFractionDigits=c.length:u&&u[0]==="#"?e.maximumFractionDigits=u.length:h&&f?(e.minimumFractionDigits=h.length,e.maximumFractionDigits=h.length+f.length):(e.minimumFractionDigits=c.length,e.maximumFractionDigits=c.length),""});var s=i.options[0];s==="w"?e=Z(Z({},e),{trailingZeroDisplay:"stripIfInteger"}):s&&(e=Z(Z({},e),I1(s)));continue}if(NR.test(i.stem)){e=Z(Z({},e),I1(i.stem));continue}var o=BR(i.stem);o&&(e=Z(Z({},e),o));var a=sU(i.stem);a&&(e=Z(Z({},e),a))}return e}var sh={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function aU(t,e){for(var n="",r=0;r<t.length;r++){var i=t.charAt(r);if(i==="j"){for(var s=0;r+1<t.length&&t.charAt(r+1)===i;)s++,r++;var o=1+(s&1),a=s<2?1:3+(s>>1),l="a",c=lU(e);for((c=="H"||c=="k")&&(a=0);a-- >0;)n+=l;for(;o-- >0;)n=c+n}else i==="J"?n+="H":n+=i}return n}function lU(t){var e=t.hourCycle;if(e===void 0&&t.hourCycles&&t.hourCycles.length&&(e=t.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var n=t.language,r;n!=="root"&&(r=t.maximize().region);var i=sh[r||""]||sh[n||""]||sh["".concat(n,"-001")]||sh["001"];return i[0]}var Qm,cU=new RegExp("^".concat(OR.source,"*")),uU=new RegExp("".concat(OR.source,"*$"));function Ce(t,e){return{start:t,end:e}}var hU=!!String.prototype.startsWith&&"_a".startsWith("a",1),dU=!!String.fromCodePoint,fU=!!Object.fromEntries,pU=!!String.prototype.codePointAt,mU=!!String.prototype.trimStart,gU=!!String.prototype.trimEnd,yU=!!Number.isSafeInteger,vU=yU?Number.isSafeInteger:function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t&&Math.abs(t)<=9007199254740991},fv=!0;try{var _U=$R("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");fv=((Qm=_U.exec("a"))===null||Qm===void 0?void 0:Qm[0])==="a"}catch{fv=!1}var M1=hU?function(e,n,r){return e.startsWith(n,r)}:function(e,n,r){return e.slice(r,r+n.length)===n},pv=dU?String.fromCodePoint:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=e.length,s=0,o;i>s;){if(o=e[s++],o>1114111)throw RangeError(o+" is not a valid code point");r+=o<65536?String.fromCharCode(o):String.fromCharCode(((o-=65536)>>10)+55296,o%1024+56320)}return r},D1=fU?Object.fromEntries:function(e){for(var n={},r=0,i=e;r<i.length;r++){var s=i[r],o=s[0],a=s[1];n[o]=a}return n},FR=pU?function(e,n){return e.codePointAt(n)}:function(e,n){var r=e.length;if(!(n<0||n>=r)){var i=e.charCodeAt(n),s;return i<55296||i>56319||n+1===r||(s=e.charCodeAt(n+1))<56320||s>57343?i:(i-55296<<10)+(s-56320)+65536}},xU=mU?function(e){return e.trimStart()}:function(e){return e.replace(cU,"")},bU=gU?function(e){return e.trimEnd()}:function(e){return e.replace(uU,"")};function $R(t,e){return new RegExp(t,e)}var mv;if(fv){var O1=$R("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");mv=function(e,n){var r;O1.lastIndex=n;var i=O1.exec(e);return(r=i[1])!==null&&r!==void 0?r:""}}else mv=function(e,n){for(var r=[];;){var i=FR(e,n);if(i===void 0||UR(i)||TU(i))break;r.push(i),n+=i>=65536?2:1}return pv.apply(void 0,r)};var wU=function(){function t(e,n){n===void 0&&(n={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!n.ignoreTag,this.locale=n.locale,this.requiresOtherClause=!!n.requiresOtherClause,this.shouldParseSkeletons=!!n.shouldParseSkeletons}return t.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},t.prototype.parseMessage=function(e,n,r){for(var i=[];!this.isEOF();){var s=this.char();if(s===123){var o=this.parseArgument(e,r);if(o.err)return o;i.push(o.val)}else{if(s===125&&e>0)break;if(s===35&&(n==="plural"||n==="selectordinal")){var a=this.clonePosition();this.bump(),i.push({type:He.pound,location:Ce(a,this.clonePosition())})}else if(s===60&&!this.ignoreTag&&this.peek()===47){if(r)break;return this.error(Ee.UNMATCHED_CLOSING_TAG,Ce(this.clonePosition(),this.clonePosition()))}else if(s===60&&!this.ignoreTag&&gv(this.peek()||0)){var o=this.parseTag(e,n);if(o.err)return o;i.push(o.val)}else{var o=this.parseLiteral(e,n);if(o.err)return o;i.push(o.val)}}}return{val:i,err:null}},t.prototype.parseTag=function(e,n){var r=this.clonePosition();this.bump();var i=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:He.literal,value:"<".concat(i,"/>"),location:Ce(r,this.clonePosition())},err:null};if(this.bumpIf(">")){var s=this.parseMessage(e+1,n,!0);if(s.err)return s;var o=s.val,a=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!gv(this.char()))return this.error(Ee.INVALID_TAG,Ce(a,this.clonePosition()));var l=this.clonePosition(),c=this.parseTagName();return i!==c?this.error(Ee.UNMATCHED_CLOSING_TAG,Ce(l,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:He.tag,value:i,children:o,location:Ce(r,this.clonePosition())},err:null}:this.error(Ee.INVALID_TAG,Ce(a,this.clonePosition())))}else return this.error(Ee.UNCLOSED_TAG,Ce(r,this.clonePosition()))}else return this.error(Ee.INVALID_TAG,Ce(r,this.clonePosition()))},t.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&EU(this.char());)this.bump();return this.message.slice(e,this.offset())},t.prototype.parseLiteral=function(e,n){for(var r=this.clonePosition(),i="";;){var s=this.tryParseQuote(n);if(s){i+=s;continue}var o=this.tryParseUnquoted(e,n);if(o){i+=o;continue}var a=this.tryParseLeftAngleBracket();if(a){i+=a;continue}break}var l=Ce(r,this.clonePosition());return{val:{type:He.literal,value:i,location:l},err:null}},t.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!SU(this.peek()||0))?(this.bump(),"<"):null},t.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();var n=[this.char()];for(this.bump();!this.isEOF();){var r=this.char();if(r===39)if(this.peek()===39)n.push(39),this.bump();else{this.bump();break}else n.push(r);this.bump()}return pv.apply(void 0,n)},t.prototype.tryParseUnquoted=function(e,n){if(this.isEOF())return null;var r=this.char();return r===60||r===123||r===35&&(n==="plural"||n==="selectordinal")||r===125&&e>0?null:(this.bump(),pv(r))},t.prototype.parseArgument=function(e,n){var r=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(Ee.EXPECT_ARGUMENT_CLOSING_BRACE,Ce(r,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(Ee.EMPTY_ARGUMENT,Ce(r,this.clonePosition()));var i=this.parseIdentifierIfPossible().value;if(!i)return this.error(Ee.MALFORMED_ARGUMENT,Ce(r,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(Ee.EXPECT_ARGUMENT_CLOSING_BRACE,Ce(r,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:He.argument,value:i,location:Ce(r,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(Ee.EXPECT_ARGUMENT_CLOSING_BRACE,Ce(r,this.clonePosition())):this.parseArgumentOptions(e,n,i,r);default:return this.error(Ee.MALFORMED_ARGUMENT,Ce(r,this.clonePosition()))}},t.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),n=this.offset(),r=mv(this.message,n),i=n+r.length;this.bumpTo(i);var s=this.clonePosition(),o=Ce(e,s);return{value:r,location:o}},t.prototype.parseArgumentOptions=function(e,n,r,i){var s,o=this.clonePosition(),a=this.parseIdentifierIfPossible().value,l=this.clonePosition();switch(a){case"":return this.error(Ee.EXPECT_ARGUMENT_TYPE,Ce(o,l));case"number":case"date":case"time":{this.bumpSpace();var c=null;if(this.bumpIf(",")){this.bumpSpace();var d=this.clonePosition(),u=this.parseSimpleArgStyleIfPossible();if(u.err)return u;var h=bU(u.val);if(h.length===0)return this.error(Ee.EXPECT_ARGUMENT_STYLE,Ce(this.clonePosition(),this.clonePosition()));var f=Ce(d,this.clonePosition());c={style:h,styleLocation:f}}var p=this.tryParseArgumentClose(i);if(p.err)return p;var m=Ce(i,this.clonePosition());if(c&&M1(c?.style,"::",0)){var y=xU(c.style.slice(2));if(a==="number"){var u=this.parseNumberSkeletonFromString(y,c.styleLocation);return u.err?u:{val:{type:He.number,value:r,location:m,style:u.val},err:null}}else{if(y.length===0)return this.error(Ee.EXPECT_DATE_TIME_SKELETON,m);var g=y;this.locale&&(g=aU(y,this.locale));var h={type:Ua.dateTime,pattern:g,location:c.styleLocation,parsedOptions:this.shouldParseSkeletons?eU(g):{}},_=a==="date"?He.date:He.time;return{val:{type:_,value:r,location:m,style:h},err:null}}}return{val:{type:a==="number"?He.number:a==="date"?He.date:He.time,value:r,location:m,style:(s=c?.style)!==null&&s!==void 0?s:null},err:null}}case"plural":case"selectordinal":case"select":{var v=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(Ee.EXPECT_SELECT_ARGUMENT_OPTIONS,Ce(v,Z({},v)));this.bumpSpace();var w=this.parseIdentifierIfPossible(),S=0;if(a!=="select"&&w.value==="offset"){if(!this.bumpIf(":"))return this.error(Ee.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Ce(this.clonePosition(),this.clonePosition()));this.bumpSpace();var u=this.tryParseDecimalInteger(Ee.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Ee.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(u.err)return u;this.bumpSpace(),w=this.parseIdentifierIfPossible(),S=u.val}var E=this.tryParsePluralOrSelectOptions(e,a,n,w);if(E.err)return E;var p=this.tryParseArgumentClose(i);if(p.err)return p;var T=Ce(i,this.clonePosition());return a==="select"?{val:{type:He.select,value:r,options:D1(E.val),location:T},err:null}:{val:{type:He.plural,value:r,options:D1(E.val),offset:S,pluralType:a==="plural"?"cardinal":"ordinal",location:T},err:null}}default:return this.error(Ee.INVALID_ARGUMENT_TYPE,Ce(o,l))}},t.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(Ee.EXPECT_ARGUMENT_CLOSING_BRACE,Ce(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},t.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,n=this.clonePosition();!this.isEOF();){var r=this.char();switch(r){case 39:{this.bump();var i=this.clonePosition();if(!this.bumpUntil("'"))return this.error(Ee.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Ce(i,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(n.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(n.offset,this.offset()),err:null}},t.prototype.parseNumberSkeletonFromString=function(e,n){var r=[];try{r=nU(e)}catch{return this.error(Ee.INVALID_NUMBER_SKELETON,n)}return{val:{type:Ua.number,tokens:r,location:n,parsedOptions:this.shouldParseSkeletons?oU(r):{}},err:null}},t.prototype.tryParsePluralOrSelectOptions=function(e,n,r,i){for(var s,o=!1,a=[],l=new Set,c=i.value,d=i.location;;){if(c.length===0){var u=this.clonePosition();if(n!=="select"&&this.bumpIf("=")){var h=this.tryParseDecimalInteger(Ee.EXPECT_PLURAL_ARGUMENT_SELECTOR,Ee.INVALID_PLURAL_ARGUMENT_SELECTOR);if(h.err)return h;d=Ce(u,this.clonePosition()),c=this.message.slice(u.offset,this.offset())}else break}if(l.has(c))return this.error(n==="select"?Ee.DUPLICATE_SELECT_ARGUMENT_SELECTOR:Ee.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,d);c==="other"&&(o=!0),this.bumpSpace();var f=this.clonePosition();if(!this.bumpIf("{"))return this.error(n==="select"?Ee.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:Ee.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Ce(this.clonePosition(),this.clonePosition()));var p=this.parseMessage(e+1,n,r);if(p.err)return p;var m=this.tryParseArgumentClose(f);if(m.err)return m;a.push([c,{value:p.val,location:Ce(f,this.clonePosition())}]),l.add(c),this.bumpSpace(),s=this.parseIdentifierIfPossible(),c=s.value,d=s.location}return a.length===0?this.error(n==="select"?Ee.EXPECT_SELECT_ARGUMENT_SELECTOR:Ee.EXPECT_PLURAL_ARGUMENT_SELECTOR,Ce(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(Ee.MISSING_OTHER_CLAUSE,Ce(this.clonePosition(),this.clonePosition())):{val:a,err:null}},t.prototype.tryParseDecimalInteger=function(e,n){var r=1,i=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(r=-1);for(var s=!1,o=0;!this.isEOF();){var a=this.char();if(a>=48&&a<=57)s=!0,o=o*10+(a-48),this.bump();else break}var l=Ce(i,this.clonePosition());return s?(o*=r,vU(o)?{val:o,err:null}:this.error(n,l)):this.error(e,l)},t.prototype.offset=function(){return this.position.offset},t.prototype.isEOF=function(){return this.offset()===this.message.length},t.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},t.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var n=FR(this.message,e);if(n===void 0)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return n},t.prototype.error=function(e,n){return{val:null,err:{kind:e,message:this.message,location:n}}},t.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},t.prototype.bumpIf=function(e){if(M1(this.message,e,this.offset())){for(var n=0;n<e.length;n++)this.bump();return!0}return!1},t.prototype.bumpUntil=function(e){var n=this.offset(),r=this.message.indexOf(e,n);return r>=0?(this.bumpTo(r),!0):(this.bumpTo(this.message.length),!1)},t.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var n=this.offset();if(n===e)break;if(n>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},t.prototype.bumpSpace=function(){for(;!this.isEOF()&&UR(this.char());)this.bump()},t.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),n=this.offset(),r=this.message.charCodeAt(n+(e>=65536?2:1));return r??null},t}();function gv(t){return t>=97&&t<=122||t>=65&&t<=90}function SU(t){return gv(t)||t===47}function EU(t){return t===45||t===46||t>=48&&t<=57||t===95||t>=97&&t<=122||t>=65&&t<=90||t==183||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8255&&t<=8256||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039}function UR(t){return t>=9&&t<=13||t===32||t===133||t>=8206&&t<=8207||t===8232||t===8233}function TU(t){return t>=33&&t<=35||t===36||t>=37&&t<=39||t===40||t===41||t===42||t===43||t===44||t===45||t>=46&&t<=47||t>=58&&t<=59||t>=60&&t<=62||t>=63&&t<=64||t===91||t===92||t===93||t===94||t===96||t===123||t===124||t===125||t===126||t===161||t>=162&&t<=165||t===166||t===167||t===169||t===171||t===172||t===174||t===176||t===177||t===182||t===187||t===191||t===215||t===247||t>=8208&&t<=8213||t>=8214&&t<=8215||t===8216||t===8217||t===8218||t>=8219&&t<=8220||t===8221||t===8222||t===8223||t>=8224&&t<=8231||t>=8240&&t<=8248||t===8249||t===8250||t>=8251&&t<=8254||t>=8257&&t<=8259||t===8260||t===8261||t===8262||t>=8263&&t<=8273||t===8274||t===8275||t>=8277&&t<=8286||t>=8592&&t<=8596||t>=8597&&t<=8601||t>=8602&&t<=8603||t>=8604&&t<=8607||t===8608||t>=8609&&t<=8610||t===8611||t>=8612&&t<=8613||t===8614||t>=8615&&t<=8621||t===8622||t>=8623&&t<=8653||t>=8654&&t<=8655||t>=8656&&t<=8657||t===8658||t===8659||t===8660||t>=8661&&t<=8691||t>=8692&&t<=8959||t>=8960&&t<=8967||t===8968||t===8969||t===8970||t===8971||t>=8972&&t<=8991||t>=8992&&t<=8993||t>=8994&&t<=9e3||t===9001||t===9002||t>=9003&&t<=9083||t===9084||t>=9085&&t<=9114||t>=9115&&t<=9139||t>=9140&&t<=9179||t>=9180&&t<=9185||t>=9186&&t<=9254||t>=9255&&t<=9279||t>=9280&&t<=9290||t>=9291&&t<=9311||t>=9472&&t<=9654||t===9655||t>=9656&&t<=9664||t===9665||t>=9666&&t<=9719||t>=9720&&t<=9727||t>=9728&&t<=9838||t===9839||t>=9840&&t<=10087||t===10088||t===10089||t===10090||t===10091||t===10092||t===10093||t===10094||t===10095||t===10096||t===10097||t===10098||t===10099||t===10100||t===10101||t>=10132&&t<=10175||t>=10176&&t<=10180||t===10181||t===10182||t>=10183&&t<=10213||t===10214||t===10215||t===10216||t===10217||t===10218||t===10219||t===10220||t===10221||t===10222||t===10223||t>=10224&&t<=10239||t>=10240&&t<=10495||t>=10496&&t<=10626||t===10627||t===10628||t===10629||t===10630||t===10631||t===10632||t===10633||t===10634||t===10635||t===10636||t===10637||t===10638||t===10639||t===10640||t===10641||t===10642||t===10643||t===10644||t===10645||t===10646||t===10647||t===10648||t>=10649&&t<=10711||t===10712||t===10713||t===10714||t===10715||t>=10716&&t<=10747||t===10748||t===10749||t>=10750&&t<=11007||t>=11008&&t<=11055||t>=11056&&t<=11076||t>=11077&&t<=11078||t>=11079&&t<=11084||t>=11085&&t<=11123||t>=11124&&t<=11125||t>=11126&&t<=11157||t===11158||t>=11159&&t<=11263||t>=11776&&t<=11777||t===11778||t===11779||t===11780||t===11781||t>=11782&&t<=11784||t===11785||t===11786||t===11787||t===11788||t===11789||t>=11790&&t<=11798||t===11799||t>=11800&&t<=11801||t===11802||t===11803||t===11804||t===11805||t>=11806&&t<=11807||t===11808||t===11809||t===11810||t===11811||t===11812||t===11813||t===11814||t===11815||t===11816||t===11817||t>=11818&&t<=11822||t===11823||t>=11824&&t<=11833||t>=11834&&t<=11835||t>=11836&&t<=11839||t===11840||t===11841||t===11842||t>=11843&&t<=11855||t>=11856&&t<=11857||t===11858||t>=11859&&t<=11903||t>=12289&&t<=12291||t===12296||t===12297||t===12298||t===12299||t===12300||t===12301||t===12302||t===12303||t===12304||t===12305||t>=12306&&t<=12307||t===12308||t===12309||t===12310||t===12311||t===12312||t===12313||t===12314||t===12315||t===12316||t===12317||t>=12318&&t<=12319||t===12320||t===12336||t===64830||t===64831||t>=65093&&t<=65094}function yv(t){t.forEach(function(e){if(delete e.location,IR(e)||kR(e))for(var n in e.options)delete e.options[n].location,yv(e.options[n].value);else PR(e)&&DR(e.style)||(AR(e)||RR(e))&&dv(e.style)?delete e.style.location:MR(e)&&yv(e.children)})}function CU(t,e){e===void 0&&(e={}),e=Z({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var n=new wU(t,e).parse();if(n.err){var r=SyntaxError(Ee[n.err.kind]);throw r.location=n.err.location,r.originalMessage=n.err.message,r}return e?.captureLocation||yv(n.val),n.val}var ai;(function(t){t.MISSING_VALUE="MISSING_VALUE",t.INVALID_VALUE="INVALID_VALUE",t.MISSING_INTL_API="MISSING_INTL_API"})(ai||(ai={}));var Ps=function(t){Zn(e,t);function e(n,r,i){var s=t.call(this,n)||this;return s.code=r,s.originalMessage=i,s}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),N1=function(t){Zn(e,t);function e(n,r,i,s){return t.call(this,'Invalid values for "'.concat(n,'": "').concat(r,'". Options are "').concat(Object.keys(i).join('", "'),'"'),ai.INVALID_VALUE,s)||this}return e}(Ps),PU=function(t){Zn(e,t);function e(n,r,i){return t.call(this,'Value for "'.concat(n,'" must be of type ').concat(r),ai.INVALID_VALUE,i)||this}return e}(Ps),AU=function(t){Zn(e,t);function e(n,r){return t.call(this,'The intl string context variable "'.concat(n,'" was not provided to the string "').concat(r,'"'),ai.MISSING_VALUE,r)||this}return e}(Ps),qt;(function(t){t[t.literal=0]="literal",t[t.object=1]="object"})(qt||(qt={}));function RU(t){return t.length<2?t:t.reduce(function(e,n){var r=e[e.length-1];return!r||r.type!==qt.literal||n.type!==qt.literal?e.push(n):r.value+=n.value,e},[])}function HR(t){return typeof t=="function"}function Qh(t,e,n,r,i,s,o){if(t.length===1&&A1(t[0]))return[{type:qt.literal,value:t[0].value}];for(var a=[],l=0,c=t;l<c.length;l++){var d=c[l];if(A1(d)){a.push({type:qt.literal,value:d.value});continue}if(Q$(d)){typeof s=="number"&&a.push({type:qt.literal,value:n.getNumberFormat(e).format(s)});continue}var u=d.value;if(!(i&&u in i))throw new AU(u,o);var h=i[u];if(Z$(d)){(!h||typeof h=="string"||typeof h=="number")&&(h=typeof h=="string"||typeof h=="number"?String(h):""),a.push({type:typeof h=="string"?qt.literal:qt.object,value:h});continue}if(AR(d)){var f=typeof d.style=="string"?r.date[d.style]:dv(d.style)?d.style.parsedOptions:void 0;a.push({type:qt.literal,value:n.getDateTimeFormat(e,f).format(h)});continue}if(RR(d)){var f=typeof d.style=="string"?r.time[d.style]:dv(d.style)?d.style.parsedOptions:r.time.medium;a.push({type:qt.literal,value:n.getDateTimeFormat(e,f).format(h)});continue}if(PR(d)){var f=typeof d.style=="string"?r.number[d.style]:DR(d.style)?d.style.parsedOptions:void 0;f&&f.scale&&(h=h*(f.scale||1)),a.push({type:qt.literal,value:n.getNumberFormat(e,f).format(h)});continue}if(MR(d)){var p=d.children,m=d.value,y=i[m];if(!HR(y))throw new PU(m,"function",o);var g=Qh(p,e,n,r,i,s),_=y(g.map(function(S){return S.value}));Array.isArray(_)||(_=[_]),a.push.apply(a,_.map(function(S){return{type:typeof S=="string"?qt.literal:qt.object,value:S}}))}if(IR(d)){var v=d.options[h]||d.options.other;if(!v)throw new N1(d.value,h,Object.keys(d.options),o);a.push.apply(a,Qh(v.value,e,n,r,i));continue}if(kR(d)){var v=d.options["=".concat(h)];if(!v){if(!Intl.PluralRules)throw new Ps(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,ai.MISSING_INTL_API,o);var w=n.getPluralRules(e,{type:d.pluralType}).select(h-(d.offset||0));v=d.options[w]||d.options.other}if(!v)throw new N1(d.value,h,Object.keys(d.options),o);a.push.apply(a,Qh(v.value,e,n,r,i,h-(d.offset||0)));continue}}return RU(a)}function IU(t,e){return e?Z(Z(Z({},t||{}),e||{}),Object.keys(t).reduce(function(n,r){return n[r]=Z(Z({},t[r]),e[r]||{}),n},{})):t}function kU(t,e){return e?Object.keys(t).reduce(function(n,r){return n[r]=IU(t[r],e[r]),n},Z({},t)):t}function Jm(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,n){t[e]=n}}}}}function MU(t){return t===void 0&&(t={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:jr(function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((e=Intl.NumberFormat).bind.apply(e,yr([void 0],n,!1)))},{cache:Jm(t.number),strategy:Gr.variadic}),getDateTimeFormat:jr(function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((e=Intl.DateTimeFormat).bind.apply(e,yr([void 0],n,!1)))},{cache:Jm(t.dateTime),strategy:Gr.variadic}),getPluralRules:jr(function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((e=Intl.PluralRules).bind.apply(e,yr([void 0],n,!1)))},{cache:Jm(t.pluralRules),strategy:Gr.variadic})}}var jR=function(){function t(e,n,r,i){n===void 0&&(n=t.defaultLocale);var s=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(l){var c=s.formatToParts(l);if(c.length===1)return c[0].value;var d=c.reduce(function(u,h){return!u.length||h.type!==qt.literal||typeof u[u.length-1]!="string"?u.push(h.value):u[u.length-1]+=h.value,u},[]);return d.length<=1?d[0]||"":d},this.formatToParts=function(l){return Qh(s.ast,s.locales,s.formatters,s.formats,l,void 0,s.message)},this.resolvedOptions=function(){var l;return{locale:((l=s.resolvedLocale)===null||l===void 0?void 0:l.toString())||Intl.NumberFormat.supportedLocalesOf(s.locales)[0]}},this.getAst=function(){return s.ast},this.locales=n,this.resolvedLocale=t.resolveLocale(n),typeof e=="string"){if(this.message=e,!t.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var o=i||{};o.formatters;var a=ms(o,["formatters"]);this.ast=t.__parse(e,Z(Z({},a),{locale:this.resolvedLocale}))}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=kU(t.formats,r),this.formatters=i&&i.formatters||MU(this.formatterCache)}return Object.defineProperty(t,"defaultLocale",{get:function(){return t.memoizedDefaultLocale||(t.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),t.memoizedDefaultLocale},enumerable:!1,configurable:!0}),t.memoizedDefaultLocale=null,t.resolveLocale=function(e){if(!(typeof Intl.Locale>"u")){var n=Intl.NumberFormat.supportedLocalesOf(e);return n.length>0?new Intl.Locale(n[0]):new Intl.Locale(typeof e=="string"?e:e[0])}},t.__parse=CU,t.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},t}(),ro;(function(t){t.FORMAT_ERROR="FORMAT_ERROR",t.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",t.INVALID_CONFIG="INVALID_CONFIG",t.MISSING_DATA="MISSING_DATA",t.MISSING_TRANSLATION="MISSING_TRANSLATION"})(ro||(ro={}));var yu=function(t){Zn(e,t);function e(n,r,i){var s=this,o=i?i instanceof Error?i:new Error(String(i)):void 0;return s=t.call(this,"[@formatjs/intl Error ".concat(n,"] ").concat(r,`
`).concat(o?`
`.concat(o.message,`
`).concat(o.stack):""))||this,s.code=n,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(s,e),s}return e}(Error),DU=function(t){Zn(e,t);function e(n,r){return t.call(this,ro.UNSUPPORTED_FORMATTER,n,r)||this}return e}(yu),OU=function(t){Zn(e,t);function e(n,r){return t.call(this,ro.INVALID_CONFIG,n,r)||this}return e}(yu),L1=function(t){Zn(e,t);function e(n,r){return t.call(this,ro.MISSING_DATA,n,r)||this}return e}(yu),nr=function(t){Zn(e,t);function e(n,r,i){var s=t.call(this,ro.FORMAT_ERROR,"".concat(n,`
Locale: `).concat(r,`
`),i)||this;return s.locale=r,s}return e}(yu),eg=function(t){Zn(e,t);function e(n,r,i,s){var o=t.call(this,"".concat(n,`
MessageID: `).concat(i?.id,`
Default Message: `).concat(i?.defaultMessage,`
Description: `).concat(i?.description,`
`),r,s)||this;return o.descriptor=i,o.locale=r,o}return e}(nr),NU=function(t){Zn(e,t);function e(n,r){var i=t.call(this,ro.MISSING_TRANSLATION,'Missing message: "'.concat(n.id,'" for locale "').concat(r,'", using ').concat(n.defaultMessage?"default message (".concat(typeof n.defaultMessage=="string"?n.defaultMessage:n.defaultMessage.map(function(s){var o;return(o=s.value)!==null&&o!==void 0?o:JSON.stringify(s)}).join(),")"):"id"," as fallback."))||this;return i.descriptor=n,i}return e}(yu);function LU(t,e,n){if(n===void 0&&(n=Error),!t)throw new n(e)}function ll(t,e,n){return n===void 0&&(n={}),e.reduce(function(r,i){return i in t?r[i]=t[i]:i in n&&(r[i]=n[i]),r},{})}var BU=function(t){},FU=function(t){},GR={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:BU,onWarn:FU};function zR(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function Rs(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,n){t[e]=n}}}}}function $U(t){t===void 0&&(t=zR());var e=Intl.RelativeTimeFormat,n=Intl.ListFormat,r=Intl.DisplayNames,i=jr(function(){for(var a,l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return new((a=Intl.DateTimeFormat).bind.apply(a,yr([void 0],l,!1)))},{cache:Rs(t.dateTime),strategy:Gr.variadic}),s=jr(function(){for(var a,l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return new((a=Intl.NumberFormat).bind.apply(a,yr([void 0],l,!1)))},{cache:Rs(t.number),strategy:Gr.variadic}),o=jr(function(){for(var a,l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return new((a=Intl.PluralRules).bind.apply(a,yr([void 0],l,!1)))},{cache:Rs(t.pluralRules),strategy:Gr.variadic});return{getDateTimeFormat:i,getNumberFormat:s,getMessageFormat:jr(function(a,l,c,d){return new jR(a,l,c,Z({formatters:{getNumberFormat:s,getDateTimeFormat:i,getPluralRules:o}},d||{}))},{cache:Rs(t.message),strategy:Gr.variadic}),getRelativeTimeFormat:jr(function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return new(e.bind.apply(e,yr([void 0],a,!1)))},{cache:Rs(t.relativeTime),strategy:Gr.variadic}),getPluralRules:o,getListFormat:jr(function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return new(n.bind.apply(n,yr([void 0],a,!1)))},{cache:Rs(t.list),strategy:Gr.variadic}),getDisplayNames:jr(function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return new(r.bind.apply(r,yr([void 0],a,!1)))},{cache:Rs(t.displayNames),strategy:Gr.variadic})}}function Dx(t,e,n,r){var i=t&&t[e],s;if(i&&(s=i[n]),s)return s;r(new DU("No ".concat(e," format named: ").concat(n)))}function oh(t,e){return Object.keys(t).reduce(function(n,r){return n[r]=Z({timeZone:e},t[r]),n},{})}function B1(t,e){var n=Object.keys(Z(Z({},t),e));return n.reduce(function(r,i){return r[i]=Z(Z({},t[i]||{}),e[i]||{}),r},{})}function F1(t,e){if(!e)return t;var n=jR.formats;return Z(Z(Z({},n),t),{date:B1(oh(n.date,e),oh(t.date||{},e)),time:B1(oh(n.time,e),oh(t.time||{},e))})}var vv=function(t,e,n,r,i){var s=t.locale,o=t.formats,a=t.messages,l=t.defaultLocale,c=t.defaultFormats,d=t.fallbackOnEmptyString,u=t.onError,h=t.timeZone,f=t.defaultRichTextElements;n===void 0&&(n={id:""});var p=n.id,m=n.defaultMessage;LU(!!p,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.github.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.github.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.github.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var y=String(p),g=a&&Object.prototype.hasOwnProperty.call(a,y)&&a[y];if(Array.isArray(g)&&g.length===1&&g[0].type===He.literal)return g[0].value;if(!r&&g&&typeof g=="string"&&!f)return g.replace(/'\{(.*?)\}'/gi,"{$1}");if(r=Z(Z({},f),r||{}),o=F1(o,h),c=F1(c,h),!g){if(d===!1&&g==="")return g;if((!m||s&&s.toLowerCase()!==l.toLowerCase())&&u(new NU(n,s)),m)try{var _=e.getMessageFormat(m,l,c,i);return _.format(r)}catch(v){return u(new eg('Error formatting default message for: "'.concat(y,'", rendering default message verbatim'),s,n,v)),typeof m=="string"?m:y}return y}try{var _=e.getMessageFormat(g,s,o,Z({formatters:e},i||{}));return _.format(r)}catch(v){u(new eg('Error formatting message: "'.concat(y,'", using ').concat(m?"default message":"id"," as fallback."),s,n,v))}if(m)try{var _=e.getMessageFormat(m,l,c,i);return _.format(r)}catch(v){u(new eg('Error formatting the default message for: "'.concat(y,'", rendering message verbatim'),s,n,v))}return typeof g=="string"?g:typeof m=="string"?m:y},UU=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function vu(t,e,n,r){var i=t.locale,s=t.formats,o=t.onError,a=t.timeZone;r===void 0&&(r={});var l=r.format,c=Z(Z({},a&&{timeZone:a}),l&&Dx(s,e,l,o)),d=ll(r,UU,c);return e==="time"&&!d.hour&&!d.minute&&!d.second&&!d.timeStyle&&!d.dateStyle&&(d=Z(Z({},d),{hour:"numeric",minute:"numeric"})),n(i,d)}function HU(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],s=n[1],o=s===void 0?{}:s,a=typeof i=="string"?new Date(i||0):i;try{return vu(t,"date",e,o).format(a)}catch(l){t.onError(new nr("Error formatting date.",t.locale,l))}return String(a)}function jU(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],s=n[1],o=s===void 0?{}:s,a=typeof i=="string"?new Date(i||0):i;try{return vu(t,"time",e,o).format(a)}catch(l){t.onError(new nr("Error formatting time.",t.locale,l))}return String(a)}function GU(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],s=n[1],o=n[2],a=o===void 0?{}:o,l=typeof i=="string"?new Date(i||0):i,c=typeof s=="string"?new Date(s||0):s;try{return vu(t,"dateTimeRange",e,a).formatRange(l,c)}catch(d){t.onError(new nr("Error formatting date time range.",t.locale,d))}return String(l)}function zU(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],s=n[1],o=s===void 0?{}:s,a=typeof i=="string"?new Date(i||0):i;try{return vu(t,"date",e,o).formatToParts(a)}catch(l){t.onError(new nr("Error formatting date.",t.locale,l))}return[]}function WU(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],s=n[1],o=s===void 0?{}:s,a=typeof i=="string"?new Date(i||0):i;try{return vu(t,"time",e,o).formatToParts(a)}catch(l){t.onError(new nr("Error formatting time.",t.locale,l))}return[]}var VU=["style","type","fallback","languageDisplay"];function XU(t,e,n,r){var i=t.locale,s=t.onError,o=Intl.DisplayNames;o||s(new Ps(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,ai.MISSING_INTL_API));var a=ll(r,VU);try{return e(i,a).of(n)}catch(l){s(new nr("Error formatting display name.",i,l))}}var YU=["type","style"],$1=Date.now();function KU(t){return"".concat($1,"_").concat(t,"_").concat($1)}function qU(t,e,n,r){r===void 0&&(r={});var i=WR(t,e,n,r).reduce(function(s,o){var a=o.value;return typeof a!="string"?s.push(a):typeof s[s.length-1]=="string"?s[s.length-1]+=a:s.push(a),s},[]);return i.length===1?i[0]:i.length===0?"":i}function WR(t,e,n,r){var i=t.locale,s=t.onError;r===void 0&&(r={});var o=Intl.ListFormat;o||s(new Ps(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,ai.MISSING_INTL_API));var a=ll(r,YU);try{var l={},c=n.map(function(d,u){if(typeof d=="object"){var h=KU(u);return l[h]=d,h}return String(d)});return e(i,a).formatToParts(c).map(function(d){return d.type==="literal"?d:Z(Z({},d),{value:l[d.value]||d.value})})}catch(d){s(new nr("Error formatting list.",i,d))}return n}var ZU=["type"];function QU(t,e,n,r){var i=t.locale,s=t.onError;r===void 0&&(r={}),Intl.PluralRules||s(new Ps(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,ai.MISSING_INTL_API));var o=ll(r,ZU);try{return e(i,o).select(n)}catch(a){s(new nr("Error formatting plural.",i,a))}return"other"}var JU=["numeric","style"];function eH(t,e,n){var r=t.locale,i=t.formats,s=t.onError;n===void 0&&(n={});var o=n.format,a=!!o&&Dx(i,"relative",o,s)||{},l=ll(n,JU,a);return e(r,l)}function tH(t,e,n,r,i){i===void 0&&(i={}),r||(r="second");var s=Intl.RelativeTimeFormat;s||t.onError(new Ps(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,ai.MISSING_INTL_API));try{return eH(t,e,i).format(n,r)}catch(o){t.onError(new nr("Error formatting relative time.",t.locale,o))}return String(n)}var nH=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function VR(t,e,n){var r=t.locale,i=t.formats,s=t.onError;n===void 0&&(n={});var o=n.format,a=o&&Dx(i,"number",o,s)||{},l=ll(n,nH,a);return e(r,l)}function rH(t,e,n,r){r===void 0&&(r={});try{return VR(t,e,r).format(n)}catch(i){t.onError(new nr("Error formatting number.",t.locale,i))}return String(n)}function iH(t,e,n,r){r===void 0&&(r={});try{return VR(t,e,r).formatToParts(n)}catch(i){t.onError(new nr("Error formatting number.",t.locale,i))}return[]}function sH(t){var e=t?t[Object.keys(t)[0]]:void 0;return typeof e=="string"}function oH(t){t.onWarn&&t.defaultRichTextElements&&sH(t.messages||{})&&t.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.github.io/docs/getting-started/message-distribution`)}function aH(t,e){var n=$U(e),r=Z(Z({},GR),t),i=r.locale,s=r.defaultLocale,o=r.onError;return i?!Intl.NumberFormat.supportedLocalesOf(i).length&&o?o(new L1('Missing locale data for locale: "'.concat(i,'" in Intl.NumberFormat. Using default locale: "').concat(s,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(i).length&&o&&o(new L1('Missing locale data for locale: "'.concat(i,'" in Intl.DateTimeFormat. Using default locale: "').concat(s,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):(o&&o(new OU('"locale" was not configured, using "'.concat(s,'" as fallback. See https://formatjs.github.io/docs/react-intl/api#intlshape for more details'))),r.locale=r.defaultLocale||"en"),oH(r),Z(Z({},r),{formatters:n,formatNumber:rH.bind(null,r,n.getNumberFormat),formatNumberToParts:iH.bind(null,r,n.getNumberFormat),formatRelativeTime:tH.bind(null,r,n.getRelativeTimeFormat),formatDate:HU.bind(null,r,n.getDateTimeFormat),formatDateToParts:zU.bind(null,r,n.getDateTimeFormat),formatTime:jU.bind(null,r,n.getDateTimeFormat),formatDateTimeRange:GU.bind(null,r,n.getDateTimeFormat),formatTimeToParts:WU.bind(null,r,n.getDateTimeFormat),formatPlural:QU.bind(null,r,n.getPluralRules),formatMessage:vv.bind(null,r,n),$t:vv.bind(null,r,n),formatList:qU.bind(null,r,n.getListFormat),formatListToParts:WR.bind(null,r,n.getListFormat),formatDisplayName:XU.bind(null,r,n.getDisplayNames)})}function lH(t,e,n){if(n===void 0&&(n=Error),!t)throw new n(e)}function XR(t){lH(t,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var YR=Z(Z({},GR),{textComponent:b.Fragment}),cH={key:42},uH=function(t){return b.isValidElement(t)?b.createElement(b.Fragment,cH,t):t},hH=function(t){var e;return(e=b.Children.map(t,uH))!==null&&e!==void 0?e:[]};function dH(t){return function(e){return t(b.Children.toArray(e))}}function _v(t,e){if(t===e)return!0;if(!t||!e)return!1;var n=Object.keys(t),r=Object.keys(e),i=n.length;if(r.length!==i)return!1;for(var s=0;s<i;s++){var o=n[s];if(t[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}var KR={exports:{}},Ne={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ct=typeof Symbol=="function"&&Symbol.for,Ox=Ct?Symbol.for("react.element"):60103,Nx=Ct?Symbol.for("react.portal"):60106,_p=Ct?Symbol.for("react.fragment"):60107,xp=Ct?Symbol.for("react.strict_mode"):60108,bp=Ct?Symbol.for("react.profiler"):60114,wp=Ct?Symbol.for("react.provider"):60109,Sp=Ct?Symbol.for("react.context"):60110,Lx=Ct?Symbol.for("react.async_mode"):60111,Ep=Ct?Symbol.for("react.concurrent_mode"):60111,Tp=Ct?Symbol.for("react.forward_ref"):60112,Cp=Ct?Symbol.for("react.suspense"):60113,fH=Ct?Symbol.for("react.suspense_list"):60120,Pp=Ct?Symbol.for("react.memo"):60115,Ap=Ct?Symbol.for("react.lazy"):60116,pH=Ct?Symbol.for("react.block"):60121,mH=Ct?Symbol.for("react.fundamental"):60117,gH=Ct?Symbol.for("react.responder"):60118,yH=Ct?Symbol.for("react.scope"):60119;function Nn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Ox:switch(t=t.type,t){case Lx:case Ep:case _p:case bp:case xp:case Cp:return t;default:switch(t=t&&t.$$typeof,t){case Sp:case Tp:case Ap:case Pp:case wp:return t;default:return e}}case Nx:return e}}}function qR(t){return Nn(t)===Ep}Ne.AsyncMode=Lx;Ne.ConcurrentMode=Ep;Ne.ContextConsumer=Sp;Ne.ContextProvider=wp;Ne.Element=Ox;Ne.ForwardRef=Tp;Ne.Fragment=_p;Ne.Lazy=Ap;Ne.Memo=Pp;Ne.Portal=Nx;Ne.Profiler=bp;Ne.StrictMode=xp;Ne.Suspense=Cp;Ne.isAsyncMode=function(t){return qR(t)||Nn(t)===Lx};Ne.isConcurrentMode=qR;Ne.isContextConsumer=function(t){return Nn(t)===Sp};Ne.isContextProvider=function(t){return Nn(t)===wp};Ne.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ox};Ne.isForwardRef=function(t){return Nn(t)===Tp};Ne.isFragment=function(t){return Nn(t)===_p};Ne.isLazy=function(t){return Nn(t)===Ap};Ne.isMemo=function(t){return Nn(t)===Pp};Ne.isPortal=function(t){return Nn(t)===Nx};Ne.isProfiler=function(t){return Nn(t)===bp};Ne.isStrictMode=function(t){return Nn(t)===xp};Ne.isSuspense=function(t){return Nn(t)===Cp};Ne.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===_p||t===Ep||t===bp||t===xp||t===Cp||t===fH||typeof t=="object"&&t!==null&&(t.$$typeof===Ap||t.$$typeof===Pp||t.$$typeof===wp||t.$$typeof===Sp||t.$$typeof===Tp||t.$$typeof===mH||t.$$typeof===gH||t.$$typeof===yH||t.$$typeof===pH)};Ne.typeOf=Nn;KR.exports=Ne;var vH=KR.exports,ZR=vH,_H={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},xH={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},QR={};QR[ZR.ForwardRef]=_H;QR[ZR.Memo]=xH;var Bx=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=b.createContext(null)):b.createContext(null);Bx.Consumer;var bH=Bx.Provider,wH=bH,SH=Bx;function rr(){var t=b.useContext(SH);return XR(t),t}var xv;(function(t){t.formatDate="FormattedDate",t.formatTime="FormattedTime",t.formatNumber="FormattedNumber",t.formatList="FormattedList",t.formatDisplayName="FormattedDisplayName"})(xv||(xv={}));var bv;(function(t){t.formatDate="FormattedDateParts",t.formatTime="FormattedTimeParts",t.formatNumber="FormattedNumberParts",t.formatList="FormattedListParts"})(bv||(bv={}));function JR(t){var e=function(n){var r=rr(),i=n.value,s=n.children,o=ms(n,["value","children"]),a=typeof i=="string"?new Date(i||0):i,l=t==="formatDate"?r.formatDateToParts(a,o):r.formatTimeToParts(a,o);return s(l)};return e.displayName=bv[t],e}function _u(t){var e=function(n){var r=rr(),i=n.value,s=n.children,o=ms(n,["value","children"]),a=r[t](i,o);if(typeof s=="function")return s(a);var l=r.textComponent||b.Fragment;return b.createElement(l,null,a)};return e.displayName=xv[t],e}function eI(t){return t&&Object.keys(t).reduce(function(e,n){var r=t[n];return e[n]=HR(r)?dH(r):r,e},{})}var U1=function(t,e,n,r){for(var i=[],s=4;s<arguments.length;s++)i[s-4]=arguments[s];var o=eI(r),a=vv.apply(void 0,yr([t,e,n,o],i,!1));return Array.isArray(a)?hH(a):a},H1=function(t,e){var n=t.defaultRichTextElements,r=ms(t,["defaultRichTextElements"]),i=eI(n),s=aH(Z(Z(Z({},YR),r),{defaultRichTextElements:i}),e),o={locale:s.locale,timeZone:s.timeZone,fallbackOnEmptyString:s.fallbackOnEmptyString,formats:s.formats,defaultLocale:s.defaultLocale,defaultFormats:s.defaultFormats,messages:s.messages,onError:s.onError,defaultRichTextElements:i};return Z(Z({},s),{formatMessage:U1.bind(null,o,s.formatters),$t:U1.bind(null,o,s.formatters)})};function EH(t,e){var n=t.values,r=ms(t,["values"]),i=e.values,s=ms(e,["values"]);return _v(i,n)&&_v(r,s)}function tI(t){var e=rr(),n=e.formatMessage,r=e.textComponent,i=r===void 0?b.Fragment:r,s=t.id,o=t.description,a=t.defaultMessage,l=t.values,c=t.children,d=t.tagName,u=d===void 0?i:d,h=t.ignoreTag,f={id:s,description:o,defaultMessage:a},p=n(f,l,{ignoreTag:h});return typeof c=="function"?c(Array.isArray(p)?p:[p]):u?b.createElement(u,null,p):b.createElement(b.Fragment,null,p)}tI.displayName="FormattedMessage";var Ge=b.memo(tI,EH);Ge.displayName="MemoizedFormattedMessage";function tg(t){return{locale:t.locale,timeZone:t.timeZone,fallbackOnEmptyString:t.fallbackOnEmptyString,formats:t.formats,textComponent:t.textComponent,messages:t.messages,defaultLocale:t.defaultLocale,defaultFormats:t.defaultFormats,onError:t.onError,onWarn:t.onWarn,wrapRichTextChunksInFragment:t.wrapRichTextChunksInFragment,defaultRichTextElements:t.defaultRichTextElements}}var TH=function(t){Zn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.cache=zR(),n.state={cache:n.cache,intl:H1(tg(n.props),n.cache),prevConfig:tg(n.props)},n}return e.getDerivedStateFromProps=function(n,r){var i=r.prevConfig,s=r.cache,o=tg(n);return _v(i,o)?null:{intl:H1(o,s),prevConfig:o}},e.prototype.render=function(){return XR(this.state.intl),b.createElement(wH,{value:this.state.intl},this.props.children)},e.displayName="IntlProvider",e.defaultProps=YR,e}(b.PureComponent);_u("formatDate");_u("formatTime");_u("formatNumber");_u("formatList");_u("formatDisplayName");JR("formatDate");JR("formatTime");var Fx={};Object.defineProperty(Fx,"__esModule",{value:!0});Fx.parse=MH;Fx.serialize=DH;const CH=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,PH=/^[\u0021-\u003A\u003C-\u007E]*$/,AH=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,RH=/^[\u0020-\u003A\u003D-\u007E]*$/,IH=Object.prototype.toString,kH=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function MH(t,e){const n=new kH,r=t.length;if(r<2)return n;const i=e?.decode||OH;let s=0;do{const o=t.indexOf("=",s);if(o===-1)break;const a=t.indexOf(";",s),l=a===-1?r:a;if(o>l){s=t.lastIndexOf(";",o-1)+1;continue}const c=j1(t,s,o),d=G1(t,o,c),u=t.slice(c,d);if(n[u]===void 0){let h=j1(t,o+1,l),f=G1(t,l,h);const p=i(t.slice(h,f));n[u]=p}s=l+1}while(s<r);return n}function j1(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function G1(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function DH(t,e,n){const r=n?.encode||encodeURIComponent;if(!CH.test(t))throw new TypeError(`argument name is invalid: ${t}`);const i=r(e);if(!PH.test(i))throw new TypeError(`argument val is invalid: ${e}`);let s=t+"="+i;if(!n)return s;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);s+="; Max-Age="+n.maxAge}if(n.domain){if(!AH.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);s+="; Domain="+n.domain}if(n.path){if(!RH.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);s+="; Path="+n.path}if(n.expires){if(!NH(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.partitioned&&(s+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return s}function OH(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function NH(t){return IH.call(t)==="[object Date]"}/**
 * react-router v7.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var z1="popstate";function LH(t={}){function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=mo(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),wv("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:$c(s))}function r(i,s){kr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return FH(e,n,r,t)}function Je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function kr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BH(){return Math.random().toString(36).substring(2,10)}function W1(t,e){return{usr:t.state,key:t.key,idx:e}}function wv(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?mo(e):e,state:n,key:e&&e.key||r||BH()}}function $c({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function mo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function FH(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=d();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function d(){return(o.state||{idx:null}).idx}function u(){a="POP";let y=d(),g=y==null?null:y-c;c=y,l&&l({action:a,location:m.location,delta:g})}function h(y,g){a="PUSH";let _=wv(m.location,y,g);n&&n(_,y),c=d()+1;let v=W1(_,c),w=m.createHref(_);try{o.pushState(v,"",w)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(w)}s&&l&&l({action:a,location:m.location,delta:1})}function f(y,g){a="REPLACE";let _=wv(m.location,y,g);n&&n(_,y),c=d();let v=W1(_,c),w=m.createHref(_);o.replaceState(v,"",w),s&&l&&l({action:a,location:m.location,delta:0})}function p(y){let g=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof y=="string"?y:$c(y);return _=_.replace(/ $/,"%20"),Je(g,`No window.location.(origin|href) available to create URL for href: ${_}`),new URL(_,g)}let m={get action(){return a},get location(){return t(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(z1,u),l=y,()=>{i.removeEventListener(z1,u),l=null}},createHref(y){return e(i,y)},createURL:p,encodeLocation(y){let g=p(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:f,go(y){return o.go(y)}};return m}function nI(t,e,n="/"){return $H(t,e,n,!1)}function $H(t,e,n,r){let i=typeof e=="string"?mo(e):e,s=Li(i.pathname||"/",n);if(s==null)return null;let o=rI(t);UH(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=ZH(s);a=KH(o[l],c,r)}return a}function rI(t,e=[],n=[],r=""){let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Je(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=Ci([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Je(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),rI(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:XH(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))i(s,o);else for(let a of iI(s.path))i(s,o,a)}),e}function iI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=iI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function UH(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:YH(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var HH=/^:[\w-]+$/,jH=3,GH=2,zH=1,WH=10,VH=-2,V1=t=>t==="*";function XH(t,e){let n=t.split("/"),r=n.length;return n.some(V1)&&(r+=VH),e&&(r+=GH),n.filter(i=>!V1(i)).reduce((i,s)=>i+(HH.test(s)?jH:s===""?zH:WH),r)}function YH(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function KH(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",u=tf({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),h=l.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=tf({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:Ci([s,u.pathname]),pathnameBase:tj(Ci([s,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(s=Ci([s,u.pathnameBase]))}return o}function tf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=qH(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:u},h)=>{if(d==="*"){let p=a[h]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const f=a[h];return u&&!f?c[d]=void 0:c[d]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function qH(t,e=!1,n=!0){kr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function ZH(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Li(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function QH(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?mo(t):t;return{pathname:n?n.startsWith("/")?n:JH(n,e):e,search:nj(r),hash:rj(i)}}function JH(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ng(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ej(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function sI(t){let e=ej(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function oI(t,e,n,r=!1){let i;typeof t=="string"?i=mo(t):(i={...t},Je(!i.pathname||!i.pathname.includes("?"),ng("?","pathname","search",i)),Je(!i.pathname||!i.pathname.includes("#"),ng("#","pathname","hash",i)),Je(!i.search||!i.search.includes("#"),ng("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let u=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),u-=1;i.pathname=h.join("/")}a=u>=0?e[u]:"/"}let l=QH(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var Ci=t=>t.join("/").replace(/\/\/+/g,"/"),tj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),nj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,rj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ij(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var aI=["POST","PUT","PATCH","DELETE"];new Set(aI);var sj=["GET",...aI];new Set(sj);var cl=b.createContext(null);cl.displayName="DataRouter";var Rp=b.createContext(null);Rp.displayName="DataRouterState";var lI=b.createContext({isTransitioning:!1});lI.displayName="ViewTransition";var oj=b.createContext(new Map);oj.displayName="Fetchers";var aj=b.createContext(null);aj.displayName="Await";var di=b.createContext(null);di.displayName="Navigation";var xu=b.createContext(null);xu.displayName="Location";var ji=b.createContext({outlet:null,matches:[],isDataRoute:!1});ji.displayName="Route";var $x=b.createContext(null);$x.displayName="RouteError";function lj(t,{relative:e}={}){Je(bu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=b.useContext(di),{hash:i,pathname:s,search:o}=wu(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Ci([n,s])),r.createHref({pathname:a,search:o,hash:i})}function bu(){return b.useContext(xu)!=null}function go(){return Je(bu(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(xu).location}var cI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uI(t){b.useContext(di).static||b.useLayoutEffect(t)}function cj(){let{isDataRoute:t}=b.useContext(ji);return t?wj():uj()}function uj(){Je(bu(),"useNavigate() may be used only in the context of a <Router> component.");let t=b.useContext(cl),{basename:e,navigator:n}=b.useContext(di),{matches:r}=b.useContext(ji),{pathname:i}=go(),s=JSON.stringify(sI(r)),o=b.useRef(!1);return uI(()=>{o.current=!0}),b.useCallback((l,c={})=>{if(kr(o.current,cI),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=oI(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ci([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,s,i,t])}b.createContext(null);function wu(t,{relative:e}={}){let{matches:n}=b.useContext(ji),{pathname:r}=go(),i=JSON.stringify(sI(n));return b.useMemo(()=>oI(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function hj(t,e){return hI(t,e)}function hI(t,e,n,r){Je(bu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=b.useContext(di),{matches:o}=b.useContext(ji),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",d=a?a.pathnameBase:"/",u=a&&a.route;{let _=u&&u.path||"";dI(c,!u||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let h=go(),f;if(e){let _=typeof e=="string"?mo(e):e;Je(d==="/"||_.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${_.pathname}" was given in the \`location\` prop.`),f=_}else f=h;let p=f.pathname||"/",m=p;if(d!=="/"){let _=d.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let y=!s&&n&&n.matches&&n.matches.length>0?n.matches:nI(t,{pathname:m});kr(u||y!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),kr(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=gj(y&&y.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Ci([d,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:Ci([d,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,n,r);return e&&g?b.createElement(xu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},g):g}function dj(){let t=bj(),e=ij(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=b.createElement(b.Fragment,null,b.createElement("p",null,"💿 Hey developer 👋"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:s},"ErrorBoundary")," or"," ",b.createElement("code",{style:s},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:i},n):null,o)}var fj=b.createElement(dj,null),pj=class extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?b.createElement(ji.Provider,{value:this.props.routeContext},b.createElement($x.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function mj({routeContext:t,match:e,children:n}){let r=b.useContext(cl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(ji.Provider,{value:t},n)}function gj(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n?.errors;if(s!=null){let l=i.findIndex(c=>c.route.id&&s?.[c.route.id]!==void 0);Je(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:d,errors:u}=n,h=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!u||u[c.route.id]===void 0);if(c.route.lazy||h){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,c,d)=>{let u,h=!1,f=null,p=null;n&&(u=s&&c.route.id?s[c.route.id]:void 0,f=c.route.errorElement||fj,o&&(a<0&&d===0?(dI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):a===d&&(h=!0,p=c.route.hydrateFallbackElement||null)));let m=e.concat(i.slice(0,d+1)),y=()=>{let g;return u?g=f:h?g=p:c.route.Component?g=b.createElement(c.route.Component,null):c.route.element?g=c.route.element:g=l,b.createElement(mj,{match:c,routeContext:{outlet:l,matches:m,isDataRoute:n!=null},children:g})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?b.createElement(pj,{location:n.location,revalidation:n.revalidation,component:f,error:u,children:y(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):y()},null)}function Ux(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yj(t){let e=b.useContext(cl);return Je(e,Ux(t)),e}function vj(t){let e=b.useContext(Rp);return Je(e,Ux(t)),e}function _j(t){let e=b.useContext(ji);return Je(e,Ux(t)),e}function Hx(t){let e=_j(t),n=e.matches[e.matches.length-1];return Je(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function xj(){return Hx("useRouteId")}function bj(){let t=b.useContext($x),e=vj("useRouteError"),n=Hx("useRouteError");return t!==void 0?t:e.errors?.[n]}function wj(){let{router:t}=yj("useNavigate"),e=Hx("useNavigate"),n=b.useRef(!1);return uI(()=>{n.current=!0}),b.useCallback(async(i,s={})=>{kr(n.current,cI),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var X1={};function dI(t,e,n){!e&&!X1[t]&&(X1[t]=!0,kr(!1,n))}b.memo(Sj);function Sj({routes:t,future:e,state:n}){return hI(t,void 0,n,e)}function Xl(t){Je(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ej({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Je(!bu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=b.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=mo(n));let{pathname:l="/",search:c="",hash:d="",state:u=null,key:h="default"}=n,f=b.useMemo(()=>{let p=Li(l,o);return p==null?null:{location:{pathname:p,search:c,hash:d,state:u,key:h},navigationType:r}},[o,l,c,d,u,h,r]);return kr(f!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:b.createElement(di.Provider,{value:a},b.createElement(xu.Provider,{children:e,value:f}))}function Tj({children:t,location:e}){return hj(Sv(t),e)}function Sv(t,e=[]){let n=[];return b.Children.forEach(t,(r,i)=>{if(!b.isValidElement(r))return;let s=[...e,i];if(r.type===b.Fragment){n.push.apply(n,Sv(r.props.children,s));return}Je(r.type===Xl,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Je(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Sv(r.props.children,s)),n.push(o)}),n}var Jh="get",ed="application/x-www-form-urlencoded";function Ip(t){return t!=null&&typeof t.tagName=="string"}function Cj(t){return Ip(t)&&t.tagName.toLowerCase()==="button"}function Pj(t){return Ip(t)&&t.tagName.toLowerCase()==="form"}function Aj(t){return Ip(t)&&t.tagName.toLowerCase()==="input"}function Rj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ij(t,e){return t.button===0&&(!e||e==="_self")&&!Rj(t)}var ah=null;function kj(){if(ah===null)try{new FormData(document.createElement("form"),0),ah=!1}catch{ah=!0}return ah}var Mj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rg(t){return t!=null&&!Mj.has(t)?(kr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ed}"`),null):t}function Dj(t,e){let n,r,i,s,o;if(Pj(t)){let a=t.getAttribute("action");r=a?Li(a,e):null,n=t.getAttribute("method")||Jh,i=rg(t.getAttribute("enctype"))||ed,s=new FormData(t)}else if(Cj(t)||Aj(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Li(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Jh,i=rg(t.getAttribute("formenctype"))||rg(a.getAttribute("enctype"))||ed,s=new FormData(a,t),!kj()){let{name:c,type:d,value:u}=t;if(d==="image"){let h=c?`${c}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else c&&s.append(c,u)}}else{if(Ip(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Jh,r=null,i=ed,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function jx(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function Oj(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Nj(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Lj(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await Oj(s,n);return o.links?o.links():[]}return[]}));return Uj(r.flat(1).filter(Nj).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Y1(t,e,n,r,i,s){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>n[c].pathname!==l.pathname||n[c].route.path?.endsWith("*")&&n[c].params["*"]!==l.params["*"];return s==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let u=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof u=="boolean")return u}return!0}):[]}function Bj(t,e,{includeHydrateFallback:n}={}){return Fj(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Fj(t){return[...new Set(t)]}function $j(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Uj(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify($j(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function Hj(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Li(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function fI(){let t=b.useContext(cl);return jx(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function jj(){let t=b.useContext(Rp);return jx(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Gx=b.createContext(void 0);Gx.displayName="FrameworkContext";function pI(){let t=b.useContext(Gx);return jx(t,"You must render this element inside a <HydratedRouter> element"),t}function Gj(t,e){let n=b.useContext(Gx),[r,i]=b.useState(!1),[s,o]=b.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:u}=e,h=b.useRef(null);b.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let m=g=>{g.forEach(_=>{o(_.isIntersecting)})},y=new IntersectionObserver(m,{threshold:.5});return h.current&&y.observe(h.current),()=>{y.disconnect()}}},[t]),b.useEffect(()=>{if(r){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[r]);let f=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,h,{}]:[s,h,{onFocus:Il(a,f),onBlur:Il(l,p),onMouseEnter:Il(c,f),onMouseLeave:Il(d,p),onTouchStart:Il(u,f)}]:[!1,h,{}]}function Il(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function zj({page:t,...e}){let{router:n}=fI(),r=b.useMemo(()=>nI(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?b.createElement(Vj,{page:t,matches:r,...e}):null}function Wj(t){let{manifest:e,routeModules:n}=pI(),[r,i]=b.useState([]);return b.useEffect(()=>{let s=!1;return Lj(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function Vj({page:t,matches:e,...n}){let r=go(),{manifest:i,routeModules:s}=pI(),{basename:o}=fI(),{loaderData:a,matches:l}=jj(),c=b.useMemo(()=>Y1(t,e,l,i,r,"data"),[t,e,l,i,r]),d=b.useMemo(()=>Y1(t,e,l,i,r,"assets"),[t,e,l,i,r]),u=b.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let p=new Set,m=!1;if(e.forEach(g=>{let _=i.routes[g.route.id];!_||!_.hasLoader||(!c.some(v=>v.route.id===g.route.id)&&g.route.id in a&&s[g.route.id]?.shouldRevalidate||_.hasClientLoader?m=!0:p.add(g.route.id))}),p.size===0)return[];let y=Hj(t,o);return m&&p.size>0&&y.searchParams.set("_routes",e.filter(g=>p.has(g.route.id)).map(g=>g.route.id).join(",")),[y.pathname+y.search]},[o,a,r,i,c,e,t,s]),h=b.useMemo(()=>Bj(d,i),[d,i]),f=Wj(d);return b.createElement(b.Fragment,null,u.map(p=>b.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),h.map(p=>b.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),f.map(({key:p,link:m})=>b.createElement("link",{key:p,...m})))}function Xj(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var mI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mI&&(window.__reactRouterVersion="7.4.0")}catch{}function Yj({basename:t,children:e,window:n}){let r=b.useRef();r.current==null&&(r.current=LH({window:n,v5Compat:!0}));let i=r.current,[s,o]=b.useState({action:i.action,location:i.location}),a=b.useCallback(l=>{b.startTransition(()=>o(l))},[o]);return b.useLayoutEffect(()=>i.listen(a),[i,a]),b.createElement(Ej,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var gI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yI=b.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:u,...h},f){let{basename:p}=b.useContext(di),m=typeof c=="string"&&gI.test(c),y,g=!1;if(typeof c=="string"&&m&&(y=c,mI))try{let A=new URL(window.location.href),P=c.startsWith("//")?new URL(A.protocol+c):new URL(c),O=Li(P.pathname,p);P.origin===A.origin&&O!=null?c=O+P.search+P.hash:g=!0}catch{kr(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=lj(c,{relative:i}),[v,w,S]=Gj(r,h),E=Zj(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:u});function T(A){e&&e(A),A.defaultPrevented||E(A)}let C=b.createElement("a",{...h,...S,href:y||_,onClick:g||s?e:T,ref:Xj(f,w),target:l,"data-discover":!m&&n==="render"?"true":void 0});return v&&!m?b.createElement(b.Fragment,null,C,b.createElement(zj,{page:_})):C});yI.displayName="Link";var Yl=b.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...c},d){let u=wu(o,{relative:c.relative}),h=go(),f=b.useContext(Rp),{navigator:p,basename:m}=b.useContext(di),y=f!=null&&n6(u)&&a===!0,g=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,_=h.pathname,v=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;n||(_=_.toLowerCase(),v=v?v.toLowerCase():null,g=g.toLowerCase()),v&&m&&(v=Li(v,m)||v);const w=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let S=_===g||!i&&_.startsWith(g)&&_.charAt(w)==="/",E=v!=null&&(v===g||!i&&v.startsWith(g)&&v.charAt(g.length)==="/"),T={isActive:S,isPending:E,isTransitioning:y},C=S?e:void 0,A;typeof r=="function"?A=r(T):A=[r,S?"active":null,E?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let P=typeof s=="function"?s(T):s;return b.createElement(yI,{...c,"aria-current":C,className:A,ref:d,style:P,to:o,viewTransition:a},typeof l=="function"?l(T):l)});Yl.displayName="NavLink";var Kj=b.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=Jh,action:a,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:u,...h},f)=>{let p=e6(),m=t6(a,{relative:c}),y=o.toLowerCase()==="get"?"get":"post",g=typeof a=="string"&&gI.test(a),_=v=>{if(l&&l(v),v.defaultPrevented)return;v.preventDefault();let w=v.nativeEvent.submitter,S=w?.getAttribute("formmethod")||o;p(w||v.currentTarget,{fetcherKey:e,method:S,navigate:n,replace:i,state:s,relative:c,preventScrollReset:d,viewTransition:u})};return b.createElement("form",{ref:f,method:y,action:m,onSubmit:r?l:_,...h,"data-discover":!g&&t==="render"?"true":void 0})});Kj.displayName="Form";function qj(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vI(t){let e=b.useContext(cl);return Je(e,qj(t)),e}function Zj(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=cj(),l=go(),c=wu(t,{relative:s});return b.useCallback(d=>{if(Ij(d,e)){d.preventDefault();let u=n!==void 0?n:$c(l)===$c(c);a(t,{replace:u,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,c,n,r,e,t,i,s,o])}var Qj=0,Jj=()=>`__${String(++Qj)}__`;function e6(){let{router:t}=vI("useSubmit"),{basename:e}=b.useContext(di),n=xj();return b.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=Dj(r,e);if(i.navigate===!1){let d=i.fetcherKey||Jj();await t.fetch(d,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function t6(t,{relative:e}={}){let{basename:n}=b.useContext(di),r=b.useContext(ji);Je(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...wu(t||".",{relative:e})},o=go();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(u=>u).forEach(u=>a.append("index",u));let d=a.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Ci([n,s.pathname])),$c(s)}function n6(t,e={}){let n=b.useContext(lI);Je(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=vI("useViewTransitionState"),i=wu(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Li(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Li(n.nextLocation.pathname,r)||n.nextLocation.pathname;return tf(i.pathname,o)!=null||tf(i.pathname,s)!=null}new TextEncoder;const r6="_control_fcg8b_1",lh={control:r6},i6="/Lentokonepeli/assets/dogfight_web_bg-a8etQz8U.wasm",s6=async(t={},e)=>{let n;if(e.startsWith("data:")){const r=e.replace(/^data:.*?base64,/,"");let i;if(typeof Buffer=="function"&&typeof Buffer.from=="function")i=Buffer.from(r,"base64");else if(typeof atob=="function"){const s=atob(r);i=new Uint8Array(s.length);for(let o=0;o<s.length;o++)i[o]=s.charCodeAt(o)}else throw new Error("Cannot decode base64-encoded data URL");n=await WebAssembly.instantiate(i,t)}else{const r=await fetch(e),i=r.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&i.startsWith("application/wasm"))n=await WebAssembly.instantiateStreaming(r,t);else{const s=await r.arrayBuffer();n=await WebAssembly.instantiate(s,t)}}return n.instance.exports};let ae;function o6(t){ae=t}const a6=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let _I=new a6("utf-8",{ignoreBOM:!0,fatal:!0});_I.decode();let ch=null;function ya(){return(ch===null||ch.byteLength===0)&&(ch=new Uint8Array(ae.memory.buffer)),ch}function zr(t,e){return t=t>>>0,_I.decode(ya().subarray(t,t+e))}let Sn=0;const l6=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let td=new l6("utf-8");const c6=typeof td.encodeInto=="function"?function(t,e){return td.encodeInto(t,e)}:function(t,e){const n=td.encode(t);return e.set(n),{read:t.length,written:n.length}};function $o(t,e,n){if(n===void 0){const a=td.encode(t),l=e(a.length,1)>>>0;return ya().subarray(l,l+a.length).set(a),Sn=a.length,l}let r=t.length,i=e(r,1)>>>0;const s=ya();let o=0;for(;o<r;o++){const a=t.charCodeAt(o);if(a>127)break;s[i+o]=a}if(o!==r){o!==0&&(t=t.slice(o)),i=n(i,r,r=o+t.length*3,1)>>>0;const a=ya().subarray(i+o,i+r),l=c6(t,a);o+=l.written,i=n(i,r,o,1)>>>0}return Sn=o,i}let Do=null;function K1(){return(Do===null||Do.buffer.detached===!0||Do.buffer.detached===void 0&&Do.buffer!==ae.memory.buffer)&&(Do=new DataView(ae.memory.buffer)),Do}function uh(t,e){const n=e(t.length*1,1)>>>0;return ya().set(t,n/1),Sn=t.length,n}function hh(t,e){return t=t>>>0,ya().subarray(t/1,t/1+e)}const q1=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>ae.__wbg_dogfightweb_free(t>>>0,1));class Uc{static __wrap(e){e=e>>>0;const n=Object.create(Uc.prototype);return n.__wbg_ptr=e,q1.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,q1.unregister(this),e}free(){const e=this.__destroy_into_raw();ae.__wbg_dogfightweb_free(e,0)}static new(){const e=ae.dogfightweb_new();return Uc.__wrap(e)}load_level(e){const n=$o(e,ae.__wbindgen_malloc,ae.__wbindgen_realloc),r=Sn;ae.dogfightweb_load_level(this.__wbg_ptr,n,r)}load_replay(e){const n=uh(e,ae.__wbindgen_malloc),r=Sn;ae.dogfightweb_load_replay(this.__wbg_ptr,n,r)}init(){ae.dogfightweb_init(this.__wbg_ptr)}get_build_version(){let e,n;try{const r=ae.dogfightweb_get_build_version(this.__wbg_ptr);return e=r[0],n=r[1],zr(r[0],r[1])}finally{ae.__wbindgen_free(e,n,1)}}get_commit(){let e,n;try{const r=ae.dogfightweb_get_commit(this.__wbg_ptr);return e=r[0],n=r[1],zr(r[0],r[1])}finally{ae.__wbindgen_free(e,n,1)}}get_replay_summary(e){let n,r;try{const i=uh(e,ae.__wbindgen_malloc),s=Sn,o=ae.dogfightweb_get_replay_summary(this.__wbg_ptr,i,s);return n=o[0],r=o[1],zr(o[0],o[1])}finally{ae.__wbindgen_free(n,r,1)}}parse_level(e){let n,r;try{const i=$o(e,ae.__wbindgen_malloc,ae.__wbindgen_realloc),s=Sn,o=ae.dogfightweb_parse_level(this.__wbg_ptr,i,s);return n=o[0],r=o[1],zr(o[0],o[1])}finally{ae.__wbindgen_free(n,r,1)}}get_replay_file(){const e=ae.dogfightweb_get_replay_file(this.__wbg_ptr);var n=hh(e[0],e[1]).slice();return ae.__wbindgen_free(e[0],e[1]*1,1),n}is_valid_command(e){const n=$o(e,ae.__wbindgen_malloc,ae.__wbindgen_realloc),r=Sn;return ae.dogfightweb_is_valid_command(this.__wbg_ptr,n,r)!==0}player_command_to_binary(e){const n=$o(e,ae.__wbindgen_malloc,ae.__wbindgen_realloc),r=Sn,i=ae.dogfightweb_player_command_to_binary(this.__wbg_ptr,n,r);var s=hh(i[0],i[1]).slice();return ae.__wbindgen_free(i[0],i[1]*1,1),s}player_command_from_binary(e){let n,r;try{const i=uh(e,ae.__wbindgen_malloc),s=Sn,o=ae.dogfightweb_player_command_from_binary(this.__wbg_ptr,i,s);return n=o[0],r=o[1],zr(o[0],o[1])}finally{ae.__wbindgen_free(n,r,1)}}tick(e){const n=$o(e,ae.__wbindgen_malloc,ae.__wbindgen_realloc),r=Sn;ae.dogfightweb_tick(this.__wbg_ptr,n,r)}load_replay_until(e){ae.dogfightweb_load_replay_until(this.__wbg_ptr,e)}tick_replay(){ae.dogfightweb_tick_replay(this.__wbg_ptr)}flush_changed_state(){const e=ae.dogfightweb_flush_changed_state(this.__wbg_ptr);var n=hh(e[0],e[1]).slice();return ae.__wbindgen_free(e[0],e[1]*1,1),n}get_full_state(){const e=ae.dogfightweb_get_full_state(this.__wbg_ptr);var n=hh(e[0],e[1]).slice();return ae.__wbindgen_free(e[0],e[1]*1,1),n}debug(){let e,n;try{const r=ae.dogfightweb_debug(this.__wbg_ptr);return e=r[0],n=r[1],zr(r[0],r[1])}finally{ae.__wbindgen_free(e,n,1)}}game_events_from_binary(e){let n,r;try{const i=uh(e,ae.__wbindgen_malloc),s=Sn,o=ae.dogfightweb_game_events_from_binary(this.__wbg_ptr,i,s);return n=o[0],r=o[1],zr(o[0],o[1])}finally{ae.__wbindgen_free(n,r,1)}}}function u6(t,e){let n,r;try{n=t,r=e,console.error(zr(t,e))}finally{ae.__wbindgen_free(n,r,1)}}function h6(t){console.log(t)}function d6(){return new Error}function f6(t,e){const n=e.stack,r=$o(n,ae.__wbindgen_malloc,ae.__wbindgen_realloc),i=Sn;K1().setInt32(t+4*1,i,!0),K1().setInt32(t+4*0,r,!0)}function p6(){const t=ae.__wbindgen_export_3,e=t.grow(4);t.set(0,void 0),t.set(e+0,void 0),t.set(e+1,null),t.set(e+2,!0),t.set(e+3,!1)}function m6(t,e){return zr(t,e)}function g6(t,e){throw new Error(zr(t,e))}URL=globalThis.URL;const $e=await s6({"./dogfight_web_bg.js":{__wbg_new_8a6f238a6ece86ea:d6,__wbg_stack_0ed75d68575b0f3c:f6,__wbg_error_7534b8e9a36f1ab4:u6,__wbindgen_string_new:m6,__wbg_log_c222819a41e063d3:h6,__wbindgen_throw:g6,__wbindgen_init_externref_table:p6}},i6),y6=$e.memory,v6=$e.__wbg_dogfightweb_free,_6=$e.dogfightweb_new,x6=$e.dogfightweb_load_level,b6=$e.dogfightweb_load_replay,w6=$e.dogfightweb_init,S6=$e.dogfightweb_get_build_version,E6=$e.dogfightweb_get_commit,T6=$e.dogfightweb_get_replay_summary,C6=$e.dogfightweb_parse_level,P6=$e.dogfightweb_get_replay_file,A6=$e.dogfightweb_is_valid_command,R6=$e.dogfightweb_player_command_to_binary,I6=$e.dogfightweb_player_command_from_binary,k6=$e.dogfightweb_tick,M6=$e.dogfightweb_load_replay_until,D6=$e.dogfightweb_tick_replay,O6=$e.dogfightweb_flush_changed_state,N6=$e.dogfightweb_get_full_state,L6=$e.dogfightweb_debug,B6=$e.dogfightweb_game_events_from_binary,F6=$e.__wbindgen_free,$6=$e.__wbindgen_malloc,U6=$e.__wbindgen_realloc,H6=$e.__wbindgen_export_3,xI=$e.__wbindgen_start,j6=Object.freeze(Object.defineProperty({__proto__:null,__wbg_dogfightweb_free:v6,__wbindgen_export_3:H6,__wbindgen_free:F6,__wbindgen_malloc:$6,__wbindgen_realloc:U6,__wbindgen_start:xI,dogfightweb_debug:L6,dogfightweb_flush_changed_state:O6,dogfightweb_game_events_from_binary:B6,dogfightweb_get_build_version:S6,dogfightweb_get_commit:E6,dogfightweb_get_full_state:N6,dogfightweb_get_replay_file:P6,dogfightweb_get_replay_summary:T6,dogfightweb_init:w6,dogfightweb_is_valid_command:A6,dogfightweb_load_level:x6,dogfightweb_load_replay:b6,dogfightweb_load_replay_until:M6,dogfightweb_new:_6,dogfightweb_parse_level:C6,dogfightweb_player_command_from_binary:I6,dogfightweb_player_command_to_binary:R6,dogfightweb_tick:k6,dogfightweb_tick_replay:D6,memory:y6},Symbol.toStringTag,{value:"Module"}));o6(j6);xI();var yo=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(yo||{}),bI=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(bI||{}),Ev=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(Ev||{}),he=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(he||{}),Kr=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(Kr||{}),V=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(V||{}),va=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(va||{}),le=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(le||{}),Tv=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(Tv||{}),qr=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(qr||{}),ds=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(ds||{}),li=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(li||{}),Or=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(Or||{}),Vr=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(Vr||{}),zx=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(zx||{}),Wn=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(Wn||{}),ft=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(ft||{}),ct=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(ct||{}),ni=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(ni||{});const G6={createCanvas:(t,e)=>{const n=document.createElement("canvas");return n.width=t,n.height=e,n},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},Y={ADAPTER:G6,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var ig=/iPhone/i,Z1=/iPod/i,Q1=/iPad/i,J1=/\biOS-universal(?:.+)Mac\b/i,sg=/\bAndroid(?:.+)Mobile\b/i,eS=/Android/i,Oo=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,dh=/Silk/i,pi=/Windows Phone/i,tS=/\bWindows(?:.+)ARM\b/i,nS=/BlackBerry/i,rS=/BB10/i,iS=/Opera Mini/i,sS=/\b(CriOS|Chrome)(?:.+)Mobile/i,oS=/Mobile(?:.+)Firefox\b/i,aS=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function z6(t){return function(e){return e.test(t)}}function lS(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var n=e.userAgent,r=n.split("[FBAN");typeof r[1]<"u"&&(n=r[0]),r=n.split("Twitter"),typeof r[1]<"u"&&(n=r[0]);var i=z6(n),s={apple:{phone:i(ig)&&!i(pi),ipod:i(Z1),tablet:!i(ig)&&(i(Q1)||aS(e))&&!i(pi),universal:i(J1),device:(i(ig)||i(Z1)||i(Q1)||i(J1)||aS(e))&&!i(pi)},amazon:{phone:i(Oo),tablet:!i(Oo)&&i(dh),device:i(Oo)||i(dh)},android:{phone:!i(pi)&&i(Oo)||!i(pi)&&i(sg),tablet:!i(pi)&&!i(Oo)&&!i(sg)&&(i(dh)||i(eS)),device:!i(pi)&&(i(Oo)||i(dh)||i(sg)||i(eS))||i(/\bokhttp\b/i)},windows:{phone:i(pi),tablet:i(tS),device:i(pi)||i(tS)},other:{blackberry:i(nS),blackberry10:i(rS),opera:i(iS),firefox:i(oS),chrome:i(sS),device:i(nS)||i(rS)||i(iS)||i(oS)||i(sS)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const W6=lS.default??lS,Si=W6(globalThis.navigator);Y.RETINA_PREFIX=/@([0-9\.]+)x/;Y.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var wI={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function s(l,c,d,u,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var f=new i(d,u||l,h),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],d,u;if(this._eventsCount===0)return c;for(u in d=this._events)e.call(d,u)&&c.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},a.prototype.listeners=function(c){var d=n?n+c:c,u=this._events[d];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,f=u.length,p=new Array(f);h<f;h++)p[h]=u[h].fn;return p},a.prototype.listenerCount=function(c){var d=n?n+c:c,u=this._events[d];return u?u.fn?1:u.length:0},a.prototype.emit=function(c,d,u,h,f,p){var m=n?n+c:c;if(!this._events[m])return!1;var y=this._events[m],g=arguments.length,_,v;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),g){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,u),!0;case 4:return y.fn.call(y.context,d,u,h),!0;case 5:return y.fn.call(y.context,d,u,h,f),!0;case 6:return y.fn.call(y.context,d,u,h,f,p),!0}for(v=1,_=new Array(g-1);v<g;v++)_[v-1]=arguments[v];y.fn.apply(y.context,_)}else{var w=y.length,S;for(v=0;v<w;v++)switch(y[v].once&&this.removeListener(c,y[v].fn,void 0,!0),g){case 1:y[v].fn.call(y[v].context);break;case 2:y[v].fn.call(y[v].context,d);break;case 3:y[v].fn.call(y[v].context,d,u);break;case 4:y[v].fn.call(y[v].context,d,u,h);break;default:if(!_)for(S=1,_=new Array(g-1);S<g;S++)_[S-1]=arguments[S];y[v].fn.apply(y[v].context,_)}}return!0},a.prototype.on=function(c,d,u){return s(this,c,d,u,!1)},a.prototype.once=function(c,d,u){return s(this,c,d,u,!0)},a.prototype.removeListener=function(c,d,u,h){var f=n?n+c:c;if(!this._events[f])return this;if(!d)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===d&&(!h||p.once)&&(!u||p.context===u)&&o(this,f);else{for(var m=0,y=[],g=p.length;m<g;m++)(p[m].fn!==d||h&&!p[m].once||u&&p[m].context!==u)&&y.push(p[m]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var d;return c?(d=n?n+c:c,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(wI);var V6=wI.exports;const Su=Va(V6);var Wx={exports:{}};Wx.exports=kp;Wx.exports.default=kp;function kp(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,s=SI(t,0,i,n,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,c,d,u,h,f;if(r&&(s=Z6(t,e,s,n)),t.length>80*n){a=c=t[0],l=d=t[1];for(var p=n;p<i;p+=n)u=t[p],h=t[p+1],u<a&&(a=u),h<l&&(l=h),u>c&&(c=u),h>d&&(d=h);f=Math.max(c-a,d-l),f=f!==0?32767/f:0}return Hc(s,o,n,a,l,f,0),o}function SI(t,e,n,r,i){var s,o;if(i===Av(t,e,n,r)>0)for(s=e;s<n;s+=r)o=cS(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=cS(s,t[s],t[s+1],o);return o&&Mp(o,o.next)&&(Gc(o),o=o.next),o}function io(t,e){if(!t)return t;e||(e=t);var n=t,r;do if(r=!1,!n.steiner&&(Mp(n,n.next)||qe(n.prev,n,n.next)===0)){if(Gc(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Hc(t,e,n,r,i,s,o){if(t){!o&&s&&n8(t,r,i,s);for(var a=t,l,c;t.prev!==t.next;){if(l=t.prev,c=t.next,s?Y6(t,r,i,s):X6(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),Gc(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=K6(io(t),e,n),Hc(t,e,n,r,i,s,2)):o===2&&q6(t,e,n,r,i,s):Hc(io(t),e,n,r,i,s,1);break}}}}function X6(t){var e=t.prev,n=t,r=t.next;if(qe(e,n,r)>=0)return!1;for(var i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,d=i<s?i<o?i:o:s<o?s:o,u=a<l?a<c?a:c:l<c?l:c,h=i>s?i>o?i:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c,p=r.next;p!==e;){if(p.x>=d&&p.x<=h&&p.y>=u&&p.y<=f&&ia(i,a,s,l,o,c,p.x,p.y)&&qe(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Y6(t,e,n,r){var i=t.prev,s=t,o=t.next;if(qe(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,c=o.x,d=i.y,u=s.y,h=o.y,f=a<l?a<c?a:c:l<c?l:c,p=d<u?d<h?d:h:u<h?u:h,m=a>l?a>c?a:c:l>c?l:c,y=d>u?d>h?d:h:u>h?u:h,g=Cv(f,p,e,n,r),_=Cv(m,y,e,n,r),v=t.prevZ,w=t.nextZ;v&&v.z>=g&&w&&w.z<=_;){if(v.x>=f&&v.x<=m&&v.y>=p&&v.y<=y&&v!==i&&v!==o&&ia(a,d,l,u,c,h,v.x,v.y)&&qe(v.prev,v,v.next)>=0||(v=v.prevZ,w.x>=f&&w.x<=m&&w.y>=p&&w.y<=y&&w!==i&&w!==o&&ia(a,d,l,u,c,h,w.x,w.y)&&qe(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;v&&v.z>=g;){if(v.x>=f&&v.x<=m&&v.y>=p&&v.y<=y&&v!==i&&v!==o&&ia(a,d,l,u,c,h,v.x,v.y)&&qe(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;w&&w.z<=_;){if(w.x>=f&&w.x<=m&&w.y>=p&&w.y<=y&&w!==i&&w!==o&&ia(a,d,l,u,c,h,w.x,w.y)&&qe(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function K6(t,e,n){var r=t;do{var i=r.prev,s=r.next.next;!Mp(i,s)&&EI(i,r,r.next,s)&&jc(i,s)&&jc(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),Gc(r),Gc(r.next),r=t=s),r=r.next}while(r!==t);return io(r)}function q6(t,e,n,r,i,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&s8(o,a)){var l=TI(o,a);o=io(o,o.next),l=io(l,l.next),Hc(o,e,n,r,i,s,0),Hc(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function Z6(t,e,n,r){var i=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=SI(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(i8(c));for(i.sort(Q6),s=0;s<i.length;s++)n=J6(i[s],n);return n}function Q6(t,e){return t.x-e.x}function J6(t,e){var n=e8(t,e);if(!n)return e;var r=TI(n,t);return io(r,r.next),io(n,n.next)}function e8(t,e){var n=e,r=t.x,i=t.y,s=-1/0,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s&&(s=a,o=n.x<n.next.x?n:n.next,a===r))return o}n=n.next}while(n!==e);if(!o)return null;var l=o,c=o.x,d=o.y,u=1/0,h;n=o;do r>=n.x&&n.x>=c&&r!==n.x&&ia(i<d?r:s,i,c,d,i<d?s:r,i,n.x,n.y)&&(h=Math.abs(i-n.y)/(r-n.x),jc(n,t)&&(h<u||h===u&&(n.x>o.x||n.x===o.x&&t8(o,n)))&&(o=n,u=h)),n=n.next;while(n!==l);return o}function t8(t,e){return qe(t.prev,t,e.prev)<0&&qe(e.next,t,t.next)<0}function n8(t,e,n,r){var i=t;do i.z===0&&(i.z=Cv(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,r8(i)}function r8(t){var e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function Cv(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function i8(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function ia(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function s8(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!o8(t,e)&&(jc(t,e)&&jc(e,t)&&a8(t,e)&&(qe(t.prev,t,e.prev)||qe(t,e.prev,e))||Mp(t,e)&&qe(t.prev,t,t.next)>0&&qe(e.prev,e,e.next)>0)}function qe(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Mp(t,e){return t.x===e.x&&t.y===e.y}function EI(t,e,n,r){var i=ph(qe(t,e,n)),s=ph(qe(t,e,r)),o=ph(qe(n,r,t)),a=ph(qe(n,r,e));return!!(i!==s&&o!==a||i===0&&fh(t,n,e)||s===0&&fh(t,r,e)||o===0&&fh(n,t,r)||a===0&&fh(n,e,r))}function fh(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function ph(t){return t>0?1:t<0?-1:0}function o8(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&EI(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function jc(t,e){return qe(t.prev,t,t.next)<0?qe(t,e,t.next)>=0&&qe(t,t.prev,e)>=0:qe(t,e,t.prev)<0||qe(t,t.next,e)<0}function a8(t,e){var n=t,r=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function TI(t,e){var n=new Pv(t.i,t.x,t.y),r=new Pv(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function cS(t,e,n,r){var i=new Pv(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Gc(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Pv(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}kp.deviation=function(t,e,n,r){var i=e&&e.length,s=i?e[0]*n:t.length,o=Math.abs(Av(t,0,s,n));if(i)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,d=a<l-1?e[a+1]*n:t.length;o-=Math.abs(Av(t,c,d,n))}var u=0;for(a=0;a<r.length;a+=3){var h=r[a]*n,f=r[a+1]*n,p=r[a+2]*n;u+=Math.abs((t[h]-t[p])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[p+1]-t[h+1]))}return o===0&&u===0?0:Math.abs((u-o)/o)};function Av(t,e,n,r){for(var i=0,s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}kp.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[i][s][o]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};var l8=Wx.exports;const c8=Va(l8);var nf={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */nf.exports;(function(t,e){(function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,s=typeof Qt=="object"&&Qt;(s.global===s||s.window===s||s.self===s)&&(n=s);var o,a=2147483647,l=36,c=1,d=26,u=38,h=700,f=72,p=128,m="-",y=/^xn--/,g=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=l-c,S=Math.floor,E=String.fromCharCode,T;function C(D){throw new RangeError(v[D])}function A(D,L){for(var j=D.length,ee=[];j--;)ee[j]=L(D[j]);return ee}function P(D,L){var j=D.split("@"),ee="";j.length>1&&(ee=j[0]+"@",D=j[1]),D=D.replace(_,".");var ie=D.split("."),ce=A(ie,L).join(".");return ee+ce}function O(D){for(var L=[],j=0,ee=D.length,ie,ce;j<ee;)ie=D.charCodeAt(j++),ie>=55296&&ie<=56319&&j<ee?(ce=D.charCodeAt(j++),(ce&64512)==56320?L.push(((ie&1023)<<10)+(ce&1023)+65536):(L.push(ie),j--)):L.push(ie);return L}function U(D){return A(D,function(L){var j="";return L>65535&&(L-=65536,j+=E(L>>>10&1023|55296),L=56320|L&1023),j+=E(L),j}).join("")}function k(D){return D-48<10?D-22:D-65<26?D-65:D-97<26?D-97:l}function I(D,L){return D+22+75*(D<26)-((L!=0)<<5)}function F(D,L,j){var ee=0;for(D=j?S(D/h):D>>1,D+=S(D/L);D>w*d>>1;ee+=l)D=S(D/w);return S(ee+(w+1)*D/(D+u))}function N(D){var L=[],j=D.length,ee,ie=0,ce=p,re=f,oe,_e,xe,me,ge,Re,Ie,ke,Se;for(oe=D.lastIndexOf(m),oe<0&&(oe=0),_e=0;_e<oe;++_e)D.charCodeAt(_e)>=128&&C("not-basic"),L.push(D.charCodeAt(_e));for(xe=oe>0?oe+1:0;xe<j;){for(me=ie,ge=1,Re=l;xe>=j&&C("invalid-input"),Ie=k(D.charCodeAt(xe++)),(Ie>=l||Ie>S((a-ie)/ge))&&C("overflow"),ie+=Ie*ge,ke=Re<=re?c:Re>=re+d?d:Re-re,!(Ie<ke);Re+=l)Se=l-ke,ge>S(a/Se)&&C("overflow"),ge*=Se;ee=L.length+1,re=F(ie-me,ee,me==0),S(ie/ee)>a-ce&&C("overflow"),ce+=S(ie/ee),ie%=ee,L.splice(ie++,0,ce)}return U(L)}function B(D){var L,j,ee,ie,ce,re,oe,_e,xe,me,ge,Re=[],Ie,ke,Se,De;for(D=O(D),Ie=D.length,L=p,j=0,ce=f,re=0;re<Ie;++re)ge=D[re],ge<128&&Re.push(E(ge));for(ee=ie=Re.length,ie&&Re.push(m);ee<Ie;){for(oe=a,re=0;re<Ie;++re)ge=D[re],ge>=L&&ge<oe&&(oe=ge);for(ke=ee+1,oe-L>S((a-j)/ke)&&C("overflow"),j+=(oe-L)*ke,L=oe,re=0;re<Ie;++re)if(ge=D[re],ge<L&&++j>a&&C("overflow"),ge==L){for(_e=j,xe=l;me=xe<=ce?c:xe>=ce+d?d:xe-ce,!(_e<me);xe+=l)De=_e-me,Se=l-me,Re.push(E(I(me+De%Se,0))),_e=S(De/Se);Re.push(E(I(_e,0))),ce=F(j,ke,ee==ie),j=0,++ee}++j,++L}return Re.join("")}function R(D){return P(D,function(L){return y.test(L)?N(L.slice(4).toLowerCase()):L})}function M(D){return P(D,function(L){return g.test(L)?"xn--"+B(L):L})}if(o={version:"1.4.1",ucs2:{decode:O,encode:U},decode:N,encode:B,toASCII:M,toUnicode:R},r&&i)if(t.exports==r)i.exports=o;else for(T in o)o.hasOwnProperty(T)&&(r[T]=o[T]);else n.punycode=o})(Qt)})(nf,nf.exports);var u8=nf.exports,ul=TypeError;const h8={},d8=Object.freeze(Object.defineProperty({__proto__:null,default:h8},Symbol.toStringTag,{value:"Module"})),f8=vM(d8);var Vx=typeof Map=="function"&&Map.prototype,og=Object.getOwnPropertyDescriptor&&Vx?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,rf=Vx&&og&&typeof og.get=="function"?og.get:null,uS=Vx&&Map.prototype.forEach,Xx=typeof Set=="function"&&Set.prototype,ag=Object.getOwnPropertyDescriptor&&Xx?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,sf=Xx&&ag&&typeof ag.get=="function"?ag.get:null,hS=Xx&&Set.prototype.forEach,p8=typeof WeakMap=="function"&&WeakMap.prototype,fc=p8?WeakMap.prototype.has:null,m8=typeof WeakSet=="function"&&WeakSet.prototype,pc=m8?WeakSet.prototype.has:null,g8=typeof WeakRef=="function"&&WeakRef.prototype,dS=g8?WeakRef.prototype.deref:null,y8=Boolean.prototype.valueOf,v8=Object.prototype.toString,_8=Function.prototype.toString,x8=String.prototype.match,Yx=String.prototype.slice,ts=String.prototype.replace,b8=String.prototype.toUpperCase,fS=String.prototype.toLowerCase,CI=RegExp.prototype.test,pS=Array.prototype.concat,Xr=Array.prototype.join,w8=Array.prototype.slice,mS=Math.floor,Rv=typeof BigInt=="function"?BigInt.prototype.valueOf:null,lg=Object.getOwnPropertySymbols,Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ha=typeof Symbol=="function"&&typeof Symbol.iterator=="object",mc=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ha||!0)?Symbol.toStringTag:null,PI=Object.prototype.propertyIsEnumerable,gS=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function yS(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||CI.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var r=t<0?-mS(-t):mS(t);if(r!==t){var i=String(r),s=Yx.call(e,i.length+1);return ts.call(i,n,"$&_")+"."+ts.call(ts.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ts.call(e,n,"$&_")}var kv=f8,vS=kv.custom,_S=II(vS)?vS:null,AI={__proto__:null,double:'"',single:"'"},S8={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},Dp=function t(e,n,r,i){var s=n||{};if(vi(s,"quoteStyle")&&!vi(AI,s.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(vi(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=vi(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(vi(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(vi(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return MI(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?yS(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?yS(e,c):c}var d=typeof s.depth>"u"?5:s.depth;if(typeof r>"u"&&(r=0),r>=d&&d>0&&typeof e=="object")return Mv(e)?"[Array]":"[Object]";var u=H8(s,r);if(typeof i>"u")i=[];else if(kI(i,e)>=0)return"[Circular]";function h(k,I,F){if(I&&(i=w8.call(i),i.push(I)),F){var N={depth:s.depth};return vi(s,"quoteStyle")&&(N.quoteStyle=s.quoteStyle),t(k,N,r+1,i)}return t(k,s,r+1,i)}if(typeof e=="function"&&!xS(e)){var f=M8(e),p=mh(e,h);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+Xr.call(p,", ")+" }":"")}if(II(e)){var m=Ha?ts.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Iv.call(e);return typeof e=="object"&&!Ha?kl(m):m}if(F8(e)){for(var y="<"+fS.call(String(e.nodeName)),g=e.attributes||[],_=0;_<g.length;_++)y+=" "+g[_].name+"="+RI(E8(g[_].value),"double",s);return y+=">",e.childNodes&&e.childNodes.length&&(y+="..."),y+="</"+fS.call(String(e.nodeName))+">",y}if(Mv(e)){if(e.length===0)return"[]";var v=mh(e,h);return u&&!U8(v)?"["+Dv(v,u)+"]":"[ "+Xr.call(v,", ")+" ]"}if(C8(e)){var w=mh(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!PI.call(e,"cause")?"{ ["+String(e)+"] "+Xr.call(pS.call("[cause]: "+h(e.cause),w),", ")+" }":w.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Xr.call(w,", ")+" }"}if(typeof e=="object"&&o){if(_S&&typeof e[_S]=="function"&&kv)return kv(e,{depth:d-r});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(D8(e)){var S=[];return uS&&uS.call(e,function(k,I){S.push(h(I,e,!0)+" => "+h(k,e))}),bS("Map",rf.call(e),S,u)}if(L8(e)){var E=[];return hS&&hS.call(e,function(k){E.push(h(k,e))}),bS("Set",sf.call(e),E,u)}if(O8(e))return cg("WeakMap");if(B8(e))return cg("WeakSet");if(N8(e))return cg("WeakRef");if(A8(e))return kl(h(Number(e)));if(I8(e))return kl(h(Rv.call(e)));if(R8(e))return kl(y8.call(e));if(P8(e))return kl(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof Qt<"u"&&e===Qt)return"{ [object globalThis] }";if(!T8(e)&&!xS(e)){var T=mh(e,h),C=gS?gS(e)===Object.prototype:e instanceof Object||e.constructor===Object,A=e instanceof Object?"":"null prototype",P=!C&&mc&&Object(e)===e&&mc in e?Yx.call(As(e),8,-1):A?"Object":"",O=C||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",U=O+(P||A?"["+Xr.call(pS.call([],P||[],A||[]),": ")+"] ":"");return T.length===0?U+"{}":u?U+"{"+Dv(T,u)+"}":U+"{ "+Xr.call(T,", ")+" }"}return String(e)};function RI(t,e,n){var r=n.quoteStyle||e,i=AI[r];return i+t+i}function E8(t){return ts.call(String(t),/"/g,"&quot;")}function vo(t){return!mc||!(typeof t=="object"&&(mc in t||typeof t[mc]<"u"))}function Mv(t){return As(t)==="[object Array]"&&vo(t)}function T8(t){return As(t)==="[object Date]"&&vo(t)}function xS(t){return As(t)==="[object RegExp]"&&vo(t)}function C8(t){return As(t)==="[object Error]"&&vo(t)}function P8(t){return As(t)==="[object String]"&&vo(t)}function A8(t){return As(t)==="[object Number]"&&vo(t)}function R8(t){return As(t)==="[object Boolean]"&&vo(t)}function II(t){if(Ha)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Iv)return!1;try{return Iv.call(t),!0}catch{}return!1}function I8(t){if(!t||typeof t!="object"||!Rv)return!1;try{return Rv.call(t),!0}catch{}return!1}var k8=Object.prototype.hasOwnProperty||function(t){return t in this};function vi(t,e){return k8.call(t,e)}function As(t){return v8.call(t)}function M8(t){if(t.name)return t.name;var e=x8.call(_8.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function kI(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function D8(t){if(!rf||!t||typeof t!="object")return!1;try{rf.call(t);try{sf.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function O8(t){if(!fc||!t||typeof t!="object")return!1;try{fc.call(t,fc);try{pc.call(t,pc)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function N8(t){if(!dS||!t||typeof t!="object")return!1;try{return dS.call(t),!0}catch{}return!1}function L8(t){if(!sf||!t||typeof t!="object")return!1;try{sf.call(t);try{rf.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function B8(t){if(!pc||!t||typeof t!="object")return!1;try{pc.call(t,pc);try{fc.call(t,fc)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function F8(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function MI(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return MI(Yx.call(t,0,e.maxStringLength),e)+r}var i=S8[e.quoteStyle||"single"];i.lastIndex=0;var s=ts.call(ts.call(t,i,"\\$1"),/[\x00-\x1f]/g,$8);return RI(s,"single",e)}function $8(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+b8.call(e.toString(16))}function kl(t){return"Object("+t+")"}function cg(t){return t+" { ? }"}function bS(t,e,n,r){var i=r?Dv(n,r):Xr.call(n,", ");return t+" ("+e+") {"+i+"}"}function U8(t){for(var e=0;e<t.length;e++)if(kI(t[e],`
`)>=0)return!1;return!0}function H8(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=Xr.call(Array(t.indent+1)," ");else return null;return{base:n,prev:Xr.call(Array(e+1),n)}}function Dv(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+Xr.call(t,","+n)+`
`+e.prev}function mh(t,e){var n=Mv(t),r=[];if(n){r.length=t.length;for(var i=0;i<t.length;i++)r[i]=vi(t,i)?e(t[i],t):""}var s=typeof lg=="function"?lg(t):[],o;if(Ha){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in t)vi(t,l)&&(n&&String(Number(l))===l&&l<t.length||Ha&&o["$"+l]instanceof Symbol||(CI.call(/[^\w$]/,l)?r.push(e(l,t)+": "+e(t[l],t)):r.push(l+": "+e(t[l],t))));if(typeof lg=="function")for(var c=0;c<s.length;c++)PI.call(t,s[c])&&r.push("["+e(s[c])+"]: "+e(t[s[c]],t));return r}var j8=Dp,G8=ul,Op=function(t,e,n){for(var r=t,i;(i=r.next)!=null;r=i)if(i.key===e)return r.next=i.next,n||(i.next=t.next,t.next=i),i},z8=function(t,e){if(t){var n=Op(t,e);return n&&n.value}},W8=function(t,e,n){var r=Op(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}},V8=function(t,e){return t?!!Op(t,e):!1},X8=function(t,e){if(t)return Op(t,e,!0)},Y8=function(){var e,n={assert:function(r){if(!n.has(r))throw new G8("Side channel does not contain "+j8(r))},delete:function(r){var i=e&&e.next,s=X8(e,r);return s&&i&&i===s&&(e=void 0),!!s},get:function(r){return z8(e,r)},has:function(r){return V8(e,r)},set:function(r,i){e||(e={next:void 0}),W8(e,r,i)}};return n},DI=Object,K8=Error,q8=EvalError,Z8=RangeError,Q8=ReferenceError,J8=SyntaxError,eG=URIError,tG=Math.abs,nG=Math.floor,rG=Math.max,iG=Math.min,sG=Math.pow,oG=Math.round,aG=Number.isNaN||function(e){return e!==e},lG=aG,cG=function(e){return lG(e)||e===0?e:e<0?-1:1},uG=Object.getOwnPropertyDescriptor,nd=uG;if(nd)try{nd([],"length")}catch{nd=null}var OI=nd,rd=Object.defineProperty||!1;if(rd)try{rd({},"a",{value:1})}catch{rd=!1}var hG=rd,ug,wS;function dG(){return wS||(wS=1,ug=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,n);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),ug}var hg,SS;function fG(){if(SS)return hg;SS=1;var t=typeof Symbol<"u"&&Symbol,e=dG();return hg=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},hg}var dg,ES;function NI(){return ES||(ES=1,dg=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),dg}var fg,TS;function LI(){if(TS)return fg;TS=1;var t=DI;return fg=t.getPrototypeOf||null,fg}var pg,CS;function pG(){if(CS)return pg;CS=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,n=Math.max,r="[object Function]",i=function(l,c){for(var d=[],u=0;u<l.length;u+=1)d[u]=l[u];for(var h=0;h<c.length;h+=1)d[h+l.length]=c[h];return d},s=function(l,c){for(var d=[],u=c,h=0;u<l.length;u+=1,h+=1)d[h]=l[u];return d},o=function(a,l){for(var c="",d=0;d<a.length;d+=1)c+=a[d],d+1<a.length&&(c+=l);return c};return pg=function(l){var c=this;if(typeof c!="function"||e.apply(c)!==r)throw new TypeError(t+c);for(var d=s(arguments,1),u,h=function(){if(this instanceof u){var g=c.apply(this,i(d,arguments));return Object(g)===g?g:this}return c.apply(l,i(d,arguments))},f=n(0,c.length-d.length),p=[],m=0;m<f;m++)p[m]="$"+m;if(u=Function("binder","return function ("+o(p,",")+"){ return binder.apply(this,arguments); }")(h),c.prototype){var y=function(){};y.prototype=c.prototype,u.prototype=new y,y.prototype=null}return u},pg}var mg,PS;function Np(){if(PS)return mg;PS=1;var t=pG();return mg=Function.prototype.bind||t,mg}var gg,AS;function Kx(){return AS||(AS=1,gg=Function.prototype.call),gg}var yg,RS;function BI(){return RS||(RS=1,yg=Function.prototype.apply),yg}var mG=typeof Reflect<"u"&&Reflect&&Reflect.apply,gG=Np(),yG=BI(),vG=Kx(),_G=mG,xG=_G||gG.call(vG,yG),bG=Np(),wG=ul,SG=Kx(),EG=xG,FI=function(e){if(e.length<1||typeof e[0]!="function")throw new wG("a function is required");return EG(bG,SG,e)},vg,IS;function TG(){if(IS)return vg;IS=1;var t=FI,e=OI,n;try{n=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var r=!!n&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return vg=r&&typeof r.get=="function"?t([r.get]):typeof s=="function"?function(a){return s(a==null?a:i(a))}:!1,vg}var _g,kS;function CG(){if(kS)return _g;kS=1;var t=NI(),e=LI(),n=TG();return _g=t?function(i){return t(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:n?function(i){return n(i)}:null,_g}var xg,MS;function PG(){if(MS)return xg;MS=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=Np();return xg=n.call(t,e),xg}var be,AG=DI,RG=K8,IG=q8,kG=Z8,MG=Q8,ja=J8,_a=ul,DG=eG,OG=tG,NG=nG,LG=rG,BG=iG,FG=sG,$G=oG,UG=cG,$I=Function,bg=function(t){try{return $I('"use strict"; return ('+t+").constructor;")()}catch{}},zc=OI,HG=hG,wg=function(){throw new _a},jG=zc?function(){try{return arguments.callee,wg}catch{try{return zc(arguments,"callee").get}catch{return wg}}}():wg,No=fG()(),xt=CG(),GG=LI(),zG=NI(),UI=BI(),Eu=Kx(),Uo={},WG=typeof Uint8Array>"u"||!xt?be:xt(Uint8Array),Ys={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?be:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?be:ArrayBuffer,"%ArrayIteratorPrototype%":No&&xt?xt([][Symbol.iterator]()):be,"%AsyncFromSyncIteratorPrototype%":be,"%AsyncFunction%":Uo,"%AsyncGenerator%":Uo,"%AsyncGeneratorFunction%":Uo,"%AsyncIteratorPrototype%":Uo,"%Atomics%":typeof Atomics>"u"?be:Atomics,"%BigInt%":typeof BigInt>"u"?be:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?be:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?be:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?be:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":RG,"%eval%":eval,"%EvalError%":IG,"%Float16Array%":typeof Float16Array>"u"?be:Float16Array,"%Float32Array%":typeof Float32Array>"u"?be:Float32Array,"%Float64Array%":typeof Float64Array>"u"?be:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?be:FinalizationRegistry,"%Function%":$I,"%GeneratorFunction%":Uo,"%Int8Array%":typeof Int8Array>"u"?be:Int8Array,"%Int16Array%":typeof Int16Array>"u"?be:Int16Array,"%Int32Array%":typeof Int32Array>"u"?be:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":No&&xt?xt(xt([][Symbol.iterator]())):be,"%JSON%":typeof JSON=="object"?JSON:be,"%Map%":typeof Map>"u"?be:Map,"%MapIteratorPrototype%":typeof Map>"u"||!No||!xt?be:xt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":AG,"%Object.getOwnPropertyDescriptor%":zc,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?be:Promise,"%Proxy%":typeof Proxy>"u"?be:Proxy,"%RangeError%":kG,"%ReferenceError%":MG,"%Reflect%":typeof Reflect>"u"?be:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?be:Set,"%SetIteratorPrototype%":typeof Set>"u"||!No||!xt?be:xt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?be:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":No&&xt?xt(""[Symbol.iterator]()):be,"%Symbol%":No?Symbol:be,"%SyntaxError%":ja,"%ThrowTypeError%":jG,"%TypedArray%":WG,"%TypeError%":_a,"%Uint8Array%":typeof Uint8Array>"u"?be:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?be:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?be:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?be:Uint32Array,"%URIError%":DG,"%WeakMap%":typeof WeakMap>"u"?be:WeakMap,"%WeakRef%":typeof WeakRef>"u"?be:WeakRef,"%WeakSet%":typeof WeakSet>"u"?be:WeakSet,"%Function.prototype.call%":Eu,"%Function.prototype.apply%":UI,"%Object.defineProperty%":HG,"%Object.getPrototypeOf%":GG,"%Math.abs%":OG,"%Math.floor%":NG,"%Math.max%":LG,"%Math.min%":BG,"%Math.pow%":FG,"%Math.round%":$G,"%Math.sign%":UG,"%Reflect.getPrototypeOf%":zG};if(xt)try{null.error}catch(t){var VG=xt(xt(t));Ys["%Error.prototype%"]=VG}var XG=function t(e){var n;if(e==="%AsyncFunction%")n=bg("async function () {}");else if(e==="%GeneratorFunction%")n=bg("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=bg("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&xt&&(n=xt(i.prototype))}return Ys[e]=n,n},DS={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Tu=Np(),of=PG(),YG=Tu.call(Eu,Array.prototype.concat),KG=Tu.call(UI,Array.prototype.splice),OS=Tu.call(Eu,String.prototype.replace),af=Tu.call(Eu,String.prototype.slice),qG=Tu.call(Eu,RegExp.prototype.exec),ZG=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,QG=/\\(\\)?/g,JG=function(e){var n=af(e,0,1),r=af(e,-1);if(n==="%"&&r!=="%")throw new ja("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new ja("invalid intrinsic syntax, expected opening `%`");var i=[];return OS(e,ZG,function(s,o,a,l){i[i.length]=a?OS(l,QG,"$1"):o||s}),i},e7=function(e,n){var r=e,i;if(of(DS,r)&&(i=DS[r],r="%"+i[0]+"%"),of(Ys,r)){var s=Ys[r];if(s===Uo&&(s=XG(r)),typeof s>"u"&&!n)throw new _a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:s}}throw new ja("intrinsic "+e+" does not exist!")},qx=function(e,n){if(typeof e!="string"||e.length===0)throw new _a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new _a('"allowMissing" argument must be a boolean');if(qG(/^%?[^%]*%?$/,e)===null)throw new ja("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=JG(e),i=r.length>0?r[0]:"",s=e7("%"+i+"%",n),o=s.name,a=s.value,l=!1,c=s.alias;c&&(i=c[0],KG(r,YG([0,1],c)));for(var d=1,u=!0;d<r.length;d+=1){var h=r[d],f=af(h,0,1),p=af(h,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new ja("property names with quotes must have matching quotes");if((h==="constructor"||!u)&&(l=!0),i+="."+h,o="%"+i+"%",of(Ys,o))a=Ys[o];else if(a!=null){if(!(h in a)){if(!n)throw new _a("base intrinsic for "+e+" exists, but the property is not available.");return}if(zc&&d+1>=r.length){var m=zc(a,h);u=!!m,u&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[h]}else u=of(a,h),a=a[h];u&&!l&&(Ys[o]=a)}}return a},HI=qx,jI=FI,t7=jI([HI("%String.prototype.indexOf%")]),GI=function(e,n){var r=HI(e,!!n);return typeof r=="function"&&t7(e,".prototype.")>-1?jI([r]):r},n7=qx,Cu=GI,r7=Dp,i7=ul,NS=n7("%Map%",!0),s7=Cu("Map.prototype.get",!0),o7=Cu("Map.prototype.set",!0),a7=Cu("Map.prototype.has",!0),l7=Cu("Map.prototype.delete",!0),c7=Cu("Map.prototype.size",!0),zI=!!NS&&function(){var e,n={assert:function(r){if(!n.has(r))throw new i7("Side channel does not contain "+r7(r))},delete:function(r){if(e){var i=l7(e,r);return c7(e)===0&&(e=void 0),i}return!1},get:function(r){if(e)return s7(e,r)},has:function(r){return e?a7(e,r):!1},set:function(r,i){e||(e=new NS),o7(e,r,i)}};return n},u7=qx,Lp=GI,h7=Dp,gh=zI,d7=ul,Lo=u7("%WeakMap%",!0),f7=Lp("WeakMap.prototype.get",!0),p7=Lp("WeakMap.prototype.set",!0),m7=Lp("WeakMap.prototype.has",!0),g7=Lp("WeakMap.prototype.delete",!0),y7=Lo?function(){var e,n,r={assert:function(i){if(!r.has(i))throw new d7("Side channel does not contain "+h7(i))},delete:function(i){if(Lo&&i&&(typeof i=="object"||typeof i=="function")){if(e)return g7(e,i)}else if(gh&&n)return n.delete(i);return!1},get:function(i){return Lo&&i&&(typeof i=="object"||typeof i=="function")&&e?f7(e,i):n&&n.get(i)},has:function(i){return Lo&&i&&(typeof i=="object"||typeof i=="function")&&e?m7(e,i):!!n&&n.has(i)},set:function(i,s){Lo&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new Lo),p7(e,i,s)):gh&&(n||(n=gh()),n.set(i,s))}};return r}:gh,v7=ul,_7=Dp,x7=Y8,b7=zI,w7=y7,S7=w7||b7||x7,E7=function(){var e,n={assert:function(r){if(!n.has(r))throw new v7("Side channel does not contain "+_7(r))},delete:function(r){return!!e&&e.delete(r)},get:function(r){return e&&e.get(r)},has:function(r){return!!e&&e.has(r)},set:function(r,i){e||(e=S7()),e.set(r,i)}};return n},T7=String.prototype.replace,C7=/%20/g,Sg={RFC1738:"RFC1738",RFC3986:"RFC3986"},Zx={default:Sg.RFC3986,formatters:{RFC1738:function(t){return T7.call(t,C7,"+")},RFC3986:function(t){return String(t)}},RFC1738:Sg.RFC1738,RFC3986:Sg.RFC3986},P7=Zx,Eg=Object.prototype.hasOwnProperty,$s=Array.isArray,Br=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),A7=function(e){for(;e.length>1;){var n=e.pop(),r=n.obj[n.prop];if($s(r)){for(var i=[],s=0;s<r.length;++s)typeof r[s]<"u"&&i.push(r[s]);n.obj[n.prop]=i}}},WI=function(e,n){for(var r=n&&n.plainObjects?{__proto__:null}:{},i=0;i<e.length;++i)typeof e[i]<"u"&&(r[i]=e[i]);return r},R7=function t(e,n,r){if(!n)return e;if(typeof n!="object"&&typeof n!="function"){if($s(e))e.push(n);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!Eg.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var i=e;return $s(e)&&!$s(n)&&(i=WI(e,r)),$s(e)&&$s(n)?(n.forEach(function(s,o){if(Eg.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=t(a,s,r):e.push(s)}else e[o]=s}),e):Object.keys(n).reduce(function(s,o){var a=n[o];return Eg.call(s,o)?s[o]=t(s[o],a,r):s[o]=a,s},i)},I7=function(e,n){return Object.keys(n).reduce(function(r,i){return r[i]=n[i],r},e)},k7=function(t,e,n){var r=t.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},Tg=1024,M7=function(e,n,r,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),r==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;l+=Tg){for(var c=o.length>=Tg?o.slice(l,l+Tg):o,d=[],u=0;u<c.length;++u){var h=c.charCodeAt(u);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||s===P7.RFC1738&&(h===40||h===41)){d[d.length]=c.charAt(u);continue}if(h<128){d[d.length]=Br[h];continue}if(h<2048){d[d.length]=Br[192|h>>6]+Br[128|h&63];continue}if(h<55296||h>=57344){d[d.length]=Br[224|h>>12]+Br[128|h>>6&63]+Br[128|h&63];continue}u+=1,h=65536+((h&1023)<<10|c.charCodeAt(u)&1023),d[d.length]=Br[240|h>>18]+Br[128|h>>12&63]+Br[128|h>>6&63]+Br[128|h&63]}a+=d.join("")}return a},D7=function(e){for(var n=[{obj:{o:e},prop:"o"}],r=[],i=0;i<n.length;++i)for(var s=n[i],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var c=a[l],d=o[c];typeof d=="object"&&d!==null&&r.indexOf(d)===-1&&(n.push({obj:o,prop:c}),r.push(d))}return A7(n),e},O7=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},N7=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},L7=function(e,n){return[].concat(e,n)},B7=function(e,n){if($s(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(n(e[i]));return r}return n(e)},VI={arrayToObject:WI,assign:I7,combine:L7,compact:D7,decode:k7,encode:M7,isBuffer:N7,isRegExp:O7,maybeMap:B7,merge:R7},XI=E7,id=VI,gc=Zx,F7=Object.prototype.hasOwnProperty,YI={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},Wr=Array.isArray,$7=Array.prototype.push,KI=function(t,e){$7.apply(t,Wr(e)?e:[e])},U7=Date.prototype.toISOString,LS=gc.default,dt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:id.encode,encodeValuesOnly:!1,filter:void 0,format:LS,formatter:gc.formatters[LS],indices:!1,serializeDate:function(e){return U7.call(e)},skipNulls:!1,strictNullHandling:!1},H7=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Cg={},j7=function t(e,n,r,i,s,o,a,l,c,d,u,h,f,p,m,y,g,_){for(var v=e,w=_,S=0,E=!1;(w=w.get(Cg))!==void 0&&!E;){var T=w.get(e);if(S+=1,typeof T<"u"){if(T===S)throw new RangeError("Cyclic object value");E=!0}typeof w.get(Cg)>"u"&&(S=0)}if(typeof d=="function"?v=d(n,v):v instanceof Date?v=f(v):r==="comma"&&Wr(v)&&(v=id.maybeMap(v,function(D){return D instanceof Date?f(D):D})),v===null){if(o)return c&&!y?c(n,dt.encoder,g,"key",p):n;v=""}if(H7(v)||id.isBuffer(v)){if(c){var C=y?n:c(n,dt.encoder,g,"key",p);return[m(C)+"="+m(c(v,dt.encoder,g,"value",p))]}return[m(n)+"="+m(String(v))]}var A=[];if(typeof v>"u")return A;var P;if(r==="comma"&&Wr(v))y&&c&&(v=id.maybeMap(v,c)),P=[{value:v.length>0?v.join(",")||null:void 0}];else if(Wr(d))P=d;else{var O=Object.keys(v);P=u?O.sort(u):O}var U=l?String(n).replace(/\./g,"%2E"):String(n),k=i&&Wr(v)&&v.length===1?U+"[]":U;if(s&&Wr(v)&&v.length===0)return k+"[]";for(var I=0;I<P.length;++I){var F=P[I],N=typeof F=="object"&&F&&typeof F.value<"u"?F.value:v[F];if(!(a&&N===null)){var B=h&&l?String(F).replace(/\./g,"%2E"):String(F),R=Wr(v)?typeof r=="function"?r(k,B):k:k+(h?"."+B:"["+B+"]");_.set(e,S);var M=XI();M.set(Cg,_),KI(A,t(N,R,r,i,s,o,a,l,r==="comma"&&y&&Wr(v)?null:c,d,u,h,f,p,m,y,g,M))}}return A},G7=function(e){if(!e)return dt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||dt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=gc.default;if(typeof e.format<"u"){if(!F7.call(gc.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=gc.formatters[r],s=dt.filter;(typeof e.filter=="function"||Wr(e.filter))&&(s=e.filter);var o;if(e.arrayFormat in YI?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=dt.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:dt.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:dt.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:dt.allowEmptyArrays,arrayFormat:o,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:dt.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?dt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:dt.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:dt.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:dt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:dt.encodeValuesOnly,filter:s,format:r,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:dt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:dt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:dt.strictNullHandling}},z7=function(t,e){var n=t,r=G7(e),i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):Wr(r.filter)&&(s=r.filter,i=s);var o=[];if(typeof n!="object"||n===null)return"";var a=YI[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);for(var c=XI(),d=0;d<i.length;++d){var u=i[d],h=n[u];r.skipNulls&&h===null||KI(o,j7(h,u,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}var f=o.join(r.delimiter),p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""},so=VI,Ov=Object.prototype.hasOwnProperty,BS=Array.isArray,rt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:so.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},W7=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},qI=function(t,e,n){if(t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&n>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return t},V7="utf8=%26%2310003%3B",X7="utf8=%E2%9C%93",Y7=function(e,n){var r={__proto__:null},i=n.ignoreQueryPrefix?e.replace(/^\?/,""):e;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=n.parameterLimit===1/0?void 0:n.parameterLimit,o=i.split(n.delimiter,n.throwOnLimitExceeded?s+1:s);if(n.throwOnLimitExceeded&&o.length>s)throw new RangeError("Parameter limit exceeded. Only "+s+" parameter"+(s===1?"":"s")+" allowed.");var a=-1,l,c=n.charset;if(n.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===X7?c="utf-8":o[l]===V7&&(c="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var d=o[l],u=d.indexOf("]="),h=u===-1?d.indexOf("="):u+1,f,p;h===-1?(f=n.decoder(d,rt.decoder,c,"key"),p=n.strictNullHandling?null:""):(f=n.decoder(d.slice(0,h),rt.decoder,c,"key"),p=so.maybeMap(qI(d.slice(h+1),n,BS(r[f])?r[f].length:0),function(y){return n.decoder(y,rt.decoder,c,"value")})),p&&n.interpretNumericEntities&&c==="iso-8859-1"&&(p=W7(String(p))),d.indexOf("[]=")>-1&&(p=BS(p)?[p]:p);var m=Ov.call(r,f);m&&n.duplicates==="combine"?r[f]=so.combine(r[f],p):(!m||n.duplicates==="last")&&(r[f]=p)}return r},K7=function(t,e,n,r){var i=0;if(t.length>0&&t[t.length-1]==="[]"){var s=t.slice(0,-1).join("");i=Array.isArray(e)&&e[s]?e[s].length:0}for(var o=r?e:qI(e,n,i),a=t.length-1;a>=0;--a){var l,c=t[a];if(c==="[]"&&n.parseArrays)l=n.allowEmptyArrays&&(o===""||n.strictNullHandling&&o===null)?[]:so.combine([],o);else{l=n.plainObjects?{__proto__:null}:{};var d=c.charAt(0)==="["&&c.charAt(c.length-1)==="]"?c.slice(1,-1):c,u=n.decodeDotInKeys?d.replace(/%2E/g,"."):d,h=parseInt(u,10);!n.parseArrays&&u===""?l={0:o}:!isNaN(h)&&c!==u&&String(h)===u&&h>=0&&n.parseArrays&&h<=n.arrayLimit?(l=[],l[h]=o):u!=="__proto__"&&(l[u]=o)}o=l}return o},q7=function(e,n,r,i){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=r.depth>0&&o.exec(s),c=l?s.slice(0,l.index):s,d=[];if(c){if(!r.plainObjects&&Ov.call(Object.prototype,c)&&!r.allowPrototypes)return;d.push(c)}for(var u=0;r.depth>0&&(l=a.exec(s))!==null&&u<r.depth;){if(u+=1,!r.plainObjects&&Ov.call(Object.prototype,l[1].slice(1,-1))&&!r.allowPrototypes)return;d.push(l[1])}if(l){if(r.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");d.push("["+s.slice(l.index)+"]")}return K7(d,n,r,i)}},Z7=function(e){if(!e)return rt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var n=typeof e.charset>"u"?rt.charset:e.charset,r=typeof e.duplicates>"u"?rt.duplicates:e.duplicates;if(r!=="combine"&&r!=="first"&&r!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:rt.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:rt.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:rt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:rt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:rt.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:rt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:rt.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:rt.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:rt.decoder,delimiter:typeof e.delimiter=="string"||so.isRegExp(e.delimiter)?e.delimiter:rt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:rt.depth,duplicates:r,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:rt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:rt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:rt.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:rt.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:rt.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},Q7=function(t,e){var n=Z7(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?{__proto__:null}:{};for(var r=typeof t=="string"?Y7(t,n):t,i=n.plainObjects?{__proto__:null}:{},s=Object.keys(r),o=0;o<s.length;++o){var a=s[o],l=q7(a,r[a],n,typeof t=="string");i=so.merge(i,l,n)}return n.allowSparse===!0?i:so.compact(i)},J7=z7,e9=Q7,t9=Zx,n9={formats:t9,parse:e9,stringify:J7},r9=u8;function Tr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var i9=/^([a-z0-9.+-]+:)/i,s9=/:[0-9]*$/,o9=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,a9=["<",">",'"',"`"," ","\r",`
`,"	"],l9=["{","}","|","\\","^","`"].concat(a9),Nv=["'"].concat(l9),FS=["%","/","?",";","#"].concat(Nv),$S=["/","?","#"],c9=255,US=/^[+a-z0-9A-Z_-]{0,63}$/,u9=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,h9={javascript:!0,"javascript:":!0},Lv={javascript:!0,"javascript:":!0},xa={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Bv=n9;function Bp(t,e,n){if(t&&typeof t=="object"&&t instanceof Tr)return t;var r=new Tr;return r.parse(t,e,n),r}Tr.prototype.parse=function(t,e,n){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=r!==-1&&r<t.indexOf("#")?"?":"#",s=t.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),t=s.join(i);var a=t;if(a=a.trim(),!n&&t.split("#").length===1){var l=o9.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=Bv.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=i9.exec(a);if(c){c=c[0];var d=c.toLowerCase();this.protocol=d,a=a.substr(c.length)}if(n||c||a.match(/^\/\/[^@/]+@[^@/]+/)){var u=a.substr(0,2)==="//";u&&!(c&&Lv[c])&&(a=a.substr(2),this.slashes=!0)}if(!Lv[c]&&(u||c&&!xa[c])){for(var h=-1,f=0;f<$S.length;f++){var p=a.indexOf($S[f]);p!==-1&&(h===-1||p<h)&&(h=p)}var m,y;h===-1?y=a.lastIndexOf("@"):y=a.lastIndexOf("@",h),y!==-1&&(m=a.slice(0,y),a=a.slice(y+1),this.auth=decodeURIComponent(m)),h=-1;for(var f=0;f<FS.length;f++){var p=a.indexOf(FS[f]);p!==-1&&(h===-1||p<h)&&(h=p)}h===-1&&(h=a.length),this.host=a.slice(0,h),a=a.slice(h),this.parseHost(),this.hostname=this.hostname||"";var g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g)for(var _=this.hostname.split(/\./),f=0,v=_.length;f<v;f++){var w=_[f];if(w&&!w.match(US)){for(var S="",E=0,T=w.length;E<T;E++)w.charCodeAt(E)>127?S+="x":S+=w[E];if(!S.match(US)){var C=_.slice(0,f),A=_.slice(f+1),P=w.match(u9);P&&(C.push(P[1]),A.unshift(P[2])),A.length&&(a="/"+A.join(".")+a),this.hostname=C.join(".");break}}}this.hostname.length>c9?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=r9.toASCII(this.hostname));var O=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+O,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!h9[d])for(var f=0,v=Nv.length;f<v;f++){var k=Nv[f];if(a.indexOf(k)!==-1){var I=encodeURIComponent(k);I===k&&(I=escape(k)),a=a.split(k).join(I)}}var F=a.indexOf("#");F!==-1&&(this.hash=a.substr(F),a=a.slice(0,F));var N=a.indexOf("?");if(N!==-1?(this.search=a.substr(N),this.query=a.substr(N+1),e&&(this.query=Bv.parse(this.query)),a=a.slice(0,N)):e&&(this.search="",this.query={}),a&&(this.pathname=a),xa[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var O=this.pathname||"",B=this.search||"";this.path=O+B}return this.href=this.format(),this};function d9(t){return typeof t=="string"&&(t=Bp(t)),t instanceof Tr?t.format():Tr.prototype.format.call(t)}Tr.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=Bv.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||xa[e])&&i!==!1?(i="//"+(i||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),o&&o.charAt(0)!=="?"&&(o="?"+o),n=n.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+i+n+o+r};function f9(t,e){return Bp(t,!1,!0).resolve(e)}Tr.prototype.resolve=function(t){return this.resolveObject(Bp(t,!1,!0)).format()};Tr.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new Tr;e.parse(t,!1,!0),t=e}for(var n=new Tr,r=Object.keys(this),i=0;i<r.length;i++){var s=r[i];n[s]=this[s]}if(n.hash=t.hash,t.href==="")return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(n[l]=t[l])}return xa[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!xa[t.protocol]){for(var c=Object.keys(t),d=0;d<c.length;d++){var u=c[d];n[u]=t[u]}return n.href=n.format(),n}if(n.protocol=t.protocol,!t.host&&!Lv[t.protocol]){for(var v=(t.pathname||"").split("/");v.length&&!(t.host=v.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),v[0]!==""&&v.unshift(""),v.length<2&&v.unshift(""),n.pathname=v.join("/")}else n.pathname=t.pathname;if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var h=n.pathname||"",f=n.search||"";n.path=h+f}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var p=n.pathname&&n.pathname.charAt(0)==="/",m=t.host||t.pathname&&t.pathname.charAt(0)==="/",y=m||p||n.host&&t.pathname,g=y,_=n.pathname&&n.pathname.split("/")||[],v=t.pathname&&t.pathname.split("/")||[],w=n.protocol&&!xa[n.protocol];if(w&&(n.hostname="",n.port=null,n.host&&(_[0]===""?_[0]=n.host:_.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(v[0]===""?v[0]=t.host:v.unshift(t.host)),t.host=null),y=y&&(v[0]===""||_[0]==="")),m)n.host=t.host||t.host===""?t.host:n.host,n.hostname=t.hostname||t.hostname===""?t.hostname:n.hostname,n.search=t.search,n.query=t.query,_=v;else if(v.length)_||(_=[]),_.pop(),_=_.concat(v),n.search=t.search,n.query=t.query;else if(t.search!=null){if(w){n.host=_.shift(),n.hostname=n.host;var S=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;S&&(n.auth=S.shift(),n.hostname=S.shift(),n.host=n.hostname)}return n.search=t.search,n.query=t.query,(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=_.slice(-1)[0],T=(n.host||t.host||_.length>1)&&(E==="."||E==="..")||E==="",C=0,A=_.length;A>=0;A--)E=_[A],E==="."?_.splice(A,1):E===".."?(_.splice(A,1),C++):C&&(_.splice(A,1),C--);if(!y&&!g)for(;C--;C)_.unshift("..");y&&_[0]!==""&&(!_[0]||_[0].charAt(0)!=="/")&&_.unshift(""),T&&_.join("/").substr(-1)!=="/"&&_.push("");var P=_[0]===""||_[0]&&_[0].charAt(0)==="/";if(w){n.hostname=P?"":_.length?_.shift():"",n.host=n.hostname;var S=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;S&&(n.auth=S.shift(),n.hostname=S.shift(),n.host=n.hostname)}return y=y||n.host&&_.length,y&&!P&&_.unshift(""),_.length>0?n.pathname=_.join("/"):(n.pathname=null,n.path=null),(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n};Tr.prototype.parseHost=function(){var t=this.host,e=s9.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var p9=Bp,m9=f9,g9=d9;const y9={parse:p9,format:g9,resolve:m9};function or(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function Ml(t){return t.split("?")[0].split("#")[0]}function v9(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _9(t,e,n){return t.replace(new RegExp(v9(e),"g"),n)}function x9(t,e){let n="",r=0,i=-1,s=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const l=n.lastIndexOf("/");if(l!==n.length-1){l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length===2||n.length===1){n="",r=0,i=a,s=0;continue}}}else n.length>0?n+=`/${t.slice(i+1,a)}`:n=t.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return n}const Vt={toPosix(t){return _9(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol(t){or(t),t=this.toPosix(t);let e="";const n=/^file:\/\/\//.exec(t),r=/^[^/:]+:\/\//.exec(t),i=/^[^/:]+:\//.exec(t);if(n||r||i){const s=n?.[0]||r?.[0]||i?.[0];e=s,t=t.slice(s.length)}return e},toAbsolute(t,e,n){if(this.isDataUrl(t))return t;const r=Ml(this.toPosix(e??Y.ADAPTER.getBaseUrl())),i=Ml(this.toPosix(n??this.rootname(r)));return or(t),t=this.toPosix(t),t.startsWith("/")?Vt.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(r,t)},normalize(t){if(t=this.toPosix(t),or(t),t.length===0)return".";let e="";const n=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const r=t.endsWith("/");return t=x9(t),t.length>0&&r&&(t+="/"),n?`/${t}`:e+t},isAbsolute(t){return or(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){const r=t[n];if(or(r),r.length>0)if(e===void 0)e=r;else{const i=t[n-1]??"";this.extname(i)?e+=`/../${r}`:e+=`/${r}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(or(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const n=e===47;let r=-1,i=!0;const s=this.getProtocol(t),o=t;t=t.slice(s.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!i){r=a;break}}else i=!1;return r===-1?n?"/":this.isUrl(o)?s+t:s:n&&r===1?"//":s+t.slice(0,r)},rootname(t){or(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const n=t.indexOf("/",e.length);n!==-1?e=t.slice(0,n):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){or(t),e&&or(e),t=Ml(this.toPosix(t));let n=0,r=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(s=t.length-1;s>=0;--s){const l=t.charCodeAt(s);if(l===47){if(!i){n=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(r=s):(o=-1,r=a))}return n===r?r=a:r===-1&&(r=t.length),t.slice(n,r)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!i){n=s+1;break}}else r===-1&&(i=!1,r=s+1);return r===-1?"":t.slice(n,r)},extname(t){or(t),t=Ml(this.toPosix(t));let e=-1,n=0,r=-1,i=!0,s=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(a===47){if(!i){n=o+1;break}continue}r===-1&&(i=!1,r=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||r===-1||s===0||s===1&&e===r-1&&e===n+1?"":t.slice(e,r)},parse(t){or(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=Ml(this.toPosix(t));let n=t.charCodeAt(0);const r=this.isAbsolute(t);let i;e.root=this.rootname(t),r||this.hasProtocol(t)?i=1:i=0;let s=-1,o=0,a=-1,l=!0,c=t.length-1,d=0;for(;c>=i;--c){if(n=t.charCodeAt(c),n===47){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),n===46?s===-1?s=c:d!==1&&(d=1):s!==-1&&(d=-1)}return s===-1||a===-1||d===0||d===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&r?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(o,a)):(o===0&&r?(e.name=t.slice(1,s),e.base=t.slice(1,a)):(e.name=t.slice(o,s),e.base=t.slice(o,a)),e.ext=t.slice(s,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"},HS={};function we(t,e,n=3){if(HS[e])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(r=r.split(`
`).splice(n).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(r))),HS[e]=!0}let Pg;function b9(){return typeof Pg>"u"&&(Pg=function(){const e={stencil:!0,failIfMajorPerformanceCaveat:Y.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Y.ADAPTER.getWebGLRenderingContext())return!1;const n=Y.ADAPTER.createCanvas();let r=n.getContext("webgl",e)||n.getContext("experimental-webgl",e);const i=!!r?.getContextAttributes()?.stencil;if(r){const s=r.getExtension("WEBGL_lose_context");s&&s.loseContext()}return r=null,i}catch{return!1}}()),Pg}var w9={grad:.9,turn:360,rad:360/(2*Math.PI)},mi=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},wt=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},Vn=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},ZI=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},jS=function(t){return{r:Vn(t.r,0,255),g:Vn(t.g,0,255),b:Vn(t.b,0,255),a:Vn(t.a)}},Ag=function(t){return{r:wt(t.r),g:wt(t.g),b:wt(t.b),a:wt(t.a,3)}},S9=/^#([0-9a-f]{3,8})$/i,yh=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},QI=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=Math.max(e,n,r),o=s-Math.min(e,n,r),a=o?s===e?(n-r)/o:s===n?2+(r-e)/o:4+(e-n)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},JI=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),o=r*(1-n),a=r*(1-(e-s)*n),l=r*(1-(1-e+s)*n),c=s%6;return{r:255*[r,a,o,o,l,r][c],g:255*[l,r,r,a,o,o][c],b:255*[o,o,l,r,r,a][c],a:i}},GS=function(t){return{h:ZI(t.h),s:Vn(t.s,0,100),l:Vn(t.l,0,100),a:Vn(t.a)}},zS=function(t){return{h:wt(t.h),s:wt(t.s),l:wt(t.l),a:wt(t.a,3)}},WS=function(t){return JI((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},yc=function(t){return{h:(e=QI(t)).h,s:(i=(200-(n=e.s))*(r=e.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,n,r,i},E9=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,T9=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,C9=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,P9=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Fv={string:[[function(t){var e=S9.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?wt(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?wt(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=C9.exec(t)||P9.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:jS({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=E9.exec(t)||T9.exec(t);if(!e)return null;var n,r,i=GS({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(w9[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return WS(i)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=i===void 0?1:i;return mi(e)&&mi(n)&&mi(r)?jS({r:Number(e),g:Number(n),b:Number(r),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,i=t.a,s=i===void 0?1:i;if(!mi(e)||!mi(n)||!mi(r))return null;var o=GS({h:Number(e),s:Number(n),l:Number(r),a:Number(s)});return WS(o)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,i=t.a,s=i===void 0?1:i;if(!mi(e)||!mi(n)||!mi(r))return null;var o=function(a){return{h:ZI(a.h),s:Vn(a.s,0,100),v:Vn(a.v,0,100),a:Vn(a.a)}}({h:Number(e),s:Number(n),v:Number(r),a:Number(s)});return JI(o)},"hsv"]]},VS=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},A9=function(t){return typeof t=="string"?VS(t.trim(),Fv.string):typeof t=="object"&&t!==null?VS(t,Fv.object):[null,void 0]},Rg=function(t,e){var n=yc(t);return{h:n.h,s:Vn(n.s+100*e,0,100),l:n.l,a:n.a}},Ig=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},XS=function(t,e){var n=yc(t);return{h:n.h,s:n.s,l:Vn(n.l+100*e,0,100),a:n.a}},$v=function(){function t(e){this.parsed=A9(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return wt(Ig(this.rgba),2)},t.prototype.isDark=function(){return Ig(this.rgba)<.5},t.prototype.isLight=function(){return Ig(this.rgba)>=.5},t.prototype.toHex=function(){return e=Ag(this.rgba),n=e.r,r=e.g,i=e.b,o=(s=e.a)<1?yh(wt(255*s)):"","#"+yh(n)+yh(r)+yh(i)+o;var e,n,r,i,s,o},t.prototype.toRgb=function(){return Ag(this.rgba)},t.prototype.toRgbString=function(){return e=Ag(this.rgba),n=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+n+", "+r+", "+i+", "+s+")":"rgb("+n+", "+r+", "+i+")";var e,n,r,i,s},t.prototype.toHsl=function(){return zS(yc(this.rgba))},t.prototype.toHslString=function(){return e=zS(yc(this.rgba)),n=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+s+")":"hsl("+n+", "+r+"%, "+i+"%)";var e,n,r,i,s},t.prototype.toHsv=function(){return e=QI(this.rgba),{h:wt(e.h),s:wt(e.s),v:wt(e.v),a:wt(e.a,3)};var e},t.prototype.invert=function(){return Fr({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Fr(Rg(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Fr(Rg(this.rgba,-e))},t.prototype.grayscale=function(){return Fr(Rg(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Fr(XS(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Fr(XS(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Fr({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):wt(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=yc(this.rgba);return typeof e=="number"?Fr({h:e,s:n.s,l:n.l,a:n.a}):wt(n.h)},t.prototype.isEqual=function(e){return this.toHex()===Fr(e).toHex()},t}(),Fr=function(t){return t instanceof $v?t:new $v(t)},YS=[],R9=function(t){t.forEach(function(e){YS.indexOf(e)<0&&(e($v,Fv),YS.push(e))})};function I9(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=r[this.toHex()];if(c)return c;if(o?.closest){var d=this.toRgb(),u=1/0,h="black";if(!s.length)for(var f in n)s[f]=new t(n[f]).toRgb();for(var p in n){var m=(a=d,l=s[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));m<u&&(u=m,h=p)}return h}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":n[a];return l?new t(l).toRgb():null},"name"])}R9([I9]);const ba=class{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof ba)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const n=typeof t;if(n!==typeof e)return!1;if(n==="number"||n==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((i,s)=>i===e[s]);if(t!==null&&e!==null){const i=Object.keys(t),s=Object.keys(e);return i.length!==s.length?!1:i.every(o=>t[o]===e[o])}return t===e}toRgba(){const[t,e,n,r]=this._components;return{r:t,g:e,b:n,a:r}}toRgb(){const[t,e,n]=this._components;return{r:t,g:e,b:n}}toRgbaString(){const[t,e,n]=this.toUint8RgbArray();return`rgba(${t},${e},${n},${this.alpha})`}toUint8RgbArray(t){const[e,n,r]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(n*255),t[2]=Math.round(r*255),t}toRgbArray(t){t=t??[];const[e,n,r]=this._components;return t[0]=e,t[1]=n,t[2]=r,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,n,r,i]=ba.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=n,this._components[2]*=r,this._components[3]*=i,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let n=this._int>>16&255,r=this._int>>8&255,i=this._int&255;return e&&(n=n*t+.5|0,r=r*t+.5|0,i=i*t+.5|0),(t*255<<24)+(n<<16)+(r<<8)+i}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,n,r]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(n*t)/t,this._components[2]=Math.round(r*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,n,r,i]=this._components;return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}normalize(t){let e,n,r,i;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const s=t;e=(s>>16&255)/255,n=(s>>8&255)/255,r=(s&255)/255,i=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,n,r,i=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,n,r,i=255]=t,e/=255,n/=255,r/=255,i/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const o=ba.HEX_PATTERN.exec(t);o&&(t=`#${o[2]}`)}const s=Fr(t);s.isValid()&&({r:e,g:n,b:r,a:i}=s.rgba,e/=255,n/=255,r/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=n,this._components[2]=r,this._components[3]=i,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,n]=this._components;this._int=(t*255<<16)+(e*255<<8)+(n*255|0)}_clamp(t,e=0,n=1){return typeof t=="number"?Math.min(Math.max(t,e),n):(t.forEach((r,i)=>{t[i]=Math.min(Math.max(r,e),n)}),t)}};let Le=ba;Le.shared=new ba;Le.temp=new ba;Le.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function k9(t){return we("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Le.shared.setValue(t).toHex()}function M9(t){return we("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Le.shared.setValue(t).toNumber()}function D9(){const t=[],e=[];for(let r=0;r<32;r++)t[r]=r,e[r]=r;t[he.NORMAL_NPM]=he.NORMAL,t[he.ADD_NPM]=he.ADD,t[he.SCREEN_NPM]=he.SCREEN,e[he.NORMAL]=he.NORMAL_NPM,e[he.ADD]=he.ADD_NPM,e[he.SCREEN]=he.SCREEN_NPM;const n=[];return n.push(e),n.push(t),n}const ek=D9();function tk(t,e){return ek[e?1:0][t]}function O9(t,e=null){const n=t*6;if(e=e||new Uint16Array(n),e.length!==n)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${n}`);for(let r=0,i=0;r<n;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}function nk(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}function lf(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function KS(t){return!(t&t-1)&&!!t}function qS(t){let e=(t>65535?1:0)<<4;t>>>=e;let n=(t>255?1:0)<<3;return t>>>=n,e|=n,n=(t>15?1:0)<<2,t>>>=n,e|=n,n=(t>3?1:0)<<1,t>>>=n,e|=n,e|t>>1}function wa(t,e,n){const r=t.length;let i;if(e>=r||n===0)return;n=e+n>r?r-e:n;const s=r-n;for(i=e;i<s;++i)t[i]=t[i+n];t.length=s}function ns(t){return t===0?0:t<0?-1:1}let N9=0;function oo(){return++N9}const rk=class{constructor(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let Uv=rk;Uv.EMPTY=new rk(0,0,0,0);const ZS={},$r=Object.create(null),Vi=Object.create(null);class L9{constructor(e,n,r){this._canvas=Y.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||Y.RESOLUTION,this.resize(e,n)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,n){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(n*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function QS(t,e,n){for(let r=0,i=4*n*e;r<e;++r,i+=4)if(t[i+3]!==0)return!1;return!0}function JS(t,e,n,r,i){const s=4*e;for(let o=r,a=r*s+4*n;o<=i;++o,a+=s)if(t[a+3]!==0)return!1;return!0}function B9(t){const{width:e,height:n}=t,r=t.getContext("2d",{willReadFrequently:!0});if(r===null)throw new TypeError("Failed to get canvas 2D context");const s=r.getImageData(0,0,e,n).data;let o=0,a=0,l=e-1,c=n-1;for(;a<n&&QS(s,e,a);)++a;if(a===n)return Uv.EMPTY;for(;QS(s,e,c);)--c;for(;JS(s,e,o,a,c);)++o;for(;JS(s,e,l,a,c);)--l;return++l,++c,new Uv(o,a,l,c)}function F9(t){const e=B9(t),{width:n,height:r}=e;let i=null;if(!e.isEmpty()){const s=t.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,n,r)}return{width:n,height:r,data:i}}let vh;function $9(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location,vh||(vh=document.createElement("a")),vh.href=t;const n=y9.parse(vh.href),r=!n.port&&e.port===""||n.port===e.port;return n.hostname!==e.hostname||!r||n.protocol!==e.protocol?"anonymous":""}function vs(t,e=1){const n=Y.RETINA_PREFIX?.exec(t);return n?parseFloat(n[1]):e}var q=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(q||{});const Hv=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},eE=(t,e)=>Hv(t).priority??e,se={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(Hv).forEach(e=>{e.type.forEach(n=>this._removeHandlers[n]?.(e))}),this},add(...t){return t.map(Hv).forEach(e=>{e.type.forEach(n=>{const r=this._addHandlers,i=this._queue;r[n]?r[n](e):(i[n]=i[n]||[],i[n].push(e))})}),this},handle(t,e,n){const r=this._addHandlers,i=this._removeHandlers;if(r[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);r[t]=e,i[t]=n;const s=this._queue;return s[t]&&(s[t].forEach(o=>e(o)),delete s[t]),this},handleByMap(t,e){return this.handle(t,n=>{e[n.name]=n.ref},n=>{delete e[n.name]})},handleByList(t,e,n=-1){return this.handle(t,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((i,s)=>eE(s,n)-eE(i,n)))},r=>{const i=e.indexOf(r.ref);i!==-1&&e.splice(i,1)})}};class jv{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const U9=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function H9(t){let e="";for(let n=0;n<t;++n)n>0&&(e+=`
else `),n<t-1&&(e+=`if(test == ${n}.0){}`);return e}function j9(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=e.createShader(e.FRAGMENT_SHADER);for(;;){const r=U9.replace(/%forloop%/gi,H9(t));if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))t=t/2|0;else break}return t}const kg=0,Mg=1,Dg=2,Og=3,Ng=4,Lg=5;class Gi{constructor(){this.data=0,this.blendMode=he.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<kg)}set blend(e){!!(this.data&1<<kg)!==e&&(this.data^=1<<kg)}get offsets(){return!!(this.data&1<<Mg)}set offsets(e){!!(this.data&1<<Mg)!==e&&(this.data^=1<<Mg)}get culling(){return!!(this.data&1<<Dg)}set culling(e){!!(this.data&1<<Dg)!==e&&(this.data^=1<<Dg)}get depthTest(){return!!(this.data&1<<Og)}set depthTest(e){!!(this.data&1<<Og)!==e&&(this.data^=1<<Og)}get depthMask(){return!!(this.data&1<<Lg)}set depthMask(e){!!(this.data&1<<Lg)!==e&&(this.data^=1<<Lg)}get clockwiseFrontFace(){return!!(this.data&1<<Ng)}set clockwiseFrontFace(e){!!(this.data&1<<Ng)!==e&&(this.data^=1<<Ng)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==he.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new Gi;return e.depthTest=!1,e.blend=!0,e}}const Gv=[];function ik(t,e){if(!t)return null;let n="";if(typeof t=="string"){const r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(n=r[1].toLowerCase())}for(let r=Gv.length-1;r>=0;--r){const i=Gv[r];if(i.test&&i.test(t,n))return new i(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Cr{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,n,r,i,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:d}=this;this._aliasCount++;for(let u=0,h=d.length;u<h;u++)d[u][c](e,n,r,i,s,o,a,l);return d===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const n=this.items.indexOf(e);return n!==-1&&(this.ensureNonAliasedItems(),this.items.splice(n,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Cr.prototype,{dispatch:{value:Cr.prototype.emit},run:{value:Cr.prototype.emit}});class Wc{constructor(e=0,n=0){this._width=e,this._height=n,this.destroyed=!1,this.internal=!1,this.onResize=new Cr("setRealSize"),this.onUpdate=new Cr("update"),this.onError=new Cr("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,n){(e!==this._width||n!==this._height)&&(this._width=e,this._height=n,this.onResize.emit(e,n))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,n,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,n){return!1}}class Pu extends Wc{constructor(e,n){const{width:r,height:i}=n||{};if(!r||!i)throw new Error("BufferResource width or height invalid");super(r,i),this.data=e}upload(e,n,r){const i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Or.UNPACK);const s=n.realWidth,o=n.realHeight;return r.width===s&&r.height===o?i.texSubImage2D(n.target,0,0,0,s,o,n.format,r.type,this.data):(r.width=s,r.height=o,i.texImage2D(n.target,0,r.internalFormat,s,o,0,n.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}const G9={scaleMode:qr.NEAREST,format:V.RGBA,alphaMode:Or.NPM},Ho=class extends Su{constructor(t=null,e=null){super(),e=Object.assign({},Ho.defaultOptions,e);const{alphaMode:n,mipmap:r,anisotropicLevel:i,scaleMode:s,width:o,height:a,wrapMode:l,format:c,type:d,target:u,resolution:h,resourceOptions:f}=e;t&&!(t instanceof Wc)&&(t=ik(t,f),t.internal=!0),this.resolution=h||Y.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=r,this.anisotropicLevel=i,this._wrapMode=l,this._scaleMode=s,this.format=c,this.type=d,this.target=u,this.alphaMode=n,this.uid=oo(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let n;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this}setSize(t,e,n){return n=n||this.resolution,this.setRealSize(t*n,e*n,n)}setRealSize(t,e,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=KS(this.realWidth)&&KS(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Vi[this.cacheId],delete $r[this.cacheId],this.cacheId=null),this.dispose(),Ho.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,n=Y.STRICT_TEXTURE_CACHE){const r=typeof t=="string";let i=null;if(r)i=t;else{if(!t._pixiId){const o=e?.pixiIdPrefix||"pixiid";t._pixiId=`${o}_${oo()}`}i=t._pixiId}let s=Vi[i];if(r&&n&&!s)throw new Error(`The cacheId "${i}" does not exist in BaseTextureCache.`);return s||(s=new Ho(t,e),s.cacheId=i,Ho.addToCache(s,i)),s}static fromBuffer(t,e,n,r){t=t||new Float32Array(e*n*4);const i=new Pu(t,{width:e,height:n}),s=t instanceof Float32Array?le.FLOAT:le.UNSIGNED_BYTE;return new Ho(i,Object.assign({},G9,{type:s},r))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Vi[e]&&Vi[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),Vi[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=Vi[t];if(e){const n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete Vi[t],e}}else if(t?.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete Vi[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};let fe=Ho;fe.defaultOptions={mipmap:li.POW2,anisotropicLevel:0,scaleMode:qr.LINEAR,wrapMode:ds.CLAMP,alphaMode:Or.UNPACK,target:va.TEXTURE_2D,format:V.RGBA,type:le.UNSIGNED_BYTE};fe._globalBatch=0;class zv{constructor(){this.texArray=null,this.blend=0,this.type=Kr.TRIANGLES,this.start=0,this.size=0,this.data=null}}let z9=0,gt=class sk{constructor(e,n=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=n,this.id=z9++,this.disposeRunner=new Cr("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?ni.ELEMENT_ARRAY_BUFFER:ni.ARRAY_BUFFER}get index(){return this.type===ni.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new sk(e)}};class cf{constructor(e,n=0,r=!1,i=le.FLOAT,s,o,a,l=1){this.buffer=e,this.size=n,this.normalized=r,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,n,r,i,s){return new cf(e,n,r,i,s)}}const W9={Float32Array,Uint32Array,Int32Array,Uint8Array};function V9(t,e){let n=0,r=0;const i={};for(let l=0;l<t.length;l++)r+=e[l],n+=t[l].length;const s=new ArrayBuffer(n*4);let o=null,a=0;for(let l=0;l<t.length;l++){const c=e[l],d=t[l],u=nk(d);i[u]||(i[u]=new W9[u](s)),o=i[u];for(let h=0;h<d.length;h++){const f=(h/c|0)*r+a,p=h%c;o[f+p]=d[h]}a+=c}return new Float32Array(s)}const tE={5126:4,5123:2,5121:1};let X9=0;const Y9={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class _s{constructor(e=[],n={}){this.buffers=e,this.indexBuffer=null,this.attributes=n,this.glVertexArrayObjects={},this.id=X9++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Cr("disposeGeometry"),this.refCount=0}addAttribute(e,n,r=0,i=!1,s,o,a,l=!1){if(!n)throw new Error("You must pass a buffer when creating an attribute");n instanceof gt||(n instanceof Array&&(n=new Float32Array(n)),n=new gt(n));const c=e.split("|");if(c.length>1){for(let u=0;u<c.length;u++)this.addAttribute(c[u],n,r,i,s);return this}let d=this.buffers.indexOf(n);return d===-1&&(this.buffers.push(n),d=this.buffers.length-1),this.attributes[e]=new cf(d,r,i,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof gt||(e instanceof Array&&(e=new Uint16Array(e)),e=new gt(e)),e.type=ni.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],n=[],r=new gt;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),n.push(s.size*tE[s.type]/4),s.buffer=0}for(r.data=V9(e,n),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const n=this.attributes[e];return this.buffers[n.buffer].data.length/(n.stride/4||n.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new _s;for(let n=0;n<this.buffers.length;n++)e.buffers[n]=new gt(this.buffers[n].data.slice(0));for(const n in this.attributes){const r=this.attributes[n];e.attributes[n]=new cf(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=ni.ELEMENT_ARRAY_BUFFER),e}static merge(e){const n=new _s,r=[],i=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l]=i[l]||0,i[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)r[a]=new Y9[nk(o.buffers[a].data)](i[a]),n.buffers[a]=new gt(r[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)r[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(n.attributes=o.attributes,o.indexBuffer){n.indexBuffer=n.buffers[o.buffers.indexOf(o.indexBuffer)],n.indexBuffer.type=ni.ELEMENT_ARRAY_BUFFER;let a=0,l=0,c=0,d=0;for(let u=0;u<o.buffers.length;u++)if(o.buffers[u]!==o.indexBuffer){d=u;break}for(const u in o.attributes){const h=o.attributes[u];(h.buffer|0)===d&&(l+=h.size*tE[h.type]/4)}for(let u=0;u<e.length;u++){const h=e[u].indexBuffer.data;for(let f=0;f<h.length;f++)n.indexBuffer.data[f+c]+=a;a+=e[u].buffers[d].data.length/l,c+=h.length}}return n}}class ok extends _s{constructor(e=!1){super(),this._buffer=new gt(null,e,!1),this._indexBuffer=new gt(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,le.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,le.FLOAT).addAttribute("aColor",this._buffer,4,!0,le.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,le.FLOAT).addIndex(this._indexBuffer)}}const uf=Math.PI*2,K9=180/Math.PI,q9=Math.PI/180;var kt=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(kt||{});class ue{constructor(e=0,n=0){this.x=0,this.y=0,this.x=e,this.y=n}clone(){return new ue(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const _h=[new ue,new ue,new ue,new ue];class pe{constructor(e=0,n=0,r=0,i=0){this.x=Number(e),this.y=Number(n),this.width=Number(r),this.height=Number(i),this.type=kt.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new pe(0,0,0,0)}clone(){return new pe(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,n){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height}intersects(e,n){if(!n){const C=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=C)return!1;const P=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>P}const r=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=r||o<=s)return!1;const a=_h[0].set(e.left,e.top),l=_h[1].set(e.left,e.bottom),c=_h[2].set(e.right,e.top),d=_h[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const u=Math.sign(n.a*n.d-n.b*n.c);if(u===0||(n.apply(a,a),n.apply(l,l),n.apply(c,c),n.apply(d,d),Math.max(a.x,l.x,c.x,d.x)<=r||Math.min(a.x,l.x,c.x,d.x)>=i||Math.max(a.y,l.y,c.y,d.y)<=s||Math.min(a.y,l.y,c.y,d.y)>=o))return!1;const h=u*(l.y-a.y),f=u*(a.x-l.x),p=h*r+f*s,m=h*i+f*s,y=h*r+f*o,g=h*i+f*o;if(Math.max(p,m,y,g)<=h*a.x+f*a.y||Math.min(p,m,y,g)>=h*d.x+f*d.y)return!1;const _=u*(a.y-c.y),v=u*(c.x-a.x),w=_*r+v*s,S=_*i+v*s,E=_*r+v*o,T=_*i+v*o;return!(Math.max(w,S,E,T)<=_*a.x+v*a.y||Math.min(w,S,E,T)>=_*d.x+v*d.y)}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=e*2,this.height+=n*2,this}fit(e){const n=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(r-n,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,n=.001){const r=Math.ceil((this.x+this.width-n)*e)/e,i=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=r-this.x,this.height=i-this.y,this}enlarge(e){const n=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=r-n,this.y=i,this.height=s-i,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Qx{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.radius=r,this.type=kt.CIRC}clone(){return new Qx(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;const r=this.radius*this.radius;let i=this.x-e,s=this.y-n;return i*=i,s*=s,i+s<=r}getBounds(){return new pe(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Jx{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.width=r,this.height=i,this.type=kt.ELIP}clone(){return new Jx(this.x,this.y,this.width,this.height)}contains(e,n){if(this.width<=0||this.height<=0)return!1;let r=(e-this.x)/this.width,i=(n-this.y)/this.height;return r*=r,i*=i,r+i<=1}getBounds(){return new pe(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Sa{constructor(...e){let n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){const r=[];for(let i=0,s=n.length;i<s;i++)r.push(n[i].x,n[i].y);n=r}this.points=n,this.type=kt.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),n=new Sa(e);return n.closeStroke=this.closeStroke,n}contains(e,n){let r=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],l=this.points[s*2+1],c=this.points[o*2],d=this.points[o*2+1];l>n!=d>n&&e<(c-a)*((n-l)/(d-l))+a&&(r=!r)}return r}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((e,n)=>`${e}, ${n}`,"")}]`}}class eb{constructor(e=0,n=0,r=0,i=0,s=20){this.x=e,this.y=n,this.width=r,this.height=i,this.radius=s,this.type=kt.RREC}clone(){return new eb(this.x,this.y,this.width,this.height,this.radius)}contains(e,n){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+r&&n<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let i=e-(this.x+r),s=n-(this.y+r);const o=r*r;if(i*i+s*s<=o||(i=e-(this.x+this.width-r),i*i+s*s<=o)||(s=n-(this.y+this.height-r),i*i+s*s<=o)||(i=e-(this.x+r),i*i+s*s<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class Ve{constructor(e=1,n=0,r=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,n,r,i,s,o){return this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o,this}toArray(e,n){this.array||(this.array=new Float32Array(9));const r=n||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,n){n=n||new ue;const r=e.x,i=e.y;return n.x=this.a*r+this.c*i+this.tx,n.y=this.b*r+this.d*i+this.ty,n}applyInverse(e,n){n=n||new ue;const r=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return n.x=this.d*r*i+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,n.y=this.a*r*s+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){const n=Math.cos(e),r=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*n-this.b*r,this.b=i*r+this.b*n,this.c=s*n-this.d*r,this.d=s*r+this.d*n,this.tx=o*n-this.ty*r,this.ty=o*r+this.ty*n,this}append(e){const n=this.a,r=this.b,i=this.c,s=this.d;return this.a=e.a*n+e.b*i,this.b=e.a*r+e.b*s,this.c=e.c*n+e.d*i,this.d=e.c*r+e.d*s,this.tx=e.tx*n+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*s+this.ty,this}setTransform(e,n,r,i,s,o,a,l,c){return this.a=Math.cos(a+c)*s,this.b=Math.sin(a+c)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(r*this.a+i*this.c),this.ty=n-(r*this.b+i*this.d),this}prepend(e){const n=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,i=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){const n=this.a,r=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),l=Math.atan2(r,n),c=Math.abs(a+l);return c<1e-5||Math.abs(uf-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(n*n+r*r),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*n+o.y*i),e.position.y=this.ty+(o.x*r+o.y*s),e}invert(){const e=this.a,n=this.b,r=this.c,i=this.d,s=this.tx,o=e*i-n*r;return this.a=i/o,this.b=-n/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-i*s)/o,this.ty=-(e*this.ty-n*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Ve;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new Ve}static get TEMP_MATRIX(){return new Ve}}const Os=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ns=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ls=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Bs=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Wv=[],ak=[],xh=Math.sign;function Z9(){for(let t=0;t<16;t++){const e=[];Wv.push(e);for(let n=0;n<16;n++){const r=xh(Os[t]*Os[n]+Ls[t]*Ns[n]),i=xh(Ns[t]*Os[n]+Bs[t]*Ns[n]),s=xh(Os[t]*Ls[n]+Ls[t]*Bs[n]),o=xh(Ns[t]*Ls[n]+Bs[t]*Bs[n]);for(let a=0;a<16;a++)if(Os[a]===r&&Ns[a]===i&&Ls[a]===s&&Bs[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new Ve;e.set(Os[t],Ns[t],Ls[t],Bs[t],0,0),ak.push(e)}}Z9();const Ye={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Os[t],uY:t=>Ns[t],vX:t=>Ls[t],vY:t=>Bs[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>Wv[t][e],sub:(t,e)=>Wv[t][Ye.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?Ye.S:Ye.N:Math.abs(e)*2<=Math.abs(t)?t>0?Ye.E:Ye.W:e>0?t>0?Ye.SE:Ye.SW:t>0?Ye.NE:Ye.NW,matrixAppendRotationInv:(t,e,n=0,r=0)=>{const i=ak[Ye.inv(e)];i.tx=n,i.ty=r,t.append(i)}};class rs{constructor(e,n,r=0,i=0){this._x=r,this._y=i,this.cb=e,this.scope=n}clone(e=this.cb,n=this.scope){return new rs(e,n,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}const lk=class{constructor(){this.worldTransform=new Ve,this.localTransform=new Ve,this.position=new rs(this.onChange,this,0,0),this.scale=new rs(this.onChange,this,1,1),this.pivot=new rs(this.onChange,this,0,0),this.skew=new rs(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};let Fp=lk;Fp.IDENTITY=new lk;var Q9=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,J9=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function nE(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}function Bg(t){const e=new Array(t);for(let n=0;n<e.length;n++)e[n]=!1;return e}function ck(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Bg(2*e);case"bvec3":return Bg(3*e);case"bvec4":return Bg(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Ea=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(t,e)=>t.type==="vec3"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],ez={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},tz={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function nz(t,e){const n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const r in t.uniforms){const i=e[r];if(!i){t.uniforms[r]?.group&&(t.uniforms[r].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${r}, '${r}');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.${r}, syncData);
                    `));continue}const s=t.uniforms[r];let o=!1;for(let a=0;a<Ea.length;a++)if(Ea[a].test(i,s)){n.push(Ea[a].code(r,s)),o=!0;break}if(!o){const l=(i.size===1&&!i.isArray?ez:tz)[i.type].replace("location",`ud["${r}"].location`);n.push(`
            cu = ud["${r}"];
            cv = cu.value;
            v = uv["${r}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}const uk={};let bh=uk;function rz(){if(bh===uk||bh?.isContextLost()){const t=Y.ADAPTER.createCanvas();let e;Y.PREFER_ENV>=yo.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),bh=e}return bh}let wh;function iz(){if(!wh){wh=Wn.MEDIUM;const t=rz();t&&t.getShaderPrecisionFormat&&(wh=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?Wn.HIGH:Wn.MEDIUM)}return wh}function rE(t,e){const n=t.getShaderSource(e).split(`
`).map((c,d)=>`${d}: ${c}`),r=t.getShaderInfoLog(e),i=r.split(`
`),s={},o=i.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!s[c]?(s[c]=!0,!0):!1),a=[""];o.forEach(c=>{n[c-1]=`%c${n[c-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=n.join(`
`);a[0]=l,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function sz(t,e,n,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||rE(t,n),t.getShaderParameter(r,t.COMPILE_STATUS)||rE(t,r),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const oz={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function hk(t){return oz[t]}let Sh=null;const iE={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function dk(t,e){if(!Sh){const n=Object.keys(iE);Sh={};for(let r=0;r<n.length;++r){const i=n[r];Sh[t[i]]=iE[i]}}return Sh[e]}function sE(t,e,n){if(t.substring(0,9)!=="precision"){let r=e;return e===Wn.HIGH&&n!==Wn.HIGH&&(r=Wn.MEDIUM),`precision ${r} float;
${t}`}else if(n!==Wn.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let Dl;function az(){if(typeof Dl=="boolean")return Dl;try{Dl=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Dl=!1}return Dl}let lz=0;const Eh={},jo=class{constructor(t,e,n="pixi-shader",r={}){this.extra={},this.id=lz++,this.vertexSrc=t||jo.defaultVertexSrc,this.fragmentSrc=e||jo.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=r,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Eh[n]?(Eh[n]++,n+=`-${Eh[n]}`):Eh[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=sE(this.vertexSrc,jo.defaultVertexPrecision,Wn.HIGH),this.fragmentSrc=sE(this.fragmentSrc,jo.defaultFragmentPrecision,iz())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return J9}static get defaultFragmentSrc(){return Q9}static from(t,e,n){const r=t+e;let i=ZS[r];return i||(ZS[r]=i=new jo(t,e,n)),i}};let wr=jo;wr.defaultVertexPrecision=Wn.HIGH;wr.defaultFragmentPrecision=Si.apple.device?Wn.HIGH:Wn.MEDIUM;let cz=0;class Pr{constructor(e,n,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=cz++,this.static=!!n,this.ubo=!!r,e instanceof gt?(this.buffer=e,this.buffer.type=ni.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new gt(new Float32Array(1)),this.buffer.type=ni.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,n,r){if(!this.ubo)this.uniforms[e]=new Pr(n,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,n,r){return new Pr(e,n,r)}static uboFrom(e,n){return new Pr(e,n??!0,!0)}}class ri{constructor(e,n){this.uniformBindCount=0,this.program=e,n?n instanceof Pr?this.uniformGroup=n:this.uniformGroup=new Pr(n):this.uniformGroup=new Pr({}),this.disposeRunner=new Cr("disposeShader")}checkUniformExists(e,n){if(n.uniforms[e])return!0;for(const r in n.uniforms){const i=n.uniforms[r];if(i.group&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,n,r){const i=wr.from(e,n);return new ri(i,r)}}class uz{constructor(e,n){if(this.vertexSrc=e,this.fragTemplate=n,this.programCache={},this.defaultGroupCache={},!n.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!n.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=s;this.defaultGroupCache[e]=Pr.from({uSamplers:r},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new wr(this.vertexSrc,i)}const n={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ve,default:this.defaultGroupCache[e]};return new ri(this.programCache[e],n)}generateSampleSrc(e){let n="";n+=`
`,n+=`
`;for(let r=0;r<e;r++)r>0&&(n+=`
else `),r<e-1&&(n+=`if(vTextureId < ${r}.5)`),n+=`
{`,n+=`
	color = texture2D(uSamplers[${r}], vTextureCoord);`,n+=`
}`;return n+=`
`,n+=`
`,n}}class Vv{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function hz(){return!Si.apple.device}function dz(t){let e=!0;const n=Y.ADAPTER.getNavigator();if(Si.tablet||Si.phone){if(Si.apple.device){const r=n.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(e=!1)}if(Si.android.device){const r=n.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(e=!1)}}return e?t:4}class $p{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var fz=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,pz=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const lr=class extends $p{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=ok,this.vertexSize=6,this.state=Gi.for2d(),this.size=lr.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??dz(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??hz(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return we("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return pz}static get defaultFragmentTemplate(){return fz}setShaderGenerator({vertex:t=lr.defaultVertexSrc,fragment:e=lr.defaultFragmentTemplate}={}){this.shaderGenerator=new uz(t,e)}contextChange(){const t=this.renderer.gl;Y.PREFER_ENV===yo.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),lr.defaultMaxTextures),this.maxTextures=j9(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=lr,n=this.size/4,r=Math.floor(n/this.maxTextures)+1;for(;t.length<n;)t.push(new zv);for(;e.length<r;)e.push(new Vv);for(let i=0;i<this.maxTextures;i++)this._tempBoundTextures[i]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,n=lr._textureArrayPool,r=this.renderer.batch,i=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++fe._globalBatch,a=0,l=n[0],c=0;r.copyBoundTextures(i,e);for(let d=0;d<this._bufferSize;++d){const u=t[d];t[d]=null,u._batchEnabled!==o&&(l.count>=e&&(r.boundArray(l,i,o,e),this.buildDrawCalls(l,c,d),c=d,l=n[++a],++o),u._batchEnabled=o,u.touched=s,l.elements[l.count++]=u)}l.count>0&&(r.boundArray(l,i,o,e),this.buildDrawCalls(l,c,this._bufferSize),++a,++o);for(let d=0;d<i.length;d++)i[d]=null;fe._globalBatch=o}buildDrawCalls(t,e,n){const{_bufferedElements:r,_attributeBuffer:i,_indexBuffer:s,vertexSize:o}=this,a=lr._drawCallPool;let l=this._dcIndex,c=this._aIndex,d=this._iIndex,u=a[l];u.start=this._iIndex,u.texArray=t;for(let h=e;h<n;++h){const f=r[h],p=f._texture.baseTexture,m=ek[p.alphaMode?1:0][f.blendMode];r[h]=null,e<h&&u.blend!==m&&(u.size=d-u.start,e=h,u=a[++l],u.texArray=t,u.start=d),this.packInterleavedGeometry(f,i,s,c,d),c+=f.vertexData.length/2*o,d+=f.indices.length,u.blend=m}e<n&&(u.size=d-u.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=d}bindAndClearTexArray(t){const e=this.renderer.texture;for(let n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:n}=this;lr.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:n}=this.renderer,r=lr._drawCallPool;let i=null;for(let s=0;s<t;s++){const{texArray:o,type:a,size:l,start:c,blend:d}=r[s];i!==o&&(i=o,this.bindAndClearTexArray(o)),this.state.blendMode=d,n.set(this.state),e.drawElements(a,l,e.UNSIGNED_SHORT,c*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),lr.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=lf(Math.ceil(t/8)),n=qS(e),r=e*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new jv(r*this.vertexSize*4)),i}getIndexBuffer(t){const e=lf(Math.ceil(t/12)),n=qS(e),r=e*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i}packInterleavedGeometry(t,e,n,r,i){const{uint32View:s,float32View:o}=e,a=r/this.vertexSize,l=t.uvs,c=t.indices,d=t.vertexData,u=t._texture.baseTexture._batchLocation,h=Math.min(t.worldAlpha,1),f=Le.shared.setValue(t._tintRGB).toPremultiplied(h,t._texture.baseTexture.alphaMode>0);for(let p=0;p<d.length;p+=2)o[r++]=d[p],o[r++]=d[p+1],o[r++]=l[p],o[r++]=l[p+1],s[r++]=f,o[r++]=u;for(let p=0;p<c.length;p++)n[i++]=a+c[p]}};let vr=lr;vr.defaultBatchSize=4096;vr.extension={name:"batch",type:q.RendererPlugin};vr._drawCallPool=[];vr._textureArrayPool=[];se.add(vr);var mz=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,gz=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Kl=class extends ri{constructor(t,e,n){const r=wr.from(t||Kl.defaultVertexSrc,e||Kl.defaultFragmentSrc);super(r,n),this.padding=0,this.resolution=Kl.defaultResolution,this.multisample=Kl.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Gi}apply(t,e,n,r,i){t.applyFilter(this,e,n,r)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return gz}static get defaultFragmentSrc(){return mz}};let Mt=Kl;Mt.defaultResolution=1;Mt.defaultMultisample=ct.NONE;class Up{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Le(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:n,background:r,backgroundAlpha:i}=e,s=r??n;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}Up.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};Up.extension={type:[q.RendererSystem,q.CanvasRendererSystem],name:"background"};se.add(Up);class fk{constructor(e){this.renderer=e,this.emptyRenderer=new $p(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,n){const{boundTextures:r}=this.renderer.texture;for(let i=n-1;i>=0;--i)e[i]=r[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,n,r,i){const{elements:s,ids:o,count:a}=e;let l=0;for(let c=0;c<a;c++){const d=s[c],u=d._batchLocation;if(u>=0&&u<i&&n[u]===d){o[c]=u;continue}for(;l<i;){const h=n[l];if(h&&h._batchEnabled===r&&h._batchLocation===l){l++;continue}o[c]=l,d._batchLocation=l,n[l]=d;break}}}destroy(){this.renderer=null}}fk.extension={type:q.RendererSystem,name:"batch"};se.add(fk);let oE=0;class Hp{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=oE++}init(e){if(e.context)this.initFromContext(e.context);else{const n=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:n,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=oE++,this.renderer.runners.contextChange.emit(e);const n=this.renderer.view;n.addEventListener!==void 0&&(n.addEventListener("webglcontextlost",this.handleContextLost,!1),n.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const n=this.createContext(this.renderer.view,e);this.initFromContext(n)}createContext(e,n){let r;if(Y.PREFER_ENV>=yo.WEBGL2&&(r=e.getContext("webgl2",n)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",n)||e.getContext("experimental-webgl",n),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,n={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,n,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,n,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const n=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),n&&!n.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Hp.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};Hp.extension={type:q.RendererSystem,name:"context"};se.add(Hp);class yz extends Pu{upload(e,n,r){const i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Or.UNPACK);const s=n.realWidth,o=n.realHeight;return r.width===s&&r.height===o?i.texSubImage2D(n.target,0,0,0,s,o,n.format,r.type,this.data):(r.width=s,r.height=o,i.texImage2D(n.target,0,r.internalFormat,s,o,0,n.format,r.type,this.data)),!0}}class Xv{constructor(e,n){this.width=Math.round(e||100),this.height=Math.round(n||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Cr("disposeFramebuffer"),this.multisample=ct.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,n){return this.colorTextures[e]=n||new fe(null,{scaleMode:qr.NEAREST,resolution:1,mipmap:li.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new fe(new yz(null,{width:this.width,height:this.height}),{scaleMode:qr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:li.OFF,format:V.DEPTH_COMPONENT,type:le.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,n){if(e=Math.round(e),n=Math.round(n),!(e===this.width&&n===this.height)){this.width=e,this.height=n,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const i=this.colorTextures[r],s=i.resolution;i.setSize(e/s,n/s)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,n/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class pk extends fe{constructor(e={}){if(typeof e=="number"){const n=arguments[0],r=arguments[1],i=arguments[2],s=arguments[3];e={width:n,height:r,scaleMode:i,resolution:s}}e.width=e.width||100,e.height=e.height||100,e.multisample??(e.multisample=ct.NONE),super(null,e),this.mipmap=li.OFF,this.valid=!0,this._clear=new Le([0,0,0,0]),this.framebuffer=new Xv(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(e,n){this.framebuffer.resize(e*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class xs extends Wc{constructor(e){const n=e,r=n.naturalWidth||n.videoWidth||n.width,i=n.naturalHeight||n.videoHeight||n.height;super(r,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,n,r){r===void 0&&!n.startsWith("data:")?e.crossOrigin=$9(n):r!==!1&&(e.crossOrigin=typeof r=="string"?r:"anonymous")}upload(e,n,r,i){const s=e.gl,o=n.realWidth,a=n.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1&&i.buffered.length===0)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Or.UNPACK),!this.noSubImage&&n.target===s.TEXTURE_2D&&r.width===o&&r.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,n.format,r.type,i):(r.width=o,r.height=a,s.texImage2D(n.target,0,r.internalFormat,n.format,r.type,i)),!0}update(){if(this.destroyed)return;const e=this.source,n=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(n,r),super.update()}dispose(){this.source=null}}class mk extends xs{constructor(e,n){if(n=n||{},typeof e=="string"){const r=new Image;xs.crossOrigin(r,e,n.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(n.createBitmap??Y.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,this.bitmap=null,this._load=null,n.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((n,r)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.resize(i.width,i.height),this._load=null,this.createBitmap?n(this.process()):n(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{r(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const n=globalThis.createImageBitmap,r=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then(i=>i.blob()).then(i=>n(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Or.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,n,r){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,n,r,this.bitmap),!this.preserveBitmap){let i=!0;const s=n._glTextures;for(const o in s){const a=s[o];if(a!==r&&a.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class gk{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,n,r){const i=n.width,s=n.height;if(r){const o=e.width/2/i,a=e.height/2/s,l=e.x/i+o,c=e.y/s+a;r=Ye.add(r,Ye.NW),this.x0=l+o*Ye.uX(r),this.y0=c+a*Ye.uY(r),r=Ye.add(r,2),this.x1=l+o*Ye.uX(r),this.y1=c+a*Ye.uY(r),r=Ye.add(r,2),this.x2=l+o*Ye.uX(r),this.y2=c+a*Ye.uY(r),r=Ye.add(r,2),this.x3=l+o*Ye.uX(r),this.y3=c+a*Ye.uY(r)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const aE=new gk;function Th(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class te extends Su{constructor(e,n,r,i,s,o,a){if(super(),this.noFrame=!1,n||(this.noFrame=!0,n=new pe(0,0,1,1)),e instanceof te&&(e=e.baseTexture),this.baseTexture=e,this._frame=n,this.trim=i,this.valid=!1,this._uvs=aE,this.uvMatrix=null,this.orig=r||n,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new ue(o.x,o.y):new ue(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=n:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:n}=this.baseTexture;n?.url&&$r[n.url]&&te.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,te.removeFromCache(this),this.textureCacheIds=null}clone(){const e=this._frame.clone(),n=this._frame===this.orig?e:this.orig.clone(),r=new te(this.baseTexture,!this.noFrame&&e,n,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===aE&&(this._uvs=new gk),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,n={},r=Y.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else if(e instanceof fe){if(!e.cacheId){const a=n?.pixiIdPrefix||"pixiid";e.cacheId=`${a}-${oo()}`,fe.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=n?.pixiIdPrefix||"pixiid";e._pixiId=`${a}_${oo()}`}s=e._pixiId}let o=$r[s];if(i&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof fe)?(n.resolution||(n.resolution=vs(e)),o=new te(new fe(e,n)),o.baseTexture.cacheId=s,fe.addToCache(o.baseTexture,s),te.addToCache(o,s)):!o&&e instanceof fe&&(o=new te(e),te.addToCache(o,s)),o}static fromURL(e,n){const r=Object.assign({autoLoad:!1},n?.resourceOptions),i=te.from(e,Object.assign({resourceOptions:r},n),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,n,r,i){return new te(fe.fromBuffer(e,n,r,i))}static fromLoader(e,n,r,i){const s=new fe(e,Object.assign({scaleMode:fe.defaultOptions.scaleMode,resolution:vs(n)},i)),{resource:o}=s;o instanceof mk&&(o.url=n);const a=new te(s);return r||(r=n),fe.addToCache(a.baseTexture,r),te.addToCache(a,r),r!==n&&(fe.addToCache(a.baseTexture,n),te.addToCache(a,n)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,n){n&&(e.textureCacheIds.includes(n)||e.textureCacheIds.push(n),$r[n]&&$r[n]!==e&&console.warn(`Texture added to the cache with an id [${n}] that already had an entry`),$r[n]=e)}static removeFromCache(e){if(typeof e=="string"){const n=$r[e];if(n){const r=n.textureCacheIds.indexOf(e);return r>-1&&n.textureCacheIds.splice(r,1),delete $r[e],n}}else if(e?.textureCacheIds){for(let n=0;n<e.textureCacheIds.length;++n)$r[e.textureCacheIds[n]]===e&&delete $r[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:n,y:r,width:i,height:s}=e,o=n+i>this.baseTexture.width,a=r+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",c=`X: ${n} + ${i} = ${n+i} > ${this.baseTexture.width}`,d=`Y: ${r} + ${s} = ${r+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${l} ${d}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return te._EMPTY||(te._EMPTY=new te(new fe),Th(te._EMPTY),Th(te._EMPTY.baseTexture)),te._EMPTY}static get WHITE(){if(!te._WHITE){const e=Y.ADAPTER.createCanvas(16,16),n=e.getContext("2d");e.width=16,e.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),te._WHITE=new te(fe.from(e)),Th(te._WHITE),Th(te._WHITE.baseTexture)}return te._WHITE}}class _o extends te{constructor(e,n){super(e,n),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,n,r=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(n*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:n}=this;n.resolution!==e&&(n.setResolution(e),this.resize(n.width,n.height,!1))}static create(e){return new _o(new pk(e))}}class yk{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,n,r=ct.NONE){const i=new pk(Object.assign({width:e,height:n,resolution:1,multisample:r},this.textureOptions));return new _o(i)}getOptimalTexture(e,n,r=1,i=ct.NONE){let s;e=Math.ceil(e*r-1e-6),n=Math.ceil(n*r-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||n!==this._pixelsHeight?(e=lf(e),n=lf(n),s=((e&65535)<<16|n&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,n,i)),o.filterPoolKey=s,o.setResolution(r),o}getFilterTexture(e,n,r){const i=this.getOptimalTexture(e.width,e.height,n||e.resolution,r||ct.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const n=e.filterPoolKey;e.filterFrame=null,this.texturePool[n].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const n in this.texturePool){const r=this.texturePool[n];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const n in this.texturePool){if(!(Number(n)<0))continue;const r=this.texturePool[n];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[n]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}yk.SCREEN_KEY=-1;class vz extends _s{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class vk extends _s{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new gt(this.vertices),this.uvBuffer=new gt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,n){let r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+n.width/e.width,this.uvs[3]=i,this.uvs[4]=r+n.width/e.width,this.uvs[5]=i+n.height/e.height,this.uvs[6]=r,this.uvs[7]=i+n.height/e.height,r=n.x,i=n.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+n.width,this.vertices[3]=i,this.vertices[4]=r+n.width,this.vertices[5]=i+n.height,this.vertices[6]=r,this.vertices[7]=i+n.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class _z{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=ct.NONE,this.sourceFrame=new pe,this.destinationFrame=new pe,this.bindingSourceFrame=new pe,this.bindingDestinationFrame=new pe,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Ch=[new ue,new ue,new ue,new ue],Fg=new Ve;class _k{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new yk,this.statePool=[],this.quad=new vz,this.quadUv=new vk,this.tempRect=new pe,this.activeState={},this.globalUniforms=new Pr({outputFrame:new pe,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,n){const r=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new _z,o=this.renderer.renderTexture;let a=n[0].resolution,l=n[0].multisample,c=n[0].padding,d=n[0].autoFit,u=n[0].legacy??!0;for(let p=1;p<n.length;p++){const m=n[p];a=Math.min(a,m.resolution),l=Math.min(l,m.multisample),c=this.useMaxPadding?Math.max(c,m.padding):c+m.padding,d=d&&m.autoFit,u=u||(m.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=a,s.multisample=l,s.legacy=u,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(c);const h=this.tempRect.copyFrom(o.sourceFrame);r.projection.transform&&this.transformAABB(Fg.copyFrom(r.projection.transform).invert(),h),d?(s.sourceFrame.fit(h),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(h)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:r.resolution,o.sourceFrame,o.destinationFrame,r.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a,l),s.filters=n,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const f=this.tempRect;f.x=0,f.y=0,f.width=s.sourceFrame.width,f.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=r.projection.transform,r.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,f),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,n=e.pop(),r=n.filters;this.activeState=n;const i=this.globalUniforms.uniforms;i.outputFrame=n.sourceFrame,i.resolution=n.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=n.destinationFrame.width,s[1]=n.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*n.resolution),o[1]=Math.round(s[1]*n.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=n.sourceFrame.width*s[2]-.5*o[2],a[3]=n.sourceFrame.height*s[3]-.5*o[3],n.legacy){const c=i.filterArea;c[0]=n.destinationFrame.width,c[1]=n.destinationFrame.height,c[2]=n.sourceFrame.x,c[3]=n.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,n.renderTexture,l.renderTexture,Vr.BLEND,n),this.returnFilterTexture(n.renderTexture);else{let c=n.renderTexture,d=this.getOptimalFilterTexture(c.width,c.height,n.resolution);d.filterFrame=c.filterFrame;let u=0;for(u=0;u<r.length-1;++u){u===1&&n.multisample>1&&(d=this.getOptimalFilterTexture(c.width,c.height,n.resolution),d.filterFrame=c.filterFrame),r[u].apply(this,c,d,Vr.CLEAR,n);const h=c;c=d,d=h}r[u].apply(this,c,l.renderTexture,Vr.BLEND,n),u>1&&n.multisample>1&&this.returnFilterTexture(n.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(d)}n.clear(),this.statePool.push(n)}bindAndClear(e,n=Vr.CLEAR){const{renderTexture:r,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e?.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,r.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(n===Vr.CLEAR||n===Vr.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,n,r,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(r,i),e.uniforms.uSampler=n,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(n._frame,n.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Kr.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Kr.TRIANGLE_STRIP))}calculateSpriteMatrix(e,n){const{sourceFrame:r,destinationFrame:i}=this.activeState,{orig:s}=n._texture,o=e.set(i.width,0,0,i.height,r.x,r.y),a=n.worldTransform.copyTo(Ve.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(n.anchor.x,n.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,n,r=1,i=ct.NONE){return this.texturePool.getOptimalTexture(e,n,r,i)}getFilterTexture(e,n,r){if(typeof e=="number"){const s=e;e=n,n=s}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,n||e.resolution,r||ct.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,n){const r=Ch[0],i=Ch[1],s=Ch[2],o=Ch[3];r.set(n.left,n.top),i.set(n.left,n.bottom),s.set(n.right,n.top),o.set(n.right,n.bottom),e.apply(r,r),e.apply(i,i),e.apply(s,s),e.apply(o,o);const a=Math.min(r.x,i.x,s.x,o.x),l=Math.min(r.y,i.y,s.y,o.y),c=Math.max(r.x,i.x,s.x,o.x),d=Math.max(r.y,i.y,s.y,o.y);n.x=a,n.y=l,n.width=c-a,n.height=d-l}roundFrame(e,n,r,i,s){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(s){const{a:o,b:a,c:l,d:c}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}s=s?Fg.copyFrom(s):Fg.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(n),this.transformAABB(s.invert(),e)}}}_k.extension={type:q.RendererSystem,name:"filter"};se.add(_k);class xz{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=ct.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const bz=new pe;class xk{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new Xv(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new pe,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let n=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;Y.PREFER_ENV===yo.WEBGL_LEGACY&&(n=null,r=null),n?e.drawBuffers=i=>n.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,n,r=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=r),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),n){const o=n.width>>r,a=n.height>>r,l=o/n.width;this.setViewport(n.x*l,n.y*l,o,a)}else{const o=e.width>>r,a=e.height>>r;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),n?this.setViewport(n.x,n.y,n.width,n.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,n,r,i){const s=this.viewport;e=Math.round(e),n=Math.round(n),r=Math.round(r),i=Math.round(i),(s.width!==r||s.height!==i||s.x!==e||s.y!==n)&&(s.x=e,s.y=n,s.width=r,s.height=i,this.gl.viewport(e,n,r,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,n,r,i,s=Ev.COLOR|Ev.DEPTH){const{gl:o}=this;o.clearColor(e,n,r,i),o.clear(s)}initFramebuffer(e){const{gl:n}=this,r=new xz(n.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:n}=this,r=e.glFramebuffers[this.CONTEXT_UID];r.stencil&&(n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height));const i=e.colorTextures;let s=i.length;n.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&r.msaaBuffer&&(n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,n){const{gl:r}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;r.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer():i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const c=s[l],d=c.parentTextureArray||c;this.renderer.texture.bind(d,0),l===0&&i.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,d._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+l,c.target,d._glTextures[this.CONTEXT_UID].texture,n),a.push(r.COLOR_ATTACHMENT0+l))}if(a.length>1&&r.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const c=e.depthTexture;this.renderer.texture.bind(c,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,n)}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,i.stencil)):i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:n}=this;let r=ct.NONE;if(e<=1||n===null)return r;for(let i=0;i<n.length;i++)if(n[i]<=e){r=n[i];break}return r===1&&(r=ct.NONE),r}blit(e,n,r){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const l=i.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const d=i.colorTextures[0];if(!d)return;l.blitFramebuffer||(l.blitFramebuffer=new Xv(i.width,i.height),l.blitFramebuffer.addColorTexture(0,d)),e=l.blitFramebuffer,e.colorTextures[0]!==d&&(e.colorTextures[0]=d,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}n||(n=bz,n.width=i.width,n.height=i.height),r||(r=n);const c=n.width===r.width&&n.height===r.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(n.left,n.top,n.right,n.bottom,r.left,r.top,r.right,r.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,n){const r=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),n||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,n)}disposeAll(e){const n=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<n.length;r++)this.disposeFramebuffer(n[r],e)}forceStencil(){const e=this.current;if(!e)return;const n=e.glFramebuffers[this.CONTEXT_UID];if(!n||n.stencil)return;e.stencil=!0;const r=e.width,i=e.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),n.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,s.DEPTH24_STENCIL8,r,i):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,r,i),n.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new pe}destroy(){this.renderer=null}}xk.extension={type:q.RendererSystem,name:"framebuffer"};se.add(xk);const $g={5126:4,5123:2,5121:1};class bk{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,n=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,n.webGLVersion!==2){let r=this.renderer.context.extensions.vertexArrayObject;Y.PREFER_ENV===yo.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=()=>r.createVertexArrayOES(),e.bindVertexArray=i=>r.bindVertexArrayOES(i),e.deleteVertexArray=i=>r.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(n.webGLVersion!==2){const r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=(i,s)=>r.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,l)=>r.drawElementsInstancedANGLE(i,s,o,a,l),e.drawArraysInstanced=(i,s,o,a)=>r.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=n.webGLVersion===2||!!n.extensions.uint32ElementIndex}bind(e,n){n=n||this.renderer.shader.shader;const{gl:r}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[n.program.id]||this.initGeometryVao(e,n,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(e,n.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,n=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){const i=e.buffers[r];n.update(i)}}checkCompatibility(e,n){const r=e.attributes,i=n.attributeData;for(const s in i)if(!r[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,n){const r=e.attributes,i=n.attributeData,s=["g",e.id];for(const o in r)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,n,r=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=n.program;a.glPrograms[s]||this.renderer.shader.generateProgram(n),this.checkCompatibility(e,a);const l=this.getSignature(e,a),c=e.glVertexArrayObjects[this.CONTEXT_UID];let d=c[l];if(d)return c[a.id]=d,d;const u=e.buffers,h=e.attributes,f={},p={};for(const m in u)f[m]=0,p[m]=0;for(const m in h)!h[m].size&&a.attributeData[m]?h[m].size=a.attributeData[m].size:h[m].size||console.warn(`PIXI Geometry attribute '${m}' size cannot be determined (likely the bound shader does not have the attribute)`),f[h[m].buffer]+=h[m].size*$g[h[m].type];for(const m in h){const y=h[m],g=y.size;y.stride===void 0&&(f[y.buffer]===g*$g[y.type]?y.stride=0:y.stride=f[y.buffer]),y.start===void 0&&(y.start=p[y.buffer],p[y.buffer]+=g*$g[y.type])}d=i.createVertexArray(),i.bindVertexArray(d);for(let m=0;m<u.length;m++){const y=u[m];o.bind(y),r&&y._glBuffers[s].refCount++}return this.activateVao(e,a),c[a.id]=d,c[l]=d,i.bindVertexArray(null),o.unbind(ni.ARRAY_BUFFER),d}disposeGeometry(e,n){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=this.renderer?.buffer;if(e.disposeRunner.remove(this),!!r){if(o)for(let a=0;a<s.length;a++){const l=s[a]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!n&&o.dispose(s[a],n))}if(!n){for(const a in r)if(a[0]==="g"){const l=r[a];this._activeVao===l&&this.unbind(),i.deleteVertexArray(l)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const n=Object.keys(this.managedGeometries);for(let r=0;r<n.length;r++)this.disposeGeometry(this.managedGeometries[n[r]],e)}activateVao(e,n){const r=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const c in a){const d=a[c],u=o[d.buffer],h=u._glBuffers[i];if(n.attributeData[c]){l!==h&&(s.bind(u),l=h);const f=n.attributeData[c].location;if(r.enableVertexAttribArray(f),r.vertexAttribPointer(f,d.size,d.type||r.FLOAT,d.normalized,d.stride,d.start),d.instance)if(this.hasInstance)r.vertexAttribDivisor(f,d.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,n,r,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,n||o.indexBuffer.data.length,l,(r||0)*a,i||1):s.drawElements(e,n||o.indexBuffer.data.length,l,(r||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,r,n||o.getSize(),i||1):s.drawArrays(e,r,n||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}bk.extension={type:q.RendererSystem,name:"geometry"};se.add(bk);const lE=new Ve;class tb{constructor(e,n){this._texture=e,this.mapCoord=new Ve,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof n>"u"?.5:n,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,n){n===void 0&&(n=e);const r=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];n[i]=s*r.a+o*r.c+r.tx,n[i+1]=s*r.b+o*r.d+r.ty}return n}update(e){const n=this._texture;if(!n||!n.valid||!e&&this._textureID===n._updateID)return!1;this._textureID=n._updateID,this._updateID++;const r=n._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const i=n.orig,s=n.trim;s&&(lE.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(lE));const o=n.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(n._frame.x+l+c)/o.width,a[1]=(n._frame.y+l+c)/o.height,a[2]=(n._frame.x+n._frame.width-l+c)/o.width,a[3]=(n._frame.y+n._frame.height-l+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=n._frame.width===o.width&&n._frame.height===o.height&&n.rotate===0,!0}}var wz=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Sz=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class Ez extends Mt{constructor(e,n,r){let i=null;typeof e!="string"&&n===void 0&&r===void 0&&(i=e,e=void 0,n=void 0,r=void 0),super(e||Sz,n||wz,r),this.maskSprite=i,this.maskMatrix=new Ve}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,n,r,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new tb(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,n,r,i))}}class Tz{constructor(e=null){this.type=ft.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Mt.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=ft.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class wk{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,n){let r=n;if(!r.isMaskData){const s=this.maskDataPool.pop()||new Tz;s.pooled=!0,s.maskObject=n,r=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(i),r._colorMask=i?i._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==ft.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case ft.SCISSOR:this.renderer.scissor.push(r);break;case ft.STENCIL:this.renderer.stencil.push(r);break;case ft.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case ft.COLOR:this.pushColorMask(r);break}r.type===ft.SPRITE&&this.maskStack.push(r)}pop(e){const n=this.maskStack.pop();if(!(!n||n._target!==e)){if(n.enabled)switch(n.type){case ft.SCISSOR:this.renderer.scissor.pop(n);break;case ft.STENCIL:this.renderer.stencil.pop(n.maskObject);break;case ft.SPRITE:this.popSpriteMask(n);break;case ft.COLOR:this.popColorMask(n);break}if(n.reset(),n.pooled&&this.maskDataPool.push(n),this.maskStack.length!==0){const r=this.maskStack[this.maskStack.length-1];r.type===ft.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}}detect(e){const n=e.maskObject;n?n.isSprite?e.type=ft.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=ft.SCISSOR:e.type=ft.STENCIL:e.type=ft.COLOR}pushSpriteMask(e){const{maskObject:n}=e,r=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new Ez]));const s=this.renderer,o=s.renderTexture;let a,l;if(o.current){const d=o.current;a=e.resolution||d.resolution,l=e.multisample??d.multisample}else a=e.resolution||s.resolution,l=e.multisample??s.multisample;i[0].resolution=a,i[0].multisample=l,i[0].maskSprite=n;const c=r.filterArea;r.filterArea=n.getBounds(!0),s.filter.push(r,i),r.filterArea=c,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const n=e._colorMask,r=e._colorMask=n&e.colorMask;r!==n&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}popColorMask(e){const n=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==n&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}destroy(){this.renderer=null}}wk.extension={type:q.RendererSystem,name:"mask"};se.add(wk);class Sk{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:n}=this.renderer,r=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==r&&(i===0?n.disable(this.glConst):(n.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const cE=new Ve,uE=[],sd=class extends Sk{constructor(t){super(t),this.glConst=Y.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:n}=t,{renderer:r}=this,i=r.renderTexture,s=n.getBounds(!0,uE.pop()??new pe);this.roundFrameToPixels(s,i.current?i.current.resolution:r.resolution,i.sourceFrame,i.destinationFrame,r.projection.transform),e&&s.fit(e),t._scissorRectLocal=s}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:n,c:r,d:i}=t;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||sd.isMatrixRotated(e.worldTransform)||sd.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const n=t._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(t,e,n,r,i){sd.isMatrixRotated(i)||(i=i?cE.copyFrom(i):cE.identity(),i.translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.renderer.filter.transformAABB(i,t),t.fit(r),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&uE.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};let Ek=sd;Ek.extension={type:q.RendererSystem,name:"scissor"};se.add(Ek);class Tk extends Sk{constructor(e){super(e),this.glConst=Y.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const n=e.maskObject,{gl:r}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,i,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,s!==0&&(e._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const n=this.renderer.gl;if(this.getStackLength()===0)n.disable(n.STENCIL_TEST);else{const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=r?r._colorMask:15;i!==0&&(r._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(r._colorMask=i,n.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}Tk.extension={type:q.RendererSystem,name:"stencil"};se.add(Tk);class Ck{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return we("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return we("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return we("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const n in e)this.plugins[n]=new e[n](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}Ck.extension={type:[q.RendererSystem,q.CanvasRendererSystem],name:"_plugin"};se.add(Ck);class Pk{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ve,this.transform=null}update(e,n,r,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=n||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,n,r,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/n.width*2,s.d=o*(1/n.height*2),s.tx=-1-n.x*s.a,s.ty=-o-n.y*s.d}setTransform(e){}destroy(){this.renderer=null}}Pk.extension={type:q.RendererSystem,name:"projection"};se.add(Pk);const Cz=new Fp;class Ak{constructor(e){this.renderer=e,this._tempMatrix=new Ve}generateTexture(e,n){const{region:r,...i}=n||{},s=r||e.getLocalBounds(null,!0);s.width===0&&(s.width=1),s.height===0&&(s.height=1);const o=_o.create({width:s.width,height:s.height,...i});this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const a=e.transform;return e.transform=Cz,this.renderer.render(e,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=a,o}destroy(){}}Ak.extension={type:[q.RendererSystem,q.CanvasRendererSystem],name:"textureGenerator"};se.add(Ak);const Is=new pe,Ol=new pe;class Rk{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new pe,this.destinationFrame=new pe,this.viewportFrame=new pe}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,n,r){const i=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,n||(Is.width=e.frame.width,Is.height=e.frame.height,n=Is),r||(Ol.x=e.frame.x,Ol.y=e.frame.y,Ol.width=n.width,Ol.height=n.height,r=Ol),o=s.framebuffer):(a=i.resolution,n||(Is.width=i._view.screen.width,Is.height=i._view.screen.height,n=Is),r||(r=Is,r.width=n.width,r.height=n.height));const l=this.viewportFrame;l.x=r.x*a,l.y=r.y*a,l.width=r.width*a,l.height=r.height*a,e||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(r,n,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(n),this.destinationFrame.copyFrom(r)}clear(e,n){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=Le.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:c,width:d,height:u}=this.viewportFrame;l=Math.round(l),c=Math.round(c),d=Math.round(d),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,c,d,u)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,n),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Rk.extension={type:q.RendererSystem,name:"renderTexture"};se.add(Rk);class Pz{constructor(e,n){this.program=e,this.uniformData=n,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function Az(t,e){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=e.getActiveAttrib(t,i);if(s.name.startsWith("gl_"))continue;const o=dk(e,s.type),a={type:o,name:s.name,size:hk(o),location:e.getAttribLocation(t,s.name)};n[s.name]=a}return n}function Rz(t,e){const n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;i++){const s=e.getActiveUniform(t,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=dk(e,s.type);n[o]={name:o,index:i,type:l,size:s.size,isArray:a,value:ck(l,s.size)}}return n}function Iz(t,e){const n=nE(t,t.VERTEX_SHADER,e.vertexSrc),r=nE(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();t.attachShader(i,n),t.attachShader(i,r);const s=e.extra?.transformFeedbackVaryings;if(s&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||sz(t,i,n,r),e.attributeData=Az(i,t),e.uniformData=Rz(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((c,d)=>c>d?1:-1);for(let c=0;c<l.length;c++)e.attributeData[l[c]].location=c,t.bindAttribLocation(i,c,l[c]);t.linkProgram(i)}t.deleteShader(n),t.deleteShader(r);const o={};for(const l in e.uniformData){const c=e.uniformData[l];o[l]={location:t.getUniformLocation(i,l),value:ck(c.type,c.size)}}return new Pz(i,o)}function kz(t,e,n,r,i){n.buffer.update(i)}const Mz={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Ik={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function Dz(t){const e=t.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let n=0,r=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(n=Ik[o.data.type],o.data.size>1&&(n=Math.max(n,16)*o.data.size),o.dataLen=n,r%n!==0&&r<16){const a=r%n%16;r+=a,i+=a}r+n>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=n,r=n):(o.offset=i,r+=n,i+=n)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function Oz(t,e){const n=[];for(const r in t)e[r]&&n.push(e[r]);return n.sort((r,i)=>r.index-i.index),n}function Nz(t,e){if(!t.autoManage)return{size:0,syncFunc:kz};const n=Oz(t.uniforms,e),{uboElements:r,size:i}=Dz(n),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<r.length;o++){const a=r[o],l=t.uniforms[a.data.name],c=a.data.name;let d=!1;for(let u=0;u<Ea.length;u++){const h=Ea[u];if(h.codeUbo&&h.test(a.data,l)){s.push(`offset = ${a.offset/4};`,Ea[u].codeUbo(a.data.name,l)),d=!0;break}}if(!d)if(a.data.size>1){const u=hk(a.data.type),h=Math.max(Ik[a.data.type]/16,1),f=u/h,p=(4-f%4)%4;s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*h}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const u=Mz[a.data.type];s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};
                ${u};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let Lz=0;const Ph={textureCount:0,uboCount:0};class kk{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Lz++}systemCheck(){if(!az())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,n){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),n||(Ph.textureCount=0,Ph.uboCount=0,this.syncUniformGroup(e.uniformGroup,Ph)),i}setUniforms(e){const n=this.shader.program,r=n.glPrograms[this.renderer.CONTEXT_UID];n.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,n){const r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,n))}syncUniforms(e,n,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(n.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const n=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[n]||(this.cache[n]=nz(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[n],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,n){const r=this.getGlProgram();if(!e.static||e.dirtyId!==0||!r.uniformGroups[e.id]){e.dirtyId=0;const i=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,n);e.buffer.update(),i(r.uniformData,e.uniforms,this.renderer,Ph,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[n])}createSyncBufferGroup(e,n,r){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(n.program,r);n.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(n.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=Nz(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return n.uniformGroups[e.id]=a.syncFunc,n.uniformGroups[e.id]}getSignature(e,n,r){const i=e.uniforms,s=[`${r}-`];for(const o in i)s.push(o),n[o]&&s.push(n[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const n=this.gl,r=e.program,i=Iz(n,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}kk.extension={type:q.RendererSystem,name:"shader"};se.add(kk);class jp{constructor(e){this.renderer=e}run(e){const{renderer:n}=this;n.runners.init.emit(n.options),e.hello&&console.log(`PixiJS 7.2.4 - ${n.rendererLogId} - https://pixijs.com`),n.resize(n.screen.width,n.screen.height)}destroy(){}}jp.defaultOptions={hello:!1};jp.extension={type:[q.RendererSystem,q.CanvasRendererSystem],name:"startup"};se.add(jp);function Bz(t,e=[]){return e[he.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.ADD]=[t.ONE,t.ONE],e[he.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.NONE]=[0,0],e[he.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[he.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[he.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[he.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[he.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[he.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[he.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[he.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[he.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[he.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[he.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const Fz=0,$z=1,Uz=2,Hz=3,jz=4,Gz=5,Yv=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=he.NONE,this._blendEq=!1,this.map=[],this.map[Fz]=this.setBlend,this.map[$z]=this.setOffset,this.map[Uz]=this.setCullFace,this.map[Hz]=this.setDepthTest,this.map[jz]=this.setFrontFace,this.map[Gz]=this.setDepthMask,this.checks=[],this.defaultState=new Gi,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=Bz(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,n=0;for(;e;)e&1&&this.map[n].call(this,!!(t.data&1<<n)),e=e>>1,n++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(Yv.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(Yv.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],n=this.gl;e.length===2?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const n=this.checks.indexOf(t);e&&n===-1?this.checks.push(t):!e&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let Mk=Yv;Mk.extension={type:q.RendererSystem,name:"state"};se.add(Mk);class zz extends Su{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const n=(e.priority??[]).filter(i=>e.systems[i]),r=[...n,...Object.keys(e.systems).filter(i=>!n.includes(i))];for(const i of r)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(n=>{this.runners[n]=new Cr(n)})}addSystem(e,n){const r=new e(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=r,this._systemsHash[n]=r;for(const i in this.runners)this.runners[i].add(r);return this}emitWithCustomOptions(e,n){const r=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=r.find(o=>this._systemsHash[o]===i);i[e.name](n[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const od=class{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=od.defaultMaxIdle,this.checkCountMax=od.defaultCheckCountMax,this.mode=od.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==zx.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let n=!1;for(let r=0;r<e.length;r++){const i=e[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[r]=null,n=!0)}if(n){let r=0;for(let i=0;i<e.length;i++)e[i]!==null&&(e[r++]=e[i]);e.length=r}}unload(t){const e=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&e.destroyTexture(n);for(let r=t.children.length-1;r>=0;r--)this.unload(t.children[r])}destroy(){this.renderer=null}};let _r=od;_r.defaultMode=zx.AUTO;_r.defaultMaxIdle=60*60;_r.defaultCheckCountMax=60*10;_r.extension={type:q.RendererSystem,name:"textureGC"};se.add(_r);class Ug{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=le.UNSIGNED_BYTE,this.internalFormat=V.RGBA,this.samplerType=0}}function Wz(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[le.UNSIGNED_BYTE]:{[V.RGBA]:t.RGBA8,[V.RGB]:t.RGB8,[V.RG]:t.RG8,[V.RED]:t.R8,[V.RGBA_INTEGER]:t.RGBA8UI,[V.RGB_INTEGER]:t.RGB8UI,[V.RG_INTEGER]:t.RG8UI,[V.RED_INTEGER]:t.R8UI,[V.ALPHA]:t.ALPHA,[V.LUMINANCE]:t.LUMINANCE,[V.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[le.BYTE]:{[V.RGBA]:t.RGBA8_SNORM,[V.RGB]:t.RGB8_SNORM,[V.RG]:t.RG8_SNORM,[V.RED]:t.R8_SNORM,[V.RGBA_INTEGER]:t.RGBA8I,[V.RGB_INTEGER]:t.RGB8I,[V.RG_INTEGER]:t.RG8I,[V.RED_INTEGER]:t.R8I},[le.UNSIGNED_SHORT]:{[V.RGBA_INTEGER]:t.RGBA16UI,[V.RGB_INTEGER]:t.RGB16UI,[V.RG_INTEGER]:t.RG16UI,[V.RED_INTEGER]:t.R16UI,[V.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[le.SHORT]:{[V.RGBA_INTEGER]:t.RGBA16I,[V.RGB_INTEGER]:t.RGB16I,[V.RG_INTEGER]:t.RG16I,[V.RED_INTEGER]:t.R16I},[le.UNSIGNED_INT]:{[V.RGBA_INTEGER]:t.RGBA32UI,[V.RGB_INTEGER]:t.RGB32UI,[V.RG_INTEGER]:t.RG32UI,[V.RED_INTEGER]:t.R32UI,[V.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[le.INT]:{[V.RGBA_INTEGER]:t.RGBA32I,[V.RGB_INTEGER]:t.RGB32I,[V.RG_INTEGER]:t.RG32I,[V.RED_INTEGER]:t.R32I},[le.FLOAT]:{[V.RGBA]:t.RGBA32F,[V.RGB]:t.RGB32F,[V.RG]:t.RG32F,[V.RED]:t.R32F,[V.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[le.HALF_FLOAT]:{[V.RGBA]:t.RGBA16F,[V.RGB]:t.RGB16F,[V.RG]:t.RG16F,[V.RED]:t.R16F},[le.UNSIGNED_SHORT_5_6_5]:{[V.RGB]:t.RGB565},[le.UNSIGNED_SHORT_4_4_4_4]:{[V.RGBA]:t.RGBA4},[le.UNSIGNED_SHORT_5_5_5_1]:{[V.RGBA]:t.RGB5_A1},[le.UNSIGNED_INT_2_10_10_10_REV]:{[V.RGBA]:t.RGB10_A2,[V.RGBA_INTEGER]:t.RGB10_A2UI},[le.UNSIGNED_INT_10F_11F_11F_REV]:{[V.RGB]:t.R11F_G11F_B10F},[le.UNSIGNED_INT_5_9_9_9_REV]:{[V.RGB]:t.RGB9_E5},[le.UNSIGNED_INT_24_8]:{[V.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[le.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[V.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[le.UNSIGNED_BYTE]:{[V.RGBA]:t.RGBA,[V.RGB]:t.RGB,[V.ALPHA]:t.ALPHA,[V.LUMINANCE]:t.LUMINANCE,[V.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[le.UNSIGNED_SHORT_5_6_5]:{[V.RGB]:t.RGB},[le.UNSIGNED_SHORT_4_4_4_4]:{[V.RGBA]:t.RGBA},[le.UNSIGNED_SHORT_5_5_5_1]:{[V.RGBA]:t.RGBA}},e}class Dk{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new fe,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Wz(e);const n=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=n;for(let i=0;i<n;i++)this.boundTextures[i]=null;this.emptyTextures={};const r=new Ug(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Ug(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,n=0){const{gl:r}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[n]!==e&&(this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),r.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[n]=e}else this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[n]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:n,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<r.length;i++)r[i]===e&&(this.currentLocation!==i&&(n.activeTexture(n.TEXTURE0+i),this.currentLocation=i),n.bindTexture(e.target,this.emptyTextures[e.target].texture),r[i]=null)}ensureSamplerType(e){const{boundTextures:n,hasIntegerTextures:r,CONTEXT_UID:i}=this;if(r)for(let s=e-1;s>=0;--s){const o=n[s];o&&o._glTextures[i].samplerType!==Tv.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const n=new Ug(this.gl.createTexture());return n.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=n,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),n}initTextureType(e,n){n.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,this.webGLVersion===2&&e.type===le.HALF_FLOAT?n.type=this.gl.HALF_FLOAT:n.type=e.type}updateTexture(e){const n=e._glTextures[this.CONTEXT_UID];if(!n)return;const r=this.renderer;if(this.initTextureType(e,n),e.resource?.upload(r,e,n))n.samplerType!==Tv.FLOAT&&(this.hasIntegerTextures=!0);else{const i=e.realWidth,s=e.realHeight,o=r.gl;(n.width!==i||n.height!==s||n.dirtyId<0)&&(n.width=i,n.height=s,o.texImage2D(e.target,0,n.internalFormat,i,s,0,e.format,n.type,null))}e.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(e),n.dirtyId=e.dirtyId}destroyTexture(e,n){const{gl:r}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!n)){const i=this.managedTextures.indexOf(e);i!==-1&&wa(this.managedTextures,i,1)}}updateTextureStyle(e){const n=e._glTextures[this.CONTEXT_UID];n&&((e.mipmap===li.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?n.mipmap=!1:n.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?n.wrapMode=ds.CLAMP:n.wrapMode=e.wrapMode,e.resource?.style(this.renderer,e,n)||this.setStyle(e,n),n.dirtyStyleId=e.dirtyStyleId)}setStyle(e,n){const r=this.gl;if(n.mipmap&&e.mipmap!==li.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,n.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,n.wrapMode),n.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===qr.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===qr.LINEAR){const s=Math.min(e.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===qr.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===qr.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}Dk.extension={type:q.RendererSystem,name:"texture"};se.add(Dk);class Ok{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,n){const{gl:r,renderer:i}=this;n&&i.shader.bind(n),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:n,renderer:r,CONTEXT_UID:i}=this,s=n.createTransformFeedback();e._glTransformFeedbacks[i]=s,n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(r.buffer.update(a),a._glBuffers[i].refCount++,n.bindBufferBase(n.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,n){const r=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!n&&s.dispose(a,n))}r&&(n||i.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Ok.extension={type:q.RendererSystem,name:"transformFeedback"};se.add(Ok);class Gp{constructor(e){this.renderer=e}init(e){this.screen=new pe(0,0,e.width,e.height),this.element=e.view||Y.ADAPTER.createCanvas(),this.resolution=e.resolution||Y.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,n){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(n*this.resolution);const r=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=r,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",r,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}Gp.defaultOptions={width:800,height:600,resolution:Y.RESOLUTION,autoDensity:!1};Gp.extension={type:[q.RendererSystem,q.CanvasRendererSystem],name:"_view"};se.add(Gp);Y.PREFER_ENV=yo.WEBGL2;Y.STRICT_TEXTURE_CACHE=!1;Y.RENDER_OPTIONS={...Hp.defaultOptions,...Up.defaultOptions,...Gp.defaultOptions,...jp.defaultOptions};Object.defineProperties(Y,{WRAP_MODE:{get(){return fe.defaultOptions.wrapMode},set(t){we("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),fe.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return fe.defaultOptions.scaleMode},set(t){we("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),fe.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return fe.defaultOptions.mipmap},set(t){we("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),fe.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return fe.defaultOptions.anisotropicLevel},set(t){we("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),fe.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return we("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Mt.defaultResolution},set(t){Mt.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return we("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Mt.defaultMultisample},set(t){Mt.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return vr.defaultMaxTextures},set(t){we("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),vr.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return vr.defaultBatchSize},set(t){we("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),vr.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return vr.canUploadSameBuffer},set(t){we("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),vr.canUploadSameBuffer=t}},GC_MODE:{get(){return _r.defaultMode},set(t){we("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),_r.defaultMode=t}},GC_MAX_IDLE:{get(){return _r.defaultMaxIdle},set(t){we("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),_r.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return _r.defaultCheckCountMax},set(t){we("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),_r.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return wr.defaultVertexPrecision},set(t){we("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),wr.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return wr.defaultFragmentPrecision},set(t){we("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),wr.defaultFragmentPrecision=t}}});var ao=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(ao||{});class Hg{constructor(e,n=null,r=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=n,this.priority=r,this.once=i}match(e,n=null){return this.fn===e&&this.context===n}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const n=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=e?null:n,this.previous=null,n}}const wn=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Hg(null,null,1/0),this.deltaMS=1/wn.targetFPMS,this.elapsedMS=1/wn.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,n=ao.NORMAL){return this._addListener(new Hg(t,e,n))}addOnce(t,e,n=ao.NORMAL){return this._addListener(new Hg(t,e,n,!0))}_addListener(t){let e=this._head.next,n=this._head;if(!e)t.connect(n);else{for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}return this._startIfPossible(),this}remove(t,e){let n=this._head.next;for(;n;)n.match(t,e)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*wn.targetFPMS;const n=this._head;let r=n.next;for(;r;)r=r.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,wn.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!wn._shared){const t=wn._shared=new wn;t.autoStart=!0,t._protected=!0}return wn._shared}static get system(){if(!wn._system){const t=wn._system=new wn;t.autoStart=!0,t._protected=!0}return wn._system}};let Rt=wn;Rt.targetFPMS=.06;Object.defineProperties(Y,{TARGET_FPMS:{get(){return Rt.targetFPMS},set(t){we("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Rt.targetFPMS=t}}});class Nk{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,ao.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Rt.shared:new Rt,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}Nk.extension=q.Application;se.add(Nk);const Lk=[];se.handleByList(q.Renderer,Lk);function Vz(t){for(const e of Lk)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}var Xz=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Yz=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Kz=Xz,Bk=Yz;class Fk{constructor(e){this.renderer=e}contextChange(e){let n;if(this.renderer.context.webGLVersion===1){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}n>=ct.HIGH?this.multisample=ct.HIGH:n>=ct.MEDIUM?this.multisample=ct.MEDIUM:n>=ct.LOW?this.multisample=ct.LOW:this.multisample=ct.NONE}destroy(){}}Fk.extension={type:q.RendererSystem,name:"_multisample"};se.add(Fk);class qz{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class $k{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);n.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:n}=this;n.bindBuffer(e,null)}bindBufferBase(e,n){const{gl:r,CONTEXT_UID:i}=this;if(this.boundBufferBases[n]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[n]=e,r.bindBufferBase(r.UNIFORM_BUFFER,n,s.buffer)}}bindBufferRange(e,n,r){const{gl:i,CONTEXT_UID:s}=this;r=r||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,n||0,o.buffer,r*256,256)}update(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,n.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)n.bufferSubData(e.type,0,e.data);else{const s=e.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,n.bufferData(e.type,e.data,s)}}dispose(e,n){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),r&&(n||i.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const n=Object.keys(this.managedBuffers);for(let r=0;r<n.length;r++)this.dispose(this.managedBuffers[n[r]],e)}createGLBuffer(e){const{CONTEXT_UID:n,gl:r}=this;return e._glBuffers[n]=new qz(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[n]}}$k.extension={type:q.RendererSystem,name:"buffer"};se.add($k);class Uk{constructor(e){this.renderer=e}render(e,n){const r=this.renderer;let i,s,o,a;if(n&&(i=n.renderTexture,s=n.clear,o=n.transform,a=n.skipUpdateTransform),this.renderingToScreen=!i,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=o,!r.context.isLost){if(i||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}r.renderTexture.bind(i),r.batch.currentRenderer.start(),(s??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),i&&(n.blit&&r.framebuffer.blit(),i.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Uk.extension={type:q.RendererSystem,name:"objectRenderer"};se.add(Uk);const Kv=class extends zz{constructor(t){super(),this.type=bI.WEBGL,t=Object.assign({},Y.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Pr({projectionMatrix:new Ve},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Kv.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(we("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=Kv.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t?.forceCanvas?!1:b9()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return we("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return we("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return we("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return we("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){we("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return we("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){we("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return we("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};let hl=Kv;hl.extension={type:q.Renderer,priority:1};hl.__plugins={};hl.__systems={};se.handleByMap(q.RendererPlugin,hl.__plugins);se.handleByMap(q.RendererSystem,hl.__systems);se.add(hl);class Hk extends Wc{constructor(e,n){const{width:r,height:i}=n||{};super(r,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new fe;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,n){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof Wc?this.addResourceAt(e[r],r):this.addResourceAt(ik(e[r],n),r))}dispose(){for(let e=0,n=this.length;e<n;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,n){if(!this.items[n])throw new Error(`Index ${n} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[n].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)}unbind(e){super.unbind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)}load(){if(this._load)return this._load;const n=this.items.map(r=>r.resource).filter(r=>r).map(r=>r.load());return this._load=Promise.all(n).then(()=>{const{realWidth:r,realHeight:i}=this.items[0];return this.resize(r,i),Promise.resolve(this)}),this._load}}class Zz extends Hk{constructor(e,n){const{width:r,height:i}=n||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:r,height:i}),s&&this.initFromArray(s,n)}addBaseTextureAt(e,n){if(e.resource)this.addResourceAt(e.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=va.TEXTURE_2D_ARRAY}upload(e,n,r){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,i,0,n.format,r.type,null);for(let l=0;l<i;l++){const c=o[l];s[l]<c.dirtyId&&(s[l]=c.dirtyId,c.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,n.format,r.type,c.resource.source))}return!0}}class Qz extends xs{constructor(e){super(e)}static test(e){const{OffscreenCanvas:n}=globalThis;return n&&e instanceof n?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const ql=class extends Hk{constructor(t,e){const{width:n,height:r,autoLoad:i,linkBaseTexture:s}=e||{};if(t&&t.length!==ql.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:n,height:r});for(let o=0;o<ql.SIDES;o++)this.items[o].target=va.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=s!==!1,t&&this.initFromArray(t,e),i!==!1&&this.load()}bind(t){super.bind(t),t.target=va.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=va.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,n){const r=this.itemDirtyIds;for(let i=0;i<ql.SIDES;i++){const s=this.items[i];(r[i]<s.dirtyId||n.dirtyId<e.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(t,s,n),r[i]=s.dirtyId):r[i]<-1&&(t.gl.texImage2D(s.target,0,n.internalFormat,e.realWidth,e.realHeight,0,e.format,n.type,null),r[i]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===ql.SIDES}};let jk=ql;jk.SIDES=6;class sa extends xs{constructor(e,n){n=n||{};let r,i;typeof e=="string"?(r=sa.EMPTY,i=e):(r=e,i=null),super(r),this.url=i,this.crossOrigin=n.crossOrigin??!0,this.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,this._load=null,n.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,n)=>{if(this.url===null){e(this);return}try{const r=await Y.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await r.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Or.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=s,this.update(),e(this)}catch(r){if(this.destroyed)return;n(r),this.onError.emit(r)}}),this._load)}upload(e,n,r){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),super.upload(e,n,r)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return sa._EMPTY=sa._EMPTY??Y.ADAPTER.createCanvas(0,0),sa._EMPTY}}const ad=class extends xs{constructor(t,e){e=e||{},super(Y.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),t(this)},ad.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;xs.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,n=t.height;if(!e||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let r=e*this.scale,i=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(r=this._overrideWidth||this._overrideHeight/n*e,i=this._overrideHeight||this._overrideWidth/e*n),r=Math.round(r),i=Math.round(i);const s=this.source;s.width=r,s.height=i,s._pixiId=`canvas_${oo()}`,s.getContext("2d").drawImage(t,0,0,e,n,0,0,r,i),this._resolve(),this._resolve=null}}static getSize(t){const e=ad.SVG_SIZE.exec(t),n={};return e&&(n[e[1]]=Math.round(parseFloat(e[3])),n[e[5]]=Math.round(parseFloat(e[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&ad.SVG_XML.test(t)}};let Vc=ad;Vc.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;Vc.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const qv=class extends xs{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const n=document.createElement("video");n.setAttribute("preload","auto"),n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);const r=t[0].src||t[0];xs.crossOrigin(n,r,e.crossorigin);for(let i=0;i<t.length;++i){const s=document.createElement("source");let{src:o,mime:a}=t[i];o=o||t[i];const l=o.split("?").shift().toLowerCase(),c=l.slice(l.lastIndexOf(".")+1);a=a||qv.MIME_TYPES[c]||`video/${c}`,s.src=o,s.type=a,n.appendChild(s)}t=n}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){const e=Rt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise(e=>{this.valid?e(this):(this._resolve=e,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Rt.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(Rt.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._isConnectedToTicker&&(Rt.shared.remove(this.update,this),this._isConnectedToTicker=!1);const t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Rt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Rt.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t)}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||qv.TYPES.includes(e)}};let nb=qv;nb.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];nb.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};Gv.push(sa,mk,Qz,nb,Vc,Pu,jk,Zz);class hf{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?pe.EMPTY:(e=e||new pe(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,n){const{a:r,b:i,c:s,d:o,tx:a,ty:l}=e,c=r*n.x+s*n.y+a,d=i*n.x+o*n.y+l;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,d),this.maxY=Math.max(this.maxY,d)}addQuad(e){let n=this.minX,r=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,this.minX=n,this.minY=r,this.maxX=i,this.maxY=s}addFrame(e,n,r,i,s){this.addFrameMatrix(e.worldTransform,n,r,i,s)}addFrameMatrix(e,n,r,i,s){const o=e.a,a=e.b,l=e.c,c=e.d,d=e.tx,u=e.ty;let h=this.minX,f=this.minY,p=this.maxX,m=this.maxY,y=o*n+l*r+d,g=a*n+c*r+u;h=y<h?y:h,f=g<f?g:f,p=y>p?y:p,m=g>m?g:m,y=o*i+l*r+d,g=a*i+c*r+u,h=y<h?y:h,f=g<f?g:f,p=y>p?y:p,m=g>m?g:m,y=o*n+l*s+d,g=a*n+c*s+u,h=y<h?y:h,f=g<f?g:f,p=y>p?y:p,m=g>m?g:m,y=o*i+l*s+d,g=a*i+c*s+u,h=y<h?y:h,f=g<f?g:f,p=y>p?y:p,m=g>m?g:m,this.minX=h,this.minY=f,this.maxX=p,this.maxY=m}addVertexData(e,n,r){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=n;l<r;l+=2){const c=e[l],d=e[l+1];i=c<i?c:i,s=d<s?d:s,o=c>o?c:o,a=d>a?d:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,n,r,i){this.addVerticesMatrix(e.worldTransform,n,r,i)}addVerticesMatrix(e,n,r,i,s=0,o=s){const a=e.a,l=e.b,c=e.c,d=e.d,u=e.tx,h=e.ty;let f=this.minX,p=this.minY,m=this.maxX,y=this.maxY;for(let g=r;g<i;g+=2){const _=n[g],v=n[g+1],w=a*_+c*v+u,S=d*v+l*_+h;f=Math.min(f,w-s),m=Math.max(m,w+s),p=Math.min(p,S-o),y=Math.max(y,S+o)}this.minX=f,this.minY=p,this.maxX=m,this.maxY=y}addBounds(e){const n=this.minX,r=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<n?e.minX:n,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,n){const r=e.minX>n.minX?e.minX:n.minX,i=e.minY>n.minY?e.minY:n.minY,s=e.maxX<n.maxX?e.maxX:n.maxX,o=e.maxY<n.maxY?e.maxY:n.maxY;if(r<=s&&i<=o){const a=this.minX,l=this.minY,c=this.maxX,d=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=s>c?s:c,this.maxY=o>d?o:d}}addBoundsMatrix(e,n){this.addFrameMatrix(n,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,n){const r=e.minX>n.x?e.minX:n.x,i=e.minY>n.y?e.minY:n.y,s=e.maxX<n.x+n.width?e.maxX:n.x+n.width,o=e.maxY<n.y+n.height?e.maxY:n.y+n.height;if(r<=s&&i<=o){const a=this.minX,l=this.minY,c=this.maxX,d=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=s>c?s:c,this.maxY=o>d?o:d}}pad(e=0,n=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=n,this.maxY+=n)}addFramePad(e,n,r,i,s,o){e-=s,n-=o,r+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<n?this.minY:n,this.maxY=this.maxY>i?this.maxY:i}}class tt extends Su{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Fp,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new hf,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const n=Object.keys(e);for(let r=0;r<n.length;++r){const i=n[r];Object.defineProperty(tt.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,n){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new pe),n=this._boundsRect),this._bounds.getRectangle(n)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new pe),e=this._localBoundsRect),this._localBounds||(this._localBounds=new hf);const n=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=r,this.transform=n,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,n,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,n)}toLocal(e,n,r,i){return n&&(e=n.toGlobal(e,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,n=0,r=1,i=1,s=0,o=0,a=0,l=0,c=0){return this.position.x=e,this.position.y=n,this.scale.x=r||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=c,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new Jz),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*K9}set angle(e){this.transform.rotation=e*q9}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1))}if(this._mask=e,this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}}}class Jz extends tt{constructor(){super(...arguments),this.sortDirty=null}}tt.prototype.displayObjectUpdateTransform=tt.prototype.updateTransform;const eW=new Ve;function tW(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const Zv=class extends tt{constructor(){super(),this.children=[],this.sortableChildren=Zv.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const n=this.getChildIndex(t),r=this.getChildIndex(e);this.children[n]=e,this.children[r]=t,this.onChildrenChange(n<r?n:r)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(t);wa(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],n=this.children.indexOf(e);if(n===-1)return null;e.parent=null,e.transform._parentID=-1,wa(this.children,n,1),this._boundsID++,this.onChildrenChange(n),e.emit("removed",this),this.emit("childRemoved",e,this,n)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,wa(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const n=t,r=e,i=r-n;let s;if(i>0&&i<=r){s=this.children.splice(n,i);for(let o=0;o<s.length;++o)s[o].parent=null,s[o].transform&&(s[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let o=0;o<s.length;++o)s[o].emit("removed",this),this.emit("childRemoved",s[o],this,o);return s}else if(i===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,n=this.children.length;e<n;++e){const r=this.children[e];r._lastSortedIndex=e,!t&&r.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(tW),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const n=this.children[t];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const n=e._mask.isMaskData?e._mask.maskObject:e._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(e._bounds,n._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const n=super.getLocalBounds(t);if(!e)for(let r=0,i=this.children.length;r<i;++r){const s=this.children[r];s.visible&&s.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let n,r;this.cullArea?(n=this.cullArea,r=this.worldTransform):this._render!==Zv.prototype._render&&(n=this.getBounds(!0));const i=t.projection.transform;if(i&&(r?(r=eW.copyFrom(r),r.prepend(i)):r=i),n&&e.intersects(n,r))this._render(t);else if(this.cullArea)return;for(let s=0,o=this.children.length;s<o;++s){const a=this.children[s],l=a.cullable;a.cullable=l||!this.cullArea,a.render(t),a.cullable=l}}render(t){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters?.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let e=0,n=this.children.length;e<n;++e)this.children[e].render(t)}}renderAdvanced(t){const e=this.filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let i=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i])}const r=e&&this._enabledFilters?.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==ft.NONE));if(r&&t.batch.flush(),e&&this._enabledFilters?.length&&t.filter.push(this,this._enabledFilters),n&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let i=0,s=this.children.length;i<s;++i)this.children[i].render(t)}r&&t.batch.flush(),n&&t.mask.pop(this),e&&this._enabledFilters?.length&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t?.children,n=this.removeChildren(0,this.children.length);if(e)for(let r=0;r<n.length;++r)n[r].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};let ye=Zv;ye.defaultSortableChildren=!1;ye.prototype.containerUpdateTransform=ye.prototype.updateTransform;Object.defineProperties(Y,{SORTABLE_CHILDREN:{get(){return ye.defaultSortableChildren},set(t){we("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),ye.defaultSortableChildren=t}}});const Nl=new ue,nW=new Uint16Array([0,1,2,0,2,3]);class Be extends ye{constructor(e){super(),this._anchor=new rs(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Le(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=he.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||te.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=nW,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Y.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=ns(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=ns(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const n=this.transform.worldTransform,r=n.a,i=n.b,s=n.c,o=n.d,a=n.tx,l=n.ty,c=this.vertexData,d=e.trim,u=e.orig,h=this._anchor;let f=0,p=0,m=0,y=0;if(d?(p=d.x-h._x*u.width,f=p+d.width,y=d.y-h._y*u.height,m=y+d.height):(p=-h._x*u.width,f=p+u.width,y=-h._y*u.height,m=y+u.height),c[0]=r*p+s*y+a,c[1]=o*y+i*p+l,c[2]=r*f+s*y+a,c[3]=o*y+i*f+l,c[4]=r*f+s*m+a,c[5]=o*m+i*f+l,c[6]=r*p+s*m+a,c[7]=o*m+i*p+l,this._roundPixels){const g=Y.RESOLUTION;for(let _=0;_<c.length;++_)c[_]=Math.round(c[_]*g)/g}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,n=this.vertexTrimmedData,r=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,c=s.d,d=s.tx,u=s.ty,h=-i._x*r.width,f=h+r.width,p=-i._y*r.height,m=p+r.height;n[0]=o*h+l*p+d,n[1]=c*p+a*h+u,n[2]=o*f+l*p+d,n[3]=c*p+a*f+u,n[4]=o*f+l*m+d,n[5]=c*m+a*f+u,n[6]=o*h+l*m+d,n[7]=c*m+a*h+u}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,n=this._texture.orig;!e||e.width===n.width&&e.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new hf),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new pe),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Nl);const n=this._texture.orig.width,r=this._texture.orig.height,i=-n*this.anchor.x;let s=0;return Nl.x>=i&&Nl.x<i+n&&(s=-r*this.anchor.y,Nl.y>=s&&Nl.y<s+r)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e?.texture){const r=typeof e=="boolean"?e:e?.baseTexture;this._texture.destroy(!!r)}this._texture=null}static from(e,n){const r=e instanceof te?e:te.from(e,n);return new Be(r)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const n=ns(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const n=ns(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||te.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const Gk=new Ve;tt.prototype._cacheAsBitmap=!1;tt.prototype._cacheData=null;tt.prototype._cacheAsBitmapResolution=null;tt.prototype._cacheAsBitmapMultisample=null;class rW{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(tt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;this._cacheAsBitmap=t;let e;t?(this._cacheData||(this._cacheData=new rW),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});tt.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))};tt.prototype._initCachedDisplayObject=function(e){if(this._cacheData?.sprite)return;const n=this.alpha;this.alpha=1,e.batch.flush();const r=this.getLocalBounds(null,!0).clone();if(this.filters?.length){const h=this.filters[0].padding;r.pad(h)}r.ceil(Y.RESOLUTION);const i=e.renderTexture.current,s=e.renderTexture.sourceFrame.clone(),o=e.renderTexture.destinationFrame.clone(),a=e.projection.transform,l=_o.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:this.cacheAsBitmapMultisample??e.multisample}),c=`cacheAsBitmap_${oo()}`;this._cacheData.textureCacheId=c,fe.addToCache(l.baseTexture,c),te.addToCache(l,c);const d=this.transform.localTransform.copyTo(Gk).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:l,clear:!0,transform:d,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=a,e.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const u=new Be(l);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(r.x/r.width),u.anchor.y=-(r.y/r.height),u.alpha=n,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=u.containsPoint.bind(u)};tt.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))};tt.prototype._initCachedDisplayObjectCanvas=function(e){if(this._cacheData?.sprite)return;const n=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;const i=e.canvasContext.activeContext,s=e._projTransform;n.ceil(Y.RESOLUTION);const o=_o.create({width:n.width,height:n.height}),a=`cacheAsBitmap_${oo()}`;this._cacheData.textureCacheId=a,fe.addToCache(o.baseTexture,a),te.addToCache(o,a);const l=Gk;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=n.x,l.ty-=n.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),e.canvasContext.activeContext=i,e._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const c=new Be(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(n.x/n.width),c.anchor.y=-(n.y/n.height),c.alpha=r,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)};tt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};tt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};tt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,fe.removeFromCache(this._cacheData.textureCacheId),te.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};tt.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};tt.prototype.name=null;ye.prototype.getChildByName=function(e,n){for(let r=0,i=this.children.length;r<i;r++)if(this.children[r].name===e)return this.children[r];if(n)for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r];if(!s.getChildByName)continue;const o=s.getChildByName(e,!0);if(o)return o}return null};tt.prototype.getGlobalPosition=function(e=new ue,n=!1){return this.parent?this.parent.toGlobal(this.position,e,n):(e.x=this.position.x,e.y=this.position.y),e};var iW=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class sW extends Mt{constructor(e=1){super(Kz,iW,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const oW={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},aW=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function lW(t){const e=oW[t],n=e.length;let r=aW,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<t;a++){let l=s.replace("%index%",a.toString());o=a,a>=n&&(o=t-a-1),l=l.replace("%value%",e[o].toString()),i+=l,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",t.toString()),r}const cW=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function uW(t,e){const n=Math.ceil(t/2);let r=cW,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(n-1)}.0`),i+=a,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",t.toString()),r}class Qv extends Mt{constructor(e,n=8,r=4,i=Mt.defaultResolution,s=5){const o=uW(s,e),a=lW(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=r,this.blur=n}apply(e,n,r,i){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/n.width):this.uniforms.strength=1/r.height*(r.height/n.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/n.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,n,r,i);else{const s=e.getFilterTexture(),o=e.renderer;let a=n,l=s;this.state.blend=!1,e.applyFilter(this,a,l,Vr.CLEAR);for(let c=1;c<this.passes-1;c++){e.bindAndClear(a,Vr.BLIT),this.uniforms.uSampler=l;const d=l;l=a,a=d,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,r,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class hW extends Mt{constructor(e=8,n=4,r=Mt.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Qv(!0,e,n,r,i),this.blurYFilter=new Qv(!1,e,n,r,i),this.resolution=r,this.quality=n,this.blur=e,this.repeatEdgePixels=!1}apply(e,n,r,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,n,a,Vr.CLEAR),this.blurYFilter.apply(e,a,r,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,n,r,i):this.blurXFilter.apply(e,n,r,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var dW=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class df extends Mt{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Bk,dW,e),this.alpha=1}_loadMatrix(e,n=!1){let r=e;n&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,n,r){return e[0]=n[0]*r[0]+n[1]*r[5]+n[2]*r[10]+n[3]*r[15],e[1]=n[0]*r[1]+n[1]*r[6]+n[2]*r[11]+n[3]*r[16],e[2]=n[0]*r[2]+n[1]*r[7]+n[2]*r[12]+n[3]*r[17],e[3]=n[0]*r[3]+n[1]*r[8]+n[2]*r[13]+n[3]*r[18],e[4]=n[0]*r[4]+n[1]*r[9]+n[2]*r[14]+n[3]*r[19]+n[4],e[5]=n[5]*r[0]+n[6]*r[5]+n[7]*r[10]+n[8]*r[15],e[6]=n[5]*r[1]+n[6]*r[6]+n[7]*r[11]+n[8]*r[16],e[7]=n[5]*r[2]+n[6]*r[7]+n[7]*r[12]+n[8]*r[17],e[8]=n[5]*r[3]+n[6]*r[8]+n[7]*r[13]+n[8]*r[18],e[9]=n[5]*r[4]+n[6]*r[9]+n[7]*r[14]+n[8]*r[19]+n[9],e[10]=n[10]*r[0]+n[11]*r[5]+n[12]*r[10]+n[13]*r[15],e[11]=n[10]*r[1]+n[11]*r[6]+n[12]*r[11]+n[13]*r[16],e[12]=n[10]*r[2]+n[11]*r[7]+n[12]*r[12]+n[13]*r[17],e[13]=n[10]*r[3]+n[11]*r[8]+n[12]*r[13]+n[13]*r[18],e[14]=n[10]*r[4]+n[11]*r[9]+n[12]*r[14]+n[13]*r[19]+n[14],e[15]=n[15]*r[0]+n[16]*r[5]+n[17]*r[10]+n[18]*r[15],e[16]=n[15]*r[1]+n[16]*r[6]+n[17]*r[11]+n[18]*r[16],e[17]=n[15]*r[2]+n[16]*r[7]+n[17]*r[12]+n[18]*r[17],e[18]=n[15]*r[3]+n[16]*r[8]+n[17]*r[13]+n[18]*r[18],e[19]=n[15]*r[4]+n[16]*r[9]+n[17]*r[14]+n[18]*r[19]+n[19],e}_colorMatrix(e){const n=new Float32Array(e);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n}brightness(e,n){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,n)}tint(e,n){const[r,i,s]=Le.shared.setValue(e).toArray(),o=[r,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,n)}greyscale(e,n){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,n)}blackAndWhite(e){const n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,e)}hue(e,n){e=(e||0)/180*Math.PI;const r=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=r+(1-r)*o,c=o*(1-r)-a*i,d=o*(1-r)+a*i,u=o*(1-r)+a*i,h=r+o*(1-r),f=o*(1-r)-a*i,p=o*(1-r)-a*i,m=o*(1-r)+a*i,y=r+o*(1-r),g=[l,c,d,0,0,u,h,f,0,0,p,m,y,0,0,0,0,0,1,0];this._loadMatrix(g,n)}contrast(e,n){const r=(e||0)+1,i=-.5*(r-1),s=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(s,n)}saturate(e=0,n){const r=e*2/3+1,i=(r-1)*-.5,s=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(s,n)}desaturate(){this.saturate(-1)}negative(e){const n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,e)}sepia(e){const n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,e)}technicolor(e){const n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,e)}polaroid(e){const n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,e)}toBGR(e){const n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,e)}kodachrome(e){const n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,e)}browni(e){const n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,e)}vintage(e){const n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,e)}colorTone(e,n,r,i,s){e=e||.2,n=n||.15,r=r||16770432,i=i||3375104;const o=Le.shared,[a,l,c]=o.setValue(r).toArray(),[d,u,h]=o.setValue(i).toArray(),f=[.3,.59,.11,0,0,a,l,c,e,0,d,u,h,n,0,a-d,l-u,c-h,0,0];this._loadMatrix(f,s)}night(e,n){e=e||.1;const r=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(r,n)}predator(e,n){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,n)}lsd(e){const n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}df.prototype.grayscale=df.prototype.greyscale;var fW=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,pW=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class mW extends Mt{constructor(e,n){const r=new Ve;e.renderable=!1,super(pW,fW,{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=r,n==null&&(n=20),this.scale=new ue(n,n)}apply(e,n,r,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,n,r,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var gW=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,yW=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class vW extends Mt{constructor(){super(yW,gW)}}var _W=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class xW extends Mt{constructor(e=.5,n=Math.random()){super(Bk,_W,{uNoise:0,uSeed:0}),this.noise=e,this.seed=n}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const hE={AlphaFilter:sW,BlurFilter:hW,BlurFilterPass:Qv,ColorMatrixFilter:df,DisplacementFilter:mW,FXAAFilter:vW,NoiseFilter:xW};Object.entries(hE).forEach(([t,e])=>{Object.defineProperty(hE,t,{get(){return we("7.1.0",`filters.${t} has moved to ${t}`),e}})});class bW{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Rt.system.add(this.tickerUpdate,this,ao.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Rt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Qi=new bW;class Au{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Au.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ue,this.page=new ue,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,n,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,n,r,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class ff extends Au{constructor(){super(...arguments),this.client=new ue,this.movement=new ue,this.offset=new ue,this.global=new ue,this.screen=new ue}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,n,r){return e.worldTransform.applyInverse(r||this.global,n)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,n,r,i,s,o,a,l,c,d,u,h,f,p,m){throw new Error("Method not implemented.")}}class cr extends ff{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Ga extends ff{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Ga.DOM_DELTA_PIXEL=0;Ga.DOM_DELTA_LINE=1;Ga.DOM_DELTA_PAGE=2;const wW=2048,SW=new ue,jg=new ue;class EW{constructor(e){this.dispatch=new Su,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,n){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:n,priority:0}),this.mappingTable[e].sort((r,i)=>r.priority-i.priority)}dispatchEvent(e,n){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,n),this.dispatch.emit(n||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const n=this.mappingTable[e.type];if(n)for(let r=0,i=n.length;r<i;r++)n[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,n){Qi.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,SW.set(e,n),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,n){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=r.length-1;i<s;i++)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,n),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=r.length-2;i>=0;i--)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,n,r=this._allInteractiveElements){if(r.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(n)?n:[n];for(let s=r.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=r[s],this.notifyTarget(e,o)})}propagationPath(e){const n=[e];for(let r=0;r<wW&&e!==this.rootTarget;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");n.push(e.parent),e=e.parent}return n.reverse(),n}hitTestMoveRecursive(e,n,r,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||n==="dynamic")&&(Qi.pauseUpdate=!1),e.interactiveChildren&&e.children){const d=e.children;for(let u=d.length-1;u>=0;u--){const h=d[u],f=this.hitTestMoveRecursive(h,this._isInteractive(n)?n:h.eventMode,r,i,s,o||s(e,r));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=e.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(n),c=e.isInteractive();return c&&c&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,r)&&i(e,r)?c?[e]:[]:null}hitTestRecursive(e,n,r,i,s){if(this._interactivePrune(e)||s(e,r))return null;if((e.eventMode==="dynamic"||n==="dynamic")&&(Qi.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let c=l.length-1;c>=0;c--){const d=l[c],u=this.hitTestRecursive(d,this._isInteractive(n)?n:d.eventMode,r,i,s);if(u){if(u.length>0&&!u[u.length-1].parent)continue;const h=e.isInteractive();return(u.length>0||h)&&u.push(e),u}}}const o=this._isInteractive(n),a=e.isInteractive();return o&&i(e,r)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,n){if(e.hitArea&&(e.worldTransform.applyInverse(n,jg),!e.hitArea.contains(jg.x,jg.y)))return!0;if(e._mask){const r=e._mask.isMaskData?e._mask.maskObject:e._mask;if(r&&!r.containsPoint?.(n))return!0}return!1}hitTestFn(e,n){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(n):!1}notifyTarget(e,n){n=n??e.type;const r=`on${n}`;e.currentTarget[r]?.(e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${n}capture`:n;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,n)}mapPointerDown(e){if(!(e instanceof cr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerdown"),n.pointerType==="touch")this.dispatchEvent(n,"touchstart");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const i=n.button===2;this.dispatchEvent(n,i?"rightdown":"mousedown")}const r=this.trackingData(e.pointerId);r.pressTargetsByButton[e.button]=n.composedPath(),this.freeEvent(n)}mapPointerMove(e){if(!(e instanceof cr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const n=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const r=n.pointerType==="mouse"||n.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(i.overTargets?.length>0&&s!==n.target){const l=e.type==="mousemove"?"mouseout":"pointerout",c=this.createPointerEvent(e,l,s);if(this.dispatchEvent(c,"pointerout"),r&&this.dispatchEvent(c,"mouseout"),!n.composedPath().includes(s)){const d=this.createPointerEvent(e,"pointerleave",s);for(d.eventPhase=d.AT_TARGET;d.target&&!n.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),r&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(c)}if(s!==n.target){const l=e.type==="mousemove"?"mouseover":"pointerover",c=this.clonePointerEvent(n,l);this.dispatchEvent(c,"pointerover"),r&&this.dispatchEvent(c,"mouseover");let d=s?.parent;for(;d&&d!==this.rootTarget.parent&&d!==n.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const h=this.clonePointerEvent(n,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==s&&h.target!==this.rootTarget.parent;)h.currentTarget=h.target,this.notifyTarget(h),r&&this.notifyTarget(h,"mouseenter"),h.target=h.target.parent;this.freeEvent(h)}this.freeEvent(c)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(n,"pointermove"),a&&o.push("globalpointermove"),n.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(n,"touchmove"),a&&o.push("globaltouchmove")),r&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(n,"mousemove"),a&&o.push("globalmousemove"),this.cursor=n.target?.cursor),o.length>0&&this.all(n,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=n.composedPath(),this.freeEvent(n)}mapPointerOver(e){if(!(e instanceof cr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId),r=this.createPointerEvent(e),i=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),i&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=r.target?.cursor);const s=this.clonePointerEvent(r,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;n.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof cr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId);if(n.overTargets){const r=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(n.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),r&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),r&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;n.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof cr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),r.pointerType==="touch")this.dispatchEvent(r,"touchend");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const a=r.button===2;this.dispatchEvent(r,a?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!r.composedPath().includes(s)){let a=s;for(;a&&!r.composedPath().includes(a);){if(r.currentTarget=a,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch")this.notifyTarget(r,"touchendoutside");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const l=r.button===2;this.notifyTarget(r,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(r,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:n});const l=i.clicksByButton[e.button];if(l.target===a.target&&n-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=n,a.detail=l.clickCount,a.pointerType==="mouse"){const c=a.button===2;this.dispatchEvent(a,c?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof cr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId),r=this.findMountedTarget(n.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(r){let s=r;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete n.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof Ga)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const n=this.createWheelEvent(e);this.dispatchEvent(n),this.freeEvent(n)}findMountedTarget(e){if(!e)return null;let n=e[0];for(let r=1;r<e.length&&e[r].parent===n;r++)n=e[r];return n}createPointerEvent(e,n,r){const i=this.allocateEvent(cr);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=r??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof n=="string"&&(i.type=n),i}createWheelEvent(e){const n=this.allocateEvent(Ga);return this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=this.hitTest(n.global.x,n.global.y),n}clonePointerEvent(e,n){const r=this.allocateEvent(cr);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=n??r.type,r}copyWheelData(e,n){n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ}copyPointerData(e,n){e instanceof cr&&n instanceof cr&&(n.pointerId=e.pointerId,n.width=e.width,n.height=e.height,n.isPrimary=e.isPrimary,n.pointerType=e.pointerType,n.pressure=e.pressure,n.tangentialPressure=e.tangentialPressure,n.tiltX=e.tiltX,n.tiltY=e.tiltY,n.twist=e.twist)}copyMouseData(e,n){e instanceof ff&&n instanceof ff&&(n.altKey=e.altKey,n.button=e.button,n.buttons=e.buttons,n.client.copyFrom(e.client),n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.movement.copyFrom(e.movement),n.screen.copyFrom(e.screen),n.shiftKey=e.shiftKey,n.global.copyFrom(e.global))}copyData(e,n){n.isTrusted=e.isTrusted,n.srcElement=e.srcElement,n.timeStamp=performance.now(),n.type=e.type,n.detail=e.detail,n.view=e.view,n.which=e.which,n.layer.copyFrom(e.layer),n.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const n=this.eventPool.get(e).pop()||new e(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=null,n.target=null,n}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const n=e.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(e)}notifyListeners(e,n){const r=e.currentTarget._events[n];if(r&&e.currentTarget.isInteractive())if("fn"in r)r.once&&e.currentTarget.removeListener(n,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let i=0,s=r.length;i<s&&!e.propagationImmediatelyStopped;i++)r[i].once&&e.currentTarget.removeListener(n,r[i].fn,void 0,!0),r[i].fn.call(r[i].context,e)}}const TW=1,CW={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Jv=class{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new EW(null),Qi.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new cr(null),this.rootWheelEvent=new Ga(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Jv.defaultEventFeatures},{set:(e,n,r)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=r),e[n]=r,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:e,resolution:n}=this.renderer;this.setTargetElement(e),this.resolution=n,Jv._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const n=this.cursorStyles[t];if(n)switch(typeof n){case"string":e&&(this.domElement.style.cursor=n);break;case"function":n(t);break;case"object":e&&Object.assign(this.domElement.style,n);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let n=0,r=e.length;n<r;n++){const i=e[n],s=this.bootstrapEvent(this.rootPointerEvent,i);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;Qi.pointerMoved();const e=this.normalizeToPointerData(t);for(let n=0,r=e.length;n<r;n++){const i=this.bootstrapEvent(this.rootPointerEvent,e[n]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const n=e!==this.domElement?"outside":"",r=this.normalizeToPointerData(t);for(let i=0,s=r.length;i<s;i++){const o=this.bootstrapEvent(this.rootPointerEvent,r[i]);o.type+=n,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;const e=this.normalizeToPointerData(t);for(let n=0,r=e.length;n<r;n++){const i=this.bootstrapEvent(this.rootPointerEvent,e[n]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,Qi.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Qi.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Qi.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,n){let r;this.domElement.parentElement?r=this.domElement.getBoundingClientRect():r={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const i=1/this.resolution;t.x=(e-r.left)*(this.domElement.width/r.width)*i,t.y=(n-r.top)*(this.domElement.height/r.height)*i}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let n=0,r=t.changedTouches.length;n<r;n++){const i=t.changedTouches[n];typeof i.button>"u"&&(i.button=0),typeof i.buttons>"u"&&(i.buttons=1),typeof i.isPrimary>"u"&&(i.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof i.width>"u"&&(i.width=i.radiusX||1),typeof i.height>"u"&&(i.height=i.radiusY||1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="touch"),typeof i.pointerId>"u"&&(i.pointerId=i.identifier||0),typeof i.pressure>"u"&&(i.pressure=i.force||.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),typeof i.layerX>"u"&&(i.layerX=i.offsetX=i.clientX),typeof i.layerY>"u"&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,i.type=t.type,e.push(i)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const n=t;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=TW),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,e.push(n)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=CW[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};let Xc=Jv;Xc.extension={name:"events",type:[q.RendererSystem,q.CanvasRendererSystem]};Xc.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};se.add(Xc);function dE(t){return t==="dynamic"||t==="static"}const PW={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??dE(Xc.defaultEventMode)},set interactive(t){we("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=t,this.eventMode=t?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Xc.defaultEventMode},set eventMode(t){this._internalInteractive=dE(t),this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,n){const r=typeof n=="boolean"&&n||typeof n=="object"&&n.capture,i=typeof e=="function"?void 0:e;t=r?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.on(t,e,i)},removeEventListener(t,e,n){const r=typeof n=="boolean"&&n||typeof n=="object"&&n.capture,i=typeof e=="function"?void 0:e;t=r?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,i)},dispatchEvent(t){if(!(t instanceof Au))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};tt.mixin(PW);const AW={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};tt.mixin(AW);const RW=9,Ah=100,IW=0,kW=0,fE=2,pE=1,MW=-1e3,DW=-1e3,OW=2;class zk{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Si.tablet||Si.phone)&&this.createTouchHook();const n=document.createElement("div");n.style.width=`${Ah}px`,n.style.height=`${Ah}px`,n.style.position="absolute",n.style.top=`${IW}px`,n.style.left=`${kW}px`,n.style.zIndex=fE.toString(),this.div=n,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${pE}px`,e.style.height=`${pE}px`,e.style.position="absolute",e.style.top=`${MW}px`,e.style.left=`${DW}px`,e.style.zIndex=OW.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const n=e.children;if(n)for(let r=0;r<n.length;r++)this.updateAccessibleObjects(n[r])}update(){const e=performance.now();if(Si.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:n,y:r,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,c=i/o*l,d=s/a*l;let u=this.div;u.style.left=`${n}px`,u.style.top=`${r}px`,u.style.width=`${o}px`,u.style.height=`${a}px`;for(let h=0;h<this.children.length;h++){const f=this.children[h];if(f.renderId!==this.renderId)f._accessibleActive=!1,wa(this.children,h,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,h--;else{u=f._accessibleDiv;let p=f.hitArea;const m=f.worldTransform;f.hitArea?(u.style.left=`${(m.tx+p.x*m.a)*c}px`,u.style.top=`${(m.ty+p.y*m.d)*d}px`,u.style.width=`${p.width*m.a*c}px`,u.style.height=`${p.height*m.d*d}px`):(p=f.getBounds(),this.capHitArea(p),u.style.left=`${p.x*c}px`,u.style.top=`${p.y*d}px`,u.style.width=`${p.width*c}px`,u.style.height=`${p.height*d}px`,u.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(u.title=f.accessibleTitle),u.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&u.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==u.title||f.tabIndex!==u.tabIndex)&&(u.title=f.accessibleTitle,u.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(u))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:n,height:r}=this.renderer;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>r&&(e.height=r-e.y)}addChild(e){let n=this.pool.pop();n||(n=document.createElement("button"),n.style.width=`${Ah}px`,n.style.height=`${Ah}px`,n.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=fE.toString(),n.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?n.setAttribute("aria-live","off"):n.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?n.setAttribute("aria-relevant","additions"):n.setAttribute("aria-relevant","text"),n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),n.style.pointerEvents=e.accessiblePointerEvents,n.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?n.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(n.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&n.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(n),e._accessibleActive=!0,e._accessibleDiv=n,n.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,n){const{displayObject:r}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new Au(i),{target:r});i.rootTarget=this.renderer.lastObjectRendered,n.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===RW&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}zk.extension={name:"accessibility",type:[q.RendererPlugin,q.CanvasRendererPlugin]};se.add(zk);const e0=class{constructor(t){this.stage=new ye,t=Object.assign({forceCanvas:!1},t),this.renderer=Vz(t),e0._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(t,e){const n=e0._plugins.slice(0);n.reverse(),n.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};let rb=e0;rb._plugins=[];se.handleByList(q.Application,rb._plugins);class Wk{static init(e){Object.defineProperty(this,"resizeTo",{set(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let n,r;if(this._resizeTo===globalThis.window)n=globalThis.innerWidth,r=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;n=i,r=s}this.renderer.resize(n,r),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Wk.extension=q.Application;se.add(Wk);const mE={loader:q.LoadParser,resolver:q.ResolveParser,cache:q.CacheParser,detection:q.DetectionParser};se.handle(q.Asset,t=>{const e=t.ref;Object.entries(mE).filter(([n])=>!!e[n]).forEach(([n,r])=>se.add(Object.assign(e[n],{extension:e[n].extension??r})))},t=>{const e=t.ref;Object.keys(mE).filter(n=>!!e[n]).forEach(n=>se.remove(e[n]))});class NW{constructor(e,n=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(e){e.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],n=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<n;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Ru(t,e){if(Array.isArray(e)){for(const n of e)if(t.startsWith(`data:${n}`))return!0;return!1}return t.startsWith(`data:${e}`)}function xo(t,e){const n=t.split("?")[0],r=Vt.extname(n).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const Pi=(t,e)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>typeof n=="string"?e(n):n):t),t0=(t,e)=>{const n=e.split("?")[1];return n&&(t+=`?${n}`),t};function Vk(t,e,n,r,i){const s=e[n];for(let o=0;o<s.length;o++){const a=s[o];n<e.length-1?Vk(t.replace(r[n],a),e,n+1,r,i):i.push(t.replace(r[n],a))}}function LW(t){const e=/\{(.*?)\}/g,n=t.match(e),r=[];if(n){const i=[];n.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),Vk(t,i,0,n,r)}else r.push(t);return r}const pf=t=>!Array.isArray(t);class BW{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const n=this._cache.get(e);return n||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),n}set(e,n){const r=Pi(e);let i;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(n)){i=l.getCacheableAssets(r,n);break}}i||(i={},r.forEach(a=>{i[a]=n}));const s=Object.keys(i),o={cacheKeys:s,keys:r};if(r.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==n&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),n instanceof te){const a=n;r.forEach(l=>{a.baseTexture!==te.EMPTY.baseTexture&&fe.addToCache(a.baseTexture,l),te.addToCache(a,l)})}}remove(e){if(this._cacheMap.get(e),!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const n=this._cacheMap.get(e);n.cacheKeys.forEach(i=>{this._cache.delete(i)}),n.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const Ll=new BW;class FW{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,n,r)=>(this._parsersValidated=!1,e[n]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,n){const r={promise:null,parser:null};return r.promise=(async()=>{let i=null,s=null;if(n.loadParser&&(s=this._parserHash[n.loadParser],s||console.warn(`[Assets] specified load parser "${n.loadParser}" not found while loading ${e}`)),!s){for(let o=0;o<this.parsers.length;o++){const a=this.parsers[o];if(a.load&&a.test?.(e,n,this)){s=a;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,n,this),r.parser=s;for(let o=0;o<this.parsers.length;o++){const a=this.parsers[o];a.parse&&a.parse&&await a.testParse?.(i,n,this)&&(i=await a.parse(i,n,this)||i,r.parser=a)}return i})(),r}async load(e,n){this._parsersValidated||this._validateParsers();let r=0;const i={},s=pf(e),o=Pi(e,c=>({src:c})),a=o.length,l=o.map(async c=>{const d=Vt.toAbsolute(c.src);if(!i[c.src])try{this.promiseCache[d]||(this.promiseCache[d]=this._getLoadPromiseAndParser(d,c)),i[c.src]=await this.promiseCache[d].promise,n&&n(++r/a)}catch(u){throw delete this.promiseCache[d],delete i[c.src],new Error(`[Loader.load] Failed to load ${d}.
${u}`)}});return await Promise.all(l),s?i[o[0].src]:i}async unload(e){const r=Pi(e,i=>({src:i})).map(async i=>{const s=Vt.toAbsolute(i.src),o=this.promiseCache[s];if(o){const a=await o.promise;o.parser?.unload?.(a,i,this),delete this.promiseCache[s]}});await Promise.all(r)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,n)=>(e[n.name]&&console.warn(`[Assets] loadParser name conflict "${n.name}"`),{...e,[n.name]:n}),{})}}var fi=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(fi||{});const $W=".json",UW="application/json",HW={extension:{type:q.LoadParser,priority:fi.Low},name:"loadJson",test(t){return Ru(t,UW)||xo(t,$W)},async load(t){return await(await Y.ADAPTER.fetch(t)).json()}};se.add(HW);const jW=".txt",GW="text/plain",zW={name:"loadTxt",extension:{type:q.LoadParser,priority:fi.Low},test(t){return Ru(t,GW)||xo(t,jW)},async load(t){return await(await Y.ADAPTER.fetch(t)).text()}};se.add(zW);const WW=["normal","bold","100","200","300","400","500","600","700","800","900"],VW=[".ttf",".otf",".woff",".woff2"],XW=["font/ttf","font/otf","font/woff","font/woff2"],YW=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function KW(t){const e=Vt.extname(t),i=Vt.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let s=i.length>0;for(const a of i)if(!a.match(YW)){s=!1;break}let o=i.join(" ");return s||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const qW={extension:{type:q.LoadParser,priority:fi.Low},name:"loadWebFont",test(t){return Ru(t,XW)||xo(t,VW)},async load(t,e){const n=Y.ADAPTER.getFontFaceSet();if(n){const r=[],i=e.data?.family??KW(t),s=e.data?.weights?.filter(a=>WW.includes(a))??["normal"],o=e.data??{};for(let a=0;a<s.length;a++){const l=s[a],c=new FontFace(i,`url(${encodeURI(t)})`,{...o,weight:l});await c.load(),n.add(c),r.push(c)}return r.length===1?r[0]:r}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>Y.ADAPTER.getFontFaceSet().delete(e))}};se.add(qW);let gE=0,Gg;const ZW="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",QW={code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${ZW}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},JW={code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let zg;class eV{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const n=URL.createObjectURL(new Blob([QW.code],{type:"application/javascript"})),r=new Worker(n);r.addEventListener("message",i=>{r.terminate(),URL.revokeObjectURL(n),e(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Gg===void 0&&(Gg=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Gg&&(zg||(zg=URL.createObjectURL(new Blob([JW.code],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(zg),e.addEventListener("message",n=>{this.complete(n.data),this.returnWorker(n.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,n){await this._initWorkers();const r=new Promise((i,s)=>{this.queue.push({id:e,arguments:n,resolve:i,reject:s})});return this.next(),r}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const n=this.queue.pop(),r=n.id;this.resolveHash[gE]={resolve:n.resolve,reject:n.reject},e.postMessage({data:n.arguments,uuid:gE++,id:r})}}const yE=new eV;function zp(t,e,n){const r=new te(t);return r.baseTexture.on("dispose",()=>{delete e.promiseCache[n]}),r}const tV=[".jpeg",".jpg",".png",".webp",".avif"],nV=["image/jpeg","image/png","image/webp","image/avif"];async function rV(t){const e=await Y.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const n=await e.blob();return await createImageBitmap(n)}const Wp={name:"loadTextures",extension:{type:q.LoadParser,priority:fi.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return Ru(t,nV)||xo(t,tV)},async load(t,e,n){let r=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await yE.isImageBitmapSupported()?r=await yE.loadImageBitmap(t):r=await rV(t):r=await new Promise(s=>{r=new Image,r.crossOrigin=this.config.crossOrigin,r.src=t,r.complete?s(r):r.onload=()=>{s(r)}});const i=new fe(r,{resolution:vs(t),...e.data});return i.resource.src=t,zp(i,n,t)},unload(t){t.destroy(!0)}};se.add(Wp);const iV=".svg",sV="image/svg+xml",oV={extension:{type:q.LoadParser,priority:fi.High},name:"loadSVG",test(t){return Ru(t,sV)||xo(t,iV)},async testParse(t){return Vc.test(t)},async parse(t,e,n){const r=new Vc(t,e?.data?.resourceOptions);await r.load();const i=new fe(r,{resolution:vs(t),...e?.data});return i.resource.src=t,zp(i,n,t)},async load(t,e){return(await Y.ADAPTER.fetch(t)).text()},unload:Wp.unload};se.add(oV);class aV{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,n)=>`${e}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(e,n)=>n.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const n=e;this._defaultSearchParams=Object.keys(n).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&")}}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(e,n){const r=[];Array.isArray(n)?n.forEach(i=>{if(typeof i.name=="string"){const s=this._createBundleAssetId(e,i.name);r.push(s),this.add([i.name,s],i.srcs,i.data)}else{const s=i.name.map(o=>this._createBundleAssetId(e,o));s.forEach(o=>{r.push(o)}),this.add([...i.name,...s],i.srcs)}}):Object.keys(n).forEach(i=>{r.push(this._createBundleAssetId(e,i)),this.add([i,this._createBundleAssetId(e,i)],n[i])}),this._bundles[e]=r}add(e,n,r){const i=Pi(e);i.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(n)||(typeof n=="string"?n=LW(n):n=[n]);const s=n.map(o=>{let a=o;if(typeof o=="string"){let l=!1;for(let c=0;c<this._parsers.length;c++){const d=this._parsers[c];if(d.test(o)){a=d.parse(o),l=!0;break}}l||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=i),(this._basePath||this._rootPath)&&(a.src=Vt.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??r,a});i.forEach(o=>{this._assetMap[o]=s})}resolveBundle(e){const n=pf(e);e=Pi(e);const r={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const l in o){const c=o[l];a[this._extractAssetIdFromBundle(i,l)]=c}r[i]=a}}),n?r[e[0]]:r}resolveUrl(e){const n=this.resolve(e);if(typeof e!="string"){const r={};for(const i in n)r[i]=n[i].src;return r}return n.src}resolve(e){const n=pf(e);e=Pi(e);const r={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=this._getPreferredOrder(s),a=s[0];o?.priority.forEach(l=>{o.params[l].forEach(c=>{const d=s.filter(u=>u[l]?u[l]===c:!1);d.length&&(s=d)})}),this._resolverHash[i]=s[0]??a}else{let s=i;(this._basePath||this._rootPath)&&(s=Vt.toAbsolute(s,this._basePath,this._rootPath)),s=this._appendDefaultSearchParams(s),this._resolverHash[i]={src:s}}r[i]=this._resolverHash[i]}),n?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let n=0;n<e.length;n++){const r=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(r.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const n=/\?/.test(e)?"&":"?";return`${e}${n}${this._defaultSearchParams}`}}class lV{constructor(){this._detections=[],this._initialized=!1,this.resolver=new aV,this.loader=new FW,this.cache=Ll,this._backgroundLoader=new NW(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let s=e.manifest;typeof s=="string"&&(s=await this.load(s)),this.resolver.addManifest(s)}const n=e.texturePreference?.resolution??1,r=typeof n=="number"?[n]:n;let i=[];if(e.texturePreference?.format){const s=e.texturePreference?.format;i=typeof s=="string"?[s]:s;for(const o of this._detections)await o.test()||(i=await o.remove(i))}else for(const s of this._detections)await s.test()&&(i=await s.add(i));this.resolver.prefer({params:{format:i,resolution:r}}),e.preferences&&this.setPreferences(e.preferences)}add(e,n,r){this.resolver.add(e,n,r)}async load(e,n){this._initialized||await this.init();const r=pf(e),i=Pi(e).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):(this.resolver.hasKey(a)||this.resolver.add(a,a),a)),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,n);return r?o[i[0]]:o}addBundle(e,n){this.resolver.addBundle(e,n)}async loadBundle(e,n){this._initialized||await this.init();let r=!1;typeof e=="string"&&(r=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let a=0,l=0;const c=()=>{n?.(++a/l)},d=o.map(u=>{const h=i[u];return l+=Object.keys(h).length,this._mapLoadToResolve(h,c).then(f=>{s[u]=f})});return await Promise.all(d),r?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(n))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolveBundle(e);Object.values(n).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Ll.get(e);const n={};for(let r=0;r<e.length;r++)n[r]=Ll.get(e[r]);return n}async _mapLoadToResolve(e,n){const r=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(r,n);this._backgroundLoader.active=!0;const o={};return r.forEach((a,l)=>{const c=s[a.src],d=[a.src];a.alias&&d.push(...a.alias),o[i[l]]=c,Ll.set(d,c)}),o}async unload(e){this._initialized||await this.init();const n=Pi(e).map(i=>typeof i!="string"?i.src:i),r=this.resolver.resolve(n);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=Pi(e);const n=this.resolver.resolveBundle(e),r=Object.keys(n).map(i=>this._unloadFromResolved(n[i]));await Promise.all(r)}async _unloadFromResolved(e){const n=Object.values(e);n.forEach(r=>{Ll.remove(r.src)}),await this.loader.unload(n)}get detections(){return this._detections}get preferWorkers(){return Wp.config.preferWorkers}set preferWorkers(e){we("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(n=>{n.config&&Object.keys(n.config).filter(r=>r in e).forEach(r=>{n.config[r]=e[r]})})}}const Zl=new lV;se.handleByList(q.LoadParser,Zl.loader.parsers).handleByList(q.ResolveParser,Zl.resolver.parsers).handleByList(q.CacheParser,Zl.cache.parsers).handleByList(q.DetectionParser,Zl.detections);const cV={extension:q.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof te),getCacheableAssets:(t,e)=>{const n={};return t.forEach(r=>{e.forEach((i,s)=>{n[r+(s===0?"":s+1)]=i})}),n}};se.add(cV);const uV={extension:{type:q.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e=await Y.ADAPTER.fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=").then(n=>n.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};se.add(uV);const hV={extension:{type:q.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e=await Y.ADAPTER.fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then(n=>n.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};se.add(hV);const vE=["png","jpg","jpeg"],dV={extension:{type:q.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...vE],remove:async t=>t.filter(e=>!vE.includes(e))};se.add(dV);const fV={extension:q.ResolveParser,test:Wp.test,parse:t=>({resolution:parseFloat(Y.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t})};se.add(fV);var En=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t))(En||{});const mf={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let gi,Go;function _E(){Go={s3tc:gi.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:gi.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:gi.getExtension("WEBGL_compressed_texture_etc"),etc1:gi.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:gi.getExtension("WEBGL_compressed_texture_pvrtc")||gi.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:gi.getExtension("WEBGL_compressed_texture_atc"),astc:gi.getExtension("WEBGL_compressed_texture_astc")}}const pV={extension:{type:q.DetectionParser,priority:2},test:async()=>{const e=Y.ADAPTER.createCanvas().getContext("webgl");return e?(gi=e,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{Go||_E();const e=[];for(const n in Go)Go[n]&&e.push(n);return[...e,...t]},remove:async t=>(Go||_E(),t.filter(e=>!(e in Go)))};se.add(pV);class mV extends Pu{constructor(e,n={width:1,height:1,autoLoad:!0}){let r,i;typeof e=="string"?(r=e,i=new Uint8Array):(r=null,i=e),super(i,n),this.origin=r,this.buffer=i?new jv(i):null,this._load=null,this.loaded=!1,this.origin!==null&&n.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new jv(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class Ks extends mV{constructor(e,n){super(e,n),this.format=n.format,this.levels=n.levels||1,this._width=n.width,this._height=n.height,this._extension=Ks._formatToExtension(this.format),(n.levelBuffers||this.buffer)&&(this._levelBuffers=n.levelBuffers||Ks._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,n,r){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:c,levelHeight:d,levelBuffer:u}=this._levelBuffers[o];i.compressedTexImage2D(i.TEXTURE_2D,l,this.format,c,d,0,u)}return!0}onBlobLoaded(){this._levelBuffers=Ks._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,n,r,i,s,o,a){const l=new Array(r);let c=e.byteOffset,d=o,u=a,h=d+i-1&~(i-1),f=u+s-1&~(s-1),p=h*f*mf[n];for(let m=0;m<r;m++)l[m]={levelID:m,levelWidth:r>1?d:h,levelHeight:r>1?u:f,levelBuffer:new Uint8Array(e.buffer,c,p)},c+=p,d=d>>1||1,u=u>>1||1,h=d+i-1&~(i-1),f=u+s-1&~(s-1),p=h*f*mf[n];return l}}const Wg=4,Rh=124,gV=32,xE=20,yV=542327876,Ih={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},vV={FOURCC:2},kh={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},_V=1,xV=2,bV=4,wV=64,SV=512,EV=131072,TV=827611204,CV=861165636,PV=894720068,AV=808540228,RV=4,IV={[TV]:En.COMPRESSED_RGBA_S3TC_DXT1_EXT,[CV]:En.COMPRESSED_RGBA_S3TC_DXT3_EXT,[PV]:En.COMPRESSED_RGBA_S3TC_DXT5_EXT},kV={70:En.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:En.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:En.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:En.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:En.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:En.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:En.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:En.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:En.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function MV(t){const e=new Uint32Array(t);if(e[0]!==yV)throw new Error("Invalid DDS file magic word");const r=new Uint32Array(t,0,Rh/Uint32Array.BYTES_PER_ELEMENT),i=r[Ih.HEIGHT],s=r[Ih.WIDTH],o=r[Ih.MIPMAP_COUNT],a=new Uint32Array(t,Ih.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,gV/Uint32Array.BYTES_PER_ELEMENT),l=a[_V];if(l&bV){const c=a[vV.FOURCC];if(c!==AV){const v=IV[c],w=Wg+Rh,S=new Uint8Array(t,w);return[new Ks(S,{format:v,width:s,height:i,levels:o})]}const d=Wg+Rh,u=new Uint32Array(e.buffer,d,xE/Uint32Array.BYTES_PER_ELEMENT),h=u[kh.DXGI_FORMAT],f=u[kh.RESOURCE_DIMENSION],p=u[kh.MISC_FLAG],m=u[kh.ARRAY_SIZE],y=kV[h];if(y===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${h}`);if(p===RV)throw new Error("DDSParser does not support cubemap textures");if(f===6)throw new Error("DDSParser does not supported 3D texture data");const g=new Array,_=Wg+Rh+xE;if(m===1)g.push(new Uint8Array(t,_));else{const v=mf[y];let w=0,S=s,E=i;for(let C=0;C<o;C++){const A=Math.max(1,S+3&-4),P=Math.max(1,E+3&-4),O=A*P*v;w+=O,S=S>>>1,E=E>>>1}let T=_;for(let C=0;C<m;C++)g.push(new Uint8Array(t,T,w)),T+=w}return g.map(v=>new Ks(v,{format:y,width:s,height:i,levels:o}))}throw l&wV?new Error("DDSParser does not support uncompressed texture data."):l&SV?new Error("DDSParser does not supported YUV uncompressed texture data."):l&EV?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&xV?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const bE=[171,75,84,88,32,49,49,187,13,10,26,10],DV=67305985,ar={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},n0=64,wE={[le.UNSIGNED_BYTE]:1,[le.UNSIGNED_SHORT]:2,[le.INT]:4,[le.UNSIGNED_INT]:4,[le.FLOAT]:4,[le.HALF_FLOAT]:8},OV={[V.RGBA]:4,[V.RGB]:3,[V.RG]:2,[V.RED]:1,[V.LUMINANCE]:1,[V.LUMINANCE_ALPHA]:2,[V.ALPHA]:1},NV={[le.UNSIGNED_SHORT_4_4_4_4]:2,[le.UNSIGNED_SHORT_5_5_5_1]:2,[le.UNSIGNED_SHORT_5_6_5]:2};function LV(t,e,n=!1){const r=new DataView(e);if(!BV(t,r))return null;const i=r.getUint32(ar.ENDIANNESS,!0)===DV,s=r.getUint32(ar.GL_TYPE,i),o=r.getUint32(ar.GL_FORMAT,i),a=r.getUint32(ar.GL_INTERNAL_FORMAT,i),l=r.getUint32(ar.PIXEL_WIDTH,i),c=r.getUint32(ar.PIXEL_HEIGHT,i)||1,d=r.getUint32(ar.PIXEL_DEPTH,i)||1,u=r.getUint32(ar.NUMBER_OF_ARRAY_ELEMENTS,i)||1,h=r.getUint32(ar.NUMBER_OF_FACES,i),f=r.getUint32(ar.NUMBER_OF_MIPMAP_LEVELS,i),p=r.getUint32(ar.BYTES_OF_KEY_VALUE_DATA,i);if(c===0||d!==1)throw new Error("Only 2D textures are supported");if(h!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(u!==1)throw new Error("WebGL does not support array textures");const m=4,y=4,g=l+3&-4,_=c+3&-4,v=new Array(u);let w=l*c;s===0&&(w=g*_);let S;if(s!==0?wE[s]?S=wE[s]*OV[o]:S=NV[s]:S=mf[a],S===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const E=n?$V(r,p,i):null;let C=w*S,A=l,P=c,O=g,U=_,k=n0+p;for(let I=0;I<f;I++){const F=r.getUint32(k,i);let N=k+4;for(let B=0;B<u;B++){let R=v[B];R||(R=v[B]=new Array(f)),R[I]={levelID:I,levelWidth:f>1||s!==0?A:O,levelHeight:f>1||s!==0?P:U,levelBuffer:new Uint8Array(e,N,C)},N+=C}k+=F+4,k=k%4!==0?k+4-k%4:k,A=A>>1||1,P=P>>1||1,O=A+m-1&-4,U=P+y-1&-4,C=O*U*S}return s!==0?{uncompressed:v.map(I=>{let F=I[0].levelBuffer,N=!1;return s===le.FLOAT?F=new Float32Array(I[0].levelBuffer.buffer,I[0].levelBuffer.byteOffset,I[0].levelBuffer.byteLength/4):s===le.UNSIGNED_INT?(N=!0,F=new Uint32Array(I[0].levelBuffer.buffer,I[0].levelBuffer.byteOffset,I[0].levelBuffer.byteLength/4)):s===le.INT&&(N=!0,F=new Int32Array(I[0].levelBuffer.buffer,I[0].levelBuffer.byteOffset,I[0].levelBuffer.byteLength/4)),{resource:new Pu(F,{width:I[0].levelWidth,height:I[0].levelHeight}),type:s,format:N?FV(o):o}}),kvData:E}:{compressed:v.map(I=>new Ks(null,{format:a,width:l,height:c,levels:f,levelBuffers:I})),kvData:E}}function BV(t,e){for(let n=0;n<bE.length;n++)if(e.getUint8(n)!==bE[n])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function FV(t){switch(t){case V.RGBA:return V.RGBA_INTEGER;case V.RGB:return V.RGB_INTEGER;case V.RG:return V.RG_INTEGER;case V.RED:return V.RED_INTEGER;default:return t}}function $V(t,e,n){const r=new Map;let i=0;for(;i<e;){const s=t.getUint32(n0+i,n),o=n0+i+4,a=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&t.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=new TextDecoder().decode(new Uint8Array(t.buffer,o,l)),d=new DataView(t.buffer,o+l+1,s-l-1);r.set(c,d),i+=4+s+a}return r}const UV={extension:{type:q.LoadParser,priority:fi.High},name:"loadDDS",test(t){return xo(t,".dds")},async load(t,e,n){const i=await(await Y.ADAPTER.fetch(t)).arrayBuffer(),o=MV(i).map(a=>{const l=new fe(a,{mipmap:li.OFF,alphaMode:Or.NO_PREMULTIPLIED_ALPHA,resolution:vs(t),...e.data});return zp(l,n,t)});return o.length===1?o[0]:o},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};se.add(UV);const HV={extension:{type:q.LoadParser,priority:fi.High},name:"loadKTX",test(t){return xo(t,".ktx")},async load(t,e,n){const i=await(await Y.ADAPTER.fetch(t)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:a}=LV(t,i),l=s??o,c={mipmap:li.OFF,alphaMode:Or.NO_PREMULTIPLIED_ALPHA,resolution:vs(t),...e.data},d=l.map(u=>{l===o&&Object.assign(c,{type:u.type,format:u.format});const h=new fe(u,c);return h.ktxKeyValueData=a,zp(h,n,t)});return d.length===1?d[0]:d},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};se.add(HV);const jV={extension:q.ResolveParser,test:t=>{const n=t.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(n)},parse:t=>{if(t.split("?")[0].split(".").pop()==="ktx"){const r=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(r.some(i=>t.endsWith(i)))return{resolution:parseFloat(Y.RETINA_PREFIX.exec(t)?.[1]??"1"),format:r.find(i=>t.endsWith(i)),src:t}}return{resolution:parseFloat(Y.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t}}};se.add(jV);const GV=new pe,zV=4,Ql=class{constructor(t){this.renderer=t}async image(t,e,n){const r=new Image;return r.src=await this.base64(t,e,n),r}async base64(t,e,n){const r=this.canvas(t);if(r.toBlob!==void 0)return new Promise((i,s)=>{r.toBlob(o=>{if(!o){s(new Error("ICanvas.toBlob failed!"));return}const a=new FileReader;a.onload=()=>i(a.result),a.onerror=s,a.readAsDataURL(o)},e,n)});if(r.toDataURL!==void 0)return r.toDataURL(e,n);if(r.convertToBlob!==void 0){const i=await r.convertToBlob({type:e,quality:n});return new Promise((s,o)=>{const a=new FileReader;a.onload=()=>s(a.result),a.onerror=o,a.readAsDataURL(i)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,e){const{pixels:n,width:r,height:i,flipY:s}=this._rawPixels(t,e);s&&Ql._flipY(n,r,i),Ql._unpremultiplyAlpha(n);const o=new L9(r,i,1),a=new ImageData(new Uint8ClampedArray(n.buffer),r,i);return o.context.putImageData(a,0,0),o.canvas}pixels(t,e){const{pixels:n,width:r,height:i,flipY:s}=this._rawPixels(t,e);return s&&Ql._flipY(n,r,i),Ql._unpremultiplyAlpha(n),n}_rawPixels(t,e){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let r,i=!1,s,o=!1;if(t&&(t instanceof _o?s=t:(s=n.generateTexture(t,{resolution:n.resolution,multisample:n.multisample}),o=!0)),s){if(r=s.baseTexture.resolution,e=e??s.frame,i=!1,!o){n.renderTexture.bind(s);const u=s.framebuffer.glFramebuffers[n.CONTEXT_UID];u.blitFramebuffer&&n.framebuffer.bind(u.blitFramebuffer)}}else r=n.resolution,e||(e=GV,e.width=n.width/r,e.height=n.height/r),i=!0,n.renderTexture.bind();const a=Math.round(e.width*r),l=Math.round(e.height*r),c=new Uint8Array(zV*a*l),d=n.gl;return d.readPixels(Math.round(e.x*r),Math.round(e.y*r),a,l,d.RGBA,d.UNSIGNED_BYTE,c),o&&s?.destroy(!0),{pixels:c,width:a,height:l,flipY:i}}destroy(){this.renderer=null}static _flipY(t,e,n){const r=e<<2,i=n>>1,s=new Uint8Array(r);for(let o=0;o<i;o++){const a=o*r,l=(n-o-1)*r;s.set(t.subarray(a,a+r)),t.copyWithin(a,l,l+r),t.set(s,l)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let n=0;n<e;n+=4){const r=t[n+3];if(r!==0){const i=255.001/r;t[n]=t[n]*i+.5,t[n+1]=t[n+1]*i+.5,t[n+2]=t[n+2]*i+.5}}}};let Xk=Ql;Xk.extension={name:"extract",type:q.RendererSystem};se.add(Xk);const gf={build(t){const e=t.points;let n,r,i,s,o,a;if(t.type===kt.CIRC){const p=t.shape;n=p.x,r=p.y,o=a=p.radius,i=s=0}else if(t.type===kt.ELIP){const p=t.shape;n=p.x,r=p.y,o=p.width,a=p.height,i=s=0}else{const p=t.shape,m=p.width/2,y=p.height/2;n=p.x+m,r=p.y+y,o=a=Math.max(0,Math.min(p.radius,Math.min(m,y))),i=m-o,s=y-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),c=l*8+(i?4:0)+(s?4:0);if(e.length=c,c===0)return;if(l===0){e.length=8,e[0]=e[6]=n+i,e[1]=e[3]=r+s,e[2]=e[4]=n-i,e[5]=e[7]=r-s;return}let d=0,u=l*4+(i?2:0)+2,h=u,f=c;{const p=i+o,m=s,y=n+p,g=n-p,_=r+m;if(e[d++]=y,e[d++]=_,e[--u]=_,e[--u]=g,s){const v=r-m;e[h++]=g,e[h++]=v,e[--f]=v,e[--f]=y}}for(let p=1;p<l;p++){const m=Math.PI/2*(p/l),y=i+Math.cos(m)*o,g=s+Math.sin(m)*a,_=n+y,v=n-y,w=r+g,S=r-g;e[d++]=_,e[d++]=w,e[--u]=w,e[--u]=v,e[h++]=v,e[h++]=S,e[--f]=S,e[--f]=_}{const p=i,m=s+a,y=n+p,g=n-p,_=r+m,v=r-m;e[d++]=y,e[d++]=_,e[--f]=v,e[--f]=y,i&&(e[d++]=g,e[d++]=_,e[--f]=v,e[--f]=g)}},triangulate(t,e){const n=t.points,r=e.points,i=e.indices;if(n.length===0)return;let s=r.length/2;const o=s;let a,l;if(t.type!==kt.RREC){const d=t.shape;a=d.x,l=d.y}else{const d=t.shape;a=d.x+d.width/2,l=d.y+d.height/2}const c=t.matrix;r.push(t.matrix?c.a*a+c.c*l+c.tx:a,t.matrix?c.b*a+c.d*l+c.ty:l),s++,r.push(n[0],n[1]);for(let d=2;d<n.length;d+=2)r.push(n[d],n[d+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function SE(t,e=!1){const n=t.length;if(n<6)return;let r=0;for(let i=0,s=t[n-2],o=t[n-1];i<n;i+=2){const a=t[i],l=t[i+1];r+=(a-s)*(l+o),s=a,o=l}if(!e&&r>0||e&&r<=0){const i=n/2;for(let s=i+i%2;s<n;s+=2){const o=n-s-2,a=n-s-1,l=s,c=s+1;[t[o],t[l]]=[t[l],t[o]],[t[a],t[c]]=[t[c],t[a]]}}}const Yk={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let n=t.points;const r=t.holes,i=e.points,s=e.indices;if(n.length>=6){SE(n,!1);const o=[];for(let c=0;c<r.length;c++){const d=r[c];SE(d.points,!0),o.push(n.length/2),n=n.concat(d.points)}const a=c8(n,o,2);if(!a)return;const l=i.length/2;for(let c=0;c<a.length;c+=3)s.push(a[c]+l),s.push(a[c+1]+l),s.push(a[c+2]+l);for(let c=0;c<n.length;c++)i.push(n[c])}}},WV={build(t){const e=t.shape,n=e.x,r=e.y,i=e.width,s=e.height,o=t.points;o.length=0,i>=0&&s>=0&&o.push(n,r,n+i,r,n+i,r+s,n,r+s)},triangulate(t,e){const n=t.points,r=e.points;if(n.length===0)return;const i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},VV={build(t){gf.build(t)},triangulate(t,e){gf.triangulate(t,e)}};var fr=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(fr||{}),zs=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(zs||{});const za={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}};class EE{static curveTo(e,n,r,i,s,o){const a=o[o.length-2],c=o[o.length-1]-n,d=a-e,u=i-n,h=r-e,f=Math.abs(c*h-d*u);if(f<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==n)&&o.push(e,n),null;const p=c*c+d*d,m=u*u+h*h,y=c*u+d*h,g=s*Math.sqrt(p)/f,_=s*Math.sqrt(m)/f,v=g*y/p,w=_*y/m,S=g*h+_*d,E=g*u+_*c,T=d*(_+v),C=c*(_+v),A=h*(g+w),P=u*(g+w),O=Math.atan2(C-E,T-S),U=Math.atan2(P-E,A-S);return{cx:S+e,cy:E+n,radius:s,startAngle:O,endAngle:U,anticlockwise:d*u>h*c}}static arc(e,n,r,i,s,o,a,l,c){const d=a-o,u=za._segmentsCount(Math.abs(d)*s,Math.ceil(Math.abs(d)/uf)*40),h=d/(u*2),f=h*2,p=Math.cos(h),m=Math.sin(h),y=u-1,g=y%1/y;for(let _=0;_<=y;++_){const v=_+g*_,w=h+o+f*v,S=Math.cos(w),E=-Math.sin(w);c.push((p*S+m*E)*s+r,(p*-E+m*S)*s+i)}}}class XV{constructor(){this.reset()}begin(e,n,r){this.reset(),this.style=e,this.start=n,this.attribStart=r}end(e,n){this.attribSize=n-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class ib{static curveLength(e,n,r,i,s,o,a,l){let d=0,u=0,h=0,f=0,p=0,m=0,y=0,g=0,_=0,v=0,w=0,S=e,E=n;for(let T=1;T<=10;++T)u=T/10,h=u*u,f=h*u,p=1-u,m=p*p,y=m*p,g=y*e+3*m*u*r+3*p*h*s+f*a,_=y*n+3*m*u*i+3*p*h*o+f*l,v=S-g,w=E-_,S=g,E=_,d+=Math.sqrt(v*v+w*w);return d}static curveTo(e,n,r,i,s,o,a){const l=a[a.length-2],c=a[a.length-1];a.length-=2;const d=za._segmentsCount(ib.curveLength(l,c,e,n,r,i,s,o));let u=0,h=0,f=0,p=0,m=0;a.push(l,c);for(let y=1,g=0;y<=d;++y)g=y/d,u=1-g,h=u*u,f=h*u,p=g*g,m=p*g,a.push(f*l+3*h*g*e+3*u*p*r+m*s,f*c+3*h*g*n+3*u*p*i+m*o)}}function TE(t,e,n,r,i,s,o,a){const l=t-n*i,c=e-r*i,d=t+n*s,u=e+r*s;let h,f;o?(h=r,f=-n):(h=-r,f=n);const p=l+h,m=c+f,y=d+h,g=u+f;return a.push(p,m,y,g),2}function ks(t,e,n,r,i,s,o,a){const l=n-t,c=r-e;let d=Math.atan2(l,c),u=Math.atan2(i-t,s-e);a&&d<u?d+=Math.PI*2:!a&&d>u&&(u+=Math.PI*2);let h=d;const f=u-d,p=Math.abs(f),m=Math.sqrt(l*l+c*c),y=(15*p*Math.sqrt(m)/Math.PI>>0)+1,g=f/y;if(h+=g,a){o.push(t,e,n,r);for(let _=1,v=h;_<y;_++,v+=g)o.push(t,e,t+Math.sin(v)*m,e+Math.cos(v)*m);o.push(t,e,i,s)}else{o.push(n,r,t,e);for(let _=1,v=h;_<y;_++,v+=g)o.push(t+Math.sin(v)*m,e+Math.cos(v)*m,t,e);o.push(i,s,t,e)}return y*2}function YV(t,e){const n=t.shape;let r=t.points||n.points.slice();const i=e.closePointEps;if(r.length===0)return;const s=t.lineStyle,o=new ue(r[0],r[1]),a=new ue(r[r.length-2],r[r.length-1]),l=n.type!==kt.POLY||n.closeStroke,c=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(l){r=r.slice(),c&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));const B=(o.x+a.x)*.5,R=(a.y+o.y)*.5;r.unshift(B,R),r.push(B,R)}const d=e.points,u=r.length/2;let h=r.length;const f=d.length/2,p=s.width/2,m=p*p,y=s.miterLimit*s.miterLimit;let g=r[0],_=r[1],v=r[2],w=r[3],S=0,E=0,T=-(_-w),C=g-v,A=0,P=0,O=Math.sqrt(T*T+C*C);T/=O,C/=O,T*=p,C*=p;const U=s.alignment,k=(1-U)*2,I=U*2;l||(s.cap===zs.ROUND?h+=ks(g-T*(k-I)*.5,_-C*(k-I)*.5,g-T*k,_-C*k,g+T*I,_+C*I,d,!0)+2:s.cap===zs.SQUARE&&(h+=TE(g,_,T,C,k,I,!0,d))),d.push(g-T*k,_-C*k,g+T*I,_+C*I);for(let B=1;B<u-1;++B){g=r[(B-1)*2],_=r[(B-1)*2+1],v=r[B*2],w=r[B*2+1],S=r[(B+1)*2],E=r[(B+1)*2+1],T=-(_-w),C=g-v,O=Math.sqrt(T*T+C*C),T/=O,C/=O,T*=p,C*=p,A=-(w-E),P=v-S,O=Math.sqrt(A*A+P*P),A/=O,P/=O,A*=p,P*=p;const R=v-g,M=_-w,D=v-S,L=E-w,j=R*D+M*L,ee=M*D-L*R,ie=ee<0;if(Math.abs(ee)<.001*Math.abs(j)){d.push(v-T*k,w-C*k,v+T*I,w+C*I),j>=0&&(s.join===fr.ROUND?h+=ks(v,w,v-T*k,w-C*k,v-A*k,w-P*k,d,!1)+4:h+=2,d.push(v-A*I,w-P*I,v+A*k,w+P*k));continue}const ce=(-T+g)*(-C+w)-(-T+v)*(-C+_),re=(-A+S)*(-P+w)-(-A+v)*(-P+E),oe=(R*re-D*ce)/ee,_e=(L*ce-M*re)/ee,xe=(oe-v)*(oe-v)+(_e-w)*(_e-w),me=v+(oe-v)*k,ge=w+(_e-w)*k,Re=v-(oe-v)*I,Ie=w-(_e-w)*I,ke=Math.min(R*R+M*M,D*D+L*L),Se=ie?k:I,De=ke+Se*Se*m,_n=xe<=De;let on=s.join;if(on===fr.MITER&&xe/m>y&&(on=fr.BEVEL),_n)switch(on){case fr.MITER:{d.push(me,ge,Re,Ie);break}case fr.BEVEL:{ie?d.push(me,ge,v+T*I,w+C*I,me,ge,v+A*I,w+P*I):d.push(v-T*k,w-C*k,Re,Ie,v-A*k,w-P*k,Re,Ie),h+=2;break}case fr.ROUND:{ie?(d.push(me,ge,v+T*I,w+C*I),h+=ks(v,w,v+T*I,w+C*I,v+A*I,w+P*I,d,!0)+4,d.push(me,ge,v+A*I,w+P*I)):(d.push(v-T*k,w-C*k,Re,Ie),h+=ks(v,w,v-T*k,w-C*k,v-A*k,w-P*k,d,!1)+4,d.push(v-A*k,w-P*k,Re,Ie));break}}else{switch(d.push(v-T*k,w-C*k,v+T*I,w+C*I),on){case fr.MITER:{ie?d.push(Re,Ie,Re,Ie):d.push(me,ge,me,ge),h+=2;break}case fr.ROUND:{ie?h+=ks(v,w,v+T*I,w+C*I,v+A*I,w+P*I,d,!0)+2:h+=ks(v,w,v-T*k,w-C*k,v-A*k,w-P*k,d,!1)+2;break}}d.push(v-A*k,w-P*k,v+A*I,w+P*I),h+=2}}g=r[(u-2)*2],_=r[(u-2)*2+1],v=r[(u-1)*2],w=r[(u-1)*2+1],T=-(_-w),C=g-v,O=Math.sqrt(T*T+C*C),T/=O,C/=O,T*=p,C*=p,d.push(v-T*k,w-C*k,v+T*I,w+C*I),l||(s.cap===zs.ROUND?h+=ks(v-T*(k-I)*.5,w-C*(k-I)*.5,v-T*k,w-C*k,v+T*I,w+C*I,d,!1)+2:s.cap===zs.SQUARE&&(h+=TE(v,w,T,C,k,I,!1,d)));const F=e.indices,N=za.epsilon*za.epsilon;for(let B=f;B<h+f-2;++B)g=d[B*2],_=d[B*2+1],v=d[(B+1)*2],w=d[(B+1)*2+1],S=d[(B+2)*2],E=d[(B+2)*2+1],!(Math.abs(g*(w-E)+v*(E-_)+S*(_-w))<N)&&F.push(B,B+1,B+2)}function KV(t,e){let n=0;const r=t.shape,i=t.points||r.points,s=r.type!==kt.POLY||r.closeStroke;if(i.length===0)return;const o=e.points,a=e.indices,l=i.length/2,c=o.length/2;let d=c;for(o.push(i[0],i[1]),n=1;n<l;n++)o.push(i[n*2],i[n*2+1]),a.push(d,d+1),d++;s&&a.push(d,c)}function CE(t,e){t.lineStyle.native?KV(t,e):YV(t,e)}class sb{static curveLength(e,n,r,i,s,o){const a=e-2*r+s,l=n-2*i+o,c=2*r-2*e,d=2*i-2*n,u=4*(a*a+l*l),h=4*(a*c+l*d),f=c*c+d*d,p=2*Math.sqrt(u+h+f),m=Math.sqrt(u),y=2*u*m,g=2*Math.sqrt(f),_=h/m;return(y*p+m*h*(p-g)+(4*f*u-h*h)*Math.log((2*m+_+p)/(_+g)))/(4*y)}static curveTo(e,n,r,i,s){const o=s[s.length-2],a=s[s.length-1],l=za._segmentsCount(sb.curveLength(o,a,e,n,r,i));let c=0,d=0;for(let u=1;u<=l;++u){const h=u/l;c=o+(e-o)*h,d=a+(n-a)*h,s.push(c+(e+(r-e)*h-c)*h,d+(n+(i-n)*h-d)*h)}}}const Vg={[kt.POLY]:Yk,[kt.CIRC]:gf,[kt.ELIP]:gf,[kt.RECT]:WV,[kt.RREC]:VV},PE=[],Mh=[];class yf{constructor(e,n=null,r=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=n,this.matrix=i,this.type=e.type}clone(){return new yf(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Bo=new ue,Kk=class extends ok{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new hf,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Mh.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),PE.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,n=null,r=null){const i=new yf(t,e,n,r);return this.graphicsData.push(i),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const n=new yf(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let n=0;n<e.length;++n){const r=e[n];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(t,Bo):Bo.copyFrom(t),r.shape.contains(Bo.x,Bo.y))){let i=!1;if(r.holes){for(let s=0;s<r.holes.length;s++)if(r.holes[s].shape.contains(Bo.x,Bo.y)){i=!0;break}}if(!i)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let n=null,r=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],r=n.style);for(let a=this.shapeIndex;a<e.length;a++){this.shapeIndex++;const l=e[a],c=l.fillStyle,d=l.lineStyle;Vg[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(c.visible||d.visible)&&this.processHoles(l.holes);for(let h=0;h<2;h++){const f=h===0?c:d;if(!f.visible)continue;const p=f.texture.baseTexture,m=this.indices.length,y=this.points.length/2;p.wrapMode=ds.REPEAT,h===0?this.processFill(l):this.processLine(l);const g=this.points.length/2-y;g!==0&&(n&&!this._compareStyles(r,f)&&(n.end(m,y),n=null),n||(n=PE.pop()||new XV,n.begin(f,m,y),this.batches.push(n),r=f),this.addUvs(this.points,t,f.texture,y,g,f.matrix))}}const i=this.indices.length,s=this.points.length/2;if(n&&n.end(i,s),this.batches.length===0){this.batchable=!0;return}const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const n=this.graphicsData[t],r=n.fillStyle,i=n.lineStyle;if(r&&!r.texture.baseTexture.valid||i&&!i.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,n=t.length;e<n;e++){const r=t[e];for(let i=0;i<r.size;i++){const s=r.start+i;this.indicesUint16[s]=this.indicesUint16[s]-r.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<Kk.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++fe._globalBatch;for(let d=0;d<this.drawCalls.length;d++)this.drawCalls[d].texArray.clear(),Mh.push(this.drawCalls[d]);this.drawCalls.length=0;const e=this.colors,n=this.textureIds;let r=Mh.pop();r||(r=new zv,r.texArray=new Vv),r.texArray.count=0,r.start=0,r.size=0,r.type=Kr.TRIANGLES;let i=0,s=null,o=0,a=!1,l=Kr.TRIANGLES,c=0;this.drawCalls.push(r);for(let d=0;d<this.batches.length;d++){const u=this.batches[d],h=8,f=u.style,p=f.texture.baseTexture;a!==!!f.native&&(a=!!f.native,l=a?Kr.LINES:Kr.TRIANGLES,s=null,i=h,t++),s!==p&&(s=p,p._batchEnabled!==t&&(i===h&&(t++,i=0,r.size>0&&(r=Mh.pop(),r||(r=new zv,r.texArray=new Vv),this.drawCalls.push(r)),r.start=c,r.size=0,r.texArray.count=0,r.type=l),p.touched=1,p._batchEnabled=t,p._batchLocation=i,p.wrapMode=ds.REPEAT,r.texArray.elements[r.texArray.count++]=p,i++)),r.size+=u.size,c+=u.size,o=p._batchLocation,this.addColors(e,f.color,f.alpha,u.attribSize,u.attribStart),this.addTextureIds(n,o,u.attribSize,u.attribStart)}fe._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,n=this.colors,r=this.textureIds,i=new ArrayBuffer(t.length*3*4),s=new Float32Array(i),o=new Uint32Array(i);let a=0;for(let l=0;l<t.length/2;l++)s[a++]=t[l*2],s[a++]=t[l*2+1],s[a++]=e[l*2],s[a++]=e[l*2+1],o[a++]=n[l],s[a++]=r[l];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?Yk.triangulate(t,this):Vg[t.type].triangulate(t,this)}processLine(t){CE(t,this);for(let e=0;e<t.holes.length;e++)CE(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const n=t[e];Vg[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let n=0;n<t.length/2;n++){const r=t[n*2],i=t[n*2+1];t[n*2]=e.a*r+e.c*i+e.tx,t[n*2+1]=e.b*r+e.d*i+e.ty}}addColors(t,e,n,r,i=0){const s=Le.shared.setValue(e).toLittleEndianNumber(),o=Le.shared.setValue(s).toPremultiplied(n);t.length=Math.max(t.length,i+r);for(let a=0;a<r;a++)t[i+a]=o}addTextureIds(t,e,n,r=0){t.length=Math.max(t.length,r+n);for(let i=0;i<n;i++)t[r+i]=e}addUvs(t,e,n,r,i,s=null){let o=0;const a=e.length,l=n.frame;for(;o<i;){let d=t[(r+o)*2],u=t[(r+o)*2+1];if(s){const h=s.a*d+s.c*u+s.tx;u=s.b*d+s.d*u+s.ty,d=h}o++,e.push(d/l.width,u/l.height)}const c=n.baseTexture;(l.width<c.width||l.height<c.height)&&this.adjustUvs(e,n,a,i)}adjustUvs(t,e,n,r){const i=e.baseTexture,s=1e-6,o=n+r*2,a=e.frame,l=a.width/i.width,c=a.height/i.height;let d=a.x/a.width,u=a.y/a.height,h=Math.floor(t[n]+s),f=Math.floor(t[n+1]+s);for(let p=n+2;p<o;p+=2)h=Math.min(h,Math.floor(t[p]+s)),f=Math.min(f,Math.floor(t[p+1]+s));d-=h,u-=f;for(let p=n;p<o;p+=2)t[p]=(t[p]+d)*l,t[p+1]=(t[p+1]+u)*c}};let qk=Kk;qk.BATCHABLE_SIZE=100;class Vp{constructor(){this.color=16777215,this.alpha=1,this.texture=te.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Vp;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=te.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class ob extends Vp{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=zs.BUTT,this.join=fr.MITER,this.miterLimit=10}clone(){const e=new ob;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const Xg={},ld=class extends ye{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Vp,this._lineStyle=new ob,this._matrix=null,this._holeMode=!1,this.state=Gi.for2d(),this._geometry=t||new qk,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Le(16777215),this.blendMode=he.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new ld(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,n,r=.5,i=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:n,alignment:r,native:i}),this.lineTextureStyle(t)}lineTextureStyle(t){const e={width:0,texture:te.WHITE,color:t?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:zs.BUTT,join:fr.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const n=t.width>0&&t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:n},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Sa,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Sa,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,r=n[n.length-2],i=n[n.length-1];return(r!==t||i!==e)&&n.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,n,r){this._initCurve();const i=this.currentPath.points;return i.length===0&&this.moveTo(0,0),sb.curveTo(t,e,n,r,i),this}bezierCurveTo(t,e,n,r,i,s){return this._initCurve(),ib.curveTo(t,e,n,r,i,s,this.currentPath.points),this}arcTo(t,e,n,r,i){this._initCurve(t,e);const s=this.currentPath.points,o=EE.curveTo(t,e,n,r,i,s);if(o){const{cx:a,cy:l,radius:c,startAngle:d,endAngle:u,anticlockwise:h}=o;this.arc(a,l,c,d,u,h)}return this}arc(t,e,n,r,i,s=!1){if(r===i)return this;if(!s&&i<=r?i+=uf:s&&r<=i&&(r+=uf),i-r===0)return this;const a=t+Math.cos(r)*n,l=e+Math.sin(r)*n,c=this._geometry.closePointEps;let d=this.currentPath?this.currentPath.points:null;if(d){const u=Math.abs(d[d.length-2]-a),h=Math.abs(d[d.length-1]-l);u<c&&h<c||d.push(a,l)}else this.moveTo(a,l),d=this.currentPath.points;return EE.arc(a,l,t,e,n,r,i,s,d),this}beginFill(t=0,e){return this.beginTextureFill({texture:te.WHITE,color:t,alpha:e})}normalizeColor(t){const e=Le.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){const e={texture:te.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const n=t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:n},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,n,r){return this.drawShape(new pe(t,e,n,r))}drawRoundedRect(t,e,n,r,i){return this.drawShape(new eb(t,e,n,r,i))}drawCircle(t,e,n){return this.drawShape(new Qx(t,e,n))}drawEllipse(t,e,n,r){return this.drawShape(new Jx(t,e,n,r))}drawPolygon(...t){let e,n=!0;const r=t[0];r.points?(n=r.closeStroke,e=r.points):Array.isArray(t[0])?e=t[0]:e=t;const i=new Sa(e);return i.closeStroke=n,this.drawShape(i),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===kt.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(let r=0;r<n;r++){const i=t.batches[r],s=i.style.color,o=new Float32Array(this.vertexData.buffer,i.attribStart*4*2,i.attribSize*2),a=new Float32Array(t.uvsFloat32.buffer,i.attribStart*4*2,i.attribSize*2),l=new Uint16Array(t.indicesUint16.buffer,i.start*2,i.size),c={vertexData:o,blendMode:e,indices:l,uvs:a,_batchRGB:Le.shared.setValue(s).toRgbArray(),_tintRGB:s,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=c}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,n=this.batches.length;e<n;e++){const r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}}_renderDirect(t){const e=this._resolveDirectShader(t),n=this._geometry,r=this.worldAlpha,i=e.uniforms,s=n.drawCalls;i.translationMatrix=this.transform.worldTransform,Le.shared.setValue(this._tintColor).premultiply(r).toArray(i.tint),t.shader.bind(e),t.geometry.bind(n,e),t.state.set(this.state);for(let o=0,a=s.length;o<a;o++)this._renderDrawCallDirect(t,n.drawCalls[o])}_renderDrawCallDirect(t,e){const{texArray:n,type:r,size:i,start:s}=e,o=n.count;for(let a=0;a<o;a++)t.texture.bind(n.elements[a],a);t.geometry.draw(r,i,s)}_resolveDirectShader(t){let e=this.shader;const n=this.pluginName;if(!e){if(!Xg[n]){const{maxTextures:r}=t.plugins[n],i=new Int32Array(r);for(let a=0;a<r;a++)i[a]=a;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ve,default:Pr.from({uSamplers:i},!0)},o=t.plugins[n]._shader.program;Xg[n]=new ri(o,s)}e=Xg[n]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:n,maxX:r,maxY:i}=t.bounds;this._bounds.addFrame(this.transform,e,n,r,i)}containsPoint(t){return this.worldTransform.applyInverse(t,ld._TEMP_POINT),this._geometry.containsPoint(ld._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=Le.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,s=e.d,o=e.tx,a=e.ty,l=this._geometry.points,c=this.vertexData;let d=0;for(let u=0;u<l.length;u+=2){const h=l[u],f=l[u+1];c[d++]=n*h+i*f+o,c[d++]=s*f+r*h+a}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};let Xt=ld;Xt.curves=za;Xt._TEMP_POINT=new ue;class qV{constructor(e,n){this.uvBuffer=e,this.uvMatrix=n,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const n=this.uvBuffer.data;(!this.data||this.data.length!==n.length)&&(this.data=new Float32Array(n.length)),this.uvMatrix.multiplyUvs(n,this.data),this._updateID++}}const Yg=new ue,AE=new Sa,Zk=class extends ye{constructor(t,e,n,r=Kr.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=n||Gi.for2d(),this.drawMode=r,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=Y.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Kr.TRIANGLES&&e.length<Zk.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)}calculateVertices(){const e=this.geometry.buffers[0],n=e.data,r=e._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,l=i.d,c=i.tx,d=i.ty,u=this.vertexData;for(let h=0;h<u.length/2;h++){const f=n[h*2],p=n[h*2+1];u[h*2]=s*f+a*p+c,u[h*2+1]=o*f+l*p+d}if(this._roundPixels){const h=Y.RESOLUTION;for(let f=0;f<u.length;++f)u[f]=Math.round(u[f]*h)/h}this.vertexDirty=r}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new qV(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Yg);const e=this.geometry.getBuffer("aVertexPosition").data,n=AE.points,r=this.geometry.getIndex().data,i=r.length,s=this.drawMode===4?3:1;for(let o=0;o+2<i;o+=s){const a=r[o]*2,l=r[o+1]*2,c=r[o+2]*2;if(n[0]=e[a],n[1]=e[a+1],n[2]=e[l],n[3]=e[l+1],n[4]=e[c],n[5]=e[c+1],AE.contains(Yg.x,Yg.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let r0=Zk;r0.BATCHABLE_SIZE=100;class ZV extends _s{constructor(e,n,r){super();const i=new gt(e),s=new gt(n,!0),o=new gt(r,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,le.FLOAT).addAttribute("aTextureCoord",s,2,!1,le.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var QV=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,JV=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class RE extends ri{constructor(e,n){const r={uSampler:e,alpha:1,uTextureMatrix:Ve.IDENTITY,uColor:new Float32Array([1,1,1,1])};n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(r,n.uniforms),super(n.program||wr.from(JV,QV),r),this._colorDirty=!1,this.uvMatrix=new tb(e),this.batchable=n.program===void 0,this.pluginName=n.pluginName,this._tintColor=new Le(n.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=n.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const n=this.texture.baseTexture.alphaMode;Le.shared.setValue(this._tintColor).premultiply(this._alpha,n).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class IE{constructor(e,n,r){this.geometry=new _s,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||le.FLOAT,offset:s.offset},n[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let n=0;this.indexBuffer=new gt(O9(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=n,n+=a.size,this.dynamicStride+=a.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new gt(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new gt(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===le.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===le.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,n,r){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,n,r,s.type===le.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,n,r){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,n,r,s.type===le.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var eX=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,tX=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Qk extends $p{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Ve,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:le.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=ri.from(tX,eX,{}),this.state=Gi.for2d()}render(e){const n=e.children,r=e._maxSize,i=e._batchSize,s=this.renderer;let o=n.length;if(o===0)return;o>r&&!e.autoResize&&(o=r);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=n[0]._texture.baseTexture,c=l.alphaMode>0;this.state.blendMode=tk(e.blendMode,c),s.state.set(this.state);const d=s.gl,u=e.worldTransform.copyTo(this.tempMatrix);u.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=Le.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,c).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let h=!1;for(let f=0,p=0;f<o;f+=i,p+=1){let m=o-f;m>i&&(m=i),p>=a.length&&a.push(this._generateOneMoreBuffer(e));const y=a[p];y.uploadDynamic(n,f,m);const g=e._bufferUpdateIDs[p]||0;h=h||y._updateID<g,h&&(y._updateID=e._updateID,y.uploadStatic(n,f,m)),s.geometry.bind(y.geometry),d.drawElements(d.TRIANGLES,m*6,d.UNSIGNED_SHORT,0)}}generateBuffers(e){const n=[],r=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<r;o+=i)n.push(new IE(this.properties,s,i));return n}_generateOneMoreBuffer(e){const n=e._batchSize,r=e._properties;return new IE(this.properties,r,n)}uploadVertices(e,n,r,i,s,o){let a=0,l=0,c=0,d=0;for(let u=0;u<r;++u){const h=e[n+u],f=h._texture,p=h.scale.x,m=h.scale.y,y=f.trim,g=f.orig;y?(l=y.x-h.anchor.x*g.width,a=l+y.width,d=y.y-h.anchor.y*g.height,c=d+y.height):(a=g.width*(1-h.anchor.x),l=g.width*-h.anchor.x,c=g.height*(1-h.anchor.y),d=g.height*-h.anchor.y),i[o]=l*p,i[o+1]=d*m,i[o+s]=a*p,i[o+s+1]=d*m,i[o+s*2]=a*p,i[o+s*2+1]=c*m,i[o+s*3]=l*p,i[o+s*3+1]=c*m,o+=s*4}}uploadPosition(e,n,r,i,s,o){for(let a=0;a<r;a++){const l=e[n+a].position;i[o]=l.x,i[o+1]=l.y,i[o+s]=l.x,i[o+s+1]=l.y,i[o+s*2]=l.x,i[o+s*2+1]=l.y,i[o+s*3]=l.x,i[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,n,r,i,s,o){for(let a=0;a<r;a++){const l=e[n+a].rotation;i[o]=l,i[o+s]=l,i[o+s*2]=l,i[o+s*3]=l,o+=s*4}}uploadUvs(e,n,r,i,s,o){for(let a=0;a<r;++a){const l=e[n+a]._texture._uvs;l?(i[o]=l.x0,i[o+1]=l.y0,i[o+s]=l.x1,i[o+s+1]=l.y1,i[o+s*2]=l.x2,i[o+s*2+1]=l.y2,i[o+s*3]=l.x3,i[o+s*3+1]=l.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,n,r,i,s,o){for(let a=0;a<r;++a){const l=e[n+a],c=Le.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);i[o]=c,i[o+s]=c,i[o+s*2]=c,i[o+s*3]=c,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Qk.extension={name:"particle",type:q.RendererPlugin};se.add(Qk);var Xp=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(Xp||{});const Dh={willReadFrequently:!0},ne=class{static get experimentalLetterSpacingSupported(){let t=ne._experimentalLetterSpacingSupported;if(t!==void 0){const e=Y.ADAPTER.getCanvasRenderingContext2D().prototype;t=ne._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,n,r,i,s,o,a,l){this.text=t,this.style=e,this.width=n,this.height=r,this.lines=i,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=l}static measureText(t,e,n,r=ne._canvas){n=n??e.wordWrap;const i=e.toFontString(),s=ne.measureFont(i);s.fontSize===0&&(s.fontSize=e.fontSize,s.ascent=e.fontSize);const o=r.getContext("2d",Dh);o.font=i;const l=(n?ne.wordWrap(t,e,r):t).split(/(?:\r\n|\r|\n)/),c=new Array(l.length);let d=0;for(let p=0;p<l.length;p++){const m=ne._measureText(l[p],e.letterSpacing,o);c[p]=m,d=Math.max(d,m)}let u=d+e.strokeThickness;e.dropShadow&&(u+=e.dropShadowDistance);const h=e.lineHeight||s.fontSize+e.strokeThickness;let f=Math.max(h,s.fontSize+e.strokeThickness*2)+(l.length-1)*(h+e.leading);return e.dropShadow&&(f+=e.dropShadowDistance),new ne(t,e,u,f,l,c,h+e.leading,d,s)}static _measureText(t,e,n){let r=!1;ne.experimentalLetterSpacingSupported&&(ne.experimentalLetterSpacing?(n.letterSpacing=`${e}px`,n.textLetterSpacing=`${e}px`,r=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let i=n.measureText(t).width;return i>0&&(r?i-=e:i+=(ne.graphemeSegmenter(t).length-1)*e),i}static wordWrap(t,e,n=ne._canvas){const r=n.getContext("2d",Dh);let i=0,s="",o="";const a=Object.create(null),{letterSpacing:l,whiteSpace:c}=e,d=ne.collapseSpaces(c),u=ne.collapseNewlines(c);let h=!d;const f=e.wordWrapWidth+l,p=ne.tokenize(t);for(let m=0;m<p.length;m++){let y=p[m];if(ne.isNewline(y)){if(!u){o+=ne.addLine(s),h=!d,s="",i=0;continue}y=" "}if(d){const _=ne.isBreakingSpace(y),v=ne.isBreakingSpace(s[s.length-1]);if(_&&v)continue}const g=ne.getFromCache(y,l,a,r);if(g>f)if(s!==""&&(o+=ne.addLine(s),s="",i=0),ne.canBreakWords(y,e.breakWords)){const _=ne.wordWrapSplit(y);for(let v=0;v<_.length;v++){let w=_[v],S=w,E=1;for(;_[v+E];){const C=_[v+E];if(!ne.canBreakChars(S,C,y,v,e.breakWords))w+=C;else break;S=C,E++}v+=E-1;const T=ne.getFromCache(w,l,a,r);T+i>f&&(o+=ne.addLine(s),h=!1,s="",i=0),s+=w,i+=T}}else{s.length>0&&(o+=ne.addLine(s),s="",i=0);const _=m===p.length-1;o+=ne.addLine(y,!_),h=!1,s="",i=0}else g+i>f&&(h=!1,o+=ne.addLine(s),s="",i=0),(s.length>0||!ne.isBreakingSpace(y)||h)&&(s+=y,i+=g)}return o+=ne.addLine(s,!1),o}static addLine(t,e=!0){return t=ne.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,n,r){let i=n[t];return typeof i!="number"&&(i=ne._measureText(t,e,r)+e,n[t]=i),i}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const n=t[e];if(!ne.isBreakingSpace(n))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:ne._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:ne._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let n="";if(typeof t!="string")return e;for(let r=0;r<t.length;r++){const i=t[r],s=t[r+1];if(ne.isBreakingSpace(i,s)||ne.isNewline(i)){n!==""&&(e.push(n),n=""),e.push(i);continue}n+=i}return n!==""&&e.push(n),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,n,r,i){return!0}static wordWrapSplit(t){return ne.graphemeSegmenter(t)}static measureFont(t){if(ne._fonts[t])return ne._fonts[t];const e={ascent:0,descent:0,fontSize:0},n=ne._canvas,r=ne._context;r.font=t;const i=ne.METRICS_STRING+ne.BASELINE_SYMBOL,s=Math.ceil(r.measureText(i).width);let o=Math.ceil(r.measureText(ne.BASELINE_SYMBOL).width);const a=Math.ceil(ne.HEIGHT_MULTIPLIER*o);if(o=o*ne.BASELINE_MULTIPLIER|0,s===0||a===0)return ne._fonts[t]=e,e;n.width=s,n.height=a,r.fillStyle="#f00",r.fillRect(0,0,s,a),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(i,0,o);const l=r.getImageData(0,0,s,a).data,c=l.length,d=s*4;let u=0,h=0,f=!1;for(u=0;u<o;++u){for(let p=0;p<d;p+=4)if(l[h+p]!==255){f=!0;break}if(!f)h+=d;else break}for(e.ascent=o-u,h=c-d,f=!1,u=a;u>o;--u){for(let p=0;p<d;p+=4)if(l[h+p]!==255){f=!0;break}if(!f)h-=d;else break}return e.descent=u-o,e.fontSize=e.ascent+e.descent,ne._fonts[t]=e,e}static clearMetrics(t=""){t?delete ne._fonts[t]:ne._fonts={}}static get _canvas(){if(!ne.__canvas){let t;try{const e=new OffscreenCanvas(0,0);if(e.getContext("2d",Dh)?.measureText)return ne.__canvas=e,e;t=Y.ADAPTER.createCanvas()}catch{t=Y.ADAPTER.createCanvas()}t.width=t.height=10,ne.__canvas=t}return ne.__canvas}static get _context(){return ne.__context||(ne.__context=ne._canvas.getContext("2d",Dh)),ne.__context}};let It=ne;It.METRICS_STRING="|ÉqÅ";It.BASELINE_SYMBOL="M";It.BASELINE_MULTIPLIER=1.4;It.HEIGHT_MULTIPLIER=2;It.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(n=>n.segment)}return t=>[...t]})();It.experimentalLetterSpacing=!1;It._fonts={};It._newlines=[10,13];It._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const nX=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Jl=class{constructor(t){this.styleID=0,this.reset(),qg(this,t,t)}clone(){const t={};return qg(t,this,Jl.defaultStyle),new Jl(t)}reset(){qg(this,Jl.defaultStyle,Jl.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=Kg(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=Kg(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){rX(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=Kg(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let n=e.length-1;n>=0;n--){let r=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!nX.includes(r)&&(r=`"${r}"`),e[n]=r}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};let Bi=Jl;Bi.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Xp.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function Kg(t){const e=Le.shared;return Array.isArray(t)?t.map(n=>e.setValue(n).toHex()):e.setValue(t).toHex()}function rX(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}function qg(t,e,n){for(const r in n)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}const iX={texture:!0,children:!1,baseTexture:!0},i0=class extends Be{constructor(t,e,n){let r=!1;n||(n=Y.ADAPTER.createCanvas(),r=!0),n.width=3,n.height=3;const i=te.from(n);i.orig=new pe,i.trim=new pe,super(i),this._ownCanvas=r,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=i0.defaultResolution??Y.RESOLUTION,this._autoResolution=i0.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return It.experimentalLetterSpacing}static set experimentalLetterSpacing(t){we("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),It.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const n=this.context,r=It.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),i=r.width,s=r.height,o=r.lines,a=r.lineHeight,l=r.lineWidths,c=r.maxLineWidth,d=r.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+e.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;let u,h;const f=e.dropShadow?2:1;for(let p=0;p<f;++p){const m=e.dropShadow&&p===0,y=m?Math.ceil(Math.max(1,s)+e.padding*2):0,g=y*this._resolution;if(m){n.fillStyle="black",n.strokeStyle="black";const v=e.dropShadowColor,w=e.dropShadowBlur*this._resolution,S=e.dropShadowDistance*this._resolution;n.shadowColor=Le.shared.setValue(v).setAlpha(e.dropShadowAlpha).toRgbaString(),n.shadowBlur=w,n.shadowOffsetX=Math.cos(e.dropShadowAngle)*S,n.shadowOffsetY=Math.sin(e.dropShadowAngle)*S+g}else n.fillStyle=this._generateFillStyle(e,o,r),n.strokeStyle=e.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let _=(a-d.fontSize)/2;a-d.fontSize<0&&(_=0);for(let v=0;v<o.length;v++)u=e.strokeThickness/2,h=e.strokeThickness/2+v*a+d.ascent+_,e.align==="right"?u+=c-l[v]:e.align==="center"&&(u+=(c-l[v])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[v],u+e.padding,h+e.padding-y,!0),e.fill&&this.drawLetterSpacing(o[v],u+e.padding,h+e.padding-y)}this.updateTexture()}drawLetterSpacing(t,e,n,r=!1){const s=this._style.letterSpacing;let o=!1;if(It.experimentalLetterSpacingSupported&&(It.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){r?this.context.strokeText(t,e,n):this.context.fillText(t,e,n);return}let a=e;const l=It.graphemeSegmenter(t);let c=this.context.measureText(t).width,d=0;for(let u=0;u<l.length;++u){const h=l[u];r?this.context.strokeText(h,a,n):this.context.fillText(h,a,n);let f="";for(let p=u+1;p<l.length;++p)f+=l[p];d=this.context.measureText(f).width,a+=c-d+s,c=d}}updateTexture(){const t=this.canvas;if(this._style.trim){const s=F9(t);s.data&&(t.width=s.width,t.height=s.height,this.context.putImageData(s.data,0,0))}const e=this._texture,n=this._style,r=n.trim?0:n.padding,i=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-r,e.trim.y=-r,e.orig.width=e._frame.width-r*2,e.orig.height=e._frame.height-r*2,this._onTextureUpdate(),i.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,n){const r=t.fill;if(Array.isArray(r)){if(r.length===1)return r[0]}else return r;let i;const s=t.dropShadow?t.dropShadowDistance:0,o=t.padding||0,a=this.canvas.width/this._resolution-s-o*2,l=this.canvas.height/this._resolution-s-o*2,c=r.slice(),d=t.fillGradientStops.slice();if(!d.length){const u=c.length+1;for(let h=1;h<u;++h)d.push(h/u)}if(c.unshift(r[0]),d.unshift(0),c.push(r[r.length-1]),d.push(1),t.fillGradientType===Xp.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,o,a/2,l+o);const u=n.fontProperties.fontSize+t.strokeThickness;for(let h=0;h<e.length;h++){const f=n.lineHeight*(h-1)+u,p=n.lineHeight*h;let m=p;h>0&&f>p&&(m=(p+f)/2);const y=p+u,g=n.lineHeight*(h+1);let _=y;h+1<e.length&&g<y&&(_=(y+g)/2);const v=(_-m)/l;for(let w=0;w<c.length;w++){let S=0;typeof d[w]=="number"?S=d[w]:S=w/c.length;let E=Math.min(1,Math.max(0,m/l+S*v));E=Number(E.toFixed(5)),i.addColorStop(E,c[w])}}}else{i=this.context.createLinearGradient(o,l/2,a+o,l/2);const u=c.length+1;let h=1;for(let f=0;f<c.length;f++){let p;typeof d[f]=="number"?p=d[f]:p=h/u,i.addColorStop(p,c[f]),h++}}return i}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},iX,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=ns(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=ns(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof Bi?this._style=t:this._style=new Bi(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};let Mr=i0;Mr.defaultAutoResolution=!0;class sX{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function oX(t,e){let n=!1;if(t?._textures?.length){for(let r=0;r<t._textures.length;r++)if(t._textures[r]instanceof te){const i=t._textures[r].baseTexture;e.includes(i)||(e.push(i),n=!0)}}return n}function aX(t,e){if(t.baseTexture instanceof fe){const n=t.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function lX(t,e){if(t._texture&&t._texture instanceof te){const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function cX(t,e){return e instanceof Mr?(e.updateText(!0),!0):!1}function uX(t,e){if(e instanceof Bi){const n=e.toFontString();return It.measureFont(n),!0}return!1}function hX(t,e){if(t instanceof Mr){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function dX(t,e){return t instanceof Bi?(e.includes(t)||e.push(t),!0):!1}const Jk=class{constructor(t){this.limiter=new sX(Jk.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(hX),this.registerFindHook(dX),this.registerFindHook(oX),this.registerFindHook(aX),this.registerFindHook(lX),this.registerUploadHook(cX),this.registerUploadHook(uX)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,Rt.system.addOnce(this.tick,this,ao.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed){for(let n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)Rt.system.addOnce(this.tick,this,ao.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,n=t.length;e<n;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](t,this.queue);e++);if(t instanceof ye)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&Rt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let vf=Jk;vf.uploadsPerFrame=4;Object.defineProperties(Y,{UPLOADS_PER_FRAME:{get(){return vf.uploadsPerFrame},set(t){we("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),vf.uploadsPerFrame=t}}});function e2(t,e){return e instanceof fe?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function fX(t,e){if(!(e instanceof Xt))return!1;const{geometry:n}=e;e.finishPoly(),n.updateBatches();const{batches:r}=n;for(let i=0;i<r.length;i++){const{texture:s}=r[i].style;s&&e2(t,s.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function pX(t,e){return t instanceof Xt?(e.push(t),!0):!1}class t2 extends vf{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(pX),this.registerUploadHook(e2),this.registerUploadHook(fX)}}t2.extension={name:"prepare",type:q.RendererSystem};se.add(t2);const Bl=new ue;class dl extends Be{constructor(e,n=100,r=100){super(e),this.tileTransform=new Fp,this._width=n,this._height=r,this.uvMatrix=this.texture.uvMatrix||new tb(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,n=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,n,r,i)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new pe),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Bl);const n=this._width,r=this._height,i=-n*this.anchor._x;if(Bl.x>=i&&Bl.x<i+n){const s=-r*this.anchor._y;if(Bl.y>=s&&Bl.y<s+r)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,n){const r=e instanceof te?e:te.from(e,n);return new dl(r,n.width,n.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var mX=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,gX=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,yX=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,kE=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,vX=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Oh=new Ve;class n2 extends $p{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new vk,this.state=Gi.for2d()}contextChange(){const e=this.renderer,n={globals:e.globalUniforms};this.simpleShader=ri.from(kE,vX,n),this.shader=e.context.webGLVersion>1?ri.from(gX,mX,n):ri.from(kE,yX,n)}render(e){const n=this.renderer,r=this.quad;let i=r.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=r.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,r.invalidate();const a=e._texture,l=a.baseTexture,c=l.alphaMode>0,d=e.tileTransform.localTransform,u=e.uvMatrix;let h=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;h&&(l._glTextures[n.CONTEXT_UID]?h=l.wrapMode!==ds.CLAMP:l.wrapMode===ds.CLAMP&&(l.wrapMode=ds.REPEAT));const f=h?this.simpleShader:this.shader,p=a.width,m=a.height,y=e._width,g=e._height;Oh.set(d.a*p/y,d.b*p/g,d.c*m/y,d.d*m/g,d.tx/y,d.ty/g),Oh.invert(),h?Oh.prepend(u.mapCoord):(f.uniforms.uMapCoord=u.mapCoord.toArray(!0),f.uniforms.uClampFrame=u.uClampFrame,f.uniforms.uClampOffset=u.uClampOffset),f.uniforms.uTransform=Oh.toArray(!0),f.uniforms.uColor=Le.shared.setValue(e.tint).premultiply(e.worldAlpha,c).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,n.shader.bind(f),n.geometry.bind(r),this.state.blendMode=tk(e.blendMode,c),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}n2.extension={name:"tilingSprite",type:q.RendererPlugin};se.add(n2);const ec=class{constructor(t,e,n=null){this.linkedSheets=[],this._texture=t instanceof te?t:null,this.baseTexture=t instanceof fe?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const r=this.baseTexture.resource;this.resolution=this._updateResolution(n||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let n=vs(t,null);return n===null&&(n=parseFloat(e??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=ec.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const n=ec.BATCH_SIZE;for(;e-t<n&&e<this._frameKeys.length;){const r=this._frameKeys[e],i=this._frames[r],s=i.frame;if(s){let o=null,a=null;const l=i.trimmed!==!1&&i.sourceSize?i.sourceSize:i.frame,c=new pe(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);i.rotated?o=new pe(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):o=new pe(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),i.trimmed!==!1&&i.spriteSourceSize&&(a=new pe(Math.floor(i.spriteSourceSize.x)/this.resolution,Math.floor(i.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[r]=new te(this.baseTexture,o,c,a,i.rotated?2:0,i.anchor,i.borders),te.addToCache(this.textures[r],r)}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let n=0;n<t[e].length;n++){const r=t[e][n];this.animations[e].push(this.textures[r])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*ec.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*ec.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let s0=ec;s0.BATCH_SIZE=1e3;const _X=["jpg","png","jpeg","avif","webp"];function r2(t,e,n){const r={};if(t.forEach(i=>{r[i]=e}),Object.keys(e.textures).forEach(i=>{r[i]=e.textures[i]}),!n){const i=Vt.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{const a=r2([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(r,a)})}return r}const xX={extension:q.Asset,cache:{test:t=>t instanceof s0,getCacheableAssets:(t,e)=>r2(t,e,!1)},resolver:{test:t=>{const n=t.split("?")[0].split("."),r=n.pop(),i=n.pop();return r==="json"&&_X.includes(i)},parse:t=>{const e=t.split(".");return{resolution:parseFloat(Y.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:q.LoadParser,priority:fi.Normal},async testParse(t,e){return Vt.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,n){let r=Vt.dirname(e.src);r&&r.lastIndexOf("/")!==r.length-1&&(r+="/");let i=r+t.meta.image;i=t0(i,e.src);const o=(await n.load([i]))[i],a=new s0(o.baseTexture,t,e.src);await a.parse();const l=t?.meta?.related_multi_packs;if(Array.isArray(l)){const c=[];for(const u of l){if(typeof u!="string")continue;let h=r+u;e.data?.ignoreMultiPack||(h=t0(h,e.src),c.push(n.load({src:h,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(c);a.linkedSheets=d,d.forEach(u=>{u.linkedSheets=[a].concat(a.linkedSheets.filter(h=>h!==u))})}return a},unload(t){t.destroy(!0)}}};se.add(xX);class _f{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class cd{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const n=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in n){const o=n[s].match(/^[a-z]+/gm)[0],a=n[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const c in a){const d=a[c].split("="),u=d[0],h=d[1].replace(/"/gm,""),f=parseFloat(h),p=isNaN(f)?h:f;l[u]=p}r[o].push(l)}const i=new _f;return r.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),r.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),r.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),r.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),r.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),r.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class o0{static test(e){const n=e;return"getElementsByTagName"in n&&n.getElementsByTagName("page").length&&n.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const n=new _f,r=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let c=0;c<r.length;c++)n.info.push({face:r[c].getAttribute("face"),size:parseInt(r[c].getAttribute("size"),10)});for(let c=0;c<i.length;c++)n.common.push({lineHeight:parseInt(i[c].getAttribute("lineHeight"),10)});for(let c=0;c<s.length;c++)n.page.push({id:parseInt(s[c].getAttribute("id"),10)||0,file:s[c].getAttribute("file")});for(let c=0;c<o.length;c++){const d=o[c];n.char.push({id:parseInt(d.getAttribute("id"),10),page:parseInt(d.getAttribute("page"),10)||0,x:parseInt(d.getAttribute("x"),10),y:parseInt(d.getAttribute("y"),10),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10),xoffset:parseInt(d.getAttribute("xoffset"),10),yoffset:parseInt(d.getAttribute("yoffset"),10),xadvance:parseInt(d.getAttribute("xadvance"),10)})}for(let c=0;c<a.length;c++)n.kerning.push({first:parseInt(a[c].getAttribute("first"),10),second:parseInt(a[c].getAttribute("second"),10),amount:parseInt(a[c].getAttribute("amount"),10)});for(let c=0;c<l.length;c++)n.distanceField.push({fieldType:l[c].getAttribute("fieldType"),distanceRange:parseInt(l[c].getAttribute("distanceRange"),10)});return n}}class a0{static test(e){return typeof e=="string"&&e.includes("<font>")?o0.test(Y.ADAPTER.parseXML(e)):!1}static parse(e){return o0.parse(Y.ADAPTER.parseXML(e))}}const Zg=[cd,o0,a0];function bX(t){for(let e=0;e<Zg.length;e++)if(Zg[e].test(t))return Zg[e];return null}function wX(t,e,n,r,i,s){const o=n.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=n.dropShadow?n.dropShadowDistance:0,c=n.padding||0,d=t.width/r-l-c*2,u=t.height/r-l-c*2,h=o.slice(),f=n.fillGradientStops.slice();if(!f.length){const p=h.length+1;for(let m=1;m<p;++m)f.push(m/p)}if(h.unshift(o[0]),f.unshift(0),h.push(o[o.length-1]),f.push(1),n.fillGradientType===Xp.LINEAR_VERTICAL){a=e.createLinearGradient(d/2,c,d/2,u+c);let p=0;const y=(s.fontProperties.fontSize+n.strokeThickness)/u;for(let g=0;g<i.length;g++){const _=s.lineHeight*g;for(let v=0;v<h.length;v++){let w=0;typeof f[v]=="number"?w=f[v]:w=v/h.length;const S=_/u+w*y;let E=Math.max(p,S);E=Math.min(E,1),a.addColorStop(E,h[v]),p=E}}}else{a=e.createLinearGradient(c,u/2,d+c,u/2);const p=h.length+1;let m=1;for(let y=0;y<h.length;y++){let g;typeof f[y]=="number"?g=f[y]:g=m/p,a.addColorStop(g,h[y]),m++}}return a}function SX(t,e,n,r,i,s,o){const a=n.text,l=n.fontProperties;e.translate(r,i),e.scale(s,s);const c=o.strokeThickness/2,d=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=wX(t,e,o,s,[a],n),e.strokeStyle=o.stroke,o.dropShadow){const u=o.dropShadowColor,h=o.dropShadowBlur*s,f=o.dropShadowDistance*s;e.shadowColor=Le.shared.setValue(u).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=h,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,c,d+n.lineHeight-l.descent),o.fill&&e.fillText(a,c,d+n.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function ud(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}function i2(t){return Array.from?Array.from(t):t.split("")}function EX(t){typeof t=="string"&&(t=[t]);const e=[];for(let n=0,r=t.length;n<r;n++){const i=t[n];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...i2(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const hr=class{constructor(t,e,n){const[r]=t.info,[i]=t.common,[s]=t.page,[o]=t.distanceField,a=vs(s.file),l={};this._ownsTextures=n,this.font=r.face,this.size=r.size,this.lineHeight=i.lineHeight/a,this.chars={},this.pageTextures=l;for(let c=0;c<t.page.length;c++){const{id:d,file:u}=t.page[c];l[d]=e instanceof Array?e[c]:e[u],o?.fieldType&&o.fieldType!=="none"&&(l[d].baseTexture.alphaMode=Or.NO_PREMULTIPLIED_ALPHA,l[d].baseTexture.mipmap=li.OFF)}for(let c=0;c<t.char.length;c++){const{id:d,page:u}=t.char[c];let{x:h,y:f,width:p,height:m,xoffset:y,yoffset:g,xadvance:_}=t.char[c];h/=a,f/=a,p/=a,m/=a,y/=a,g/=a,_/=a;const v=new pe(h+l[u].frame.x/a,f+l[u].frame.y/a,p,m);this.chars[d]={xOffset:y,yOffset:g,xAdvance:_,kerning:{},texture:new te(l[u].baseTexture,v),page:u}}for(let c=0;c<t.kerning.length;c++){let{first:d,second:u,amount:h}=t.kerning[c];d/=a,u/=a,h/=a,this.chars[u]&&(this.chars[u].kerning[d]=h)}this.distanceFieldRange=o?.distanceRange,this.distanceFieldType=o?.fieldType?.toLowerCase()??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,n){let r;if(t instanceof _f)r=t;else{const s=bX(t);if(!s)throw new Error("Unrecognized data format for font.");r=s.parse(t)}e instanceof te&&(e=[e]);const i=new hr(r,e,n);return hr.available[i.font]=i,i}static uninstall(t){const e=hr.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete hr.available[t]}static from(t,e,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:r,padding:i,resolution:s,textureWidth:o,textureHeight:a,...l}=Object.assign({},hr.defaultOptions,n),c=EX(r),d=e instanceof Bi?e:new Bi(e),u=o,h=new _f;h.info[0]={face:d.fontFamily,size:d.fontSize},h.common[0]={lineHeight:d.fontSize};let f=0,p=0,m,y,g,_=0;const v=[];for(let S=0;S<c.length;S++){m||(m=Y.ADAPTER.createCanvas(),m.width=o,m.height=a,y=m.getContext("2d"),g=new fe(m,{resolution:s,...l}),v.push(new te(g)),h.page.push({id:v.length-1,file:""}));const E=c[S],T=It.measureText(E,d,!1,m),C=T.width,A=Math.ceil(T.height),P=Math.ceil((d.fontStyle==="italic"?2:1)*C);if(p>=a-A*s){if(p===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${E}')`);--S,m=null,y=null,g=null,p=0,f=0,_=0;continue}if(_=Math.max(A+T.fontProperties.descent,_),P*s+f>=u){if(f===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${E}')`);--S,p+=_*s,p=Math.ceil(p),f=0,_=0;continue}SX(m,y,T,f,p,s,d);const O=ud(T.text);h.char.push({id:O,page:v.length-1,x:f/s,y:p/s,width:P,height:A,xoffset:0,yoffset:0,xadvance:C-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0)}),f+=(P+2*i)*s,f=Math.ceil(f)}for(let S=0,E=c.length;S<E;S++){const T=c[S];for(let C=0;C<E;C++){const A=c[C],P=y.measureText(T).width,O=y.measureText(A).width,k=y.measureText(T+A).width-(P+O);k&&h.kerning.push({first:ud(T),second:ud(A),amount:k})}}const w=new hr(h,v,!0);return hr.available[t]!==void 0&&hr.uninstall(t),hr.available[t]=w,w}};let un=hr;un.ALPHA=[["a","z"],["A","Z"]," "];un.NUMERIC=[["0","9"]];un.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];un.ASCII=[[" ","~"]];un.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:hr.ALPHANUMERIC};un.available={};var TX=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,CX=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const ME=[],DE=[],OE=[],s2=class extends ye{constructor(t,e={}){super();const{align:n,tint:r,maxWidth:i,letterSpacing:s,fontName:o,fontSize:a}=Object.assign({},s2.styleDefaults,e);if(!un.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new Le(r),this._font=void 0,this._fontName=o,this._fontSize=a,this.text=t,this._maxWidth=i,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new rs(()=>{this.dirty=!0},this,0,0),this._roundPixels=Y.ROUND_PIXELS,this.dirty=!0,this._resolution=Y.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const t=un.available[this._fontName],e=this.fontSize,n=e/t.size,r=new ue,i=[],s=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=i2(a),c=this._maxWidth*t.size/e,d=t.distanceFieldType==="none"?ME:DE;let u=null,h=0,f=0,p=0,m=-1,y=0,g=0,_=0,v=0;for(let P=0;P<l.length;P++){const O=l[P],U=ud(O);if(/(?:\s)/.test(O)&&(m=P,y=h,v++),O==="\r"||O===`
`){s.push(h),o.push(-1),f=Math.max(f,h),++p,++g,r.x=0,r.y+=t.lineHeight,u=null,v=0;continue}const k=t.chars[U];if(!k)continue;u&&k.kerning[u]&&(r.x+=k.kerning[u]);const I=OE.pop()||{texture:te.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ue};I.texture=k.texture,I.line=p,I.charCode=U,I.position.x=Math.round(r.x+k.xOffset+this._letterSpacing/2),I.position.y=Math.round(r.y+k.yOffset),I.prevSpaces=v,i.push(I),h=I.position.x+Math.max(k.xAdvance-k.xOffset,k.texture.orig.width),r.x+=k.xAdvance+this._letterSpacing,_=Math.max(_,k.yOffset+k.texture.height),u=U,m!==-1&&c>0&&r.x>c&&(++g,wa(i,1+m-g,1+P-m),P=m,m=-1,s.push(y),o.push(i.length>0?i[i.length-1].prevSpaces:0),f=Math.max(f,y),p++,r.x=0,r.y+=t.lineHeight,u=null,v=0)}const w=l[l.length-1];w!=="\r"&&w!==`
`&&(/(?:\s)/.test(w)&&(h=y),s.push(h),f=Math.max(f,h),o.push(-1));const S=[];for(let P=0;P<=p;P++){let O=0;this._align==="right"?O=f-s[P]:this._align==="center"?O=(f-s[P])/2:this._align==="justify"&&(O=o[P]<0?0:(f-s[P])/o[P]),S.push(O)}const E=i.length,T={},C=[],A=this._activePagesMeshData;d.push(...A);for(let P=0;P<E;P++){const O=i[P].texture,U=O.baseTexture.uid;if(!T[U]){let k=d.pop();if(!k){const F=new ZV;let N,B;t.distanceFieldType==="none"?(N=new RE(te.EMPTY),B=he.NORMAL):(N=new RE(te.EMPTY,{program:wr.from(CX,TX),uniforms:{uFWidth:0}}),B=he.NORMAL_NPM);const R=new r0(F,N);R.blendMode=B,k={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:R,vertices:null,uvs:null,indices:null}}k.index=0,k.indexCount=0,k.vertexCount=0,k.uvsCount=0,k.total=0;const{_textureCache:I}=this;I[U]=I[U]||new te(O.baseTexture),k.mesh.texture=I[U],k.mesh.tint=this._tintColor.value,C.push(k),T[U]=k}T[U].total++}for(let P=0;P<A.length;P++)C.includes(A[P])||this.removeChild(A[P].mesh);for(let P=0;P<C.length;P++)C[P].mesh.parent!==this&&this.addChild(C[P].mesh);this._activePagesMeshData=C;for(const P in T){const O=T[P],U=O.total;if(!(O.indices?.length>6*U)||O.vertices.length<r0.BATCHABLE_SIZE*2)O.vertices=new Float32Array(4*2*U),O.uvs=new Float32Array(4*2*U),O.indices=new Uint16Array(6*U);else{const k=O.total,I=O.vertices;for(let F=k*4*2;F<I.length;F++)I[F]=0}O.mesh.size=6*U}for(let P=0;P<E;P++){const O=i[P];let U=O.position.x+S[O.line]*(this._align==="justify"?O.prevSpaces:1);this._roundPixels&&(U=Math.round(U));const k=U*n,I=O.position.y*n,F=O.texture,N=T[F.baseTexture.uid],B=F.frame,R=F._uvs,M=N.index++;N.indices[M*6+0]=0+M*4,N.indices[M*6+1]=1+M*4,N.indices[M*6+2]=2+M*4,N.indices[M*6+3]=0+M*4,N.indices[M*6+4]=2+M*4,N.indices[M*6+5]=3+M*4,N.vertices[M*8+0]=k,N.vertices[M*8+1]=I,N.vertices[M*8+2]=k+B.width*n,N.vertices[M*8+3]=I,N.vertices[M*8+4]=k+B.width*n,N.vertices[M*8+5]=I+B.height*n,N.vertices[M*8+6]=k,N.vertices[M*8+7]=I+B.height*n,N.uvs[M*8+0]=R.x0,N.uvs[M*8+1]=R.y0,N.uvs[M*8+2]=R.x1,N.uvs[M*8+3]=R.y1,N.uvs[M*8+4]=R.x2,N.uvs[M*8+5]=R.y2,N.uvs[M*8+6]=R.x3,N.uvs[M*8+7]=R.y3}this._textWidth=f*n,this._textHeight=(r.y+t.lineHeight)*n;for(const P in T){const O=T[P];if(this.anchor.x!==0||this.anchor.y!==0){let F=0;const N=this._textWidth*this.anchor.x,B=this._textHeight*this.anchor.y;for(let R=0;R<O.total;R++)O.vertices[F++]-=N,O.vertices[F++]-=B,O.vertices[F++]-=N,O.vertices[F++]-=B,O.vertices[F++]-=N,O.vertices[F++]-=B,O.vertices[F++]-=N,O.vertices[F++]-=B}this._maxLineHeight=_*n;const U=O.mesh.geometry.getBuffer("aVertexPosition"),k=O.mesh.geometry.getBuffer("aTextureCoord"),I=O.mesh.geometry.getIndex();U.data=O.vertices,k.data=O.uvs,I.data=O.indices,U.update(),k.update(),I.update()}for(let P=0;P<i.length;P++)OE.push(i[P]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:n,size:r}=un.available[this._fontName];if(n!=="none"){const{a:i,b:s,c:o,d:a}=this.worldTransform,l=Math.sqrt(i*i+s*s),c=Math.sqrt(o*o+a*a),d=(Math.abs(l)+Math.abs(c))/2,u=this.fontSize/r,h=t._view.resolution;for(const f of this._activePagesMeshData)f.mesh.shader.uniforms.uFWidth=d*e*u*h}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=un.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!un.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??un.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,r=un.available[this._fontName].distanceFieldType==="none"?ME:DE;r.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],r.filter(i=>e[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=te.EMPTY});for(const i in e)e[i].destroy(),delete e[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};let PX=s2;PX.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const AX=[".xml",".fnt"],RX={extension:{type:q.LoadParser,priority:fi.Normal},name:"loadBitmapFont",test(t){return AX.includes(Vt.extname(t).toLowerCase())},async testParse(t){return cd.test(t)||a0.test(t)},async parse(t,e,n){const r=cd.test(t)?cd.parse(t):a0.parse(t),{src:i}=e,{page:s}=r,o=[];for(let c=0;c<s.length;++c){const d=s[c].file;let u=Vt.join(Vt.dirname(i),d);u=t0(u,i),o.push(u)}const a=await n.load(o),l=o.map(c=>a[c]);return un.install(r,l,!0)},async load(t,e){return(await Y.ADAPTER.fetch(t)).text()},unload(t){t.destroy()}};se.add(RX);const zo=class extends Bi{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new zo(Object.keys(zo.defaultOptions).reduce((e,n)=>({...e,[n]:t[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete zo.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,e={}){const{availableFonts:n}=zo;if(n[t]){const r=n[t];return this._fonts.push(r),r.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return Y.ADAPTER.fetch(t).then(r=>r.blob()).then(async r=>new Promise((i,s)=>{const o=URL.createObjectURL(r),a=new FileReader;a.onload=()=>i([o,a.result]),a.onerror=s,a.readAsDataURL(r)})).then(async([r,i])=>{const s=Object.assign({family:Vt.basename(t,Vt.extname(t)),weight:"normal",style:"normal",src:r,dataSrc:i,refs:1,originalUrl:t,fontFace:null},e);n[t]=s,this._fonts.push(s),this.styleID++;const o=new FontFace(s.family,`url(${s.src})`,{weight:s.weight,style:s.style});s.fontFace=o,await o.load(),document.fonts.add(o),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...t){const e=t.filter(n=>!this._overrides.includes(n));e.length>0&&(this._overrides.push(...e),this.styleID++)}removeOverride(...t){const e=t.filter(n=>this._overrides.includes(n));e.length>0&&(this._overrides=this._overrides.filter(n=>!e.includes(n)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,e)=>`${t}
            @font-face {
                font-family: "${e.family}";
                src: url('${e.dataSrc}');
                font-weight: ${e.weight};
                font-style: ${e.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=M9(t)),typeof t=="number"?k9(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const e=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),r=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&e<1&&(t+=(e*255|0).toString(16).padStart(2,"0"));const i=`${n}px ${r}px`;return this.dropShadowBlur>0?`text-shadow: ${i} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${i} ${t}`}reset(){Object.assign(this,zo.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=Y.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let vc=zo;vc.availableFonts={};vc.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const Wo=class extends Be{constructor(t="",e={}){super(te.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const n=new Image,r=te.from(n,{scaleMode:Y.SCALE_MODE,resourceOptions:{autoLoad:!1}});r.orig=new pe,r.trim=new pe,this.texture=r;const i="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xhtml",o=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject"),l=document.createElementNS(s,"div"),c=document.createElementNS(s,"style");a.setAttribute("width","10000"),a.setAttribute("height","10000"),a.style.overflow="hidden",o.appendChild(a),this.maxWidth=Wo.defaultMaxWidth,this.maxHeight=Wo.defaultMaxHeight,this._domElement=l,this._styleElement=c,this._svgRoot=o,this._foreignObject=a,this._foreignObject.appendChild(c),this._foreignObject.appendChild(l),this._image=n,this._loadImage=new Image,this._autoResolution=Wo.defaultAutoResolution,this._resolution=Wo.defaultResolution??Y.RESOLUTION,this.text=t,this.style=e}measureText(t){const{text:e,style:n,resolution:r}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:e,style:n.toCSS(r)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const i=this._domElement.getBoundingClientRect();this._svgRoot.remove();const s=Math.min(this.maxWidth,Math.ceil(i.width)),o=Math.min(this.maxHeight,Math.ceil(i.height));return this._svgRoot.setAttribute("width",s.toString()),this._svgRoot.setAttribute("height",o.toString()),e!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(r)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:s+n.padding*2,height:o+n.padding*2}}async updateText(t=!0){const{style:e,_image:n,_loadImage:r}=this;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;const{width:i,height:s}=this.measureText();n.width=r.width=Math.ceil(Math.max(1,i)),n.height=r.height=Math.ceil(Math.max(1,s)),this._loading||(this._loading=!0,await new Promise(o=>{r.onload=async()=>{await e.onBeforeDraw(),this._loading=!1,n.src=r.src,r.onload=null,r.src="",this.updateTexture(),o()};const a=new XMLSerializer().serializeToString(this._svgRoot);r.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(a)}`}))}get source(){return this._image}updateTexture(){const{style:t,texture:e,_image:n,resolution:r}=this,{padding:i}=t,{baseTexture:s}=e;e.trim.width=e._frame.width=n.width/r,e.trim.height=e._frame.height=n.height/r,e.trim.x=-i,e.trim.y=-i,e.orig.width=e._frame.width-i*2,e.orig.height=e._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(n.width,n.height,r),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},Wo.defaultDestroyOptions,t),super.destroy(t);const e=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=e,this._svgRoot?.remove(),this._svgRoot=e,this._domElement?.remove(),this._domElement=e,this._foreignObject?.remove(),this._foreignObject=e,this._styleElement?.remove(),this._styleElement=e,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=e,this._image.src="",this._image=e}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const e=ns(this.scale.x)||1;this.scale.x=e*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const e=ns(this.scale.y)||1;this.scale.y=e*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof vc?(this.ownsStyle=!1,this._style=t):t instanceof Bi?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=vc.from(t)):(this.ownsStyle=!0,this._style=new vc(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let Yp=Wo;Yp.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0};Yp.defaultMaxWidth=2024;Yp.defaultMaxHeight=2024;Yp.defaultAutoResolution=!0;const IX=`classic
layer1=...H.....H.....H.....H.....H.....H.....H.....H...
layer2=...R.........................................l...
layer3=........R...............................l........
layer4=...F....T...............................t....f...
layer5=\\<#############################################>/
designer=polofel`,kX=`islands
layer1=..FH...........H...........fH.
layer2=...R......................l...
layer3=....T....................t....
layer4=\\<###>//////////////////<###>/
designer=polofel`,MX=`katala
layer1=..HF..fH....................H......
layer2=...L..r.........................t..
layer3=\\<######>//////////////////////<#>/
designer=polofel`,DX=`london
layer1=...H..........H...H...H....H...H...H.....H..........H....
layer2=.R..................i....l..i..r....i..................L.
layer3=F...F..........fft....ff..t...T..ff....Tff..........F...F
layer4=#####>////////<###########################>\\\\\\\\\\\\\\\\<#####
designer=polofel
time_winner=allies`,OX=`huge
layer1=...H...H........H....H...H.....H.........H....H...H......H....H.....H...
layer2=...R................................................................l...
layer3=.........R.....................................................l........
layer4=....t....T....................................................t....T....
layer5=\\<################################>//<################################>/
designer=polofel`,NX=`base
layer1=...H....H...H....H.......H...H....H.......H......H.....
layer2=.........R.........................l...........l...i...
layer3=...RF..............f............................f......
layer4=\\<#########>\\\\\\\\\\\\<##################################>/
designer=polofel
time_winner=allies`,LX=`divided
layer1=.H....H..........H...H...H....H...H.........H...H.....
layer2=....................R...........l.....................
layer3=..IF.R..............F...........f...............l.fi..
layer4=\\<######>\\\\\\\\\\\\\\\\\\<###############>//////////<######>/
designer=polofel
time_winner=no`,BX=`long
layer1=...H............................H...H................H....H..........................H....
layer2=..................................R..F................f..l................................
layer3=..F....................................................................................f..
layer4=..I....................................................................................i..
layer5=\\<#>////////////////////////////<#####>\\\\\\\\\\\\\\\\\\\\\\\\\\\\<#####>//////////////////////////<#>/
designer=polofel
time_winner=no`,FX=`desert
layer1=...P.....P....p..p....P.......P........pP....
layer2=........D...R.S.........S.....S.....d........
layer3=...IF.R.........................l.....l.fi...
layer4=([_________________________________________])
designer=polofel`,$X=`bunkers
layer1=...Sp..S.p...........pP...........P..S..p.S...
layer2=.....D.F.R..........F..f.............f.d......
layer3=...R................I..i..........l.....l.....
layer4=([_________]((((((([____])))))))[___________])
designer=polofel`,UX=`sahara
layer1=................S........................S.......S.....S..S..........................................S...............
layer2=.............D...R..................................................................................d................
layer3=PP...ppp...R..F.................................................................................l..f..l.....PP...ppP.
layer4=__])[_________________________________________________________________________________________________________]([____
designer=polofel`,HX=`jungle
layer1=..p..p......P.Pp.pp.....PpP.....Pp.p.p......P.pP...
layer2=...H....H....H.....H...H.....H...H......H...H....H.
layer3=............R........................l.............
layer4=...R.......F..........................f......l.....
layer5=([_____])([________])(([____])([_______]))([_____])
designer=polofel`,jX=`berlin
layer1=....................................................................H...H...
layer2=FFF..TF.....tF..T.TF...TF...T..F..t..t..t..FFF..............................
layer3=.......R..I...R.....R........I........................................f.l...
layer4=###############################################>//////////////////<#######>/
designer=polofel
time_winner=centrals`,GX=`africa
layer1=..p.PPpP.p.......Pp....pp..P.p...p.P......pP.p.......p.pPPpPp..
layer2=...S....S....S...S....S.....S....S...S......S...S...S...S..S...
layer3=..I.I.I...R..FDF...............................fdf..l...i.i.i..
layer4=..................L.........................r..................
layer5=([___________________________________________________________])
designer=polofel`,zX=`classic2
layer1=...H.....H.....H.....H.....H.....H.....H.....H.....H.....H...
layer2=...R.....................................................l...
layer3=........R....R.................................l....l........
layer4=........F....T.................................t....f........
layer5=\\<#########################################################>/
designer=polofel
`,ab={classic:IX,islands:kX,katala:MX,london:DX,huge:OX,base:NX,divided:LX,long:BX,desert:FX,bunkers:$X,sahara:UX,jungle:HX,berlin:jX,africa:GX,classic2:zX},WX=()=>{};class VX{paused=!1;advanceTick=!1;currentTick=0;lastTime=performance.now();requestId=null;tickInterval=-1;engineUpdateFn=WX;scheduler;constructor(e){this.scheduler=e}setTickInterval(e){return this.tickInterval=e,this}setHostEngineUpdateFn(e){return this.engineUpdateFn=e,this}gameLoop=e=>{const n=()=>{this.currentTick++,this.engineUpdateFn(this.currentTick),this.scheduler.runTasks(this.currentTick)};if(this.advanceTick&&(n(),this.advanceTick=!1),!this.paused){let r=e-this.lastTime;for(;r>=this.tickInterval;)n(),r-=this.tickInterval;this.lastTime=e-r}this.requestId&&(this.requestId=requestAnimationFrame(this.gameLoop))};start(e=0){this.requestId||(this.currentTick=e,this.lastTime=performance.now(),this.requestId=requestAnimationFrame(this.gameLoop))}setPaused(e){this.paused=e,e||(this.lastTime=performance.now())}stop(){this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null)}isRunning(){return this.requestId!==null}advanceOneTick(){this.advanceTick=!0,this.lastTime=performance.now()}}class XX{recurringTasks=new Map;oneTimeTasks=new Map;nextExecutionTicks=new Map;oneTimeTasksQueue=[];scheduleRecurring(e,n){this.recurringTasks.set(e,n)}scheduleTask(e,n){this.oneTimeTasksQueue.push([e,n])}unregister(e){this.recurringTasks.delete(e),this.oneTimeTasks.delete(e)}runTasks(e){for(const[n,r]of this.recurringTasks.entries())e>=(this.nextExecutionTicks.get(n)??0)&&(n(e),this.nextExecutionTicks.set(n,e+r));for(const[n,r]of this.oneTimeTasksQueue)this.oneTimeTasks.set(n,r+e);this.oneTimeTasksQueue.length=0;for(const[n,r]of this.oneTimeTasks.entries())e>=r&&(this.oneTimeTasks.delete(n),n(e))}}const lt=new XX,mr=new VX(lt).setTickInterval(10),YX=740,KX=660,qX=["Sky","Hill","Flag","ControlTower","Ground","RunwayBack","LightSmoke","Plane","Water","DarkSmoke","Bunker","Runway","Man","Explosion","Bomb","Bullet","Player"],kn=Object.fromEntries(qX.map((t,e)=>[t,e])),lb={Normal:3051728,Desert:2344139},ZX=14540287,Gt={OwnForeground:255,OwnBackground:9358335,OpponentForeground:16711680,OpponentBackground:16758132,SpectatorForeground:0};let X={};async function QX(){const t=await Zl.load("./images/images.json");t.baseTexture.scaleMode=qr.NEAREST;const e=t.textures;return X=e,e}class JX{props={bg_item_type:"PalmTree",client_x:0,client_y:0,facing:"Left"};container;itemSprite;itemTextures;flagTypes;flagTextures;flagIndex=0;constructor(){this.container=new ye,this.itemSprite=new Be,this.itemTextures={ControlTower:X["controlTower.gif"],DesertTower:X["controlTowerDesert.gif"],FlagAllies:X["flag_raf_1.gif"],FlagCentrals:X["flag_ger_1.gif"],PalmTree:X["palmtree.gif"]},this.flagTextures={FlagCentrals:[X["flag_ger_1.gif"],X["flag_ger_2.gif"],X["flag_ger_3.gif"],X["flag_ger_2.gif"]],FlagAllies:[X["flag_raf_1.gif"],X["flag_raf_2.gif"],X["flag_raf_3.gif"],X["flag_raf_2.gif"]]},this.flagTypes=["FlagAllies","FlagCentrals"],this.container.addChild(this.itemSprite),this.container.zIndex=kn.Flag}getContainer(){return this.container}animate=()=>{this.waveFlag()};updateCallbacks={bg_item_type:()=>{const{bg_item_type:e}=this.props;if(e===void 0||!this.props.bg_item_type)return;const n=this.itemTextures[e];this.itemSprite.texture=n,this.flagTypes.includes(e)&&lt.scheduleRecurring(this.animate,10)},facing:()=>{const{facing:e}=this.props;this.itemSprite.anchor.x=e==="Right"?0:1,this.itemSprite.scale.x=e==="Right"?1:-1},client_x:()=>{const{facing:e,client_x:n,client_y:r}=this.props;if(e===void 0||n===void 0||r===void 0)return;let i=Math.floor(this.itemSprite.texture.width/2);this.props.bg_item_type&&this.flagTypes.includes(this.props.bg_item_type)&&(i=0),this.itemSprite.position.x=n-i},client_y:()=>{const{client_y:e}=this.props;if(e===void 0)return;let n=this.itemSprite.texture.height;this.props.bg_item_type&&this.flagTypes.includes(this.props.bg_item_type)&&(n=0),this.itemSprite.position.y=e-n}};waveFlag(){if(this.props.bg_item_type!=="FlagAllies"&&this.props.bg_item_type!=="FlagCentrals")return;const e=this.flagTextures[this.props.bg_item_type][this.flagIndex];this.itemSprite.texture=e,this.flagIndex++,this.flagIndex%=4}destroy(){lt.unregister(this.animate)}}var Kp={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(t){(function(){var e=function(){this.init()};e.prototype={init:function(){var u=this||n;return u._counter=1e3,u._html5AudioPool=[],u.html5PoolSize=10,u._codecs={},u._howls=[],u._muted=!1,u._volume=1,u._canPlayEvent="canplaythrough",u._navigator=typeof window<"u"&&window.navigator?window.navigator:null,u.masterGain=null,u.noAudio=!1,u.usingWebAudio=!0,u.autoSuspend=!0,u.ctx=null,u.autoUnlock=!0,u._setup(),u},volume:function(u){var h=this||n;if(u=parseFloat(u),h.ctx||d(),typeof u<"u"&&u>=0&&u<=1){if(h._volume=u,h._muted)return h;h.usingWebAudio&&h.masterGain.gain.setValueAtTime(u,n.ctx.currentTime);for(var f=0;f<h._howls.length;f++)if(!h._howls[f]._webAudio)for(var p=h._howls[f]._getSoundIds(),m=0;m<p.length;m++){var y=h._howls[f]._soundById(p[m]);y&&y._node&&(y._node.volume=y._volume*u)}return h}return h._volume},mute:function(u){var h=this||n;h.ctx||d(),h._muted=u,h.usingWebAudio&&h.masterGain.gain.setValueAtTime(u?0:h._volume,n.ctx.currentTime);for(var f=0;f<h._howls.length;f++)if(!h._howls[f]._webAudio)for(var p=h._howls[f]._getSoundIds(),m=0;m<p.length;m++){var y=h._howls[f]._soundById(p[m]);y&&y._node&&(y._node.muted=u?!0:y._muted)}return h},stop:function(){for(var u=this||n,h=0;h<u._howls.length;h++)u._howls[h].stop();return u},unload:function(){for(var u=this||n,h=u._howls.length-1;h>=0;h--)u._howls[h].unload();return u.usingWebAudio&&u.ctx&&typeof u.ctx.close<"u"&&(u.ctx.close(),u.ctx=null,d()),u},codecs:function(u){return(this||n)._codecs[u.replace(/^x-/,"")]},_setup:function(){var u=this||n;if(u.state=u.ctx&&u.ctx.state||"suspended",u._autoSuspend(),!u.usingWebAudio)if(typeof Audio<"u")try{var h=new Audio;typeof h.oncanplaythrough>"u"&&(u._canPlayEvent="canplay")}catch{u.noAudio=!0}else u.noAudio=!0;try{var h=new Audio;h.muted&&(u.noAudio=!0)}catch{}return u.noAudio||u._setupCodecs(),u},_setupCodecs:function(){var u=this||n,h=null;try{h=typeof Audio<"u"?new Audio:null}catch{return u}if(!h||typeof h.canPlayType!="function")return u;var f=h.canPlayType("audio/mpeg;").replace(/^no$/,""),p=u._navigator?u._navigator.userAgent:"",m=p.match(/OPR\/(\d+)/g),y=m&&parseInt(m[0].split("/")[1],10)<33,g=p.indexOf("Safari")!==-1&&p.indexOf("Chrome")===-1,_=p.match(/Version\/(.*?) /),v=g&&_&&parseInt(_[1],10)<15;return u._codecs={mp3:!!(!y&&(f||h.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(h.canPlayType('audio/wav; codecs="1"')||h.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!h.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!h.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/m4a;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(h.canPlayType("audio/x-m4b;")||h.canPlayType("audio/m4b;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(h.canPlayType("audio/x-mp4;")||h.canPlayType("audio/mp4;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!v&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!v&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!h.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(h.canPlayType("audio/x-flac;")||h.canPlayType("audio/flac;")).replace(/^no$/,"")},u},_unlockAudio:function(){var u=this||n;if(!(u._audioUnlocked||!u.ctx)){u._audioUnlocked=!1,u.autoUnlock=!1,!u._mobileUnloaded&&u.ctx.sampleRate!==44100&&(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var h=function(f){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var p=new Audio;p._unlocked=!0,u._releaseHtml5Audio(p)}catch{u.noAudio=!0;break}for(var m=0;m<u._howls.length;m++)if(!u._howls[m]._webAudio)for(var y=u._howls[m]._getSoundIds(),g=0;g<y.length;g++){var _=u._howls[m]._soundById(y[g]);_&&_._node&&!_._node._unlocked&&(_._node._unlocked=!0,_._node.load())}u._autoResume();var v=u.ctx.createBufferSource();v.buffer=u._scratchBuffer,v.connect(u.ctx.destination),typeof v.start>"u"?v.noteOn(0):v.start(0),typeof u.ctx.resume=="function"&&u.ctx.resume(),v.onended=function(){v.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",h,!0),document.removeEventListener("touchend",h,!0),document.removeEventListener("click",h,!0),document.removeEventListener("keydown",h,!0);for(var w=0;w<u._howls.length;w++)u._howls[w]._emit("unlock")}};return document.addEventListener("touchstart",h,!0),document.addEventListener("touchend",h,!0),document.addEventListener("click",h,!0),document.addEventListener("keydown",h,!0),u}},_obtainHtml5Audio:function(){var u=this||n;if(u._html5AudioPool.length)return u._html5AudioPool.pop();var h=new Audio().play();return h&&typeof Promise<"u"&&(h instanceof Promise||typeof h.then=="function")&&h.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(u){var h=this||n;return u._unlocked&&h._html5AudioPool.push(u),h},_autoSuspend:function(){var u=this;if(!(!u.autoSuspend||!u.ctx||typeof u.ctx.suspend>"u"||!n.usingWebAudio)){for(var h=0;h<u._howls.length;h++)if(u._howls[h]._webAudio){for(var f=0;f<u._howls[h]._sounds.length;f++)if(!u._howls[h]._sounds[f]._paused)return u}return u._suspendTimer&&clearTimeout(u._suspendTimer),u._suspendTimer=setTimeout(function(){if(u.autoSuspend){u._suspendTimer=null,u.state="suspending";var p=function(){u.state="suspended",u._resumeAfterSuspend&&(delete u._resumeAfterSuspend,u._autoResume())};u.ctx.suspend().then(p,p)}},3e4),u}},_autoResume:function(){var u=this;if(!(!u.ctx||typeof u.ctx.resume>"u"||!n.usingWebAudio))return u.state==="running"&&u.ctx.state!=="interrupted"&&u._suspendTimer?(clearTimeout(u._suspendTimer),u._suspendTimer=null):u.state==="suspended"||u.state==="running"&&u.ctx.state==="interrupted"?(u.ctx.resume().then(function(){u.state="running";for(var h=0;h<u._howls.length;h++)u._howls[h]._emit("resume")}),u._suspendTimer&&(clearTimeout(u._suspendTimer),u._suspendTimer=null)):u.state==="suspending"&&(u._resumeAfterSuspend=!0),u}};var n=new e,r=function(u){var h=this;if(!u.src||u.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}h.init(u)};r.prototype={init:function(u){var h=this;return n.ctx||d(),h._autoplay=u.autoplay||!1,h._format=typeof u.format!="string"?u.format:[u.format],h._html5=u.html5||!1,h._muted=u.mute||!1,h._loop=u.loop||!1,h._pool=u.pool||5,h._preload=typeof u.preload=="boolean"||u.preload==="metadata"?u.preload:!0,h._rate=u.rate||1,h._sprite=u.sprite||{},h._src=typeof u.src!="string"?u.src:[u.src],h._volume=u.volume!==void 0?u.volume:1,h._xhr={method:u.xhr&&u.xhr.method?u.xhr.method:"GET",headers:u.xhr&&u.xhr.headers?u.xhr.headers:null,withCredentials:u.xhr&&u.xhr.withCredentials?u.xhr.withCredentials:!1},h._duration=0,h._state="unloaded",h._sounds=[],h._endTimers={},h._queue=[],h._playLock=!1,h._onend=u.onend?[{fn:u.onend}]:[],h._onfade=u.onfade?[{fn:u.onfade}]:[],h._onload=u.onload?[{fn:u.onload}]:[],h._onloaderror=u.onloaderror?[{fn:u.onloaderror}]:[],h._onplayerror=u.onplayerror?[{fn:u.onplayerror}]:[],h._onpause=u.onpause?[{fn:u.onpause}]:[],h._onplay=u.onplay?[{fn:u.onplay}]:[],h._onstop=u.onstop?[{fn:u.onstop}]:[],h._onmute=u.onmute?[{fn:u.onmute}]:[],h._onvolume=u.onvolume?[{fn:u.onvolume}]:[],h._onrate=u.onrate?[{fn:u.onrate}]:[],h._onseek=u.onseek?[{fn:u.onseek}]:[],h._onunlock=u.onunlock?[{fn:u.onunlock}]:[],h._onresume=[],h._webAudio=n.usingWebAudio&&!h._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(h),h._autoplay&&h._queue.push({event:"play",action:function(){h.play()}}),h._preload&&h._preload!=="none"&&h.load(),h},load:function(){var u=this,h=null;if(n.noAudio){u._emit("loaderror",null,"No audio support.");return}typeof u._src=="string"&&(u._src=[u._src]);for(var f=0;f<u._src.length;f++){var p,m;if(u._format&&u._format[f])p=u._format[f];else{if(m=u._src[f],typeof m!="string"){u._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}p=/^data:audio\/([^;,]+);/i.exec(m),p||(p=/\.([^.]+)$/.exec(m.split("?",1)[0])),p&&(p=p[1].toLowerCase())}if(p||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),p&&n.codecs(p)){h=u._src[f];break}}if(!h){u._emit("loaderror",null,"No codec support for selected audio sources.");return}return u._src=h,u._state="loading",window.location.protocol==="https:"&&h.slice(0,5)==="http:"&&(u._html5=!0,u._webAudio=!1),new i(u),u._webAudio&&o(u),u},play:function(u,h){var f=this,p=null;if(typeof u=="number")p=u,u=null;else{if(typeof u=="string"&&f._state==="loaded"&&!f._sprite[u])return null;if(typeof u>"u"&&(u="__default",!f._playLock)){for(var m=0,y=0;y<f._sounds.length;y++)f._sounds[y]._paused&&!f._sounds[y]._ended&&(m++,p=f._sounds[y]._id);m===1?u=null:p=null}}var g=p?f._soundById(p):f._inactiveSound();if(!g)return null;if(p&&!u&&(u=g._sprite||"__default"),f._state!=="loaded"){g._sprite=u,g._ended=!1;var _=g._id;return f._queue.push({event:"play",action:function(){f.play(_)}}),_}if(p&&!g._paused)return h||f._loadQueue("play"),g._id;f._webAudio&&n._autoResume();var v=Math.max(0,g._seek>0?g._seek:f._sprite[u][0]/1e3),w=Math.max(0,(f._sprite[u][0]+f._sprite[u][1])/1e3-v),S=w*1e3/Math.abs(g._rate),E=f._sprite[u][0]/1e3,T=(f._sprite[u][0]+f._sprite[u][1])/1e3;g._sprite=u,g._ended=!1;var C=function(){g._paused=!1,g._seek=v,g._start=E,g._stop=T,g._loop=!!(g._loop||f._sprite[u][2])};if(v>=T){f._ended(g);return}var A=g._node;if(f._webAudio){var P=function(){f._playLock=!1,C(),f._refreshBuffer(g);var I=g._muted||f._muted?0:g._volume;A.gain.setValueAtTime(I,n.ctx.currentTime),g._playStart=n.ctx.currentTime,typeof A.bufferSource.start>"u"?g._loop?A.bufferSource.noteGrainOn(0,v,86400):A.bufferSource.noteGrainOn(0,v,w):g._loop?A.bufferSource.start(0,v,86400):A.bufferSource.start(0,v,w),S!==1/0&&(f._endTimers[g._id]=setTimeout(f._ended.bind(f,g),S)),h||setTimeout(function(){f._emit("play",g._id),f._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?P():(f._playLock=!0,f.once("resume",P),f._clearTimer(g._id))}else{var O=function(){A.currentTime=v,A.muted=g._muted||f._muted||n._muted||A.muted,A.volume=g._volume*n.volume(),A.playbackRate=g._rate;try{var I=A.play();if(I&&typeof Promise<"u"&&(I instanceof Promise||typeof I.then=="function")?(f._playLock=!0,C(),I.then(function(){f._playLock=!1,A._unlocked=!0,h?f._loadQueue():f._emit("play",g._id)}).catch(function(){f._playLock=!1,f._emit("playerror",g._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),g._ended=!0,g._paused=!0})):h||(f._playLock=!1,C(),f._emit("play",g._id)),A.playbackRate=g._rate,A.paused){f._emit("playerror",g._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}u!=="__default"||g._loop?f._endTimers[g._id]=setTimeout(f._ended.bind(f,g),S):(f._endTimers[g._id]=function(){f._ended(g),A.removeEventListener("ended",f._endTimers[g._id],!1)},A.addEventListener("ended",f._endTimers[g._id],!1))}catch(F){f._emit("playerror",g._id,F)}};A.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(A.src=f._src,A.load());var U=window&&window.ejecta||!A.readyState&&n._navigator.isCocoonJS;if(A.readyState>=3||U)O();else{f._playLock=!0,f._state="loading";var k=function(){f._state="loaded",O(),A.removeEventListener(n._canPlayEvent,k,!1)};A.addEventListener(n._canPlayEvent,k,!1),f._clearTimer(g._id)}}return g._id},pause:function(u){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"pause",action:function(){h.pause(u)}}),h;for(var f=h._getSoundIds(u),p=0;p<f.length;p++){h._clearTimer(f[p]);var m=h._soundById(f[p]);if(m&&!m._paused&&(m._seek=h.seek(f[p]),m._rateSeek=0,m._paused=!0,h._stopFade(f[p]),m._node))if(h._webAudio){if(!m._node.bufferSource)continue;typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),h._cleanBuffer(m._node)}else(!isNaN(m._node.duration)||m._node.duration===1/0)&&m._node.pause();arguments[1]||h._emit("pause",m?m._id:null)}return h},stop:function(u,h){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(u)}}),f;for(var p=f._getSoundIds(u),m=0;m<p.length;m++){f._clearTimer(p[m]);var y=f._soundById(p[m]);y&&(y._seek=y._start||0,y._rateSeek=0,y._paused=!0,y._ended=!0,f._stopFade(p[m]),y._node&&(f._webAudio?y._node.bufferSource&&(typeof y._node.bufferSource.stop>"u"?y._node.bufferSource.noteOff(0):y._node.bufferSource.stop(0),f._cleanBuffer(y._node)):(!isNaN(y._node.duration)||y._node.duration===1/0)&&(y._node.currentTime=y._start||0,y._node.pause(),y._node.duration===1/0&&f._clearSound(y._node))),h||f._emit("stop",y._id))}return f},mute:function(u,h){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(u,h)}}),f;if(typeof h>"u")if(typeof u=="boolean")f._muted=u;else return f._muted;for(var p=f._getSoundIds(h),m=0;m<p.length;m++){var y=f._soundById(p[m]);y&&(y._muted=u,y._interval&&f._stopFade(y._id),f._webAudio&&y._node?y._node.gain.setValueAtTime(u?0:y._volume,n.ctx.currentTime):y._node&&(y._node.muted=n._muted?!0:u),f._emit("mute",y._id))}return f},volume:function(){var u=this,h=arguments,f,p;if(h.length===0)return u._volume;if(h.length===1||h.length===2&&typeof h[1]>"u"){var m=u._getSoundIds(),y=m.indexOf(h[0]);y>=0?p=parseInt(h[0],10):f=parseFloat(h[0])}else h.length>=2&&(f=parseFloat(h[0]),p=parseInt(h[1],10));var g;if(typeof f<"u"&&f>=0&&f<=1){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,h)}}),u;typeof p>"u"&&(u._volume=f),p=u._getSoundIds(p);for(var _=0;_<p.length;_++)g=u._soundById(p[_]),g&&(g._volume=f,h[2]||u._stopFade(p[_]),u._webAudio&&g._node&&!g._muted?g._node.gain.setValueAtTime(f,n.ctx.currentTime):g._node&&!g._muted&&(g._node.volume=f*n.volume()),u._emit("volume",g._id))}else return g=p?u._soundById(p):u._sounds[0],g?g._volume:0;return u},fade:function(u,h,f,p){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"fade",action:function(){m.fade(u,h,f,p)}}),m;u=Math.min(Math.max(0,parseFloat(u)),1),h=Math.min(Math.max(0,parseFloat(h)),1),f=parseFloat(f),m.volume(u,p);for(var y=m._getSoundIds(p),g=0;g<y.length;g++){var _=m._soundById(y[g]);if(_){if(p||m._stopFade(y[g]),m._webAudio&&!_._muted){var v=n.ctx.currentTime,w=v+f/1e3;_._volume=u,_._node.gain.setValueAtTime(u,v),_._node.gain.linearRampToValueAtTime(h,w)}m._startFadeInterval(_,u,h,f,y[g],typeof p>"u")}}return m},_startFadeInterval:function(u,h,f,p,m,y){var g=this,_=h,v=f-h,w=Math.abs(v/.01),S=Math.max(4,w>0?p/w:p),E=Date.now();u._fadeTo=f,u._interval=setInterval(function(){var T=(Date.now()-E)/p;E=Date.now(),_+=v*T,_=Math.round(_*100)/100,v<0?_=Math.max(f,_):_=Math.min(f,_),g._webAudio?u._volume=_:g.volume(_,u._id,!0),y&&(g._volume=_),(f<h&&_<=f||f>h&&_>=f)&&(clearInterval(u._interval),u._interval=null,u._fadeTo=null,g.volume(f,u._id),g._emit("fade",u._id))},S)},_stopFade:function(u){var h=this,f=h._soundById(u);return f&&f._interval&&(h._webAudio&&f._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(f._interval),f._interval=null,h.volume(f._fadeTo,u),f._fadeTo=null,h._emit("fade",u)),h},loop:function(){var u=this,h=arguments,f,p,m;if(h.length===0)return u._loop;if(h.length===1)if(typeof h[0]=="boolean")f=h[0],u._loop=f;else return m=u._soundById(parseInt(h[0],10)),m?m._loop:!1;else h.length===2&&(f=h[0],p=parseInt(h[1],10));for(var y=u._getSoundIds(p),g=0;g<y.length;g++)m=u._soundById(y[g]),m&&(m._loop=f,u._webAudio&&m._node&&m._node.bufferSource&&(m._node.bufferSource.loop=f,f&&(m._node.bufferSource.loopStart=m._start||0,m._node.bufferSource.loopEnd=m._stop,u.playing(y[g])&&(u.pause(y[g],!0),u.play(y[g],!0)))));return u},rate:function(){var u=this,h=arguments,f,p;if(h.length===0)p=u._sounds[0]._id;else if(h.length===1){var m=u._getSoundIds(),y=m.indexOf(h[0]);y>=0?p=parseInt(h[0],10):f=parseFloat(h[0])}else h.length===2&&(f=parseFloat(h[0]),p=parseInt(h[1],10));var g;if(typeof f=="number"){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,h)}}),u;typeof p>"u"&&(u._rate=f),p=u._getSoundIds(p);for(var _=0;_<p.length;_++)if(g=u._soundById(p[_]),g){u.playing(p[_])&&(g._rateSeek=u.seek(p[_]),g._playStart=u._webAudio?n.ctx.currentTime:g._playStart),g._rate=f,u._webAudio&&g._node&&g._node.bufferSource?g._node.bufferSource.playbackRate.setValueAtTime(f,n.ctx.currentTime):g._node&&(g._node.playbackRate=f);var v=u.seek(p[_]),w=(u._sprite[g._sprite][0]+u._sprite[g._sprite][1])/1e3-v,S=w*1e3/Math.abs(g._rate);(u._endTimers[p[_]]||!g._paused)&&(u._clearTimer(p[_]),u._endTimers[p[_]]=setTimeout(u._ended.bind(u,g),S)),u._emit("rate",g._id)}}else return g=u._soundById(p),g?g._rate:u._rate;return u},seek:function(){var u=this,h=arguments,f,p;if(h.length===0)u._sounds.length&&(p=u._sounds[0]._id);else if(h.length===1){var m=u._getSoundIds(),y=m.indexOf(h[0]);y>=0?p=parseInt(h[0],10):u._sounds.length&&(p=u._sounds[0]._id,f=parseFloat(h[0]))}else h.length===2&&(f=parseFloat(h[0]),p=parseInt(h[1],10));if(typeof p>"u")return 0;if(typeof f=="number"&&(u._state!=="loaded"||u._playLock))return u._queue.push({event:"seek",action:function(){u.seek.apply(u,h)}}),u;var g=u._soundById(p);if(g)if(typeof f=="number"&&f>=0){var _=u.playing(p);_&&u.pause(p,!0),g._seek=f,g._ended=!1,u._clearTimer(p),!u._webAudio&&g._node&&!isNaN(g._node.duration)&&(g._node.currentTime=f);var v=function(){_&&u.play(p,!0),u._emit("seek",p)};if(_&&!u._webAudio){var w=function(){u._playLock?setTimeout(w,0):v()};setTimeout(w,0)}else v()}else if(u._webAudio){var S=u.playing(p)?n.ctx.currentTime-g._playStart:0,E=g._rateSeek?g._rateSeek-g._seek:0;return g._seek+(E+S*Math.abs(g._rate))}else return g._node.currentTime;return u},playing:function(u){var h=this;if(typeof u=="number"){var f=h._soundById(u);return f?!f._paused:!1}for(var p=0;p<h._sounds.length;p++)if(!h._sounds[p]._paused)return!0;return!1},duration:function(u){var h=this,f=h._duration,p=h._soundById(u);return p&&(f=h._sprite[p._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var u=this,h=u._sounds,f=0;f<h.length;f++)h[f]._paused||u.stop(h[f]._id),u._webAudio||(u._clearSound(h[f]._node),h[f]._node.removeEventListener("error",h[f]._errorFn,!1),h[f]._node.removeEventListener(n._canPlayEvent,h[f]._loadFn,!1),h[f]._node.removeEventListener("ended",h[f]._endFn,!1),n._releaseHtml5Audio(h[f]._node)),delete h[f]._node,u._clearTimer(h[f]._id);var p=n._howls.indexOf(u);p>=0&&n._howls.splice(p,1);var m=!0;for(f=0;f<n._howls.length;f++)if(n._howls[f]._src===u._src||u._src.indexOf(n._howls[f]._src)>=0){m=!1;break}return s&&m&&delete s[u._src],n.noAudio=!1,u._state="unloaded",u._sounds=[],u=null,null},on:function(u,h,f,p){var m=this,y=m["_on"+u];return typeof h=="function"&&y.push(p?{id:f,fn:h,once:p}:{id:f,fn:h}),m},off:function(u,h,f){var p=this,m=p["_on"+u],y=0;if(typeof h=="number"&&(f=h,h=null),h||f)for(y=0;y<m.length;y++){var g=f===m[y].id;if(h===m[y].fn&&g||!h&&g){m.splice(y,1);break}}else if(u)p["_on"+u]=[];else{var _=Object.keys(p);for(y=0;y<_.length;y++)_[y].indexOf("_on")===0&&Array.isArray(p[_[y]])&&(p[_[y]]=[])}return p},once:function(u,h,f){var p=this;return p.on(u,h,f,1),p},_emit:function(u,h,f){for(var p=this,m=p["_on"+u],y=m.length-1;y>=0;y--)(!m[y].id||m[y].id===h||u==="load")&&(setTimeout(function(g){g.call(this,h,f)}.bind(p,m[y].fn),0),m[y].once&&p.off(u,m[y].fn,m[y].id));return p._loadQueue(u),p},_loadQueue:function(u){var h=this;if(h._queue.length>0){var f=h._queue[0];f.event===u&&(h._queue.shift(),h._loadQueue()),u||f.action()}return h},_ended:function(u){var h=this,f=u._sprite;if(!h._webAudio&&u._node&&!u._node.paused&&!u._node.ended&&u._node.currentTime<u._stop)return setTimeout(h._ended.bind(h,u),100),h;var p=!!(u._loop||h._sprite[f][2]);if(h._emit("end",u._id),!h._webAudio&&p&&h.stop(u._id,!0).play(u._id),h._webAudio&&p){h._emit("play",u._id),u._seek=u._start||0,u._rateSeek=0,u._playStart=n.ctx.currentTime;var m=(u._stop-u._start)*1e3/Math.abs(u._rate);h._endTimers[u._id]=setTimeout(h._ended.bind(h,u),m)}return h._webAudio&&!p&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,u._rateSeek=0,h._clearTimer(u._id),h._cleanBuffer(u._node),n._autoSuspend()),!h._webAudio&&!p&&h.stop(u._id,!0),h},_clearTimer:function(u){var h=this;if(h._endTimers[u]){if(typeof h._endTimers[u]!="function")clearTimeout(h._endTimers[u]);else{var f=h._soundById(u);f&&f._node&&f._node.removeEventListener("ended",h._endTimers[u],!1)}delete h._endTimers[u]}return h},_soundById:function(u){for(var h=this,f=0;f<h._sounds.length;f++)if(u===h._sounds[f]._id)return h._sounds[f];return null},_inactiveSound:function(){var u=this;u._drain();for(var h=0;h<u._sounds.length;h++)if(u._sounds[h]._ended)return u._sounds[h].reset();return new i(u)},_drain:function(){var u=this,h=u._pool,f=0,p=0;if(!(u._sounds.length<h)){for(p=0;p<u._sounds.length;p++)u._sounds[p]._ended&&f++;for(p=u._sounds.length-1;p>=0;p--){if(f<=h)return;u._sounds[p]._ended&&(u._webAudio&&u._sounds[p]._node&&u._sounds[p]._node.disconnect(0),u._sounds.splice(p,1),f--)}}},_getSoundIds:function(u){var h=this;if(typeof u>"u"){for(var f=[],p=0;p<h._sounds.length;p++)f.push(h._sounds[p]._id);return f}else return[u]},_refreshBuffer:function(u){var h=this;return u._node.bufferSource=n.ctx.createBufferSource(),u._node.bufferSource.buffer=s[h._src],u._panner?u._node.bufferSource.connect(u._panner):u._node.bufferSource.connect(u._node),u._node.bufferSource.loop=u._loop,u._loop&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop||0),u._node.bufferSource.playbackRate.setValueAtTime(u._rate,n.ctx.currentTime),h},_cleanBuffer:function(u){var h=this,f=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(!u.bufferSource)return h;if(n._scratchBuffer&&u.bufferSource&&(u.bufferSource.onended=null,u.bufferSource.disconnect(0),f))try{u.bufferSource.buffer=n._scratchBuffer}catch{}return u.bufferSource=null,h},_clearSound:function(u){var h=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);h||(u.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(u){this._parent=u,this.init()};i.prototype={init:function(){var u=this,h=u._parent;return u._muted=h._muted,u._loop=h._loop,u._volume=h._volume,u._rate=h._rate,u._seek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++n._counter,h._sounds.push(u),u.create(),u},create:function(){var u=this,h=u._parent,f=n._muted||u._muted||u._parent._muted?0:u._volume;return h._webAudio?(u._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),u._node.gain.setValueAtTime(f,n.ctx.currentTime),u._node.paused=!0,u._node.connect(n.masterGain)):n.noAudio||(u._node=n._obtainHtml5Audio(),u._errorFn=u._errorListener.bind(u),u._node.addEventListener("error",u._errorFn,!1),u._loadFn=u._loadListener.bind(u),u._node.addEventListener(n._canPlayEvent,u._loadFn,!1),u._endFn=u._endListener.bind(u),u._node.addEventListener("ended",u._endFn,!1),u._node.src=h._src,u._node.preload=h._preload===!0?"auto":h._preload,u._node.volume=f*n.volume(),u._node.load()),u},reset:function(){var u=this,h=u._parent;return u._muted=h._muted,u._loop=h._loop,u._volume=h._volume,u._rate=h._rate,u._seek=0,u._rateSeek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++n._counter,u},_errorListener:function(){var u=this;u._parent._emit("loaderror",u._id,u._node.error?u._node.error.code:0),u._node.removeEventListener("error",u._errorFn,!1)},_loadListener:function(){var u=this,h=u._parent;h._duration=Math.ceil(u._node.duration*10)/10,Object.keys(h._sprite).length===0&&(h._sprite={__default:[0,h._duration*1e3]}),h._state!=="loaded"&&(h._state="loaded",h._emit("load"),h._loadQueue()),u._node.removeEventListener(n._canPlayEvent,u._loadFn,!1)},_endListener:function(){var u=this,h=u._parent;h._duration===1/0&&(h._duration=Math.ceil(u._node.duration*10)/10,h._sprite.__default[1]===1/0&&(h._sprite.__default[1]=h._duration*1e3),h._ended(u)),u._node.removeEventListener("ended",u._endFn,!1)}};var s={},o=function(u){var h=u._src;if(s[h]){u._duration=s[h].duration,c(u);return}if(/^data:[^;]+;base64,/.test(h)){for(var f=atob(h.split(",")[1]),p=new Uint8Array(f.length),m=0;m<f.length;++m)p[m]=f.charCodeAt(m);l(p.buffer,u)}else{var y=new XMLHttpRequest;y.open(u._xhr.method,h,!0),y.withCredentials=u._xhr.withCredentials,y.responseType="arraybuffer",u._xhr.headers&&Object.keys(u._xhr.headers).forEach(function(g){y.setRequestHeader(g,u._xhr.headers[g])}),y.onload=function(){var g=(y.status+"")[0];if(g!=="0"&&g!=="2"&&g!=="3"){u._emit("loaderror",null,"Failed loading audio file with status: "+y.status+".");return}l(y.response,u)},y.onerror=function(){u._webAudio&&(u._html5=!0,u._webAudio=!1,u._sounds=[],delete s[h],u.load())},a(y)}},a=function(u){try{u.send()}catch{u.onerror()}},l=function(u,h){var f=function(){h._emit("loaderror",null,"Decoding audio data failed.")},p=function(m){m&&h._sounds.length>0?(s[h._src]=m,c(h,m)):f()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(u).then(p).catch(f):n.ctx.decodeAudioData(u,p,f)},c=function(u,h){h&&!u._duration&&(u._duration=h.duration),Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue())},d=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var u=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),h=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=h?parseInt(h[1],10):null;if(u&&f&&f<9){var p=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!p&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};t.Howler=n,t.Howl=r,typeof Qt<"u"?(Qt.HowlerGlobal=e,Qt.Howler=n,Qt.Howl=r,Qt.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=r,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var i=r._howls.length-1;i>=0;i--)r._howls[i].stereo(n);return r},HowlerGlobal.prototype.pos=function(n,r,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(r=typeof r!="number"?s._pos[1]:r,i=typeof i!="number"?s._pos[2]:i,typeof n=="number")s._pos=[n,r,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(n,r,i,s,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var c=l._orientation;if(r=typeof r!="number"?c[1]:r,i=typeof i!="number"?c[2]:i,s=typeof s!="number"?c[3]:s,o=typeof o!="number"?c[4]:o,a=typeof a!="number"?c[5]:a,typeof n=="number")l._orientation=[n,r,i,s,o,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(n,r,i,s,o,a);else return c;return l},Howl.prototype.init=function(n){return function(r){var i=this;return i._orientation=r.orientation||[1,0,0],i._stereo=r.stereo||null,i._pos=r.pos||null,i._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},i._onstereo=r.onstereo?[{fn:r.onstereo}]:[],i._onpos=r.onpos?[{fn:r.onpos}]:[],i._onorientation=r.onorientation?[{fn:r.onorientation}]:[],n.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,r){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(n,r)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof n=="number")i._stereo=n,i._pos=[n,0,0];else return i._stereo;for(var o=i._getSoundIds(r),a=0;a<o.length;a++){var l=i._soundById(o[a]);if(l)if(typeof n=="number")l._stereo=n,l._pos=[n,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,s),s==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(n,0,0):l._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),i._emit("stereo",l._id);else return l._stereo}return i},Howl.prototype.pos=function(n,r,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(n,r,i,s)}}),o;if(r=typeof r!="number"?0:r,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof n=="number")o._pos=[n,r,i];else return o._pos;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof n=="number")c._pos=[n,r,i],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setPosition(n,r,i)),o._emit("pos",c._id);else return c._pos}return o},Howl.prototype.orientation=function(n,r,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(n,r,i,s)}}),o;if(r=typeof r!="number"?o._orientation[1]:r,i=typeof i!="number"?o._orientation[2]:i,typeof s>"u")if(typeof n=="number")o._orientation=[n,r,i];else return o._orientation;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof n=="number")c._orientation=[n,r,i],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setOrientation(n,r,i)),o._emit("orientation",c._id);else return c._orientation}return o},Howl.prototype.pannerAttr=function(){var n=this,r=arguments,i,s,o;if(!n._webAudio)return n;if(r.length===0)return n._pannerAttr;if(r.length===1)if(typeof r[0]=="object")i=r[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),n._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:n._panningModel});else return o=n._soundById(parseInt(r[0],10)),o?o._pannerAttr:n._pannerAttr;else r.length===2&&(i=r[0],s=parseInt(r[1],10));for(var a=n._getSoundIds(s),l=0;l<a.length;l++)if(o=n._soundById(a[l]),o){var c=o._pannerAttr;c={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:c.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:c.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:c.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:c.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:c.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:c.panningModel};var d=o._panner;d||(o._pos||(o._pos=n._pos||[0,0,-.5]),e(o,"spatial"),d=o._panner),d.coneInnerAngle=c.coneInnerAngle,d.coneOuterAngle=c.coneOuterAngle,d.coneOuterGain=c.coneOuterGain,d.distanceModel=c.distanceModel,d.maxDistance=c.maxDistance,d.refDistance=c.refDistance,d.rolloffFactor=c.rolloffFactor,d.panningModel=c.panningModel}return n},Sound.prototype.init=function(n){return function(){var r=this,i=r._parent;r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,n.call(this),r._stereo?i.stereo(r._stereo):r._pos&&i.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var r=this,i=r._parent;return r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,r._stereo?i.stereo(r._stereo):r._pos?i.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,i._refreshBuffer(r)),n.call(this)}}(Sound.prototype.reset);var e=function(n,r){r=r||"spatial",r==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})(Kp);function xf(t,e){return e?"["+e+"] "+t:t}function bf(t){return Math.PI*2*t/256}class eY{activeEngines=0;engineAudio=new Kp.Howl({src:"audio/motor_paulstretch.wav",loop:!0});setIsMuted(e){Howler.mute(e)}playSound(e){e.play()}handlePlayMotorSound(e){const n=this.activeEngines>0;this.activeEngines=e?this.activeEngines+1:Math.max(this.activeEngines-1,0);const r=this.activeEngines>0;!n&&r?this.playSound(this.engineAudio):n&&!r&&this.engineAudio.stop()}}const lo=new eY;class tY{container;bombSprite;sound;props={client_x:0,client_y:0,direction:0};constructor(){this.container=new ye;const e=X["bomb.gif"];this.bombSprite=new Be(e),this.bombSprite.anchor.set(.5,.5),this.bombSprite.position.set(e.width/2,e.height/2),this.container.addChild(this.bombSprite),this.container.zIndex=kn.Bomb,this.sound=new Kp.Howl({src:"audio/bombdrop.mp3"}),lo.playSound(this.sound)}getContainer(){return this.container}updateCallbacks={client_x:()=>{this.container.position.x=this.props.client_x},client_y:()=>{this.container.position.y=this.props.client_y},direction:()=>{this.bombSprite.rotation=bf(this.props.direction)}};destroy(){this.sound.stop()}}const Fl=["#000000","#171717","#515151","#606060","#999999"];class nY{container;bulletGraphics;sound;age=1;isGameRunning=!0;props={client_x:0,client_y:0,speed:0,direction:0};animate=()=>{this.isGameRunning&&this.move_bullet()};constructor(){this.container=new ye,this.bulletGraphics=new Xt,this.bulletGraphics.clear(),this.bulletGraphics.beginFill(Fl[0]),this.bulletGraphics.drawRect(0,0,4,4),this.bulletGraphics.endFill(),this.container.addChild(this.bulletGraphics),this.sound=new Kp.Howl({src:"audio/m16.mp3"}),lo.playSound(this.sound),this.container.zIndex=kn.Bullet,lt.scheduleRecurring(this.animate,1)}move_bullet(){this.age++;const e=bf(this.props.direction);this.props.client_x+=this.props.speed/25*Math.cos(e),this.props.client_y+=this.props.speed/25*Math.sin(e);let n=Math.floor(Fl.length*this.age/175);n=n>=Fl.length?Fl.length-1:n;const r=Fl[n];this.bulletGraphics.clear(),this.bulletGraphics.beginFill(r),this.bulletGraphics.drawRect(0,0,2,2),this.bulletGraphics.endFill(),this.updateCallbacks.client_x({...this.props}),this.updateCallbacks.client_y({...this.props})}getContainer(){return this.container}updateCallbacks={client_x:()=>{this.container.position.x=this.props.client_x},client_y:()=>{this.container.position.y=this.props.client_y},speed:()=>{},direction:()=>{}};destroy(){this.sound.stop(),lt.unregister(this.animate)}}class o2{blinking=!1;targets;filter;hitSound=new Howl({src:"audio/hit.mp3"});constructor(e){this.targets=e,this.filter=new df,this.filter.matrix=rY()}stopBlink=()=>{this.blinking=!1;for(const e of this.targets)e.filters=null};tryBlink(){if(!this.blinking){this.blinking=!0,lo.playSound(this.hitSound);for(const e of this.targets)e.filters=[this.filter];lt.scheduleTask(this.stopBlink,10)}}}const rY=()=>[1,0,0,0,255,0,1,0,0,255,0,0,1,0,255,0,0,0,1,0],iY=13095903,l0=208,$n=104,sY=425,oY=26,c0=Math.round(l0/2),u0=Math.round($n/2),aY=c0+sY,lY=u0+oY;var fl=(t=>(t[t.Ground=0]="Ground",t[t.Runway=1]="Runway",t[t.Plane=2]="Plane",t[t.Man=3]="Man",t[t.Bunker=4]="Bunker",t))(fl||{});const cY=16711680,uY=255,hY=16777215;class dY{container;background;mask;radarGraphics;myTeam;renderFunctions;constructor(){this.container=new ye,this.background=new Xt,this.radarGraphics=new Xt,this.mask=new Xt,this.background.beginFill(iY),this.background.drawRect(0,0,l0,$n),this.background.endFill(),this.mask.beginFill(16711935),this.mask.drawRect(0,0,l0,$n),this.mask.endFill(),this.container.position.set(aY,lY),this.background.position.set(-c0,-u0),this.mask.position.set(-c0,-u0),this.container.addChild(this.background),this.container.addChild(this.radarGraphics),this.container.addChild(this.mask),this.radarGraphics.mask=this.mask,this.renderFunctions={0:e=>this.renderGround(e),3:e=>this.renderObject(e),2:e=>this.renderObject(e),1:e=>this.renderRunway(e),4:e=>this.renderRunway(e)}}centerCamera(e,n){const r=Math.round(e*$n/1e3),i=Math.round(n*$n/1e3);this.radarGraphics.position.set(r,i)}setTeam(e){this.myTeam=e}refreshRadar(e){this.radarGraphics.clear();for(const n of e)for(const[r,i]of n.collection){const s=i.getRadarInfo();this.renderFunctions[s.type](s)}}renderObject(e){const n=Math.round(e.x*$n/1e3)-1,r=Math.round(e.y*$n/1e3)-1;let i;this.myTeam===void 0||e.team==null?i=hY:e.team==this.myTeam?i=uY:i=cY,this.radarGraphics.beginFill(i),this.radarGraphics.drawRect(n,r-1,3,3),this.radarGraphics.endFill()}renderRunway(e){if(!e.health)return;const n=Math.round(e.x*$n/1e3)-1,r=Math.round(e.y*$n/1e3)-1;this.radarGraphics.beginFill(16777215),this.radarGraphics.drawRect(n,r+1,3,3),this.radarGraphics.endFill()}renderGround(e){if(!e.width)return;const n=Math.round(e.x*$n/1e3),r=Math.round(e.y*$n/1e3),i=Math.round(e.width*$n/1e3);this.radarGraphics.beginFill(1118481),this.radarGraphics.drawRect(n,r+1,i,2),this.radarGraphics.endFill()}}class fY{props={team:"Allies",client_x:0,client_y:0,client_health:0};container;bunkerSprite;healthBar;lastHealth=0;userTeam="Allies";textures={Centrals:X["headquarter_germans.gif"],Allies:X["headquarter_raf.gif"],Destroyed:X["headquarter_broke.gif"]};blinker;constructor(){this.container=new ye,this.bunkerSprite=new Be,this.healthBar=new Xt,this.container.addChild(this.bunkerSprite),this.container.addChild(this.healthBar),this.container.zIndex=kn.Bunker,this.blinker=new o2([this.bunkerSprite])}getRadarInfo(){const e=Math.round(this.bunkerSprite.width/2),n=this.props.client_x,r=e;return{type:fl.Bunker,x:n+r,y:this.props.client_y+this.container.height-5,health:this.props.client_health,team:this.props.team,width:this.bunkerSprite.width}}getContainer(){return this.container}updateCallbacks={team:()=>{},client_x:()=>{const{client_x:e}=this.props;e!==void 0&&(this.container.position.x=e)},client_health:()=>{this.updateTexture(),this.drawHealthBar(),this.props.client_health<this.lastHealth&&this.blinker.tryBlink(),this.lastHealth=this.props.client_health},client_y:()=>{const{client_y:e}=this.props;e!==void 0&&(this.container.position.y=e-3)}};updateProps(e){}setUserTeam(e){this.userTeam=e,this.updateTexture(),console.log(this),this.drawHealthBar()}destroy(){}drawHealthBar(){const{team:e,client_health:n}=this.props;if(n<=0){this.healthBar.visible=!1;return}this.healthBar.visible=!0;const r=this.getTexture();this.healthBar.position.y=r.height,this.healthBar.position.x=10;const i=e===this.userTeam?Gt.OwnBackground:Gt.OpponentBackground,s=Math.round(r.width*(n/350));this.healthBar.clear(),this.healthBar.beginFill(i),this.healthBar.drawRect(0,0,s,3),this.healthBar.endFill()}getTexture(){return this.props.client_health<=0?this.textures.Destroyed:this.textures[this.props.team]}updateTexture(){this.bunkerSprite.texture=this.getTexture()}}class pY{props={client_x:0,client_y:0,facing:"Right",terrain:"Normal"};container;coastSprite;water;constructor(){this.container=new ye;const e=X["ground1.gif"];this.coastSprite=new Be,this.coastSprite.height=e.height,this.water=new Xt,this.container.addChild(this.water),this.container.addChild(this.coastSprite),this.container.zIndex=kn.Ground}getContainer(){return this.container}updateCallbacks={client_x:()=>{const{client_x:e}=this.props;e!==void 0&&(this.coastSprite.position.x=e,this.water.position.x=e)},client_y:()=>{const{client_y:e}=this.props;e!==void 0&&(this.coastSprite.position.y=e,this.water.position.y=e)},facing:()=>{const{facing:e}=this.props;e!==void 0&&(this.coastSprite.anchor.x=e==="Left"?0:1,this.coastSprite.scale.x=e==="Left"?1:-1)},terrain:()=>this.updateTerrain()};updateTerrain(){const e={Right:{Normal:X["beach-l.gif"],Desert:X["beach-l_desert.gif"]},Left:{Normal:X["beach-l.gif"],Desert:X["beach-l_desert.gif"]}};this.props.facing&&this.props.terrain&&(this.coastSprite.texture=e[this.props.facing][this.props.terrain],this.water.clear(),this.water.beginFill(lb[this.props.terrain]),this.water.drawRect(0,this.coastSprite.height-2,this.coastSprite.width,5e3),this.water.endFill())}destroy(){}}function mY(t){return"getCenter"in t}function gY(t,e){const n={...t.props};t.props={...t.props,...e};for(const[r,i]of Object.entries(t.updateCallbacks))Object.hasOwn(e,r)&&i(n)}const yY={0:"explosion0001.gif",1:"explosion0002.gif",2:"explosion0003.gif",3:"explosion0004.gif",4:"explosion0005.gif",5:"explosion0006.gif",6:"explosion0007.gif",7:"explosion0008.gif",8:"explosion0008.gif"};class vY{props={client_x:0,client_y:0,phase:0,team:null};container;bombSprite;updateCallbacks={client_x:()=>{this.bombSprite.position.x=this.props.client_x},client_y:()=>{this.bombSprite.position.y=this.props.client_y},phase:()=>{this.bombSprite.texture=X[yY[this.props.phase]]},team:()=>{}};constructor(){this.container=new ye;const e=X["explosion0001.gif"];this.bombSprite=new Be(e),this.container.addChild(this.bombSprite),this.bombSprite.anchor.set(.5),this.container.zIndex=kn.Bomb,lo.playSound(new Howl({src:"audio/explosion.mp3"}))}getContainer(){return this.container}destroy(){}}class _Y{props={client_x:0,client_y:0,terrain:"Normal",width:0};container;groundSprite;water;constructor(){this.container=new ye;const e=X["ground1.gif"];this.groundSprite=new dl(e),this.water=new Xt,this.groundSprite.height=e.height,this.container.addChild(this.water),this.container.addChild(this.groundSprite),this.container.zIndex=kn.Ground}getContainer(){return this.container}updateCallbacks={client_x:()=>{const{client_x:e}=this.props;this.groundSprite.x=e,this.water.x=e},client_y:()=>{const{client_y:e}=this.props;this.groundSprite.y=e,this.water.y=e},width:()=>{this.groundSprite.width=this.props.width},terrain:()=>{const{terrain:e}=this.props,n={Normal:X["ground1.gif"],Desert:X["groundDesert.gif"]};this.groundSprite.texture=n[e];const r=lb[e];this.water.clear(),this.water.beginFill(r),this.water.drawRect(0,0+this.groundSprite.height-2,this.groundSprite.width,5e3),this.water.endFill()}};getRadarInfo(){return{type:fl.Ground,x:this.props.client_x,y:this.props.client_y,width:this.props.width}}destroy(){}}class xY{props={terrain:"Normal",client_x:0,client_y:0};container;hillSprite;constructor(){this.container=new ye,this.hillSprite=new Be(X["hill1.gif"]),this.container.addChild(this.hillSprite),this.hillSprite.anchor.set(.5,0),this.container.zIndex=kn.Hill}getContainer(){return this.container}getTexture(){return this.props.terrain==="Desert"?X["sandhill.gif"]:X["hill1.gif"]}setPosition(e,n){}updateCallbacks={terrain:()=>{this.hillSprite.texture=this.props.terrain==="Normal"?X["hill1.gif"]:X["sandhill.gif"]},client_x:()=>{this.hillSprite.position.x=this.props.client_x},client_y:()=>{this.hillSprite.position.y=this.props.client_y}};destroy(){}}class bY{props={client_x:0,client_y:0,state:"Standing",team:"Allies"};container;manContainer;manSprite;nameText;frameCount=0;animate=()=>{this.animateWalk()};constructor(){this.container=new ye,this.manContainer=new ye,this.manSprite=new Be;const e=X["parachuter0.gif"];this.nameText=new Mr("",{fontFamily:"arial",fontSize:10}),this.nameText.position.set(0,-15),this.manSprite.texture=e,this.manSprite.anchor.set(.5,0),this.manSprite.position.x=e.width/2,this.container.addChild(this.manContainer),this.manContainer.addChild(this.manSprite),this.manContainer.addChild(this.nameText),this.container.zIndex=kn.Man,lt.scheduleRecurring(this.animate,10)}callbackOrder=["client_x","client_y"];updateCallbacks={client_x:()=>this.updateX(),client_y:()=>this.updateY(),team:()=>this.updateTeam(),state:()=>this.updateState()};getContainer(){return this.container}getStats(){return{health:255,ammo:255,bombs:1}}getCenter(){return{x:this.props.client_x??0,y:this.props.client_y??0}}destroy(){lt.unregister(this.animate)}updateX(){this.container.position.x=this.props.client_x}updateY(){this.container.position.y=this.props.client_y}updateState(){switch(this.props.state){case"Falling":{this.manSprite.texture=X["parachuter0.gif"];break}case"Parachuting":{this.manSprite.texture=X["parachuter1.gif"];break}case"Standing":{this.manSprite.texture=X["parachuter0.gif"];break}case"WalkingLeft":{this.manSprite.scale.x=1;break}case"WalkingRight":{this.manSprite.scale.x=-1;break}}}updateTeam(){}getRadarInfo(){return{type:fl.Man,x:this.props.client_x,y:this.props.client_y+this.manSprite.texture.height,team:this.props.team}}animateWalk(){(this.props.state=="WalkingLeft"||this.props.state=="WalkingRight")&&(this.frameCount==0?(this.manSprite.texture=X["parachuter3.gif"],this.frameCount=1):this.frameCount==1&&(this.manSprite.texture=X["parachuter2.gif"],this.frameCount=0))}setPlayerName(e,n){if(!e){this.nameText.visible=!1;return}this.nameText.text=e.substring(0,15),this.nameText.style.fill=this.getColor(n),this.nameText.visible=!0}getColor(e){return e===null||this.props.team===null?Gt.SpectatorForeground:e===this.props.team?Gt.OwnForeground:Gt.OpponentForeground}}const NE={Albatros:4,Junkers:5,Fokker:6,Bristol:7,Salmson:8,Sopwith:9};class wY{container;planeContainer;nameText;planeSprite;first_flip=!0;darkSmoke;angle=0;flipFrame=0;props={team:"Allies",client_x:0,client_y:0,client_fuel:0,flipped:!1,mode:"Flying",motor_on:!0,plane_type:"Albatros",direction:0,total_bombs:0,client_ammo:0,client_health:0};createGraySmoke=()=>{const e=this.getTexture(),n=e.width,r=e.height,i=this.angle,s=this.planeContainer.position.x,o=this.planeContainer.position.y,a=Math.floor(s-Math.cos(i)*(n/2+6)),l=Math.floor(o-Math.sin(i)*(r/2+6)),c=new Be(X["smoke1.gif"]);c.anchor.set(.5),c.position.set(a,l),this.container.addChild(c),lt.scheduleTask(()=>this.container.removeChild(c),30)};createDarkSmoke=()=>{const e=this.props.client_health/255;let n=30;if(e>.9){lt.scheduleTask(this.createDarkSmoke,n);return}const r=X["smoke2.gif"],i=new Be(r),s=this.getSmokePosition(!0);i.anchor.set(.5),i.position.set(s.x,s.y),this.darkSmoke.addChild(i),e<=.66&&(n=20),e<=.33&&(n=10),lt.scheduleTask(()=>this.darkSmoke.removeChild(i),30),lt.scheduleTask(this.createDarkSmoke,n)};animate=e=>{if(!(!this.props.motor_on||this.props.mode!=="Flying"))return this.createGraySmoke(e)};constructor(){this.container=new ye,this.planeSprite=new Be,this.planeSprite.anchor.set(.5),this.darkSmoke=new ye,this.nameText=new Mr("",{fontFamily:"arial",fontSize:10}),this.nameText.anchor.set(.5,0),this.nameText.position.set(0,25),this.planeContainer=new ye,this.container.addChild(this.planeContainer),this.planeContainer.addChild(this.planeSprite),this.planeContainer.addChild(this.nameText),this.container.addChild(this.darkSmoke),this.container.zIndex=kn.Plane,lt.scheduleRecurring(this.animate,10),lt.scheduleTask(this.createDarkSmoke,30)}getSmokePosition(e){const n=bf(this.props.direction),r=Math.round(this.planeSprite.width/2),i=Math.round(r/6),s=r+i,o=n*-1,a=s*Math.cos(o),l=s*Math.sin(o);let c,d;return e?(c=this.props.client_x,d=this.props.client_y):(c=this.props.client_x-a,d=this.props.client_y-l),{x:c,y:d}}getContainer(){return this.container}getStats(){return{bombs:this.props.total_bombs,fuel:this.props.client_fuel,ammo:this.props.client_ammo,health:this.props.client_health}}getCenter(){return{x:this.props.client_x??0,y:this.props.client_y??0}}getTexture(){const e=NE[this.props.plane_type];return X[`plane${e}.gif`]}getFlipTexture(e){if(e===0||e===3)return this.getTexture();const r=`plane${NE[this.props.plane_type]}_flip${e}.gif`;return X[r]}renderFlip=()=>{const e=this.flipFrame;if(this.planeSprite.texture=this.getFlipTexture(e),e===3){this.flipFrame=0;return}this.flipFrame++,lt.scheduleTask(this.renderFlip,7)};updateCallbacks={client_x:()=>{this.planeContainer.position.x=this.props.client_x},client_y:()=>{this.planeContainer.position.y=this.props.client_y},team:()=>{},client_ammo:()=>{},client_health:()=>{},client_fuel:()=>{},total_bombs:()=>{console.log("Bombs",this.props.total_bombs)},flipped:()=>{if(this.planeSprite.scale.y=this.props.flipped?-1:1,this.first_flip){this.first_flip=!1;return}lt.unregister(this.renderFlip),this.flipFrame=0,this.renderFlip(0)},mode:()=>{console.log("mode",this.props.mode)},motor_on:()=>{lo.handlePlayMotorSound(this.props.motor_on),console.log("motor on",this.props.motor_on)},plane_type:()=>{this.planeSprite.texture=this.getTexture()},direction:()=>{this.angle=bf(this.props.direction),this.planeSprite.rotation=this.angle}};destroy(){lt.unregister(this.animate),lt.unregister(this.createDarkSmoke),this.props.motor_on&&lo.handlePlayMotorSound(!1)}getRadarInfo(){return{type:fl.Plane,team:this.props.team,x:this.props.client_x,y:this.props.client_y}}setPlayerName(e,n){if(!e){this.nameText.visible=!1;return}this.nameText.text=e.substring(0,15),this.nameText.style.fill=this.getColor(n),this.nameText.visible=!0}getColor(e){return e===null||this.props.team===null?Gt.SpectatorForeground:e===this.props.team?Gt.OwnForeground:Gt.OpponentForeground}}class SY{props={client_x:0,client_y:0,facing:"Left",team:"Allies",client_health:0};userTeam;backContainer;frontContainer;runwaySprite;runwayBack;healthBar;lastHealth=0;updateCallbacks={client_x:()=>{const{client_x:e}=this.props;e!==void 0&&(this.runwaySprite.position.x=e,this.runwayBack.position.x=e+217)},client_health:()=>{this.updateTexture(),this.drawHealthBar(),this.props.client_health<this.lastHealth&&this.blinker.tryBlink(),this.lastHealth=this.props.client_health},client_y:()=>{const{client_y:e}=this.props;e!==void 0&&(this.runwaySprite.position.y=e,this.runwayBack.position.y=e)},facing:()=>{const{facing:e}=this.props;e!==void 0&&(this.updateTexture(),this.runwayBack.visible=e==="Left")},team:()=>{}};blinker;constructor(){this.userTeam="Allies",this.props.facing="Left",this.backContainer=new ye,this.runwayBack=new Be(X["runway2b.gif"]),this.runwayBack.visible=!1,this.backContainer.addChild(this.runwayBack),this.backContainer.zIndex=kn.RunwayBack,this.frontContainer=new ye,this.runwaySprite=new Be,this.healthBar=new Xt,this.frontContainer.addChild(this.runwaySprite),this.frontContainer.addChild(this.healthBar),this.frontContainer.zIndex=kn.Runway,this.blinker=new o2([this.runwayBack,this.runwaySprite])}setUserTeam(e){this.userTeam=e,this.drawHealthBar()}getTexture(){const e=this.props.facing,n={Left:X["runway2.gif"],Right:X["runway.gif"]},r={Left:X["runway2_broke.gif"],Right:X["runway_broke.gif"]};return(this.props.client_health>0?n:r)[e]}updateTexture(){this.runwaySprite.texture=this.getTexture()}getStats(){return{ammo:0,bombs:0,fuel:0,health:this.props.client_health/255}}getCenter(){const e=this.runwaySprite.texture.width/2,n=this.runwaySprite.texture.height/2;return{x:(this.props.client_x??0)+e,y:(this.props.client_y??0)-n}}drawHealthBar(){const{team:e,client_health:n,client_x:r,client_y:i}=this.props;if(n<=0){this.healthBar.visible=!1;return}this.healthBar.visible=!0;const s=this.getTexture();this.healthBar.position.y=i+s.height-3-1,this.healthBar.position.x=r+10;const o=e===this.userTeam?Gt.OwnBackground:Gt.OpponentBackground,a=Math.round((s.width-20)*(n/255));this.healthBar.clear(),this.healthBar.beginFill(o),this.healthBar.drawRect(0,0,a,3),this.healthBar.endFill()}getContainer(){return[this.backContainer,this.frontContainer]}destroy(){}getRadarInfo(){const e=Math.round(this.runwaySprite.width/2),n=this.props.team==="Centrals"?this.props.client_x:this.props.client_x+this.runwaySprite.width,r=this.props.team==="Centrals"?e:-e;return{type:fl.Runway,x:n+r,y:this.props.client_y+this.runwaySprite.height,health:this.props.client_health,team:this.props.team,width:this.runwaySprite.width}}}class EY{props={client_x:0,client_y:0,facing:"Left",terrain:"Normal",width:0};container;waterGraphics;waves;waveIndex=0;animate=()=>{this.waveStep()};constructor(){this.container=new ye,this.waterGraphics=new Xt;const e=X["wave-l_1.gif"];this.waves=new dl(e),this.waves.height=e.height,lt.scheduleRecurring(this.animate,20),this.container.addChild(this.waterGraphics),this.container.addChild(this.waves),this.container.zIndex=kn.Water}updateCallbacks={client_x:()=>{const{client_x:e}=this.props;e!==void 0&&(this.waterGraphics.position.x=e,this.waves.position.x=e)},client_y:()=>{const{client_y:e}=this.props;e!==void 0&&(this.waterGraphics.position.y=e,this.waves.position.y=e)},facing:()=>{const{facing:e}=this.props;e!==void 0&&(this.waves.anchor.x=e==="Left"?0:1,this.waves.scale.x=e==="Left"?1:-1)},terrain:()=>{const{terrain:e}=this.props;if(e===void 0)return;const n=lb[e];this.waterGraphics.clear(),this.waterGraphics.beginFill(n),this.waterGraphics.drawRect(0,0,this.waves.width,5e3),this.waterGraphics.endFill()},width:()=>{const{width:e}=this.props;e!==void 0&&(this.waterGraphics.width=e,this.waves.width=e)}};waveStep(){const e=`wave-l_${this.waveIndex}.gif`,r={"wave-l_1.gif":X["wave-l_1.gif"],"wave-l_2.gif":X["wave-l_2.gif"],"wave-l_3.gif":X["wave-l_3.gif"],"wave-l_4.gif":X["wave-l_4.gif"],"wave-l_5.gif":X["wave-l_5.gif"],"wave-l_6.gif":X["wave-l_6.gif"],"wave-l_7.gif":X["wave-l_7.gif"]}[e];this.waves.texture=r,this.waveIndex+=1,this.waveIndex==8&&(this.waveIndex=0)}getContainer(){return this.container}destroy(){lt.unregister(this.animate)}}class TY{props={state:"Intermission",winner:"Allies"};constructor(){}getContainer(){return new ye}updateCallbacks={state:()=>{},winner:()=>{}};destroy(){}}const a2=[["WorldInfo",()=>new TY],["Plane",()=>new wY],["Man",()=>new bY],["BackgroundItem",()=>new JX],["Ground",()=>new _Y],["Coast",()=>new pY],["Runway",()=>new SY],["Water",()=>new EY],["Bunker",()=>new fY],["Bomb",()=>new tY],["Explosion",()=>new vY],["Hill",()=>new xY],["Bullet",()=>new nY]];function l2(t){return Object.fromEntries(t.map(([e,n])=>[e,{new_type:n,collection:new Map}]))}function c2(t,e,n,{onRemove:r}){const i=t[n];if(!i)return;const s=i.collection.get(e);s&&(r?.(s,e,void 0),s.destroy(),i.collection.delete(e))}function wf(t,{onRemove:e}){for(const n of Object.keys(t)){const r=t[n];for(const[i,s]of r.collection.entries())e?.(s,i,void 0),s.destroy(),r.collection.delete(i)}}function CY(t,e,n,{onAdd:r}){const i=t[n],s=i.collection.get(e);if(s)return s;const o=i.new_type();return i.collection.set(e,o),r?.(o,e,void 0),o}function u2(t,e,n,{onAdd:r,onUpdate:i}){const s=CY(t,e,n.type,{onAdd:r});return gY(s,n.props),i?.(s,e,n),s}var PY=Object.defineProperty,AY=(t,e,n)=>e in t?PY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H=(t,e,n)=>(AY(t,typeof e!="symbol"?e+"":e,n),n);class ir{constructor(e){H(this,"parent"),H(this,"paused"),this.parent=e,this.paused=!1}destroy(){}down(e){return!1}move(e){return!1}up(e){return!1}wheel(e){return!1}update(e){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}var RY=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},h2={exports:{}};(function(t,e){(function(){var n,r;r=function(i){return t.exports=i},n={linear:function(i,s,o,a){return o*i/a+s},easeInQuad:function(i,s,o,a){return o*(i/=a)*i+s},easeOutQuad:function(i,s,o,a){return-o*(i/=a)*(i-2)+s},easeInOutQuad:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i+s:-o/2*(--i*(i-2)-1)+s},easeInCubic:function(i,s,o,a){return o*(i/=a)*i*i+s},easeOutCubic:function(i,s,o,a){return o*((i=i/a-1)*i*i+1)+s},easeInOutCubic:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i+s:o/2*((i-=2)*i*i+2)+s},easeInQuart:function(i,s,o,a){return o*(i/=a)*i*i*i+s},easeOutQuart:function(i,s,o,a){return-o*((i=i/a-1)*i*i*i-1)+s},easeInOutQuart:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i*i+s:-o/2*((i-=2)*i*i*i-2)+s},easeInQuint:function(i,s,o,a){return o*(i/=a)*i*i*i*i+s},easeOutQuint:function(i,s,o,a){return o*((i=i/a-1)*i*i*i*i+1)+s},easeInOutQuint:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i*i*i+s:o/2*((i-=2)*i*i*i*i+2)+s},easeInSine:function(i,s,o,a){return-o*Math.cos(i/a*(Math.PI/2))+o+s},easeOutSine:function(i,s,o,a){return o*Math.sin(i/a*(Math.PI/2))+s},easeInOutSine:function(i,s,o,a){return-o/2*(Math.cos(Math.PI*i/a)-1)+s},easeInExpo:function(i,s,o,a){return i===0?s:o*Math.pow(2,10*(i/a-1))+s},easeOutExpo:function(i,s,o,a){return i===a?s+o:o*(-Math.pow(2,-10*i/a)+1)+s},easeInOutExpo:function(i,s,o,a){return(i/=a/2)<1?o/2*Math.pow(2,10*(i-1))+s:o/2*(-Math.pow(2,-10*--i)+2)+s},easeInCirc:function(i,s,o,a){return-o*(Math.sqrt(1-(i/=a)*i)-1)+s},easeOutCirc:function(i,s,o,a){return o*Math.sqrt(1-(i=i/a-1)*i)+s},easeInOutCirc:function(i,s,o,a){return(i/=a/2)<1?-o/2*(Math.sqrt(1-i*i)-1)+s:o/2*(Math.sqrt(1-(i-=2)*i)+1)+s},easeInElastic:function(i,s,o,a){var l,c,d;return d=1.70158,c=0,l=o,i===0||(i/=a),c||(c=a*.3),l<Math.abs(o)?(l=o,d=c/4):d=c/(2*Math.PI)*Math.asin(o/l),-(l*Math.pow(2,10*(i-=1))*Math.sin((i*a-d)*(2*Math.PI)/c))+s},easeOutElastic:function(i,s,o,a){var l,c,d;return d=1.70158,c=0,l=o,i===0||(i/=a),c||(c=a*.3),l<Math.abs(o)?(l=o,d=c/4):d=c/(2*Math.PI)*Math.asin(o/l),l*Math.pow(2,-10*i)*Math.sin((i*a-d)*(2*Math.PI)/c)+o+s},easeInOutElastic:function(i,s,o,a){var l,c,d;return d=1.70158,c=0,l=o,i===0||(i/=a/2),c||(c=a*(.3*1.5)),l<Math.abs(o)?(l=o,d=c/4):d=c/(2*Math.PI)*Math.asin(o/l),i<1?-.5*(l*Math.pow(2,10*(i-=1))*Math.sin((i*a-d)*(2*Math.PI)/c))+s:l*Math.pow(2,-10*(i-=1))*Math.sin((i*a-d)*(2*Math.PI)/c)*.5+o+s},easeInBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),o*(i/=a)*i*((l+1)*i-l)+s},easeOutBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),o*((i=i/a-1)*i*((l+1)*i+l)+1)+s},easeInOutBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),(i/=a/2)<1?o/2*(i*i*(((l*=1.525)+1)*i-l))+s:o/2*((i-=2)*i*(((l*=1.525)+1)*i+l)+2)+s},easeInBounce:function(i,s,o,a){var l;return l=n.easeOutBounce(a-i,0,o,a),o-l+s},easeOutBounce:function(i,s,o,a){return(i/=a)<1/2.75?o*(7.5625*i*i)+s:i<2/2.75?o*(7.5625*(i-=1.5/2.75)*i+.75)+s:i<2.5/2.75?o*(7.5625*(i-=2.25/2.75)*i+.9375)+s:o*(7.5625*(i-=2.625/2.75)*i+.984375)+s},easeInOutBounce:function(i,s,o,a){var l;return i<a/2?(l=n.easeInBounce(i*2,0,o,a),l*.5+s):(l=n.easeOutBounce(i*2-a,0,o,a),l*.5+o*.5+s)}},r(n)}).call(RY)})(h2);const LE=h2.exports;function qp(t,e){if(t){if(typeof t=="function")return t;if(typeof t=="string")return LE[t]}else return LE[e]}const IY={removeOnInterrupt:!1,ease:"linear",time:1e3};class kY extends ir{constructor(e,n={}){super(e),H(this,"options"),H(this,"startX"),H(this,"startY"),H(this,"deltaX"),H(this,"deltaY"),H(this,"keepCenter"),H(this,"startWidth",null),H(this,"startHeight",null),H(this,"deltaWidth",null),H(this,"deltaHeight",null),H(this,"width",null),H(this,"height",null),H(this,"time",0),this.options=Object.assign({},IY,n),this.options.ease=qp(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(e){if(this.paused)return;this.time+=e;const n=new ue(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const r=this.parent.width,i=this.parent.height;this.complete(),(r!==this.parent.width||i!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}else{const r=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const i=this.startWidth,s=this.deltaWidth;this.parent.fitWidth(i+s*r,this.keepCenter,this.height===null)}if(this.height!==null){const i=this.startHeight,s=this.deltaHeight;this.parent.fitHeight(i+s*r,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const i=this.startX,s=this.startY,o=this.deltaX,a=this.deltaY,l=new ue(this.parent.x,this.parent.y);this.parent.moveCenter(i+o*r,s+a*r),this.parent.emit("moved",{viewport:this.parent,original:l,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}}}const MY={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class DY extends ir{constructor(e,n={}){super(e),H(this,"options"),H(this,"left"),H(this,"top"),H(this,"right"),H(this,"bottom"),H(this,"underflowX"),H(this,"underflowY"),H(this,"ease"),H(this,"toX"),H(this,"toY"),this.options=Object.assign({},MY,n),this.ease=qp(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const r=this.options.underflow.toLowerCase();r==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=r.indexOf("left")!==-1?-1:r.indexOf("right")!==-1?1:0,this.underflowY=r.indexOf("top")!==-1?-1:r.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(e){if(!this.paused){if(this.bounce(),this.toX){const n=this.toX;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),n.time>=this.options.time?(this.parent.x=n.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(n.time,n.start,n.delta,this.options.time)}if(this.toY){const n=this.toY;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),n.time>=this.options.time?(this.parent.y=n.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(n.time,n.start,n.delta,this.options.time)}}}calcUnderflowX(){let e;switch(this.underflowX){case-1:e=0;break;case 1:e=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:e=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return e}calcUnderflowY(){let e;switch(this.underflowY){case-1:e=0;break;case 1:e=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:e=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return e}oob(){const e=this.options.bounceBox;if(e){const n=typeof e.x>"u"?0:e.x,r=typeof e.y>"u"?0:e.y,i=typeof e.width>"u"?this.parent.worldWidth:e.width,s=typeof e.height>"u"?this.parent.worldHeight:e.height;return{left:this.parent.left<n,right:this.parent.right>i,top:this.parent.top<r,bottom:this.parent.bottom>s,topLeft:new ue(n*this.parent.scale.x,r*this.parent.scale.y),bottomRight:new ue(i*this.parent.scale.x-this.parent.screenWidth,s*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new ue(0,0),bottomRight:new ue(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var e,n;if(this.paused)return;let r,i=this.parent.plugins.get("decelerate",!0);i&&(i.x||i.y)&&(i.x&&i.percentChangeX===((e=i.options)==null?void 0:e.friction)||i.y&&i.percentChangeY===((n=i.options)==null?void 0:n.friction))&&(r=this.oob(),(r.left&&this.left||r.right&&this.right)&&(i.percentChangeX=this.options.friction),(r.top&&this.top||r.bottom&&this.bottom)&&(i.percentChangeY=this.options.friction));const s=this.parent.plugins.get("drag",!0)||{},o=this.parent.plugins.get("pinch",!0)||{};if(i=i||{},!(s!=null&&s.active)&&!(o!=null&&o.active)&&(!this.toX||!this.toY)&&(!i.x||!i.y)){r=r||this.oob();const a=r.topLeft,l=r.bottomRight;if(!this.toX&&!i.x){let c=null;r.left&&this.left?c=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-a.x:r.right&&this.right&&(c=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-l.x),c!==null&&this.parent.x!==c&&(this.toX={time:0,start:this.parent.x,delta:c-this.parent.x,end:c},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!i.y){let c=null;r.top&&this.top?c=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-a.y:r.bottom&&this.bottom&&(c=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-l.y),c!==null&&this.parent.y!==c&&(this.toY={time:0,start:this.parent.y,delta:c-this.parent.y,end:c},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const OY={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class NY extends ir{constructor(e,n={}){super(e),H(this,"options"),H(this,"last"),H(this,"noUnderflow"),H(this,"underflowX"),H(this,"underflowY"),this.options=Object.assign({},OY,n),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="none"?this.noUnderflow=!0:e==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=e.indexOf("left")!==-1?-1:e.indexOf("right")!==-1?1:0,this.underflowY=e.indexOf("top")!==-1?-1:e.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const e=new ue(this.parent.x,this.parent.y),n=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,r=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,r=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,r=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,n.x=0,r=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,n.x=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,r=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,r=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,r=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,n.y=0,r=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,n.y=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const LY={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class BY extends ir{constructor(e,n={}){super(e),H(this,"options"),this.options=Object.assign({},LY,n),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&e<this.options.minWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&e>this.options.maxWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&n<this.options.minHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&n>this.options.maxHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const e={x:null,y:null},n={x:null,y:null};if(typeof this.options.minScale=="number")e.x=this.options.minScale,e.y=this.options.minScale;else if(this.options.minScale!==null){const s=this.options.minScale;e.x=typeof s.x>"u"?null:s.x,e.y=typeof s.y>"u"?null:s.y}if(typeof this.options.maxScale=="number")n.x=this.options.maxScale,n.y=this.options.maxScale;else if(this.options.maxScale!==null){const s=this.options.maxScale;n.x=typeof s.x>"u"?null:s.x,n.y=typeof s.y>"u"?null:s.y}let r=this.parent.scale.x,i=this.parent.scale.y;e.x!==null&&r<e.x&&(r=e.x),n.x!==null&&r>n.x&&(r=n.x),e.y!==null&&i<e.y&&(i=e.y),n.y!==null&&i>n.y&&(i=n.y),(r!==this.parent.scale.x||i!==this.parent.scale.y)&&(this.parent.scale.set(r,i),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}}const FY={friction:.98,bounce:.8,minSpeed:.01},Xi=16;class $Y extends ir{constructor(e,n={}){super(e),H(this,"options"),H(this,"x"),H(this,"y"),H(this,"percentChangeX"),H(this,"percentChangeY"),H(this,"saved"),H(this,"timeSinceRelease"),this.options=Object.assign({},FY,n),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",r=>this.handleMoved(r))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const e=this.parent.input.count();return(e===1||e>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(e){if(this.saved.length){const n=this.saved[this.saved.length-1];e.type==="clamp-x"&&e.original?n.x===e.original.x&&(n.x=this.parent.x):e.type==="clamp-y"&&e.original&&n.y===e.original.y&&(n.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const e=performance.now();for(const n of this.saved)if(n.time>=e-100){const r=e-n.time;this.x=(this.parent.x-n.x)/r,this.y=(this.parent.y-n.y)/r,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(e){e=e||{},typeof e.x<"u"&&(this.x=e.x,this.percentChangeX=this.options.friction),typeof e.y<"u"&&(this.y=e.y,this.percentChangeY=this.options.friction)}update(e){if(this.paused)return;const n=this.x||this.y,r=this.timeSinceRelease,i=this.timeSinceRelease+e;if(this.x){const s=this.percentChangeX,o=Math.log(s);this.parent.x+=this.x*Xi/o*(Math.pow(s,i/Xi)-Math.pow(s,r/Xi)),this.x*=Math.pow(this.percentChangeX,e/Xi)}if(this.y){const s=this.percentChangeY,o=Math.log(s);this.parent.y+=this.y*Xi/o*(Math.pow(s,i/Xi)-Math.pow(s,r/Xi)),this.y*=Math.pow(this.percentChangeY,e/Xi)}this.timeSinceRelease+=e,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),n&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const UY={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class HY extends ir{constructor(e,n={}){super(e),H(this,"options"),H(this,"moved"),H(this,"reverse"),H(this,"xDirection"),H(this,"yDirection"),H(this,"keyIsPressed"),H(this,"mouse"),H(this,"underflowX"),H(this,"underflowY"),H(this,"last"),H(this,"current"),H(this,"windowEventHandlers",[]),this.options=Object.assign({},UY,n),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){const n=i=>{e.includes(i.code)&&(this.keyIsPressed=!0)},r=i=>{e.includes(i.code)&&(this.keyIsPressed=!1)};this.addWindowEventHandler("keyup",r),this.addWindowEventHandler("keydown",n)}addWindowEventHandler(e,n){window.addEventListener(e,n),this.windowEventHandlers.push({event:e,handler:n})}destroy(){this.windowEventHandlers.forEach(({event:e,handler:n})=>{window.removeEventListener(e,n)})}mouseButtons(e){!e||e==="all"?this.mouse=[!0,!0,!0]:this.mouse=[e.indexOf("left")!==-1,e.indexOf("middle")!==-1,e.indexOf("right")!==-1]}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="center"?(this.underflowX=0,this.underflowY=0):(e.includes("left")?this.underflowX=-1:e.includes("right")?this.underflowX=1:this.underflowX=0,e.includes("top")?this.underflowY=-1:e.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(e){const n=e.pointerType==="mouse",r=this.parent.input.count();return!!((r===1||r>1&&!this.parent.plugins.get("pinch",!0))&&(!n||this.mouse[e.button]))}checkKeyPress(e){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&e.data.pointerType==="touch"}down(e){return this.paused||!this.options.pressDrag?!1:this.checkButtons(e)&&this.checkKeyPress(e)?(this.last={x:e.global.x,y:e.global.y},this.current=e.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(e){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===e.data.pointerId){const n=e.global.x,r=e.global.y,i=this.parent.input.count();if(i===1||i>1&&!this.parent.plugins.get("pinch",!0)){const s=n-this.last.x,o=r-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(s)||this.yDirection&&this.parent.input.checkThreshold(o)){const a={x:n,y:r};return this.xDirection&&(this.parent.x+=(a.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(a.y-this.last.y)*this.options.factor),this.last=a,this.moved||this.parent.emit("drag-start",{event:e,screen:new ue(this.last.x,this.last.y),world:this.parent.toWorld(new ue(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(e){if(this.paused)return!1;const n=this.parent.input.touches;if(n.length===1){const r=n[0];return r.last&&(this.last={x:r.last.x,y:r.last.y},this.current=r.id),this.moved=!1,!0}else if(this.last&&this.moved){const r=new ue(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:e,screen:r,world:this.parent.toWorld(r),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(e){if(this.paused)return!1;if(this.options.wheel){const n=this.parent.plugins.get("wheel",!0);if(!n||!n.options.wheelZoom&&!e.ctrlKey){const r=e.deltaMode?this.options.lineHeight:1,i=[e.deltaX,e.deltaY],[s,o]=this.options.wheelSwapAxes?i.reverse():i;return this.xDirection&&(this.parent.x+=s*r*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=o*r*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||e.preventDefault(),this.parent.options.stopPropagation&&e.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const e=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,e.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,e.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,e.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,e.y=0)}}const jY={speed:0,acceleration:null,radius:null};class GY extends ir{constructor(e,n,r={}){super(e),H(this,"options"),H(this,"target"),H(this,"velocity"),this.target=n,this.options=Object.assign({},jY,r),this.velocity={x:0,y:0}}update(e){if(this.paused)return;const n=this.parent.center;let r=this.target.x,i=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-n.y,2)+Math.pow(this.target.x-n.x,2))>this.options.radius){const a=Math.atan2(this.target.y-n.y,this.target.x-n.x);r=this.target.x-Math.cos(a)*this.options.radius,i=this.target.y-Math.sin(a)*this.options.radius}else return;const s=r-n.x,o=i-n.y;if(s||o)if(this.options.speed)if(this.options.acceleration){const a=Math.atan2(i-n.y,r-n.x),l=Math.sqrt(Math.pow(s,2)+Math.pow(o,2));if(l){const c=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);l>c?this.velocity={x:Math.min(this.velocity.x+(this.options.acceleration*e,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration*e,this.options.speed))}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const d=Math.cos(a)*this.velocity.x,u=Math.sin(a)*this.velocity.y,h=Math.abs(d)>Math.abs(s)?r:n.x+d,f=Math.abs(u)>Math.abs(o)?i:n.y+u;this.parent.moveCenter(h,f),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const a=Math.atan2(i-n.y,r-n.x),l=Math.cos(a)*this.options.speed,c=Math.sin(a)*this.options.speed,d=Math.abs(l)>Math.abs(s)?r:n.x+l,u=Math.abs(c)>Math.abs(o)?i:n.y+c;this.parent.moveCenter(d,u),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(r,i),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const zY={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class WY extends ir{constructor(e,n={}){super(e),H(this,"options"),H(this,"reverse"),H(this,"radiusSquared"),H(this,"left"),H(this,"top"),H(this,"right"),H(this,"bottom"),H(this,"horizontal"),H(this,"vertical"),this.options=Object.assign({},zY,n),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const e=this.options.distance;e!==null?(this.left=e,this.top=e,this.right=this.parent.screenWidth-e,this.bottom=this.parent.screenHeight-e):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(e){if(this.paused||e.pointerType!=="mouse"&&e.pointerId!==1||!this.options.allowButtons&&e.buttons!==0)return!1;const n=e.global.x,r=e.global.y;if(this.radiusSquared){const i=this.parent.toScreen(this.parent.center);if(Math.pow(i.x-n,2)+Math.pow(i.y-r,2)>=this.radiusSquared){const s=Math.atan2(i.y-r,i.x-n);this.options.linear?(this.horizontal=Math.round(Math.cos(s))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(s))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(s)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(s)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&n<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&n>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&r<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&r>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const e=this.parent.plugins.get("decelerate",!0);this.horizontal&&e&&!this.options.noDecelerate&&e.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const e=this.parent.plugins.get("decelerate",!0);this.vertical&&e&&!this.options.noDecelerate&&e.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const e=this.parent.center;this.horizontal&&(e.x+=this.horizontal*this.options.speed),this.vertical&&(e.y+=this.vertical*this.options.speed),this.parent.moveCenter(e),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const VY={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class XY extends ir{constructor(e,n={}){super(e),H(this,"options"),H(this,"active",!1),H(this,"pinching",!1),H(this,"moved",!1),H(this,"lastCenter"),this.options=Object.assign({},VY,n)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(e){if(this.paused||!this.active)return!1;const n=e.global.x,r=e.global.y,i=this.parent.input.touches;if(i.length>=2){const s=i[0],o=i[1],a=s.last&&o.last?Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2)):null;if(s.id===e.pointerId?s.last={x:n,y:r,data:e}:o.id===e.pointerId&&(o.last={x:n,y:r,data:e}),a){let l;const c=new ue(s.last.x+(o.last.x-s.last.x)/2,s.last.y+(o.last.y-s.last.y)/2);this.options.center||(l=this.parent.toLocal(c));let d=Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2));d=d===0?d=1e-10:d;const u=(1-a/d)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=u),this.isAxisY()&&(this.parent.scale.y+=u),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:c});const h=this.parent.plugins.get("clamp-zoom",!0);if(h&&h.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const f=this.parent.toGlobal(l);this.parent.x+=(c.x-f.x)*this.options.factor,this.parent.y+=(c.y-f.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(c.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(c.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=c,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}}const YY={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class KY extends ir{constructor(e,n,r,i={}){super(e),H(this,"options"),H(this,"ease"),H(this,"x"),H(this,"y"),H(this,"percent"),H(this,"snapping"),H(this,"deltaX"),H(this,"deltaY"),H(this,"startX"),H(this,"startY"),this.options=Object.assign({},YY,i),this.ease=qp(i.ease,"easeInOutSine"),this.x=n,this.y=r,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const e=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-e.x,this.deltaY=this.y-e.y,this.startX=e.x,this.startY=e.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const e=this.parent.plugins.get("decelerate",!0);e&&(e.x||e.y)&&(e.percentChangeX=e.percentChangeY=this.options.friction)}return!1}update(e){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const n=this.snapping;n.time+=e;let r,i,s;const o=this.startX,a=this.startY,l=this.deltaX,c=this.deltaY;if(n.time>this.options.time)r=!0,i=o+l,s=a+c;else{const d=this.ease(n.time,0,1,this.options.time);i=o+l*d,s=a+c*d}this.options.topLeft?this.parent.moveCorner(i,s):this.parent.moveCenter(i,s),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),r&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const n=this.options.topLeft?this.parent.corner:this.parent.center;(n.x!==this.x||n.y!==this.y)&&this.snapStart()}}}const qY={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class ZY extends ir{constructor(e,n={}){super(e),H(this,"options"),H(this,"ease"),H(this,"xScale"),H(this,"yScale"),H(this,"xIndependent"),H(this,"yIndependent"),H(this,"snapping"),this.options=Object.assign({},qY,n),this.ease=qp(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=e.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=e.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(e.container.scale.x=this.xScale,e.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):n.forceStart&&this.createSnapping()}createSnapping(){const e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,r=this.parent.screenWidth/this.xScale,i=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:e,startY:n,deltaX:r-e,deltaY:i-n},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(e){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let n;if(!this.options.center&&!this.options.noMove&&(n=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const r=this.snapping;if(r.time+=e,r.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const s=this.snapping,o=this.ease(s.time,s.startX,s.deltaX,this.options.time),a=this.ease(s.time,s.startY,s.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/o,this.parent.scale.y=this.parent.screenHeight/a}const i=this.parent.plugins.get("clamp-zoom",!0);i&&i.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(n))}}resume(){this.snapping=null,super.resume()}}const QY={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class JY extends ir{constructor(e,n={}){super(e),H(this,"options"),H(this,"smoothing"),H(this,"smoothingCenter"),H(this,"smoothingCount"),H(this,"keyIsPressed"),this.options=Object.assign({},QY,n),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){window.addEventListener("keydown",n=>{e.includes(n.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",n=>{e.includes(n.code)&&(this.keyIsPressed=!1)})}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const e=this.smoothingCenter,n=this.smoothing;let r;this.options.center||(r=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x+=n.x),this.isAxisY()&&(this.parent.scale.y+=n.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const i=this.parent.plugins.get("clamp-zoom",!0);if(i&&i.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const s=this.parent.toGlobal(r);this.parent.x+=e.x-s.x,this.parent.y+=e.y-s.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(e){if(this.paused)return;const n=this.parent.input.getPointerPosition(e),r=-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/200,i=Math.pow(2,(1+this.options.percent)*r);let s;this.options.center||(s=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=n.x-a.x,this.parent.y+=n.y-a.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}wheel(e){if(this.paused||!this.checkKeyPress())return!1;if(e.ctrlKey&&this.options.trackpadPinch)this.pinch(e);else if(this.options.wheelZoom){const n=this.parent.input.getPointerPosition(e),r=(this.options.reverse?-1:1)*-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/500,i=Math.pow(2,(1+this.options.percent)*r);if(this.options.smooth){const s={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+s.x)*i-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+s.y)*i-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=n}else{let s;this.options.center||(s=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=n.x-a.x,this.parent.y+=n.y-a.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}return!this.parent.options.passiveWheel}}class eK{constructor(e){H(this,"viewport"),H(this,"clickedAvailable"),H(this,"isMouseDown"),H(this,"last"),H(this,"wheelFunction"),H(this,"touches"),this.viewport=e,this.touches=[],this.addListeners()}addListeners(){this.viewport.interactive=!0,this.viewport.forceHitArea||(this.viewport.hitArea=new pe(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=e=>this.handleWheel(e),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){this.viewport.options.events.domElement.removeEventListener("wheel",this.wheelFunction)}down(e){if(!(this.viewport.pause||!this.viewport.worldVisible)){if(e.pointerType==="mouse"?this.isMouseDown=!0:this.get(e.pointerId)||this.touches.push({id:e.pointerId,last:null}),this.count()===1){this.last=e.global.clone();const n=this.viewport.plugins.get("decelerate",!0),r=this.viewport.plugins.get("bounce",!0);(!n||!n.isActive())&&(!r||!r.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(e)&&this.viewport.options.stopPropagation&&e.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(e){return Math.abs(e)>=this.viewport.threshold}move(e){if(this.viewport.pause||!this.viewport.worldVisible)return;const n=this.viewport.plugins.move(e);if(this.clickedAvailable&&this.last){const r=e.global.x-this.last.x,i=e.global.y-this.last.y;(this.checkThreshold(r)||this.checkThreshold(i))&&(this.clickedAvailable=!1)}n&&this.viewport.options.stopPropagation&&e.stopPropagation()}up(e){if(this.viewport.pause||!this.viewport.worldVisible)return;e.pointerType==="mouse"&&(this.isMouseDown=!1),e.pointerType!=="mouse"&&this.remove(e.pointerId);const n=this.viewport.plugins.up(e);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:e,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),n&&this.viewport.options.stopPropagation&&e.stopPropagation()}getPointerPosition(e){const n=new ue;return this.viewport.options.events.mapPositionToPoint(n,e.clientX,e.clientY),n}handleWheel(e){if(this.viewport.pause||!this.viewport.worldVisible)return;const n=this.viewport.toLocal(this.getPointerPosition(e));this.viewport.left<=n.x&&n.x<=this.viewport.right&&this.viewport.top<=n.y&&n.y<=this.viewport.bottom&&this.viewport.plugins.wheel(e)&&!this.viewport.options.passiveWheel&&e.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(e){for(const n of this.touches)if(n.id===e)return n;return null}remove(e){for(let n=0;n<this.touches.length;n++)if(this.touches[n].id===e){this.touches.splice(n,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}const $l=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class tK{constructor(e){H(this,"plugins"),H(this,"list"),H(this,"viewport"),this.viewport=e,this.list=[],this.plugins={}}add(e,n,r=$l.length){const i=this.plugins[e];i&&i.destroy(),this.plugins[e]=n;const s=$l.indexOf(e);s!==-1&&$l.splice(s,1),$l.splice(r,0,e),this.sort()}get(e,n){var r;return n&&(r=this.plugins[e])!=null&&r.paused?null:this.plugins[e]}update(e){for(const n of this.list)n.update(e)}resize(){for(const e of this.list)e.resize()}reset(){for(const e of this.list)e.reset()}removeAll(){this.list.forEach(e=>{e.destroy()}),this.plugins={},this.sort()}remove(e){var n;this.plugins[e]&&((n=this.plugins[e])==null||n.destroy(),delete this.plugins[e],this.viewport.emit("plugin-remove",e),this.sort())}pause(e){var n;(n=this.plugins[e])==null||n.pause()}resume(e){var n;(n=this.plugins[e])==null||n.resume()}sort(){this.list=[];for(const e of $l)this.plugins[e]&&this.list.push(this.plugins[e])}down(e){let n=!1;for(const r of this.list)r.down(e)&&(n=!0);return n}move(e){let n=!1;for(const r of this.viewport.plugins.list)r.move(e)&&(n=!0);return n}up(e){let n=!1;for(const r of this.list)r.up(e)&&(n=!0);return n}wheel(e){let n=!1;for(const r of this.list)r.wheel(e)&&(n=!0);return n}}const nK={screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:Rt.shared,allowPreserveDragOutside:!1};class rK extends ye{constructor(e){super(),H(this,"moving"),H(this,"screenWidth"),H(this,"screenHeight"),H(this,"threshold"),H(this,"input"),H(this,"plugins"),H(this,"zooming"),H(this,"lastViewport"),H(this,"options"),H(this,"_dirty"),H(this,"_forceHitArea"),H(this,"_hitAreaDefault"),H(this,"_pause"),H(this,"tickerFunction"),H(this,"_worldWidth"),H(this,"_worldHeight"),H(this,"_disableOnContextMenu",n=>n.preventDefault()),this.options={...nK,...e},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new eK(this),this.plugins=new tK(this)}destroy(e){!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&this.options.events.domElement.removeEventListener("contextmenu",this._disableOnContextMenu),this.input.destroy(),super.destroy(e)}update(e){this.pause||(this.plugins.update(e),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new pe(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(e=window.innerWidth,n=window.innerHeight,r,i){this.screenWidth=e,this.screenHeight=n,typeof r<"u"&&(this._worldWidth=r),typeof i<"u"&&(this._worldHeight=i),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(e){this._worldWidth=e,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(e){this._worldHeight=e,this.plugins.resize()}getVisibleBounds(){return new pe(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(e,n){return arguments.length===2?this.toLocal(new ue(e,n)):this.toLocal(e)}toScreen(e,n){return arguments.length===2?this.toGlobal(new ue(e,n)):this.toGlobal(e)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new ue(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(e){this.moveCenter(e)}moveCenter(...e){let n,r;typeof e[0]=="number"?(n=e[0],r=e[1]):(n=e[0].x,r=e[0].y);const i=(this.worldScreenWidth/2-n)*this.scale.x,s=(this.worldScreenHeight/2-r)*this.scale.y;return(this.x!==i||this.y!==s)&&(this.position.set(i,s),this.plugins.reset(),this.dirty=!0),this}get corner(){return new ue(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(e){this.moveCorner(e)}moveCorner(...e){let n,r;return e.length===1?(n=-e[0].x*this.scale.x,r=-e[0].y*this.scale.y):(n=-e[0]*this.scale.x,r=-e[1]*this.scale.y),(n!==this.x||r!==this.y)&&(this.position.set(n,r),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(e){return this.screenWidth/e}findFitHeight(e){return this.screenHeight/e}findFit(e,n){const r=this.screenWidth/e,i=this.screenHeight/n;return Math.min(r,i)}findCover(e,n){const r=this.screenWidth/e,i=this.screenHeight/n;return Math.max(r,i)}fitWidth(e=this.worldWidth,n,r=!0,i){let s;n&&(s=this.center),this.scale.x=this.screenWidth/e,r&&(this.scale.y=this.scale.x);const o=this.plugins.get("clamp-zoom",!0);return!i&&o&&o.clamp(),n&&s&&this.moveCenter(s),this}fitHeight(e=this.worldHeight,n,r=!0,i){let s;n&&(s=this.center),this.scale.y=this.screenHeight/e,r&&(this.scale.x=this.scale.y);const o=this.plugins.get("clamp-zoom",!0);return!i&&o&&o.clamp(),n&&s&&this.moveCenter(s),this}fitWorld(e){let n;e&&(n=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),e&&n&&this.moveCenter(n),this}fit(e,n=this.worldWidth,r=this.worldHeight){let i;e&&(i=this.center),this.scale.x=this.screenWidth/n,this.scale.y=this.screenHeight/r,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const s=this.plugins.get("clamp-zoom",!0);return s&&s.clamp(),e&&i&&this.moveCenter(i),this}setZoom(e,n){let r;n&&(r=this.center),this.scale.set(e);const i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),n&&r&&this.moveCenter(r),this}zoomPercent(e,n){return this.setZoom(this.scale.x+this.scale.x*e,n)}zoom(e,n){return this.fitWidth(e+this.worldScreenWidth,n),this}get scaled(){return this.scale.x}set scaled(e){this.setZoom(e,!0)}snapZoom(e){return this.plugins.add("snap-zoom",new ZY(this,e)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new ue(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(e){this.x=-e*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(e){this.x=-e*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(e){this.y=-e*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(e){this.y=-e*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(e){this._dirty=e}get forceHitArea(){return this._forceHitArea}set forceHitArea(e){e?(this._forceHitArea=e,this.hitArea=e):(this._forceHitArea=null,this.hitArea=new pe(0,0,this.worldWidth,this.worldHeight))}drag(e){return this.plugins.add("drag",new HY(this,e)),this}clamp(e){return this.plugins.add("clamp",new NY(this,e)),this}decelerate(e){return this.plugins.add("decelerate",new $Y(this,e)),this}bounce(e){return this.plugins.add("bounce",new DY(this,e)),this}pinch(e){return this.plugins.add("pinch",new XY(this,e)),this}snap(e,n,r){return this.plugins.add("snap",new KY(this,e,n,r)),this}follow(e,n){return this.plugins.add("follow",new GY(this,e,n)),this}wheel(e){return this.plugins.add("wheel",new JY(this,e)),this}animate(e){return this.plugins.add("animate",new kY(this,e)),this}clampZoom(e){return this.plugins.add("clamp-zoom",new BY(this,e)),this}mouseEdges(e){return this.plugins.add("mouse-edges",new WY(this,e)),this}get pause(){return!!this._pause}set pause(e){this._pause=e,this.lastViewport=null,this.moving=!1,this.zooming=!1,e&&this.input.pause()}ensureVisible(e,n,r,i,s){s&&(r>this.worldScreenWidth||i>this.worldScreenHeight)&&(this.fit(!0,r,i),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let o=!1;e<this.left?(this.left=e,o=!0):e+r>this.right&&(this.right=e+r,o=!0),n<this.top?(this.top=n,o=!0):n+i>this.bottom&&(this.bottom=n+i,o=!0),o&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}class d2{app;viewport;background;hud;debugPointer=new Mr;debugCoords=new Mr;debugCollision=new Xt;debug=new Xt;constructor({background:e,containers:n,hud:r,enableMouseDragging:i}){this.app=new rb({antialias:!1,resolution:1,backgroundColor:ZX,width:YX,height:KX}),this.background=e,this.app.stage.addChild(e),this.viewport=new rK({events:this.app.renderer.events}),this.app.stage.addChild(this.viewport),this.hud=r,r&&this.app.stage.addChild(r),n.length&&this.app.stage.addChild(...n),this.viewport.sortableChildren=!0,i&&this.viewport.drag().pinch().wheel().decelerate()}addEntity(e){const n=e.getContainer(),r=Array.isArray(n)?n:[n];this.viewport.addChild(...r)}removeEntity(e){const n=e.getContainer(),r=Array.isArray(n)?n:[n];this.viewport.removeChild(...r)}positionRelativeGameObjects(e,n){const r=e/6,i=n/3+125;this.background.tilePosition.set(-r,-i)}centerCamera(e,n){const r=e-this.app.screen.width/2,i=n-(this.app.screen.height-(this.hud?.height??0))/2;this.viewport.moveCorner(r,i),this.positionRelativeGameObjects(e,n)}renderDebug(e){this.debugCollision.clear(),this.viewport.sortChildren();for(const n of e){this.debugCollision.lineStyle({color:iK[n.ent_type.type],width:1}),n.ent_type.type==="Runway"&&!n.pixels&&this.debugCollision.lineStyle({color:"magenta",width:1});const{x:r,y:i,width:s,height:o}=n.bounding_box;if(this.debugCollision.drawRect(r,i,s,o),n.pixels)for(const a of n.pixels){const l=r+a.x,c=i+a.y;this.debugCollision.drawRect(l,c,1,1)}}this.debugCollision.endFill()}}const iK={WorldInfo:"gray",Man:"magenta",Plane:"red",Player:"gray",BackgroundItem:"",Ground:"orange",Coast:"peru",Runway:"purple",Water:"blue",Bunker:"brown",Bomb:"black",Explosion:"lime",Hill:"green",Bullet:"pink"},f2={Air:".",GroundNormal:"#",GroundDesert:"_",WaterNormalLeft:"/",WaterNormalRight:"\\",WaterDesertLeft:"(",WaterDesertRight:")",HillNormal:"H",HillDesert:"S",CoastNormalRight:">",CoastNormalLeft:"<",CoastDesertLeft:"[",CoastDesertRight:"]",RunwayCentralsLeft:"L",RunwayCentralsRight:"R",RunwayAlliesLeft:"l",RunwayAlliesRight:"r",PalmTreeLeft:"p",PalmTreeRight:"P",ControlTowerLeft:"t",ControlTowerRight:"T",DesertTowerLeft:"d",DesertTowerRight:"D",FlagAllies:"f",FlagCentrals:"F",BunkerCentrals:"I",BunkerAllies:"i"},sK=Object.values(f2);class tc{renderClient;background=new dl(X["sky3b.jpg"]);entities=l2(a2);engine=Uc.new();constructor(){const e=X["sky3b.jpg"];this.background.texture=e,this.background.width=e.width,this.background.height=e.height,this.background.position.set(0,-250),this.renderClient=new d2({background:this.background,containers:[],enableMouseDragging:!0,hud:null}),this.renderClient.centerCamera(0,0)}render(e){wf(this.entities,{onRemove:this.renderClient.removeEntity.bind(this.renderClient)}),this.engine.load_level(e);const n=JSON.parse(this.engine.game_events_from_binary(this.engine.flush_changed_state()));for(const{type:r,data:i}of n)if(r==="EntityChanges")for(const{id:s,update:o,ent_type:a}of i)switch(o.type){case"Properties":{u2(this.entities,s,o.data,{onAdd:this.renderClient.addEntity.bind(this.renderClient)});break}case"Deleted":{c2(this.entities,s,a,{onRemove:this.renderClient.removeEntity.bind(this.renderClient)});break}}}init(e){e?.appendChild(this.renderClient.app.view),this.engine.init()}destroy(){wf(this.entities,{onRemove:this.renderClient.removeEntity.bind(this.renderClient)}),this.renderClient.app.destroy(!0,{children:!0})}static sanitizeWorldString(e){return e.split(`
`).map(n=>{if(!n.startsWith("layer"))return n.trim();const[r,i]=n.split("="),s=i.split("").filter(o=>sK.includes(o)).join("");return r.trim()+"="+s.trim()}).join(`
`)}static initialWorldString(e){return`your_level
`.concat(ab.classic.split(`
`).slice(1,-1).concat(`designer=${e.username||"guest"}`).join(`
`))}static worldDownloadFileName(e){const n=e.split(`
`),r=n[0].trim();return`${n.at(-1)?.split("=")?.[1]||"guest"}-${r}.txt`}}const oK=()=>{const t=rr();return x.jsx(op,{variant:"light",color:"yellow",title:t.formatMessage({id:"tOuqsq",defaultMessage:[{type:0,value:"Level Editor Notice"}]}),icon:x.jsx(ER,{}),children:x.jsx("div",{children:x.jsx(Ge,{id:"fhbvwH",defaultMessage:[{type:0,value:"The level editor system is currently highly experimental, lacking many relevant features, and still in active development. You may experience problems until the replay feature is in a stable state."}]})})})};var oa=(t=>(t[t.Passive=0]="Passive",t[t.MessagingGlobal=1]="MessagingGlobal",t[t.MessagingTeam=2]="MessagingTeam",t))(oa||{});function aK({messages:t,onSendMessage:e,myTeam:n}){const r=rr(),[i,s]=b.useState(""),{globalState:o,sendChatMessage:a,setGlobalState:l}=Nr(),{chatState:c}=o,d=b.useRef(null),[u,h]=b.useState(!1);b.useEffect(()=>{c===0?s(""):(d.current&&d.current.focus(),a.current=()=>{i.trim()&&(e(i,c===1),l(y=>({...y,chatState:0})))})},[c,i]);function f(){return o.chatState!=0?"chat active":"chat passive"}let p=t.filter(y=>!y.private||y.team===n);p=u?p:p.slice(-5);const m=o.chatState===0?p.filter(y=>y.isNewMessage):p;return x.jsx("div",{className:f(),children:x.jsxs(ma,{direction:"column",h:"100%",children:[o.chatState!==0&&x.jsxs(W,{className:"new-message",children:[x.jsx(Fa,{ref:d,onChange:y=>s(y.target.value),value:i,placeholder:r.formatMessage({id:"xS6Oh+",defaultMessage:[{type:0,value:"Send a message..."}]})}),x.jsxs(Wt,{children:[x.jsx("div",{children:x.jsxs("span",{children:[x.jsx(pu,{children:"Esc"})," ",r.formatMessage({id:"PEq6j5",defaultMessage:[{type:0,value:"to close chat"}]})]})}),x.jsx(vp,{label:r.formatMessage({id:"r1oUWJ",defaultMessage:[{type:0,value:"Show All Messages"}]}),checked:u,onClick:y=>h(y.currentTarget.checked)})]})]}),x.jsx(W,{mt:"auto",className:"all-messages",children:m.map(y=>{const g=(y.private?"private":"global")+" message",_=y.sender_name+": "+y.message;return x.jsx("div",{className:g,children:_.trim()},y.guid)})})]})})}function Yc(){return crypto.randomUUID()}function lK(t,e){throw new Error(`Expected to never get here, got value: ${t}`)}function qs(t){const e=Math.floor(t*10/1e3),n=Math.floor(e/3600),r=Math.floor(e%3600/60),i=e%60;return`${String(n).padStart(2,"0")}:${String(r).padStart(2,"0")}:${String(i).padStart(2,"0")}`}const cK=(t,e,n)=>{const r=t[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((i,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},uK=t=>cK(Object.assign({"../compiled-lang/en.json":()=>Zm(()=>import("./en-_wyIuW_4.js"),[]),"../compiled-lang/es.json":()=>Zm(()=>import("./es-WVgsAKFQ.js"),[]),"../compiled-lang/fi.json":()=>Zm(()=>import("./fi-Dll1R1SC.js"),[])}),`../compiled-lang/${t}.json`,3).then(e=>e.default),hK=["en","fi","es"],h0="en";function dK(t){return hK.includes(t)}function p2(){return navigator.languages.find(dK)??h0}const fK={en:"English",fi:"Finnish (Suomi)",es:"Spanish (Español)"},pK=Object.entries(fK).map(([t,e])=>({value:t,label:e})),mK=({children:t})=>{const e=Nr(),[n,r]=b.useState(null),i=e.settings.locale??h0;return b.useEffect(()=>{uK(i).then(r)},[e.settings.locale]),n?x.jsx(TH,{onError:()=>{},defaultLocale:h0,locale:i,messages:n,children:t}):x.jsx("div",{children:"Loading..."})};function d0(t){return t.length>=3&&t.length<=20}function gK(t){return t.length<=5}const m2="dogfightSettings_v3",g2=b.createContext(null);function Nr(){const t=b.useContext(g2);if(t===null)throw new Error("SettingsContext not provided in useSettingsContext");return t}const f0=[{key:"ArrowLeft",action:"left"},{key:"ArrowRight",action:"right"},{key:"ArrowUp",action:"up"},{key:"ArrowDown",action:"down"},{key:" ",action:"space"},{key:"Shift",action:"shift"},{key:".",action:"shift"},{key:"Control",action:"ctrl"},{key:"-",action:"ctrl"},{key:"Enter",action:"enter"},{key:"y",action:"chatAll"},{key:"u",action:"chatTeam"},{key:"tab",action:"viewScoreboard"},{key:"m",action:"toggleMute"}],p0={controls:f0,audioSettings:{muted:!1},locale:p2()},yK=t=>({...p0,...t}),vK=()=>{const t=localStorage.getItem(m2);if(!t)return p0;try{const e=JSON.parse(t);return yK(e)}catch{return p0}},_K=()=>({viewingScoreboard:!1,chatState:oa.Passive});function xK({children:t}){const[e,n]=b.useState(vK),[r,i]=b.useState(_K),s=b.useRef(null);function o(){return e.username?.trim()&&d0(e.username.trim())?e.username.trim():"~Guest#"+Yc().substring(0,4)}function a(){return e.clan?.trim()&&d0(e.clan.trim())?e.clan.trim():""}return b.useEffect(()=>{localStorage.setItem(m2,JSON.stringify(e)),lo.setIsMuted(e.audioSettings.muted)},[e]),x.jsx(g2.Provider,{value:{settings:e,setSettings:n,sendChatMessage:s,globalState:r,setGlobalState:i,getUsername:o,getClan:a},children:t})}const bK="_editor_1y6my_1",wK="_code_1y6my_6",SK="_piece_1y6my_18",Qg={editor:bK,code:wK,piece:SK},EK=t=>{const e=new Blob([t],{type:"text/plain"}),n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=tc.worldDownloadFileName(t),r.click(),URL.revokeObjectURL(n)},TK=()=>{const{settings:t}=Nr(),e=b.useRef(null),n=b.useMemo(()=>new tc,[]),[r,i]=b.useState(tc.initialWorldString(t)),[s,o]=b.useState(tc.initialWorldString(t)),a=b.useRef(null),l=c=>{const d=c.target.value;o(d),a.current&&clearTimeout(a.current),a.current=window.setTimeout(()=>{const u=tc.sanitizeWorldString(d);i(u)},300)};return b.useEffect(()=>{e.current&&n.init(e.current)},[e]),b.useEffect(()=>{r&&n.render(r)},[r]),b.useEffect(()=>()=>{a.current&&clearTimeout(a.current),n.destroy()},[]),x.jsxs(vt,{align:"center",children:[x.jsx(oK,{}),x.jsxs(ma,{className:Qg.editor,direction:"column",wrap:"wrap",gap:"md",align:"center",children:[x.jsxs(ma,{wrap:"wrap",gap:"lg",justify:"center",children:[x.jsxs(vt,{gap:"sm",children:[x.jsx("textarea",{value:s,onChange:l,className:Qg.code,rows:10,cols:70}),x.jsx(jt,{onClick:()=>EK(r),children:"Save as file"})]}),x.jsx("div",{ref:e})]}),x.jsxs(vt,{align:"start",children:[x.jsx($a,{order:3,children:x.jsx(Ge,{id:"HUQWTK",defaultMessage:[{type:0,value:"Supported pieces"}]})}),x.jsx(ma,{gap:"xs",wrap:"wrap",justify:"start",children:Object.entries(f2).map(([c,d])=>x.jsxs("pre",{className:Qg.piece,children:[x.jsx(pu,{children:d})," ",c]},d))})]})]})]})};class CK{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const n of this._parts)e.push(n);return PK(e).buffer}}function PK(t){let e=0;for(const i of t)e+=i.byteLength;const n=new Uint8Array(e);let r=0;for(const i of t){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(s,r),r+=i.byteLength}return n}function y2(t){return new AK(t).unpack()}function v2(t){const e=new RK,n=e.pack(t);return n instanceof Promise?n.then(()=>e.getBuffer()):e.getBuffer()}class AK{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let n;if((n=e^160)<=15)return this.unpack_raw(n);if((n=e^176)<=15)return this.unpack_string(n);if((n=e^144)<=15)return this.unpack_array(n);if((n=e^128)<=15)return this.unpack_map(n);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),n=(e[0]&255)*256+(e[1]&255);return this.index+=2,n}unpack_uint32(){const e=this.read(4),n=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,n}unpack_uint64(){const e=this.read(8),n=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,n}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,n}unpack_string(e){const n=this.read(e);let r=0,i="",s,o;for(;r<e;)s=n[r],s<160?(o=s,r++):(s^192)<32?(o=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(o=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(o=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(o);return this.index+=e,i}unpack_array(e){const n=new Array(e);for(let r=0;r<e;r++)n[r]=this.unpack();return n}unpack_map(e){const n={};for(let r=0;r<e;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const e=this.unpack_uint32(),n=e>>31,r=(e>>23&255)-127,i=e&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),n=this.unpack_uint32(),r=e>>31,i=(e>>20&2047)-1023,o=(e&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*o}read(e){const n=this.index;if(n+e<=this.length)return this.dataView.subarray(n,n+e);throw new Error("BinaryPackFailure: read index out of range")}}class RK{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const n=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const n=e.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const n=this._textEncoder.encode(e),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(e){const n=e.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const s=this.pack(e[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let n=0;e<0&&(n=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),i=e/2**r-1,s=Math.floor(i*2**52),o=2**32,a=n<<31|r+1023<<20|s/o&1048575,l=s%o;this._bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(l)}pack_object(e){const n=Object.keys(e),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<n.length){const o=n[s];if(e.hasOwnProperty(o)){this.pack(o);const a=this.pack(e[o]);if(a instanceof Promise)return a.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const n=e&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(e){const n=e/4294967296,r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const n=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new CK,this._textEncoder=new TextEncoder}}let _2=!0,x2=!0;function hd(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function bo(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return i.apply(this,arguments);const l=c=>{const d=n(c);d&&(a.handleEvent?a.handleEvent(d):a(d))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,l),i.apply(this,[o,l])};const s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);const l=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,l])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function IK(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(_2=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function kK(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(x2=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function b2(){if(typeof window=="object"){if(_2)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function cb(t,e){x2&&console.warn(t+" is deprecated, please use "+e+" instead.")}function MK(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=hd(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=hd(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=hd(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function BE(t){return Object.prototype.toString.call(t)==="[object Object]"}function w2(t){return BE(t)?Object.keys(t).reduce(function(e,n){const r=BE(t[n]),i=r?w2(t[n]):t[n],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,{[n]:i})},{}):t}function m0(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?m0(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{m0(t,t.get(i),n)})}))}function FE(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const s=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{t.forEach(a=>{a.type===r&&a.trackId===o.id&&m0(t,a,i)})}),i}const $E=b2;function S2(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const l={};return Object.keys(a).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const d=typeof a[c]=="object"?a[c]:{ideal:a[c]};d.exact!==void 0&&typeof d.exact=="number"&&(d.min=d.max=d.exact);const u=function(h,f){return h?h+f.charAt(0).toUpperCase()+f.slice(1):f==="deviceId"?"sourceId":f};if(d.ideal!==void 0){l.optional=l.optional||[];let h={};typeof d.ideal=="number"?(h[u("min",c)]=d.ideal,l.optional.push(h),h={},h[u("max",c)]=d.ideal,l.optional.push(h)):(h[u("",c)]=d.ideal,l.optional.push(h))}d.exact!==void 0&&typeof d.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[u("",c)]=d.exact):["min","max"].forEach(h=>{d[h]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[u(h,c)]=d[h])})}),a.advanced&&(l.optional=(l.optional||[]).concat(a.advanced)),l},i=function(a,l){if(e.version>=61)return l(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const c=function(d,u,h){u in d&&!(h in d)&&(d[h]=d[u],delete d[u])};a=JSON.parse(JSON.stringify(a)),c(a.audio,"autoGainControl","googAutoGainControl"),c(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let c=a.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const d=e.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!d)){delete a.video.facingMode;let u;if(c.exact==="environment"||c.ideal==="environment"?u=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(u=["front"]),u)return n.mediaDevices.enumerateDevices().then(h=>{h=h.filter(p=>p.kind==="videoinput");let f=h.find(p=>u.some(m=>p.label.toLowerCase().includes(m)));return!f&&h.length&&u.includes("back")&&(f=h[h.length-1]),f&&(a.video.deviceId=c.exact?{exact:f.deviceId}:{ideal:f.deviceId}),a.video=r(a.video),$E("chrome: "+JSON.stringify(a)),l(a)})}a.video=r(a.video)}return $E("chrome: "+JSON.stringify(a)),l(a)},s=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,l,c){i(a,d=>{n.webkitGetUserMedia(d,l,u=>{c&&c(s(u))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(l){return i(l,c=>a(c).then(d=>{if(c.audio&&!d.getAudioTracks().length||c.video&&!d.getVideoTracks().length)throw d.getTracks().forEach(u=>{u.stop()}),new DOMException("","NotFoundError");return d},d=>Promise.reject(s(d))))}}}function E2(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function T2(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else bo(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function C2(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,l){let c=i.apply(this,arguments);return c||(c=e(this,a),this._senders.push(c)),c};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const l=this._senders.indexOf(a);l!==-1&&this._senders.splice(l,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(l=>l.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function P2(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>FE(o,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),bo(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>FE(s,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function A2(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(l)===-1&&this._shimmedLocalStreams[a.id].push(l):this._shimmedLocalStreams[a.id]=[a,l],l};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(c=>{if(this.getSenders().find(u=>u.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const l=this.getSenders().filter(c=>a.indexOf(c)===-1);this._shimmedLocalStreams[o.id]=[o].concat(l)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const l=this._shimmedLocalStreams[a].indexOf(o);l!==-1&&this._shimmedLocalStreams[a].splice(l,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function R2(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return A2(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const d=n.apply(this);return this._reverseStreams=this._reverseStreams||{},d.map(u=>this._reverseStreams[u.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(d){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},d.getTracks().forEach(u=>{if(this.getSenders().find(f=>f.track===u))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[d.id]){const u=new t.MediaStream(d.getTracks());this._streams[d.id]=u,this._reverseStreams[u.id]=d,d=u}r.apply(this,[d])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(d){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[d.id]||d]),delete this._reverseStreams[this._streams[d.id]?this._streams[d.id].id:d.id],delete this._streams[d.id]},t.RTCPeerConnection.prototype.addTrack=function(d,u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const h=[].slice.call(arguments,1);if(h.length!==1||!h[0].getTracks().find(m=>m===d))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===d))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[u.id];if(p)p.addTrack(d),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new t.MediaStream([d]);this._streams[u.id]=m,this._reverseStreams[m.id]=u,this.addStream(m)}return this.getSenders().find(m=>m.track===d)};function s(c,d){let u=d.sdp;return Object.keys(c._reverseStreams||[]).forEach(h=>{const f=c._reverseStreams[h],p=c._streams[f.id];u=u.replace(new RegExp(p.id,"g"),f.id)}),new RTCSessionDescription({type:d.type,sdp:u})}function o(c,d){let u=d.sdp;return Object.keys(c._reverseStreams||[]).forEach(h=>{const f=c._reverseStreams[h],p=c._streams[f.id];u=u.replace(new RegExp(f.id,"g"),p.id)}),new RTCSessionDescription({type:d.type,sdp:u})}["createOffer","createAnswer"].forEach(function(c){const d=t.RTCPeerConnection.prototype[c],u={[c](){const h=arguments;return arguments.length&&typeof arguments[0]=="function"?d.apply(this,[p=>{const m=s(this,p);h[0].apply(null,[m])},p=>{h[1]&&h[1].apply(null,p)},arguments[2]]):d.apply(this,arguments).then(p=>s(this,p))}};t.RTCPeerConnection.prototype[c]=u[c]});const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const c=l.get.apply(this);return c.type===""?c:s(this,c)}}),t.RTCPeerConnection.prototype.removeTrack=function(d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!d._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(d._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let h;Object.keys(this._streams).forEach(f=>{this._streams[f].getTracks().find(m=>d.track===m)&&(h=this._streams[f])}),h&&(h.getTracks().length===1?this.removeStream(this._reverseStreams[h.id]):h.removeTrack(d.track),this.dispatchEvent(new Event("negotiationneeded")))}}function g0(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function I2(t,e){bo(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const UE=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:I2,shimAddTrackRemoveTrack:R2,shimAddTrackRemoveTrackWithNative:A2,shimGetSendersWithDtmf:C2,shimGetUserMedia:S2,shimMediaStream:E2,shimOnTrack:T2,shimPeerConnection:g0,shimSenderReceiverGetStats:P2},Symbol.toStringTag,{value:"Module"}));function k2(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){cb("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(o,a,l){a in o&&!(l in o)&&(o[l]=o[a],delete o[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function DK(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function M2(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function y0(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=t.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=o[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return r.apply(this,[s||null]).then(l=>{if(e.version<53&&!o)try{l.forEach(c=>{c.type=n[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;l.forEach((d,u)=>{l.set(u,Object.assign({},d,{type:n[d.type]||d.type}))})}return l}).then(o,a)}}function D2(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function O2(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),bo(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function N2(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){cb("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function L2(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function B2(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function F2(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function $2(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function U2(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const HE=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:B2,shimCreateAnswer:U2,shimCreateOffer:$2,shimGetDisplayMedia:DK,shimGetParameters:F2,shimGetUserMedia:k2,shimOnTrack:M2,shimPeerConnection:y0,shimRTCDataChannel:L2,shimReceiverGetStats:O2,shimRemoveStream:N2,shimSenderGetStats:D2},Symbol.toStringTag,{value:"Module"}));function H2(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function j2(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function G2(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(c,d){const u=arguments.length>=2?arguments[2]:arguments[0],h=n.apply(this,[u]);return d?(h.then(c,d),Promise.resolve()):h},e.createAnswer=function(c,d){const u=arguments.length>=2?arguments[2]:arguments[0],h=r.apply(this,[u]);return d?(h.then(c,d),Promise.resolve()):h};let a=function(l,c,d){const u=i.apply(this,[l]);return d?(u.then(c,d),Promise.resolve()):u};e.setLocalDescription=a,a=function(l,c,d){const u=s.apply(this,[l]);return d?(u.then(c,d),Promise.resolve()):u},e.setRemoteDescription=a,a=function(l,c,d){const u=o.apply(this,[l]);return d?(u.then(c,d),Promise.resolve()):u},e.addIceCandidate=a}function z2(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(W2(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}.bind(e))}function W2(t){return t&&t.video!==void 0?Object.assign({},t,{video:w2(t.video)}):t}function V2(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(cb("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function X2(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Y2(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function K2(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const jE=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:K2,shimCallbacksAPI:G2,shimConstraints:W2,shimCreateOfferLegacy:Y2,shimGetUserMedia:z2,shimLocalStreamsAPI:H2,shimRTCIceServerUrls:V2,shimRemoteStreamsAPI:j2,shimTrackEventTransceiver:X2},Symbol.toStringTag,{value:"Module"}));var q2={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?s.push(o+"="+n.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],s=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(n)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const l=s[a],c=e.matchPrefix(n,"a=rtpmap:"+l+" ")[0];if(c){const d=e.parseRtpMap(c),u=e.matchPrefix(n,"a=fmtp:"+l+" ");switch(d.parameters=u.length?e.parseFmtp(u[0]):{},d.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+l+" ").map(e.parseRtcpFb),r.codecs.push(d),d.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(d.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const o=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{o.forEach(l=>{a.rtcpFeedback.find(d=>d.type===l.type&&d.parameter===l.parameter)||a.rtcpFeedback.push(l)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=e.writeRtpMap(o),i+=e.writeFmtp(o),i+=e.writeRtcpFb(o)});let s=0;return r.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=e.writeExtmap(o)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(h=>e.parseSsrcMedia(h)).filter(h=>h.attribute==="cname"),l=a.length>0&&a[0].ssrc;let c;const d=e.matchPrefix(n,"a=ssrc-group:FID").map(h=>h.substring(17).split(" ").map(p=>parseInt(p,10)));d.length>0&&d[0].length>1&&d[0][0]===l&&(c=d[0][1]),i.codecs.forEach(h=>{if(h.name.toUpperCase()==="RTX"&&h.parameters.apt){let f={ssrc:l,codecPayloadType:parseInt(h.parameters.apt,10)};l&&c&&(f.rtx={ssrc:c}),r.push(f),s&&(f=JSON.parse(JSON.stringify(f)),f.fec={ssrc:l,mechanism:o?"red+ulpfec":"red"},r.push(f))}}),r.length===0&&l&&r.push({ssrc:l});let u=e.matchPrefix(n,"b=");return u.length&&(u[0].indexOf("b=TIAS:")===0?u=parseInt(u[0].substring(7),10):u[0].indexOf("b=AS:")===0?u=parseInt(u[0].substring(5),10)*1e3*.95-50*40*8:u=void 0,r.forEach(h=>{h.maxBitrate=u})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const o=e.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=e.matchPrefix(n,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const o=e.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const a=e.matchPrefix(n,"a=sctpmap:");if(a.length>0){const l=a[0].substring(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:s}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let s;const o=r!==void 0?r:2;return n?s=n:s=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(q2);var Z2=q2.exports;const Ta=Va(Z2),OK=KE({__proto__:null,default:Ta},[Z2]);function dd(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),s=Ta.parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,bo(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function v0(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||bo(t,"icecandidate",e=>{if(e.candidate){const n=Ta.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function fd(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const l=Ta.splitSections(a.sdp);return l.shift(),l.some(c=>{const d=Ta.parseMLine(c);return d&&d.kind==="application"&&d.protocol.indexOf("SCTP")!==-1})},r=function(a){const l=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const c=parseInt(l[1],10);return c!==c?-1:c},i=function(a){let l=65536;return e.browser==="firefox"&&(e.version<57?a===-1?l=16384:l=2147483637:e.version<60?l=e.version===57?65535:65536:l=2147483637),l},s=function(a,l){let c=65536;e.browser==="firefox"&&e.version===57&&(c=65535);const d=Ta.matchPrefix(a.sdp,"a=max-message-size:");return d.length>0?c=parseInt(d[0].substring(19),10):e.browser==="firefox"&&l!==-1&&(c=2147483637),c},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const l=r(arguments[0]),c=i(l),d=s(arguments[0],l);let u;c===0&&d===0?u=Number.POSITIVE_INFINITY:c===0||d===0?u=Math.max(c,d):u=Math.min(c,d);const h={};Object.defineProperty(h,"maxMessageSize",{get(){return u}}),this._sctp=h}return o.apply(this,arguments)}}function pd(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const a=arguments[0],l=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&l>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},bo(t,"datachannel",r=>(e(r.channel,r.target),r))}function _0(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function x0(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function md(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function gd(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}const NK=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:x0,shimAddIceCandidateNullOrEmpty:md,shimConnectionState:_0,shimMaxMessageSize:fd,shimParameterlessSetLocalDescription:gd,shimRTCIceCandidate:dd,shimRTCIceCandidateRelayProtocol:v0,shimSendThrowTypeError:pd},Symbol.toStringTag,{value:"Module"}));function LK({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=b2,r=MK(t),i={browserDetails:r,commonShim:NK,extractVersion:hd,disableLog:IK,disableWarnings:kK,sdp:OK};switch(r.browser){case"chrome":if(!UE||!g0||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=UE,md(t,r),gd(t),S2(t,r),E2(t),g0(t,r),T2(t),R2(t,r),C2(t),P2(t),I2(t,r),dd(t),v0(t),_0(t),fd(t,r),pd(t),x0(t,r);break;case"firefox":if(!HE||!y0||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=HE,md(t,r),gd(t),k2(t,r),y0(t,r),M2(t),N2(t),D2(t),O2(t),L2(t),B2(t),F2(t),$2(t),U2(t),dd(t),_0(t),fd(t,r),pd(t);break;case"safari":if(!jE||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=jE,md(t,r),gd(t),V2(t),Y2(t),G2(t),H2(t),j2(t),X2(t),z2(t),K2(t),dd(t),v0(t),fd(t,r),pd(t),x0(t,r);break;default:n("Unsupported browser!");break}return i}const GE=LK({window:typeof window>"u"?void 0:window});function wo(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}class Q2{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const n=[],r=e.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,o=0;for(;o<r;){const a=Math.min(r,o+this.chunkedMTU),l=e.slice(o,a),c={__peerData:this._dataCount,n:s,data:l,total:i};n.push(c),o=a,s++}return this._dataCount++,n}}}function BK(t){let e=0;for(const i of t)e+=i.byteLength;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.byteLength;return n}const Jg=GE.default||GE,Ul=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(t)?t==="chrome"?e>=this.minChromeVersion:t==="firefox"?e>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return Jg.browserDetails.browser}getVersion(){return Jg.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=Jg.browserDetails.version||0;if(t==="chrome"&&e<this.minChromeVersion)return!1;if(t==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},FK=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),J2=()=>Math.random().toString(36).slice(2),zE={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class $K extends Q2{noop(){}blobToArrayBuffer(e,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=zE,this.browser=Ul.getBrowser(),this.browserVersion=Ul.getVersion(),this.pack=v2,this.unpack=y2,this.supports=function(){const n={browser:Ul.isBrowserSupported(),webRTC:Ul.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(zE),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!Ul.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n}(),this.validateId=FK,this.randomToken=J2}}const cn=new $K,UK="PeerJS: ";var WE;(function(t){t[t.Disabled=0]="Disabled",t[t.Errors=1]="Errors",t[t.Warnings=2]="Warnings",t[t.All=3]="All"})(WE||(WE={}));class HK{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...n){const r=[UK,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var J=new HK,ub={},jK=Object.prototype.hasOwnProperty,tn="~";function Kc(){}Object.create&&(Kc.prototype=Object.create(null),new Kc().__proto__||(tn=!1));function GK(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function eM(t,e,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new GK(n,r||t,i),o=tn?tn+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function yd(t,e){--t._eventsCount===0?t._events=new Kc:delete t._events[e]}function Kt(){this._events=new Kc,this._eventsCount=0}Kt.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)jK.call(n,r)&&e.push(tn?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};Kt.prototype.listeners=function(e){var n=tn?tn+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o};Kt.prototype.listenerCount=function(e){var n=tn?tn+e:e,r=this._events[n];return r?r.fn?1:r.length:0};Kt.prototype.emit=function(e,n,r,i,s,o){var a=tn?tn+e:e;if(!this._events[a])return!1;var l=this._events[a],c=arguments.length,d,u;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,n),!0;case 3:return l.fn.call(l.context,n,r),!0;case 4:return l.fn.call(l.context,n,r,i),!0;case 5:return l.fn.call(l.context,n,r,i,s),!0;case 6:return l.fn.call(l.context,n,r,i,s,o),!0}for(u=1,d=new Array(c-1);u<c;u++)d[u-1]=arguments[u];l.fn.apply(l.context,d)}else{var h=l.length,f;for(u=0;u<h;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),c){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,n);break;case 3:l[u].fn.call(l[u].context,n,r);break;case 4:l[u].fn.call(l[u].context,n,r,i);break;default:if(!d)for(f=1,d=new Array(c-1);f<c;f++)d[f-1]=arguments[f];l[u].fn.apply(l[u].context,d)}}return!0};Kt.prototype.on=function(e,n,r){return eM(this,e,n,r,!1)};Kt.prototype.once=function(e,n,r){return eM(this,e,n,r,!0)};Kt.prototype.removeListener=function(e,n,r,i){var s=tn?tn+e:e;if(!this._events[s])return this;if(!n)return yd(this,s),this;var o=this._events[s];if(o.fn)o.fn===n&&(!i||o.once)&&(!r||o.context===r)&&yd(this,s);else{for(var a=0,l=[],c=o.length;a<c;a++)(o[a].fn!==n||i&&!o[a].once||r&&o[a].context!==r)&&l.push(o[a]);l.length?this._events[s]=l.length===1?l[0]:l:yd(this,s)}return this};Kt.prototype.removeAllListeners=function(e){var n;return e?(n=tn?tn+e:e,this._events[n]&&yd(this,n)):(this._events=new Kc,this._eventsCount=0),this};Kt.prototype.off=Kt.prototype.removeListener;Kt.prototype.addListener=Kt.prototype.on;Kt.prefixed=tn;Kt.EventEmitter=Kt;ub=Kt;var So={};wo(So,"ConnectionType",()=>ii);wo(So,"PeerErrorType",()=>it);wo(So,"BaseConnectionErrorType",()=>qc);wo(So,"DataConnectionErrorType",()=>Zc);wo(So,"SerializationType",()=>Wa);wo(So,"SocketEventType",()=>Zr);wo(So,"ServerMessageType",()=>St);var ii;(function(t){t.Data="data",t.Media="media"})(ii||(ii={}));var it;(function(t){t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc"})(it||(it={}));var qc;(function(t){t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed"})(qc||(qc={}));var Zc;(function(t){t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big"})(Zc||(Zc={}));var Wa;(function(t){t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw"})(Wa||(Wa={}));var Zr;(function(t){t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close"})(Zr||(Zr={}));var St;(function(t){t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE"})(St||(St={}));var hb={};hb=JSON.parse('{"name":"peerjs","version":"1.5.4","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stückler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Sören Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^9.0.0"},"alias":{"process":false,"buffer":false}}');class zK extends ub.EventEmitter{constructor(e,n,r,i,s,o=5e3){super(),this.pingInterval=o,this._disconnected=!0,this._messagesQueue=[];const a=e?"wss://":"ws://";this._baseUrl=a+n+":"+r+i+"peerjs?key="+s}start(e,n){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+hb.version),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),J.log("Server message received:",s)}catch{J.log("Invalid server message",i.data);return}this.emit(Zr.Message,s)},this._socket.onclose=i=>{this._disconnected||(J.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(Zr.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),J.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){J.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:St.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const n of e)this.send(n)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Zr.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(e);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class tM{constructor(e){this.connection=e}startConnection(e){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===ii.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){const r=this.connection,i={ordered:!!e.reliable},s=n.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){J.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;J.log("Listening for ICE candidates."),e.onicecandidate=o=>{!o.candidate||!o.candidate.candidate||(J.log(`Received ICE candidates for ${n}:`,o.candidate),s.socket.send({type:St.Candidate,payload:{candidate:o.candidate,type:i,connectionId:r},dst:n}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":J.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(qc.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":J.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(qc.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":J.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},J.log("Listening for data channel"),e.ondatachannel=o=>{J.log("Received data channel");const a=o.channel;s.getConnection(n,r)._initializeDataChannel(a)},J.log("Listening for remote stream"),e.ontrack=o=>{J.log("Received remote stream");const a=o.streams[0],l=s.getConnection(n,r);if(l.type===ii.Media){const c=l;this._addStreamToMediaConnection(a,c)}}}cleanup(){J.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const n=e.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);J.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),J.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===ii.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:St.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(it.WebRTC,i),J.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(it.WebRTC,r),J.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createAnswer();J.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),J.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:St.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(it.WebRTC,i),J.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(it.WebRTC,r),J.log("Failed to create answer, ",r)}}async handleSDP(e,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;J.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),J.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await s._makeAnswer()}catch(o){i.emitError(it.WebRTC,o),J.log("Failed to setRemoteDescription, ",o)}}async handleCandidate(e){J.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),J.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(it.WebRTC,n),J.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(e,n){if(J.log(`add tracks from stream ${e.id} to peer connection`),!n.addTrack)return J.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{n.addTrack(r,e)})}_addStreamToMediaConnection(e,n){J.log(`add stream ${e.id} to media connection ${n.connectionId}`),n.addStream(e)}}class nM extends ub.EventEmitter{emitError(e,n){J.error("Error:",n),this.emit("error",new WK(`${e}`,n))}}class WK extends Error{constructor(e,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=e}}class rM extends nM{get open(){return this._open}constructor(e,n,r){super(),this.peer=e,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class Sf extends rM{static#e=this.ID_PREFIX="mc_";get type(){return ii.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,n,r){super(e,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Sf.ID_PREFIX+cn.randomToken(),this._negotiator=new tM(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{J.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{J.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){J.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const n=e.type,r=e.payload;switch(e.type){case St.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case St.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:J.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(e,n={}){if(this._localStream){J.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class VK{constructor(e){this._options=e}_buildRequest(e){const n=this._options.secure?"https":"http",{host:r,port:i,path:s,key:o}=this._options,a=new URL(`${n}://${r}:${i}${s}${o}/${e}`);return a.searchParams.set("ts",`${Date.now()}${Math.random()}`),a.searchParams.set("version",hb.version),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){J.error("Error retrieving ID",e);let n="";throw this._options.path==="/"&&this._options.host!==cn.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let n="";throw this._options.host===cn.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw J.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}class Ef extends rM{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return ii.Data}constructor(e,n,r){super(e,n,r),this.connectionId=this.options.connectionId||Ef.ID_PREFIX+J2(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new tM(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{J.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{J.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{J.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,n=!1){if(!this.open){this.emitError(Zc.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,n)}async handleMessage(e){const n=e.payload;switch(e.type){case St.Answer:await this._negotiator.handleSDP(e.type,n.sdp);break;case St.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:J.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}}class db extends Ef{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Ef.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return J.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class ey extends db{close(e){super.close(e),this._chunkedData={}}constructor(e,n,r){super(e,n,r),this.chunker=new Q2,this.serialization=Wa.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const n=y2(e),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(e){const n=e.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=BK(r.data);this._handleDataMessage({data:i})}}_send(e,n){const r=v2(e);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const n=await e;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(e){const n=this.chunker.chunk(e);J.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class XK extends db{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,n){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=Wa.None}}class YK extends db{_handleDataMessage({data:e}){const n=this.parse(this.decoder.decode(e)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(e,n){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=cn.chunkedMTU){this.emitError(Zc.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=Wa.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class fb extends nM{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[n,r]of this._connections)e[n]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,n){super(),this._serializers={raw:XK,json:YK,binary:ey,"binary-utf8":ey,default:ey},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?n=e:e&&(r=e.toString()),n={debug:0,host:cn.CLOUD_HOST,port:cn.CLOUD_PORT,path:"/",key:fb.DEFAULT_KEY,token:cn.randomToken(),config:cn.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==cn.CLOUD_HOST?this._options.secure=cn.isSecure():this._options.host==cn.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&J.setLogFunction(this._options.logFunction),J.logLevel=this._options.debug||0,this._api=new VK(n),this._socket=this._createServerConnection(),!cn.supports.audioVideo&&!cn.supports.data){this._delayedAbort(it.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!cn.validateId(r)){this._delayedAbort(it.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(it.ServerError,i))}_createServerConnection(){const e=new zK(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Zr.Message,n=>{this._handleMessage(n)}),e.on(Zr.Error,n=>{this._abort(it.SocketError,n)}),e.on(Zr.Disconnected,()=>{this.disconnected||(this.emitError(it.Network,"Lost connection to server."),this.disconnect())}),e.on(Zr.Close,()=>{this.disconnected||this._abort(it.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const n=e.type,r=e.payload,i=e.src;switch(n){case St.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case St.Error:this._abort(it.ServerError,r.msg);break;case St.IdTaken:this._abort(it.UnavailableID,`ID "${this.id}" is taken`);break;case St.InvalidKey:this._abort(it.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case St.Leave:J.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case St.Expire:this.emitError(it.PeerUnavailable,`Could not connect to peer ${i}`);break;case St.Offer:{const s=r.connectionId;let o=this.getConnection(i,s);if(o&&(o.close(),J.warn(`Offer received for existing Connection ID:${s}`)),r.type===ii.Media){const l=new Sf(i,this,{connectionId:s,_payload:r,metadata:r.metadata});o=l,this._addConnection(i,o),this.emit("call",l)}else if(r.type===ii.Data){const l=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});o=l,this._addConnection(i,o),this.emit("connection",l)}else{J.warn(`Received malformed connection type:${r.type}`);return}const a=this._getMessages(s);for(const l of a)o.handleMessage(l);break}default:{if(!r){J.warn(`You received a malformed message from ${i} of type ${n}`);return}const s=r.connectionId,o=this.getConnection(i,s);o&&o.peerConnection?o.handleMessage(e):s?this._storeMessage(s,e):J.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,n){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(n)}_getMessages(e){const n=this._lostMessages.get(e);return n?(this._lostMessages.delete(e),n):[]}connect(e,n={}){if(n={serialization:"default",...n},this.disconnected){J.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(it.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](e,this,n);return this._addConnection(e,r),r}call(e,n,r={}){if(this.disconnected){J.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(it.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){J.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new Sf(e,this,{...r,_stream:n});return this._addConnection(e,i),i}_addConnection(e,n){J.log(`add connection ${n.type}:${n.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(n)}_removeConnection(e){const n=this._connections.get(e.peer);if(n){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,n){const r=this._connections.get(e);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(e,n){setTimeout(()=>{this._abort(e,n)},0)}_abort(e,n){J.error("Aborting!"),this.emitError(e,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(J.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const n=this._connections.get(e);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;J.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)J.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)J.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=n=>{}){this._api.listAllPeers().then(n=>e(n)).catch(n=>this._abort(it.ServerError,n))}}var iM=fb;class KK{props={guid:"",clan:null,controlling:null,name:"Undefined",state:"WaitingRespawn",team:null,kills:0,deaths:0,score:0};onChange;constructor(e){this.onChange=e}getContainer(){return new ye}updateCallbacks={team:()=>{},name:()=>{},clan:()=>{},state:()=>{},guid:()=>{},kills:()=>{},deaths:()=>{},score:()=>{},controlling:e=>{e.controlling!==void 0&&this.onChange(e.controlling,this.props.controlling,this.props)}};destroy(){}}class qK{container;panel;stats;bombs;radar;previousStats;constructor(){this.container=new ye,this.panel=new Be,this.stats=new Xt,this.bombs=new ye,this.radar=new dY,this.bombs.position.set(296,108),this.previousStats={},this.container.addChild(this.panel),this.container.addChild(this.stats),this.container.addChild(this.bombs),this.container.addChild(this.radar.container)}init(){this.panel.texture=X["metalpanel.jpg"];for(let e=0;e<5;e++){const n=new Be(X["droppedbomb.gif"]);n.position.set(e*14,0),this.bombs.addChild(n)}}updateStats(e){if(JSON.stringify(e)==JSON.stringify(this.previousStats))return;this.previousStats=e;const n=e.bombs??0;for(let o=0;o<5;o++){const a=this.bombs.children[o],l=o<n?X["carrybomb.gif"]:X["droppedbomb.gif"];a.texture=l}this.stats.clear(),this.stats.beginFill("white");const r=(e.health??0)/255;this.stats.drawRect(290,44,74*r,12);const i=(e.fuel??0)/255;this.stats.drawRect(290,65,74*i,12);const s=(e.ammo??0)/255;this.stats.drawRect(290,86,74*s,12),this.stats.endFill()}setTeam(e){(e===void 0||e==="Centrals")&&(this.panel.texture=X["metalpanel.jpg"]),e==="Allies"&&(this.panel.texture=X["woodpanel.jpg"]),this.radar.setTeam(e)}}class ZK{keyboard={left:!1,right:!1,down:!1,up:!1,shift:!1,space:!1,enter:!1,ctrl:!1};callback;init(e){this.callback=e}onKeyChange(e,n){const r=this.keyboard[e],i=n==="down";r!==i&&(this.keyboard[e]=i,this.callback?.(structuredClone(this.keyboard)))}}class QK{container;entries;pov_team=null;constructor(){this.container=new ye,this.entries=new ye,this.container.addChild(this.entries)}init(){}reorderEntries(){let e=0;for(const n of this.entries.children)n.position.y=e++*20}getColor(e){return this.pov_team===null||e===null?Gt.SpectatorForeground:e===this.pov_team?Gt.OwnForeground:Gt.OpponentForeground}addKillEvent(e){const n=new ye,r=this.entries.children.length*20;n.position.y=r;const{name:i,clan:s}=e.killer_data.props,o=new Mr(xf(i,s),{fontFamily:"arial",fontSize:15,fill:this.getColor(e.killer_data.props.team),fontWeight:"bold"}),a=e.method==="Plane"?"plane_icon.gif":"man_icon.gif",l=new Be(X[a]);if(l.position.x+=o.width+3,l.position.y+=3,n.addChild(o),n.addChild(l),e.victim!==null&&e.victim_data!==null){const{name:c,clan:d}=e.victim_data.props,u=new Mr(xf(c,d),{fontFamily:"arial",fontSize:15,fill:this.getColor(e.victim_data.props.team),fontWeight:"bold"});u.position.x=l.position.x+l.width+3,n.addChild(u)}this.entries.addChild(n),setTimeout(()=>{this.entries.removeChild(n),this.reorderEntries()},8e3)}setTeam(e){this.pov_team=e}}const VE={left:{id:"dPTAzZ",defaultMessage:[{type:0,value:"Move Left"}]},right:{id:"Nbb2Yc",defaultMessage:[{type:0,value:"Move Right"}]},down:{id:"ohIqzI",defaultMessage:[{type:0,value:"Toggle Motor"}]},up:{id:"xPJ6oZ",defaultMessage:[{type:0,value:"Flip Plane"}]},shift:{id:"f3ix4b",defaultMessage:[{type:0,value:"Bomb"}]},space:{id:"4MNKGm",defaultMessage:[{type:0,value:"Eject, Open Parachute"}]},enter:{id:"8WM3G7",defaultMessage:[{type:0,value:"Enter"}]},ctrl:{id:"3R2xaB",defaultMessage:[{type:0,value:"Shoot"}]},chatAll:{id:"y49T/p",defaultMessage:[{type:0,value:"Chat All"}]},chatTeam:{id:"tN8/0L",defaultMessage:[{type:0,value:"Chat Team"}]},viewScoreboard:{id:"Wjn/We",defaultMessage:[{type:0,value:"View Scoreboard"}]},toggleMute:{id:"d2cMrt",defaultMessage:[{type:0,value:"Toggle Mute"}]}},Fn={plane_name_Albatros:{id:"aSDY0F",defaultMessage:[{type:0,value:"Albatros D.II"}]},plane_description_Albatros:{id:"8Am/Pl",defaultMessage:[{type:0,value:"Basic aircraft equipped with a machine gun, without particularly good or bad qualities. A good choice for a beginner."}]},plane_name_Fokker:{id:"ezKLsY",defaultMessage:[{type:0,value:"Fokker DR.I"}]},plane_description_Fokker:{id:"07P703",defaultMessage:[{type:0,value:"A legendary triplane. Extremely agile and also excellent at maximum flight altitude."}]},plane_name_Junkers:{id:"yRjHTu",defaultMessage:[{type:0,value:"Junkers J.1"}]},plane_description_Junkers:{id:"zV7RzE",defaultMessage:[{type:0,value:"Equipped with bombs in addition to a machine gun, extremely durable, but a clumsy aircraft."}]},plane_name_Bristol:{id:"vrJzQq",defaultMessage:[{type:0,value:"Bristol F.2b"}]},plane_description_Bristol:{id:"E/uHyU",defaultMessage:[{type:0,value:"An aircraft equipped with a fairly powerful machine gun. A good choice, especially for beginner pilots."}]},plane_name_Sopwith:{id:"GEspS4",defaultMessage:[{type:0,value:"Sopwith Camel"}]},plane_description_Sopwith:{id:"M9/1jj",defaultMessage:[{type:0,value:"Extremely agile. Not recommended for beginner pilots."}]},plane_name_Salmson:{id:"crlI8a",defaultMessage:[{type:0,value:"Salmson 2"}]},plane_description_Salmson:{id:"WWTrIb",defaultMessage:[{type:0,value:"Versatile mid-tier aircraft. Equipped with bombs in addition to a machine gun. Fast and powerful engine, though not agile."}]}};class JK{container;infoBox;planeImage;planeNameText;planeDescriptionText;planeMap;team="Centrals";index=0;runwayIndex=0;callbacks;constructor(){this.container=new ye,this.infoBox=new Be,this.planeImage=new Be,this.planeNameText=new Mr("",{fontFamily:"Arial",fontSize:20,fill:16777215,fontWeight:"600"}),this.planeDescriptionText=new Mr("",{fontFamily:"Arial",fontSize:16,lineHeight:24,fill:0,wordWrap:!0,wordWrapWidth:280,fontWeight:"600"}),this.container.addChild(this.infoBox),this.container.addChild(this.planeImage),this.container.addChild(this.planeNameText),this.container.addChild(this.planeDescriptionText),this.container.visible=!1,this.planeImage.position.set(10),this.planeNameText.position.set(11,138),this.planeDescriptionText.position.set(14,171),this.planeMap={Allies:[],Centrals:[]}}init(e,n){this.callbacks=e,this.infoBox.texture=X["selectionScreen.gif"],this.planeMap.Centrals.push({plane_type:"Albatros",texture:X["pic_plane4.gif"],plane_name:n.formatMessage(Fn.plane_name_Albatros),plane_description:n.formatMessage(Fn.plane_description_Albatros)}),this.planeMap.Centrals.push({plane_type:"Fokker",texture:X["pic_plane6.gif"],plane_name:n.formatMessage(Fn.plane_name_Fokker),plane_description:n.formatMessage(Fn.plane_description_Fokker)}),this.planeMap.Centrals.push({plane_type:"Junkers",texture:X["pic_plane5.gif"],plane_name:n.formatMessage(Fn.plane_name_Junkers),plane_description:n.formatMessage(Fn.plane_description_Junkers)}),this.planeMap.Allies.push({plane_type:"Bristol",texture:X["pic_plane7.gif"],plane_name:n.formatMessage(Fn.plane_name_Bristol),plane_description:n.formatMessage(Fn.plane_description_Bristol)}),this.planeMap.Allies.push({plane_type:"Sopwith",texture:X["pic_plane9.gif"],plane_name:n.formatMessage(Fn.plane_name_Sopwith),plane_description:n.formatMessage(Fn.plane_description_Sopwith)}),this.planeMap.Allies.push({plane_type:"Salmson",texture:X["pic_plane8.gif"],plane_name:n.formatMessage(Fn.plane_name_Salmson),plane_description:n.formatMessage(Fn.plane_description_Salmson)}),this.updatePlaneInfo()}setTeam(e){this.team=e,this.planeImage.texture=this.planeMap[this.team][this.index].texture,this.updatePlaneInfo()}updatePlaneInfo(){const e=this.planeMap[this.team];this.planeImage.texture=e[this.index].texture;const n=e[this.index];this.planeNameText.text=n.plane_name,this.planeDescriptionText.text=n.plane_description}processKeys(e,n,r,i){const s=this.planeMap[this.team];e.down&&(this.index=this.index-1<0?s.length-1:this.index-1),e.up&&(this.index=this.index+1>=s.length?0:this.index+1),this.updatePlaneInfo();const o=this.getMyRunways(n);if(e.left&&(this.runwayIndex=this.runwayIndex-1<0?o.length-1:this.runwayIndex-1),e.right&&(this.runwayIndex=this.runwayIndex+1>=o.length?0:this.runwayIndex+1),this.selectRunway(n,r),e.enter){const a=s[this.index].plane_type,l=o[this.runwayIndex][0];i(l,a)}}selectRunway(e,n){const i=this.getMyRunways(e)[this.runwayIndex][1].getCenter();i.y-=130,n(i)}getMyRunways(e){return[...e.collection.entries()].filter(([n,r])=>r.props.team===this.team).sort((n,r)=>(n[1].props.client_x??0)-(r[1].props.client_x??0))}}class eq{container;flag_centrals;flag_random;flag_allies;constructor(){this.container=new ye,this.flag_centrals=new Be,this.flag_random=new Be,this.flag_allies=new Be,this.flag_centrals.interactive=!0,this.flag_random.interactive=!0,this.flag_allies.interactive=!0,this.container.addChild(this.flag_centrals),this.container.addChild(this.flag_random),this.container.addChild(this.flag_allies)}init(e){this.flag_centrals.texture=X["germanflag.jpg"],this.flag_random.texture=X["randomflag.jpg"],this.flag_allies.texture=X["royalairforcesflag.jpg"];const n=15,r=this.flag_centrals.width;this.flag_random.position.x=r+n,this.flag_allies.position.x=this.flag_random.width+r+n*2,this.flag_allies.onclick=()=>{e.chooseTeam("Allies")},this.flag_centrals.onclick=()=>{e.chooseTeam("Centrals")},this.flag_random.onclick=()=>{e.chooseTeam(null)}}}function tq(){return new KK((t,e,n)=>{if(t&&(t.type==="Plane"&&this.entities.Plane.collection.get(t.data)?.setPlayerName(null,null),t.type==="Man"&&this.entities.Man.collection.get(t.data)?.setPlayerName(null,null)),e&&e){const r=this.getMyPlayer()?.props.team??null,i=n.name?.substring(0,15)??"",s=xf(i,n.clan??null);e.type==="Plane"?this.entities.Plane.collection.get(e.data)?.setPlayerName(s,r):e.type==="Man"&&this.entities.Man.collection.get(e.data)?.setPlayerName(s,r)}})}class nq{sky;myPlayerGuid=null;myPlayerId=null;teamChooser=new eq;runwaySelector=new JK;gameHUD=new qK;killFeed=new QK;keyboard=new ZK;callbacks;sendPlayerUpdate=!1;entities=l2([...a2,["Player",tq.bind(this)]]);renderClient;constructor(){const e=X["sky3b.jpg"];this.sky=new dl(X["sky3b.jpg"]),this.sky.texture=e,this.sky.width=e.width,this.sky.height=e.height,this.sky.position.set(0,-250);const n=[this.killFeed.container,this.runwaySelector.container,this.teamChooser.container];this.renderClient=new d2({background:this.sky,containers:n,hud:this.gameHUD.container})}onKeyChange(e){const n=this.getMyPlayer();if(n)switch(n.props.state){case"Playing":{this.callbacks?.keyChange(e);break}case"ChoosingRunway":{n.props.team&&this.runwaySelector.processKeys(e,this.entities.Runway,r=>{this.centerCamera(r.x,r.y)},(r,i)=>{this.callbacks?.chooseRunway(r,i)});break}}}init(e,n,r){n?.appendChild(this.renderClient.app.view),this.callbacks=e,this.teamChooser.init(this.callbacks),this.runwaySelector.init(this.callbacks,r),this.keyboard.init(o=>this.onKeyChange(o)),this.gameHUD.init(),this.killFeed.init();const i=this.renderClient.app.screen.width/2,s=this.renderClient.app.screen.height/2;{const o=this.teamChooser.container.width,a=this.teamChooser.container.height,l=i-o/2,c=s-a/2;this.teamChooser.container.position.set(l,c)}{const o=this.renderClient.app.screen.height-this.gameHUD.container.height;this.gameHUD.container.position.set(0,o)}this.killFeed.container.position.set(510,0);{const o=this.runwaySelector.container.width,a=this.runwaySelector.container.height,l=i-o/2,c=s-a/2-this.gameHUD.container.height/2;this.runwaySelector.container.position.set(l,c)}this.centerCamera(0,0)}clearEntities(){wf(this.entities,{onRemove:this.onEntityRemoved.bind(this)})}destroy(){console.log("destroying client..."),wf(this.entities,{onRemove:this.onEntityRemoved.bind(this)}),this.renderClient.app.destroy(!0,{children:!0})}setMyPlayerGuid(e,n){console.log("My guid:",e),this.myPlayerGuid=e;const r=this.entities.Player.collection.entries().find(i=>i[1].props.guid===e);this.myPlayerId=r?.[0]??null,n&&(r&&this.onMyPlayerUpdate(r[1].props),this.onJoinTeam(r?.[1].props.team??"Allies"))}onJoinTeam(e){this.teamChooser.container.visible=!1,this.gameHUD.setTeam(e),this.killFeed.setTeam(e)}getMyPlayer(){return this.myPlayerId===null?void 0:this.entities.Player.collection.get(this.myPlayerId)}onMyPlayerUpdate(e){if(this.getMyPlayer()){if(e.controlling?.type==="Runway"){const r=this.entities.Runway.collection.get(e.controlling.data[0]);r&&this.followEntity(r)}if(e.team){this.runwaySelector.setTeam(e.team);for(const[r,i]of this.entities.Runway.collection)i.setUserTeam(e.team);for(const[r,i]of this.entities.Bunker.collection)i.setUserTeam(e.team);for(const[r,i]of this.entities.Player.collection)i.props.controlling?.type==="Plane"&&this.entities.Plane.collection.get(i.props.controlling.data)?.setPlayerName(i.props.name,e.team),i.props.controlling?.type==="Man"&&this.entities.Man.collection.get(i.props.controlling.data)?.setPlayerName(i.props.name,e.team)}switch(e.state){case"ChoosingRunway":{this.runwaySelector.container.visible=!0,this.runwaySelector.selectRunway(this.entities.Runway,r=>{this.centerCamera(r.x,r.y)});break}case"Playing":{this.runwaySelector.container.visible=!1;break}}}}centerCamera(e,n){this.renderClient.centerCamera(e,n),this.gameHUD.radar.centerCamera(-e,-n)}updateRadar(){this.gameHUD.radar.refreshRadar([this.entities.Ground,this.entities.Man,this.entities.Plane,this.entities.Runway,this.entities.Bunker])}handleGameEvents(e){this.sendPlayerUpdate=!1;for(const n of e)switch(n.type){case"EntityChanges":{this.updateEntities(n.data);break}case"PlayerJoin":{this.sendPlayerUpdate=!0,console.log(n.data+" joined the game!");break}case"PlayerLeave":{this.sendPlayerUpdate=!0,console.log(n.data+" left the game!");break}case"PlayerJoinTeam":{this.sendPlayerUpdate=!0,this.entities.Player.collection.get(n.data.id)&&(console.log(n.data.id+" joined "+n.data.team),n.data.id===this.myPlayerId&&this.onJoinTeam(n.data.team));break}case"KillEvent":{this.sendPlayerUpdate=!0;const r=this.entities.Player.collection.get(n.data.killer),i=n.data.victim!==null?this.entities.Player.collection.get(n.data.victim)??null:null;r&&this.killFeed.addKillEvent({...n.data,killer_data:r,victim_data:i});break}case"YourPlayerGuid":{this.sendPlayerUpdate=!0,this.setMyPlayerGuid(n.data,!1);break}case"ChatMessage":{this.callbacks?.onMessage(n.data[1]);break}}this.sendPlayerUpdate&&this.callbacks?.onPlayerChange(this.getPlayerData()),this.sendPlayerUpdate=!1}updateEntities(e){for(const n of e){const{ent_type:r,id:i,update:s}=n;switch(s.type){case"Deleted":{c2(this.entities,i,r,{onRemove:this.onEntityRemoved.bind(this)});break}case"Properties":u2(this.entities,i,s.data,{onAdd:this.onEntityAdded.bind(this),onUpdate:this.onEntityUpdated.bind(this)})}}this.updateRadar()}onEntityUpdated(e,n,r){const i=this.getMyPlayer();if(i?.props.controlling&&n===i.props.controlling.data&&r?.type===i.props.controlling.type&&this.followEntity(e),r?.type==="Player"){this.sendPlayerUpdate=!0;const{guid:s}=r.props;s!==void 0&&s===this.myPlayerGuid&&(this.myPlayerId=n),this.myPlayerId===n&&this.onMyPlayerUpdate(r.props)}}followEntity(e){if(mY(e)){const n=e.getCenter();this.renderClient.debugCoords.text=`${n.x}, ${n.y}`,this.centerCamera(n.x,n.y),this.gameHUD.updateStats(e.getStats())}}onEntityAdded(e){this.renderClient.addEntity(e)}onEntityRemoved(e){this.renderClient.removeEntity(e)}getPlayerData(){return[...this.entities.Player.collection.entries().map(([e,n])=>n.props)]}}const rq=t=>t.key.toLowerCase(),iq=t=>t.key.toLowerCase(),XE=t=>{const e=new Map;for(const s of t.keybinds){const o=rq(s),a=(e.get(o)??[]).concat(s.action);e.set(o,a)}const n=s=>o=>{const a=iq(o),l=e.get(a);if(l)for(const c of l)t.callback(c,s,o)},r=n("up"),i=n("down");return document.addEventListener("keyup",r),document.addEventListener("keydown",i),function(){document.removeEventListener("keyup",r),document.removeEventListener("keydown",i)}},sq=({client:t,engine:e})=>{const{globalState:n}=Nr(),{chatState:r}=n;b.useEffect(()=>{},[])},oq=({client:t})=>{const{settings:e,globalState:n,setSettings:r,setGlobalState:i,sendChatMessage:s}=Nr(),{chatState:o}=n,a=(u,h,f)=>{switch(f.preventDefault(),u){case"viewScoreboard":{const p=h==="down";i(m=>({...m,viewingScoreboard:p}));break}case"chatAll":{i(p=>({...p,chatState:oa.MessagingGlobal}));break}case"chatTeam":{i(p=>({...p,chatState:oa.MessagingTeam}));break}case"toggleMute":{if(h==="down")return;r(p=>({...p,audioSettings:{...p.audioSettings,muted:!p.audioSettings.muted}}));break}default:t.keyboard.onKeyChange(u,h)}},l=(u,h,f)=>{switch(f.preventDefault(),u){case"close":{i(p=>({...p,chatState:oa.Passive}));break}case"send":{s.current&&s.current();break}default:lK(u)}},c={callback:a,keybinds:e.controls},d={callback:l,keybinds:[{action:"close",key:"Escape"},{action:"send",key:"Enter"}]};b.useEffect(()=>o===oa.Passive?XE(c):XE(d),[o])};function pb({handleClientCommand:t}){const e=rr(),n=b.useMemo(()=>new nq,[]),r=b.useMemo(()=>Uc.new(),[]),[i,s]=b.useState([]),[o,a]=b.useState(null),[l,c]=b.useState([]);oq({client:n}),sq({client:n,engine:r});const d=b.useCallback(p=>{n.handleGameEvents(p)},[n]),u=b.useCallback((p,m)=>{a(p),n.setMyPlayerGuid(p,m)},[n]);function h(p){const m={chooseTeam:y=>{t({type:"PlayerChooseTeam",data:{team:y}})},chooseRunway:(y,g)=>{t({type:"PlayerChooseRunway",data:{plane_type:g,runway_id:y}})},keyChange:y=>{t({type:"PlayerKeyboard",data:{...y}})},onPlayerChange:y=>{s(y)},onMessage:y=>{const g={...y,isNewMessage:!0,guid:Yc()};setTimeout(()=>{c(_=>_.map(v=>v.guid===g.guid?{...g,isNewMessage:!1}:v))},5e3),c(_=>[..._,g])}};n.init(m,p,e)}b.useEffect(()=>()=>{n.destroy(),r.free(),document.onkeydown=null,document.onkeyup=null,console.log("UseDogfight hook destructor called.")},[]);function f(){n.clearEntities()}return{initialize:h,clearEntities:f,handleGameEvents:d,setMyPlayerGuid:u,playerGuid:o,messages:l,playerData:i,engine:r}}function sM(t){return"lentokonepeli-"+t}const Hl=Yc();function aq(t,e,n,r){const i=pb({handleClientCommand:g=>{s.current.push({player_guid:Hl,command:g})}}),s=b.useRef([]),o=b.useRef([]),[a,l]=b.useState(null),c=b.useRef(new Map);function d(g){i.initialize(g)}function u(g){const _=p(),v=JSON.stringify(_);if(i.engine.tick(v),g%2==0){const w=i.engine.flush_changed_state(),S=i.engine.game_events_from_binary(w),E=JSON.parse(S);if(!E.length)return;for(const[T,C]of c.current)C.connection.send(w);i.handleGameEvents(E)}}const h=b.useRef(null);function f(){const g=Yc().substring(0,4);l(g),h.current=new iM(sM(g)),h.current.on("open",_=>{console.log("My Peer id is",_);const v=ab[t];i.engine.load_level(v),i.engine.init(),console.log(i.engine.get_build_version()),console.log(i.engine.get_commit()),i.setMyPlayerGuid(Hl,!1),s.current.push({player_guid:Hl,command:{type:"AddPlayer",data:{guid:Hl,name:n,clan:r}}}),mr.setHostEngineUpdateFn(u).start()}),h.current.on("connection",_=>{console.log("GUEST JOINED",_.connectionId);const v=Yc();function w(){c.current.delete(_.connectionId),s.current.push({player_guid:v,command:{type:"RemovePlayer"}})}_.on("close",()=>{w()}),_.on("open",()=>{c.current.set(_.connectionId,{player_guid:v,connection:_});const S=i.engine.get_full_state();_.send(S);const E={type:"YourPlayerGuid",data:v};_.send(JSON.stringify(E)),_.on("data",T=>{const C=c.current.get(_.connectionId);if(C){const A=new Uint8Array(T),P=i.engine.player_command_from_binary(A),O=JSON.parse(P);O.type=="AddPlayer"&&(C.player_guid=v),o.current.push({player_guid:C.player_guid,command:O})}})}),_.on("close",()=>{c.current.delete(_.connectionId)})})}function p(g){const _=[...s.current,...o.current];return s.current=[],o.current=[],_}function m(){return i.engine.get_replay_file()}b.useEffect(()=>()=>{console.log("destroy host"),mr.stop(),h.current?.removeAllListeners(),h.current?.destroy()},[]);function y(g,_){s.current.push({player_guid:Hl,command:{type:"SendMessage",data:[g,_]}})}return{initialize:d,hostGame:f,roomCode:a,getReplayBinary:m,sendChatMessage:y,playerData:i.playerData,playerGuid:i.playerGuid,messages:i.messages}}function lq(t,e){const n=b.useRef(null),r=b.useRef(null),i=b.useRef(null),s=pb({handleClientCommand:c=>{r.current&&r.current(c)}});function o(c){s.initialize(c),mr.start()}function a(c,d){i.current&&i.current(c,d)}function l(c){n.current||(n.current=new iM,n.current.on("open",d=>{console.log("Guest:",d);const u=n.current.connect(sM(c));u.on("open",()=>{r.current=p=>{const m=s.engine.player_command_to_binary(JSON.stringify(p));u.send(m)},i.current=(p,m)=>{const y={type:"SendMessage",data:[p,m]},g=s.engine.player_command_to_binary(JSON.stringify(y));u.send(g)};const h={type:"AddPlayer",data:{guid:"",name:t,clan:e}},f=s.engine.player_command_to_binary(JSON.stringify(h));u.send(f),u.on("data",p=>{if(typeof p=="string"){const m=JSON.parse(p);s.handleGameEvents([m]),m.type==="YourPlayerGuid"&&s.setMyPlayerGuid(m.data,!1)}else{const m=new Uint8Array(p),y=s.engine.game_events_from_binary(m),g=JSON.parse(y);s.handleGameEvents(g)}})})}))}return b.useEffect(()=>()=>{console.log("destroy guest"),n.current?.removeAllListeners(),n.current?.destroy(),mr.stop()},[]),{joinGame:l,initialize:o,sendChatMessage:a,playerData:s.playerData,playerGuid:s.playerGuid,messages:s.messages}}const cq={Centrals:"germanflag_small.gif",Allies:"raf_flag_small.gif"};function uq(t){const e="images/";return t?e+cq[t]:e+"randomflag_small.gif"}function hq(t,e){return e?e===t?"friendly":"enemy":"noteam"}function dq({playerData:t,myPlayerGuid:e}){const n=rr(),i=t.find(l=>l.guid===e)?.team??"Centrals",s=t.filter(l=>l.team!=i).sort((l,c)=>(c.score??0)-(l.score??0)),o=t.filter(l=>l.team==i).sort((l,c)=>(c.score??0)-(l.score??0)),a=[...s,...o];return x.jsx("div",{className:"scoreboard",children:x.jsxs(Me,{verticalSpacing:2,children:[x.jsx(Me.Thead,{children:x.jsxs(Me.Tr,{className:"header",children:[x.jsx(Me.Th,{children:x.jsx(ur,{children:n.formatMessage({id:"MGsduE",defaultMessage:[{type:0,value:"Team"}]})})}),x.jsx(Me.Th,{children:n.formatMessage({id:"l2d2GO",defaultMessage:[{type:0,value:"Name"}]})}),x.jsx(Me.Th,{children:x.jsx(ur,{children:n.formatMessage({id:"Wo8cms",defaultMessage:[{type:0,value:"Score"}]})})}),x.jsx(Me.Th,{children:x.jsx(ur,{children:n.formatMessage({id:"xVnyJE",defaultMessage:[{type:0,value:"Frags"}]})})}),x.jsx(Me.Th,{children:x.jsx(ur,{children:n.formatMessage({id:"2w7ZSO",defaultMessage:[{type:0,value:"Deaths"}]})})}),x.jsx(Me.Th,{children:x.jsx(ur,{children:n.formatMessage({id:"iu4I/w",defaultMessage:[{type:0,value:"Accuracy"}]})})}),x.jsx(Me.Th,{children:n.formatMessage({id:"ivAE2s",defaultMessage:[{type:0,value:"Ping"}]})})]})}),x.jsx(Me.Tbody,{children:a.map(l=>x.jsxs(Me.Tr,{className:hq(i,l.team),children:[x.jsx(Me.Td,{children:x.jsx(ur,{children:x.jsx("img",{src:uq(l.team)})})}),x.jsx(Me.Td,{children:xf(l.name??"?",l.clan??null)}),x.jsx(Me.Td,{children:x.jsx(ur,{children:l.score??0})}),x.jsx(Me.Td,{children:x.jsx(ur,{children:l.kills??0})}),x.jsx(Me.Td,{children:x.jsx(ur,{children:l.deaths??0})}),x.jsx(Me.Td,{}),x.jsx(Me.Td,{})]},l.guid))})]})})}const mb=b.forwardRef((t,e)=>{const{globalState:n}=Nr(),r=t.playerData.find(i=>i.guid===t.myPlayerGuid)?.team??null;return x.jsxs("div",{ref:e,style:{position:"relative"},children:[n.viewingScoreboard&&x.jsx(dq,{playerData:t.playerData,myPlayerGuid:t.myPlayerGuid}),x.jsx(aK,{messages:t.messages,onSendMessage:t.onSendMessage,myTeam:r})]})});function fq({gameCode:t}){const e=b.useRef(null),{getClan:n,getUsername:r}=Nr(),{initialize:i,joinGame:s,playerData:o,playerGuid:a,messages:l,sendChatMessage:c}=lq(r(),n());function d(){e.current&&(i(e.current),s(t))}return b.useEffect(()=>{d()},[]),x.jsxs(Wt,{justify:"center",children:[x.jsx(mb,{ref:e,myPlayerGuid:a,playerData:o,messages:l,onSendMessage:c}),x.jsx(Ni,{withBorder:!0,style:{height:"100%"},children:x.jsxs(vt,{children:[x.jsx(en,{children:"Joined Game:"}),x.jsx(en,{style:{color:"gray",fontSize:"1.5rem",fontFamily:"monospace"},size:"xl",fw:"bold",children:t})]})})]})}var oM={exports:{}};(function(t,e){(function(n,r){r()})(Qt,function(){function n(c,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,d,u){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){l(h.response,d,u)},h.onerror=function(){console.error("could not download file")},h.send()}function i(c){var d=new XMLHttpRequest;d.open("HEAD",c,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(d)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Qt=="object"&&Qt.global===Qt?Qt:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,d,u){var h=o.URL||o.webkitURL,f=document.createElement("a");d=d||c.name||"download",f.download=d,f.rel="noopener",typeof c=="string"?(f.href=c,f.origin===location.origin?s(f):i(f.href)?r(c,d,u):s(f,f.target="_blank")):(f.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(f.href)},4e4),setTimeout(function(){s(f)},0))}:"msSaveOrOpenBlob"in navigator?function(c,d,u){if(d=d||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,u),d);else if(i(c))r(c,d,u);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){s(h)})}}:function(c,d,u,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return r(c,d,u);var f=c.type==="application/octet-stream",p=/constructor/i.test(o.HTMLElement)||o.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||f&&p||a)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var v=y.result;v=m?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=v:location=v,h=null},y.readAsDataURL(c)}else{var g=o.URL||o.webkitURL,_=g.createObjectURL(c);h?h.location=_:location.href=_,h=null,setTimeout(function(){g.revokeObjectURL(_)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(oM);var pq=oM.exports;const mq=Va(pq);function gq({level:t,recordGame:e}){const n=b.useRef(null),{getUsername:r,getClan:i}=Nr(),{getReplayBinary:s,initialize:o,roomCode:a,hostGame:l,playerData:c,playerGuid:d,messages:u,sendChatMessage:h}=aq(t,e,r(),i());function f(){n.current&&(o(n.current),l())}function p(){const m=s();if(!m)return;const g=new Date().toISOString().split("T")[0],_=t+"_"+a+"_"+g+".lento";mq(new Blob([m]),_)}return b.useEffect(()=>{f()},[]),x.jsxs(Wt,{justify:"center",children:[x.jsx(mb,{ref:n,myPlayerGuid:d,playerData:c,messages:u,onSendMessage:h}),x.jsx(Ni,{withBorder:!0,style:{height:"100%"},children:x.jsxs(vt,{children:[x.jsxs(vt,{children:[x.jsxs(en,{children:[x.jsx(Ge,{id:"zvKn4f",defaultMessage:[{type:0,value:"Game Code"}]}),":"]}),x.jsx(en,{style:{color:"gray",fontSize:"1.5rem",fontFamily:"monospace"},size:"xl",fw:"bold",children:a})]}),x.jsx(vt,{children:x.jsx(jt,{onClick:p,rightSection:x.jsx(N$,{}),children:x.jsx(Ge,{id:"M2xffJ",defaultMessage:[{type:0,value:"Save Replay File"}]})})})]})})]})}function aM({showTip:t,onSuccess:e}){const n=rr(),{settings:r,setSettings:i}=Nr(),[s,o]=b.useState(r.username??""),[a,l]=b.useState(r.clan??"");function c(f){o(f.target.value.trim())}function d(f){l(f.target.value.trim())}function u(){return d0(s)&&gK(a)}function h(){i({...r,username:s,clan:a}),e&&e()}return x.jsxs(vt,{children:[t&&x.jsx("div",{children:x.jsx(en,{size:"lg",children:"What name do you want to go by?"})}),x.jsx(Fa,{value:s,onChange:c,label:n.formatMessage({id:"/KlrcC",defaultMessage:[{type:0,value:"Username"}]}),description:t?n.formatMessage({id:"Y5ZG9P",defaultMessage:[{type:0,value:"You can change this any time in the settings menu"}]}):""}),x.jsx(Fa,{value:a,onChange:d,label:n.formatMessage({id:"BLykMd",defaultMessage:[{type:0,value:"Clan"}]}),description:n.formatMessage({id:"cFDrGv",defaultMessage:[{type:0,value:"An optional clan to prefix to your name"}]})}),x.jsx(At,{disabled:u(),label:n.formatMessage({id:"gAAkRv",defaultMessage:[{type:0,value:"Name should be between 3 and 20 characters"}]}),position:"bottom",children:x.jsx(jt,{variant:"gradient",gradient:{from:"green",to:"lime",deg:90},disabled:u()==!1,size:"lg",onClick:h,children:x.jsx(Ge,{id:"xRGqrp",defaultMessage:[{type:0,value:"Set name"}]})})})]})}function yq(){const t=rr(),[e,n]=b.useState(0),[r,i]=b.useState("classic"),[s,o]=b.useState(""),[a,{open:l,close:c}]=Vd(),{settings:d}=Nr();function u(){d.username||l()}return x.jsxs("div",{children:[x.jsx(tr,{opened:a,closeOnClickOutside:!1,onClose:c,title:t.formatMessage({id:"buqDOb",defaultMessage:[{type:0,value:"Choose Username"}]}),children:x.jsx(aM,{showTip:!0,onSuccess:c})}),e===0&&x.jsxs(ga,{grow:!0,children:[x.jsx(ga.Col,{span:6,style:{maxWidth:500,display:"flex",alignItems:"center",justifyContent:"center"},children:x.jsx(Ni,{shadow:"xl",padding:"xl",radius:"md",withBorder:!0,style:{width:"80%",textAlign:"center"},children:x.jsxs(vt,{children:[x.jsx($a,{order:2,children:x.jsx(Ge,{id:"H6qNPr",defaultMessage:[{type:0,value:"Join a Game"}]})}),x.jsxs(Wt,{children:[x.jsxs(en,{children:[x.jsx(Ge,{id:"Sxp4im",defaultMessage:[{type:0,value:"Code"}]}),":"]}),x.jsx(Fa,{value:s,onChange:h=>o(h.target.value),placeholder:t.formatMessage({id:"INGml3",defaultMessage:[{type:0,value:"Enter the 4 digit game code..."}]})})]}),x.jsx(jt,{onMouseOver:u,variant:"gradient",gradient:{from:"green",to:"lime",deg:90},disabled:s.length!=4,color:"blue",size:"lg",onClick:()=>n(2),children:x.jsx(Ge,{id:"pd7fXb",defaultMessage:[{type:0,value:"Join Game"}]})})]})})}),x.jsx(ga.Col,{span:6,style:{maxWidth:500,display:"flex",alignItems:"center",justifyContent:"center"},children:x.jsx(Ni,{shadow:"xl",padding:"xl",radius:"md",withBorder:!0,style:{width:"80%",textAlign:"center"},children:x.jsxs(vt,{children:[x.jsx($a,{order:2,children:x.jsx(Ge,{id:"Qt6faF",defaultMessage:[{type:0,value:"Host a Game"}]})}),x.jsxs(Wt,{children:[x.jsxs(en,{children:[x.jsx(Ge,{id:"q/xC9j",defaultMessage:[{type:0,value:"Level"}]}),":"]}),x.jsx(mu,{data:Object.keys(ab),value:r,onChange:h=>{h&&i(h)},placeholder:t.formatMessage({id:"4GxiBe",defaultMessage:[{type:0,value:"Select a game map..."}]})})]}),x.jsx(jt,{onMouseOver:u,size:"lg",variant:"gradient",gradient:{from:"blue",to:"cyan",deg:90},disabled:!1,onClick:()=>n(1),children:x.jsx(Ge,{id:"p1ezxU",defaultMessage:[{type:0,value:"Host Game"}]})})]})})})]}),e===1&&x.jsx(gq,{level:r,recordGame:!1}),e===2&&x.jsx(fq,{gameCode:s})]})}function vq({info:t,callbacks:e,summary:n}){const[r,i]=b.useState(t.tick),[s,o]=b.useState(!1);return b.useEffect(()=>{s||i(t.tick)},[t.tick,s]),x.jsxs(vt,{children:[x.jsxs("div",{children:[x.jsx(Rx,{value:r,min:0,max:n.total_ticks,step:1,onChange:i,label:a=>qs(a),onChangeEnd:a=>{o(!1),e.playToTick(a)},onPointerDown:()=>o(!0),styles:{thumb:{width:12,height:12}}}),x.jsxs(Wt,{justify:"space-between",mt:4,children:[x.jsx(en,{size:"xs",c:"dimmed",children:qs(t.tick)}),x.jsx(en,{size:"xs",c:"dimmed",children:qs(n.total_ticks)})]})]}),x.jsxs(Wt,{gap:4,children:[x.jsx(At,{label:"-30 seconds",children:x.jsx(jn,{color:"grape",onClick:a=>e.advanceSeconds(-30),children:x.jsx(H$,{})})}),x.jsx(At,{label:"-5 seconds",children:x.jsx(jn,{color:"grape",onClick:a=>e.advanceSeconds(-5),children:x.jsx(F$,{})})}),x.jsx(At,{label:t.paused?"Play":"Pause",children:x.jsx(jn,{onClick:a=>e.setPaused(!t.paused),children:t.paused?x.jsx(B$,{}):x.jsx(L$,{})})}),t.paused&&x.jsx(At,{label:"Advance one frame",children:x.jsx(jn,{color:"gray",onClick:a=>e.advanceOneTick(),children:x.jsx(S$,{})})}),x.jsx(At,{label:"+5 seconds",children:x.jsx(jn,{color:"grape",onClick:a=>e.advanceSeconds(5),children:x.jsx($$,{})})}),x.jsx(At,{label:"+30 seconds",children:x.jsx(jn,{color:"grape",onClick:a=>e.advanceSeconds(30),children:x.jsx(U$,{})})})]}),x.jsx(Wt,{})]})}const YE={Suicide:"💥 Suicide",Killed:"🔫 Killed",KilledBy:"💀 Killed By",AbandonedPlane:"🪂 Abandoned",Downed:"💢 Downed",DownedBy:"☠️ Downed By",ChatMessage:"💬 Chat"};function _q({summary:t,callbacks:e,events:n,players:r,info:i}){const s=b.useMemo(()=>Object.entries(r).map(([h,f])=>({label:f,value:h})),[r]),[o,a]=b.useState([]);function l(h){a(h)}const c=b.useMemo(()=>n.filter(h=>h.player===i.spectating).filter(h=>o.includes(h.event.type)),[i.spectating,n,o]),d=b.useCallback(h=>"data"in h.event?h.event.type!=="ChatMessage"?" "+r[h.event.data]:": "+h.event.data.message:null,[r]),u=b.useMemo(()=>Object.entries(YE).map(([h,f])=>({label:f,value:h})),[i.spectating]);return x.jsxs(vt,{children:[x.jsx(vq,{info:i,summary:t,callbacks:e}),x.jsxs(vt,{children:[x.jsx(mu,{label:"Spectating Player",placeholder:"Pick a player...",value:i.spectating,onChange:e.updateSpectating,data:s}),x.jsxs("div",{children:[x.jsx(Cx,{data:u,value:o,onChange:l}),x.jsx(fo,{h:400,children:c.map((h,f)=>x.jsxs("div",{children:[x.jsxs(en,{c:h.tick<i.tick?"dimmed":"",children:[YE[h.event.type],d(h)]}),x.jsx(en,{size:"xs",c:"dimmed",children:qs(h.tick)}),x.jsx(jt,{onClick:p=>e.playToTick(h.tick-100*5),children:"👀"})]},f))})]})]})]})}function xq(){const t=pb({handleClientCommand:()=>{}}),[e,n]=b.useState(null),[r,i]=b.useState({spectating:null,paused:!1,tick:0,timeString:qs(0)}),s=b.useRef(null),o=b.useRef(0),a=()=>{mr.isRunning()&&(o.current%5===0&&i(g=>({...g,tick:o.current,timeString:qs(o.current)})),s.current=requestAnimationFrame(a))};function l(g){const _=t.engine.get_replay_summary(g);if(!_)return n(null),!1;const v=JSON.parse(_);return n(v),t.engine.load_replay(g),!0}function c(g){t.initialize(g)}function d(g){const _=t.engine.game_events_from_binary(g);return JSON.parse(_)}function u(g){i(_=>({..._,spectating:g})),g&&t.setMyPlayerGuid(g,!0)}b.useEffect(()=>{if(console.log("REPLAY FILE CHANGED"),!e)return;const g=_=>{if(_>e.total_ticks)return;o.current=_,t.engine.tick_replay();const v=t.engine.flush_changed_state(),w=d(v);t.handleGameEvents(w)};mr.setHostEngineUpdateFn(g).start(),mr.setPaused(r.paused),s.current=requestAnimationFrame(a)},[e,r.paused]),b.useEffect(()=>()=>{mr.stop()},[]);function h(g){mr.stop(),o.current=g,i(w=>({...w,paused:!0,tick:o.current,timeString:qs(o.current)})),t.clearEntities(),t.engine.load_replay_until(g);const _=t.engine.get_full_state(),v=d(_);t.handleGameEvents(v),mr.start(g)}function f(){mr.advanceOneTick()}function p(g){const _=g*100;let v=r.tick+_;v<0&&(v=0),v>(e?.total_ticks??1)&&(v=1),h(v)}const m={setPaused:y,playToTick:h,updateSpectating:u,loadReplay:l,advanceOneTick:f,advanceSeconds:p};function y(g){i(_=>({..._,paused:g}))}return{initialize:c,replaySummary:e,replayInfo:r,replayCallbacks:m,playerData:t.playerData,playerGuid:t.playerGuid,messages:t.messages}}function bq(){const t=rr(),{replaySummary:e,replayCallbacks:n,initialize:r,playerData:i,playerGuid:s,messages:o,replayInfo:a}=xq(),[l,c]=b.useState(0),d=b.useRef(null);async function u(h){if(!h)return;c(1);const f=new FileReader;f.onloadend=p=>{if(f.result instanceof ArrayBuffer){const m=new Uint8Array(f.result);if(d.current){r(d.current);const y=n.loadReplay(m);c(y?2:0)}}},f.readAsArrayBuffer(h)}return x.jsxs(Wt,{justify:"center",children:[x.jsx(mb,{ref:d,myPlayerGuid:s,playerData:i,messages:o,onSendMessage:()=>{}}),l===2&&x.jsx(vt,{children:e&&x.jsx(_q,{players:e?.players??{},events:e?.events??[],info:a,callbacks:n,summary:e})}),l===0&&x.jsx("div",{children:x.jsx(Wt,{children:x.jsx(Ni,{shadow:"xl",padding:"xl",radius:"md",withBorder:!0,style:{maxWidth:500,textAlign:"center"},children:x.jsxs(vt,{children:[x.jsx($a,{order:2,children:x.jsx(Ge,{id:"izomYD",defaultMessage:[{type:0,value:"Watch a Game Replay"}]})}),x.jsxs(vt,{children:[x.jsx(nR,{onChange:u,accept:".lento",children:h=>x.jsx(At,{openDelay:500,position:"bottom",label:t.formatMessage({id:"B1CMe5",defaultMessage:[{type:0,value:"A replay file can be downloaded at any time when hosting a game."}]}),children:x.jsx(jt,{...h,variant:"gradient",gradient:{from:"yellow",to:"red",deg:90},disabled:!1,color:"blue",size:"lg",rightSection:x.jsx(P$,{}),children:x.jsx(Ge,{id:"DWNyUG",defaultMessage:[{type:0,value:"Select Replay"}]})})})}),x.jsx(op,{style:{maxWidth:400},variant:"light",color:"yellow",title:t.formatMessage({id:"scT0m8",defaultMessage:[{type:0,value:"Replay System Notice"}]}),icon:x.jsx(ER,{}),children:x.jsx("div",{children:x.jsx(Ge,{id:"7kZMTs",defaultMessage:[{type:0,value:"The replay system is currently experimental, lacking features, and still inactive development. You may experience problems until the replay feature isin a stable state."}]})})})]})]})})})}),l===1&&x.jsx(wx,{visible:!0,zIndex:1e3,overlayProps:{radius:"sm",blur:2}})]})}function wq(){const{settings:t,setSettings:e}=Nr(),[n,r]=b.useState(null),[i,{open:s,close:o}]=Vd(!1),a=rr();function l(h){e(f=>({...f,controls:f.controls.filter(p=>p.action!==h)}))}function c(){e(h=>({...h,controls:f0}))}function d(h){r(h),s()}function u(h){if(!n)return;const f=h.key;t.controls.some(p=>p.key===f&&p.action===n)||e(p=>({...p,controls:[...p.controls,{key:f,action:n}]})),o()}return x.jsxs("div",{children:[n&&x.jsxs(tr,{onKeyDown:u,opened:i,onClose:o,title:a.formatMessage({id:"gg+aZq",defaultMessage:[{type:0,value:"Add Key Binding"}]}),children:[x.jsx(en,{size:"xl",fw:"bold",children:a.formatMessage(VE[n])}),x.jsx(Ge,{id:"WYS1bQ",defaultMessage:[{type:0,value:"Press any key..."}]})]}),x.jsxs(pt,{defaultValue:"Apples",children:[x.jsxs(pt.Item,{value:"user",children:[x.jsx(pt.Control,{icon:x.jsx(O$,{}),children:x.jsx(Ge,{id:"URI5Vx",defaultMessage:[{type:0,value:"User Settings"}]})}),x.jsx(pt.Panel,{children:x.jsx("div",{style:{maxWidth:300},children:x.jsx(aM,{showTip:!1})})})]},"user"),x.jsxs(pt.Item,{value:"controls",children:[x.jsx(pt.Control,{icon:x.jsx(C$,{}),children:x.jsx(Ge,{id:"8iVdSN",defaultMessage:[{type:0,value:"Control Settings"}]})}),x.jsx(pt.Panel,{children:x.jsx(Ni,{children:x.jsxs(vt,{children:[Object.entries(VE).map(([h,f])=>x.jsxs(Wt,{children:[a.formatMessage(f),":",t.controls.filter(p=>p.action===h).map(p=>{const m=t.controls.filter(y=>y.key===p.key).length;return x.jsx(pu,{style:{backgroundColor:m>1?"red":""},children:p.key===" "?"Space":p.key},p.key)}),x.jsx(At,{openDelay:250,label:a.formatMessage({id:"lA7naj",defaultMessage:[{type:0,value:"Add new key"}]}),children:x.jsx(jn,{onClick:()=>d(h),color:"green",variant:"subtle",children:x.jsx(R$,{})})}),t.controls.some(p=>p.action===h)&&x.jsx(At,{openDelay:250,label:a.formatMessage({id:"urz5xm",defaultMessage:[{type:0,value:"Unbind Last Key"}]}),children:x.jsx(jn,{onClick:()=>l(h),color:"red",variant:"subtle",children:x.jsx(D$,{})})})]},h)),x.jsx("div",{children:JSON.stringify(t.controls)!==JSON.stringify(f0)&&x.jsx(jt,{onClick:c,rightSection:x.jsx(I$,{}),children:x.jsx(Ge,{id:"U/mSA3",defaultMessage:[{type:0,value:"Reset Controls"}]})})})]})})})]},"controls"),x.jsxs(pt.Item,{value:"site",children:[x.jsx(pt.Control,{icon:x.jsx(k$,{}),children:x.jsx(Ge,{id:"vL5iqo",defaultMessage:[{type:0,value:"Site Settings"}]})}),x.jsx(pt.Panel,{children:x.jsx(mu,{label:"Select Locale",value:t.locale,onChange:(h,f)=>{e({...t,locale:f?.value??p2()})},data:pK,placeholder:"Choose locale"})})]},"site")]})]})}function Sq(){const t=rr(),[e,{toggle:n}]=Vd(!0),[r,{toggle:i,close:s}]=Vd(!1),{toggleColorScheme:o,colorScheme:a}=jL(),l=t.formatMessage({id:"Qj15PN",defaultMessage:[{type:0,value:"Toggle Light Mode"}]}),c=t.formatMessage({id:"twmPPM",defaultMessage:[{type:0,value:"Toggle Dark Mode"}]}),d=a==="dark"?l:c;return x.jsxs(zn,{header:{height:60},navbar:{width:200,breakpoint:"xs",collapsed:{mobile:!r,desktop:!e}},padding:"md",children:[x.jsx(zn.Header,{children:x.jsxs(Wt,{h:"100%",px:"md",children:[x.jsx(Jd,{opened:r,onClick:i,hiddenFrom:"xs",size:"sm"}),x.jsx(Jd,{opened:e,onClick:n,visibleFrom:"xs",size:"sm"}),x.jsxs(Wt,{justify:"space-between",style:{flex:1},children:[x.jsx(en,{size:"lg",children:x.jsx(Ge,{id:"+NFaSb",defaultMessage:[{type:0,value:"Lentokonepeli (In Development)"}]})}),x.jsx(Wt,{ml:"xl",gap:0,visibleFrom:"sm",children:x.jsxs(jt.Group,{children:[x.jsx(At,{label:t.formatMessage({id:"wpH/Pl",defaultMessage:[{type:0,value:"Join us on Discord!"}]}),children:x.jsx(jt,{component:"a",target:"_blank",href:"https://discord.gg/QjtXPmx",variant:"subtle",children:x.jsx(E$,{})})}),x.jsx(At,{label:t.formatMessage({id:"SDo2PQ",defaultMessage:[{type:0,value:"View the Source Code on GitHub"}]}),children:x.jsx(jt,{component:"a",target:"_blank",href:"https://github.com/mattbruv/Lentokonepeli",variant:"subtle",children:x.jsx(T$,{})})}),x.jsx(At,{label:d,children:x.jsx(jt,{onClick:o,variant:"subtle",children:a==="dark"?x.jsx(M$,{}):x.jsx(A$,{})})})]})})]})]})}),x.jsxs(zn.Navbar,{py:"md",px:4,children:[x.jsx(Yl,{to:"/",onClick:s,children:x.jsx(xr,{className:lh.control,children:x.jsx(Ge,{id:"G7DhrV",defaultMessage:[{type:0,value:"Play"}]})})}),x.jsx(Yl,{to:"/replay",onClick:s,children:x.jsx(xr,{className:lh.control,children:x.jsx(Ge,{id:"mq7h++",defaultMessage:[{type:0,value:"Watch Replay"}]})})}),x.jsx(Yl,{to:"/editor",onClick:s,children:x.jsx(xr,{className:lh.control,onClick:s,children:x.jsx(Ge,{id:"aLjUL6",defaultMessage:[{type:0,value:"Level Editor"}]})})}),x.jsx(Yl,{to:"/settings",onClick:s,children:x.jsx(xr,{className:lh.control,children:x.jsx(Ge,{id:"kfnjH9",defaultMessage:[{type:0,value:"Settings"}]})})})]}),x.jsx(zn.Main,{children:x.jsxs(Tj,{children:[x.jsx(Xl,{path:"/",element:x.jsx(yq,{})}),x.jsx(Xl,{path:"/replay",element:x.jsx(bq,{})}),x.jsx(Xl,{path:"/settings",element:x.jsx(wq,{})}),x.jsx(Xl,{path:"/editor",element:x.jsx(TK,{})})]})})]})}function Eq({children:t}){const[e,n]=b.useState(null);return b.useEffect(()=>{e||QX().then(n)},[e]),e?x.jsx(x.Fragment,{children:t}):x.jsx("div",{children:"Loading..."})}ty.createRoot(document.getElementById("root")).render(x.jsx(xK,{children:x.jsx(mK,{children:x.jsx(Eq,{children:x.jsx(RP,{children:x.jsx(Yj,{children:x.jsx(Sq,{})})})})})}));
